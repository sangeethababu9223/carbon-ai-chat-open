{"version":3,"file":"2288.bundle.js","mappings":"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","sources":["webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hooks/useUUID.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/contexts/AriaAnnouncerContext.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/settings.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/lang/UUIDType.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/lang/arrayUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/schema/outputItemToLocalItem.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/BasePanelComponent.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/actions.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/homeScreenUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/intlUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/ChatInstanceImpl.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/environmentVariables.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/config/LauncherConfig.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/reducerUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/colors.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/styleUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/viewStateUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/events/ChatActionsImpl.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/events/EventBus.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/CustomPanelInstance.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/HistoryService.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/schema/historyToMessages.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/messageServiceUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/MessageService.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/NamespaceService.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/ServiceManager.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/mockStorage.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/UserSessionStorageService.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/customizers.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/agentReducers.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/tourReducerUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/reducers.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/doCreateStore.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/chatEntryFunctions.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/Chat.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/loadServices.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/subscriptions.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/CustomPanelManager.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/aria/AriaAnnouncerProvider.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/launcherUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/Launcher.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/LauncherComplex.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/LauncherDesktopContainer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/animationUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/LauncherExtended.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/LauncherMobileContainer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/LauncherContainer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hooks/useEffectDidUpdate.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/HydrationPanel.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/panels/CustomPanel.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/containers/main/MainWindow.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/utilities/HasAddRemoveClassName.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/containers/App.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/UserDefinedResponsePortalsContainer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/WriteableElementsPortalsContainer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/AppContainer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hocs/withAriaAnnouncer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/miscUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/messaging/LocalMessageItem.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/utilities/Animation.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/OverlayPanel.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/contexts/HideComponentContext.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/languages/en.json.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/util/MountChildrenOnDelay.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/resolvablePromise.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/dynamic-imports/dynamic-imports.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/util/VisuallyHidden.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/browserUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hooks/usePrevious.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/config/ChatHeaderConfig.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderAvatar/src/chatHeaderAvatarElement.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderAvatar/src/chatHeaderAvatarElement.scss.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderAvatar/cds-aichat-chat-header-avatar.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderAvatar/src/chatHeaderAvatar.template.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderAvatar.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderLink/cds-aichat-chat-header-link.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderLink/src/chatHeaderLinkElement.template.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderLink.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderMenu.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderMenuButton.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderMenuItem.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderMenuItemRadioGroup.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderOverflowMenu.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderTitle/cds-aichat-chat-header-title.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderTitle/src/chatHeaderTitle.template.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderTitle/src/chatHeaderTitle.scss.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderTitle.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/header/AISlug.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/header/Header.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/aria/AriaAnnouncerComponent.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/constants.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/homeScreen/HomeScreenHeader.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/languages.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hooks/useLanguagePack.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/util/HideComponent.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/contexts/WindowSizeContext.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/utilities/carbonTypes.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hooks/useServiceManager.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/contexts/ModalPortalRootContext.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/lang/uuid.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/aria/AriaLiveMessage.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/domUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/messageUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/util/AnnounceOnMountComponent.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/state/AppState.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/WriteableElement.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/contexts/ServiceManagerContext.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/containers/ModalPortal.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/modals/ConfirmModal.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/instance/ChatInstance.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/selectors.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/lang/promiseUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/header/BotHeader.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/lang/objectUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/schema/inputItemToLocalItem.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hooks/useAriaAnnouncer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/agentActions.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/contexts/LanguagePackContext.js"],"sourcesContent":["import { useRef } from \"react\";\n\nimport { uuid } from \"../utils/lang/uuid.js\";\n\nimport { UUIDType } from \"../utils/lang/UUIDType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function useUUID() {\n  const ref = useRef();\n  if (ref.current === undefined) {\n    ref.current = uuid(UUIDType.COMPONENT);\n  }\n  return ref.current;\n}\n\nexport { useUUID };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const AriaAnnouncerContext = React.createContext(null);\n\nexport { AriaAnnouncerContext };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst CSS_CLASS_PREFIX = \"cds--aichat\";\n\nconst WEB_COMPONENT_PREFIX = \"cds-aichat\";\n\nexport { CSS_CLASS_PREFIX, WEB_COMPONENT_PREFIX };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar UUIDType;\n\n(function(UUIDType) {\n  UUIDType[UUIDType[\"MISCELLANEOUS\"] = 1] = \"MISCELLANEOUS\";\n  UUIDType[UUIDType[\"LOCAL_MESSAGE\"] = 2] = \"LOCAL_MESSAGE\";\n  UUIDType[UUIDType[\"MESSAGE\"] = 3] = \"MESSAGE\";\n  UUIDType[UUIDType[\"COMPONENT\"] = 4] = \"COMPONENT\";\n  UUIDType[UUIDType[\"USER\"] = 6] = \"USER\";\n  UUIDType[UUIDType[\"DEVICE_ID\"] = 8] = \"DEVICE_ID\";\n  UUIDType[UUIDType[\"FILE\"] = 9] = \"FILE\";\n})(UUIDType || (UUIDType = {}));\n\nexport { UUIDType };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction asArray(value) {\n  return Array.isArray(value) ? value : [ value ];\n}\n\nasync function asyncForEach(array, callbackFunction) {\n  for (let index = 0; index < array.length; index++) {\n    const value = array[index];\n    await callbackFunction(value, index, array);\n  }\n}\n\nfunction findLast(array, predicate, startAt) {\n  const lastIndex = findLastIndex(array, predicate);\n  return lastIndex === -1 ? undefined : array[lastIndex];\n}\n\nfunction findLastIndex(array, predicate, startAt) {\n  if (array) {\n    const startingIndex = array.length - 1;\n    for (let index = startingIndex; index >= 0; index--) {\n      const value = array[index];\n      if (predicate(value, index, array)) {\n        return index;\n      }\n    }\n  }\n  return -1;\n}\n\nfunction findLastWithMap(keys, map, predicate) {\n  for (let index = keys.length - 1; index >= 0; index--) {\n    const key = keys[index];\n    const value = map[key];\n    if (predicate(value, index, keys)) {\n      return value;\n    }\n  }\n  return undefined;\n}\n\nfunction arrayLastValue(array) {\n  return array && array.length ? array[array.length - 1] : null;\n}\n\nexport { arrayLastValue, asArray, asyncForEach, findLast, findLastWithMap };\n","import { MessageResponseTypes, ButtonItemType } from \"../../../types/messaging/Messages.js\";\n\nimport { uuid } from \"../utils/lang/uuid.js\";\n\nimport { streamItemID, isGridResponseType, isCarouselResponseType, isShowPanelButtonType, isResponseWithNestedItems, isItemSupportedInResponseBody, isCardResponseType, isButtonResponseType, createMessageResponseForItem } from \"../utils/messageUtils.js\";\n\nimport { consoleError } from \"../utils/miscUtils.js\";\n\nimport { UUIDType } from \"../utils/lang/UUIDType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function outputItemToLocalItem(messageItem, fullMessage, isLatestWelcomeNode = false, disableFadeAnimation = false) {\n  const id = streamItemID(fullMessage.id, messageItem) || uuid(UUIDType.LOCAL_MESSAGE);\n  const localMessage = {\n    ui_state: {\n      id: id,\n      needsAnnouncement: !fullMessage.history.from_history,\n      disableFadeAnimation: disableFadeAnimation\n    },\n    item: messageItem,\n    fullMessageID: fullMessage.id\n  };\n  if (isLatestWelcomeNode) {\n    localMessage.ui_state.isWelcomeResponse = true;\n  }\n  return localMessage;\n}\n\nfunction createLocalMessageForInlineError(text) {\n  const messageItem = {\n    response_type: MessageResponseTypes.INLINE_ERROR,\n    text: text\n  };\n  return createLocalMessageForItem(messageItem);\n}\n\nfunction createLocalMessageForItem(messageItem) {\n  const originalMessage = createMessageResponseForItem(messageItem);\n  const localMessage = outputItemToLocalItem(messageItem, originalMessage);\n  return {\n    originalMessage: originalMessage,\n    localMessage: localMessage\n  };\n}\n\nfunction createLocalMessageItemsForNestedMessageItems(localMessageItem, originalMessage, fromHistory, nestedLocalMessageItems, allowFooter) {\n  const {item: item} = localMessageItem;\n  if (isGridResponseType(item)) {\n    localMessageItem.ui_state.gridLocalMessageItemIDs = item.rows.map(row => row.cells.map(cell => {\n      const cellLocalMessageItemIDs = [];\n      createLocalMessageItemsForNestedType(\"items\", localMessageItem, cell.items, cellLocalMessageItemIDs, originalMessage, fromHistory, nestedLocalMessageItems, nestedMessageItem => isSupportedMessageItemInBody(localMessageItem.item, nestedMessageItem), false);\n      return cellLocalMessageItemIDs;\n    }));\n  } else if (isCarouselResponseType(item)) {\n    localMessageItem.ui_state.itemsLocalMessageItemIDs = [];\n    createLocalMessageItemsForNestedType(\"items\", localMessageItem, item.items, localMessageItem.ui_state.itemsLocalMessageItemIDs, originalMessage, fromHistory, nestedLocalMessageItems, nestedMessageItem => isSupportedMessageItemInBody(item, nestedMessageItem), allowFooter);\n  } else {\n    const bodyItems = item.body || item.panel?.body;\n    if (bodyItems) {\n      localMessageItem.ui_state.bodyLocalMessageItemIDs = [];\n      createLocalMessageItemsForNestedType(\"body\", localMessageItem, bodyItems, localMessageItem.ui_state.bodyLocalMessageItemIDs, originalMessage, fromHistory, nestedLocalMessageItems, nestedMessageItem => isSupportedMessageItemInBody(item, nestedMessageItem), !isShowPanelButtonType(item));\n    }\n    if (!allowFooter) {\n      return;\n    }\n    const footerItems = item.footer || item.panel?.footer;\n    if (footerItems) {\n      localMessageItem.ui_state.footerLocalMessageItemIDs = [];\n      createLocalMessageItemsForNestedType(\"footer\", localMessageItem, footerItems, localMessageItem.ui_state.footerLocalMessageItemIDs, originalMessage, fromHistory, nestedLocalMessageItems, nestedMessageItem => isSupportedMessageItemInFooter(item, nestedMessageItem), !isShowPanelButtonType(item));\n    }\n  }\n}\n\nfunction createLocalMessageItemsForNestedType(type, localMessageItem, items, nestedMessageItemIDs, originalMessage, fromHistory, nestedLocalMessageItems, isSupported, allowFooter) {\n  items.forEach(nestedMessageItem => {\n    if (isSupported(nestedMessageItem)) {\n      const nestedLocalMessageItem = outputItemToLocalItem(nestedMessageItem, originalMessage, false, true);\n      nestedMessageItemIDs.push(nestedLocalMessageItem.ui_state.id);\n      nestedLocalMessageItems.push(nestedLocalMessageItem);\n      if (isResponseWithNestedItems(nestedLocalMessageItem.item)) {\n        createLocalMessageItemsForNestedMessageItems(nestedLocalMessageItem, originalMessage, fromHistory, nestedLocalMessageItems, allowFooter);\n      }\n    } else {\n      consoleError(`The \"${localMessageItem.item.response_type}\" response type does not support \"${nestedMessageItem.response_type}\" in \"${type}\" array.`);\n    }\n  });\n}\n\nfunction isSupportedMessageItemInBody(rootMessageItem, nestedMessageItem) {\n  switch (rootMessageItem.response_type) {\n   case MessageResponseTypes.CARD:\n    return !isCardResponseType(nestedMessageItem) && isItemSupportedInResponseBody(nestedMessageItem);\n\n   case MessageResponseTypes.CAROUSEL:\n    return isCardResponseType(nestedMessageItem);\n\n   case MessageResponseTypes.BUTTON:\n    return rootMessageItem.button_type === ButtonItemType.SHOW_PANEL && isItemSupportedInResponseBody(nestedMessageItem);\n\n   case MessageResponseTypes.GRID:\n    return !isCardResponseType(nestedMessageItem) && isItemSupportedInResponseBody(nestedMessageItem);\n\n   default:\n    return false;\n  }\n}\n\nfunction isSupportedMessageItemInFooter(rootMessageItem, nestedMessageItem) {\n  if (isButtonResponseType(nestedMessageItem)) {\n    if (isShowPanelButtonType(rootMessageItem)) {\n      return !isShowPanelButtonType(nestedMessageItem);\n    }\n    return true;\n  }\n  return false;\n}\n\nexport { createLocalMessageForInlineError, createLocalMessageItemsForNestedMessageItems, outputItemToLocalItem };\n","import FocusTrap from \"focus-trap-react\";\n\nimport React, { useRef, useImperativeHandle } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { IS_MOBILE } from \"../utils/browserUtils.js\";\n\nimport { Header as HeaderExport } from \"./header/Header.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function BasePanelComponent({className: className, children: children, isOpen: isOpen, hidePanelHeader: hidePanelHeader, labelBackButton: labelBackButton, title: title, hideBackButton: hideBackButton, useAITheme: useAITheme, onClickCloseAndRestart: onClickCloseAndRestart, onClickRestart: onClickRestart, ...headerProps}, ref) {\n  const showRestartButton = useSelector(state => state.config.public.headerConfig?.showRestartButton);\n  const headerRef = useRef();\n  useImperativeHandle(ref, () => headerRef.current);\n  return React.createElement(FocusTrap, {\n    active: isOpen,\n    focusTrapOptions: {\n      clickOutsideDeactivates: true,\n      returnFocusOnDeactivate: !IS_MOBILE,\n      preventScroll: true\n    }\n  }, React.createElement(\"div\", {\n    className: className\n  }, !hidePanelHeader && React.createElement(HeaderExport, {\n    ...headerProps,\n    ref: headerRef,\n    showRestartButton: showRestartButton,\n    onClickRestart: onClickRestart,\n    onCloseAndRestart: onClickCloseAndRestart,\n    showBackButton: !hideBackButton,\n    labelBackButton: labelBackButton,\n    displayName: title,\n    useAITheme: useAITheme,\n    showCenter: true\n  }), React.createElement(\"div\", {\n    className: \"WACPanelContent\"\n  }, children)));\n}\n\nconst BasePanelComponentExport = React.memo(React.forwardRef(BasePanelComponent));\n\nexport { BasePanelComponentExport as BasePanelComponent };\n","import { uuid } from \"../utils/lang/uuid.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const CHANGE_STATE = \"CHANGE_STATE\";\n\nconst UPDATE_BOT_NAME = \"UPDATE_BOT_NAME\";\n\nconst UPDATE_BOT_AVATAR_URL = \"UPDATE_BOT_AVATAR_URL\";\n\nconst UPDATE_LAUNCHER_AVATAR_URL = \"UPDATE_LAUNCHER_AVATAR_URL\";\n\nconst UPDATE_MAIN_HEADER_TITLE = \"UPDATE_MAIN_HEADER_TITLE\";\n\nconst HYDRATE_CHAT = \"HYDRATE_CHAT\";\n\nconst HYDRATE_MESSAGE_HISTORY = \"HYDRATE_MESSAGE_HISTORY\";\n\nconst ADD_LOCAL_MESSAGE_ITEM = \"ADD_LOCAL_MESSAGE_ITEM\";\n\nconst REMOVE_MESSAGES = \"REMOVE_MESSAGES\";\n\nconst UPDATE_LOCAL_MESSAGE_ITEM = \"UPDATE_LOCAL_MESSAGE_ITEM\";\n\nconst SET_APP_STATE_VALUE = \"SET_APP_STATE_VALUE\";\n\nconst ADD_IS_TYPING_COUNTER = \"ADD_IS_TYPING_COUNTER\";\n\nconst ADD_IS_LOADING_COUNTER = \"ADD_IS_LOADING_COUNTER\";\n\nconst ADD_IS_HYDRATING_COUNTER = \"ADD_IS_HYDRATING_COUNTER\";\n\nconst SET_VIEW_STATE = \"SET_VIEW_STATE\";\n\nconst SET_VIEW_CHANGING = \"SET_VIEW_CHANGING\";\n\nconst SET_INITIAL_VIEW_CHANGE_COMPLETE = \"SET_INITIAL_VIEW_CHANGE_COMPLETE\";\n\nconst UPDATE_CSS_VARIABLES = \"UPDATE_CSS_VARIABLES\";\n\nconst MESSAGE_SET_OPTION_SELECTED = \"MESSAGE_SET_OPTION_SELECTED\";\n\nconst SET_MESSAGE_UI_PROPERTY = \"SET_MESSAGE_UI_PROPERTY\";\n\nconst SET_MESSAGE_HISTORY_PROPERTY = \"SET_MESSAGE_HISTORY_PROPERTY\";\n\nconst MERGE_HISTORY = \"MERGE_HISTORY\";\n\nconst SET_LAUNCHER_PROPERTY = \"SET_LAUNCHER_PROPERTY\";\n\nconst SET_LAUNCHER_CONFIG_PROPERTY = \"SET_LAUNCHER_CONFIG_PROPERTY\";\n\nconst ANNOUNCE_MESSAGE = \"ANNOUNCE_MESSAGE\";\n\nconst SET_CHAT_MESSAGES_PROPERTY = \"SET_CHAT_MESSAGES_PROPERTY\";\n\nconst RESTART_CONVERSATION = \"RESTART_CONVERSATION\";\n\nconst ACCEPTED_DISCLAIMER = \"ACCEPTED_DISCLAIMER\";\n\nconst ADD_MESSAGE = \"ADD_MESSAGE\";\n\nconst UPDATE_HOME_SCREEN_CONFIG = \"UPDATE_HOME_SCREEN_CONFIG\";\n\nconst UPDATE_HAS_SENT_NON_WELCOME_MESSAGE = \"UPDATE_HAS_SENT_NON_WELCOME_MESSAGE\";\n\nconst UPDATE_PERSISTED_CHAT_STATE = \"UPDATE_PERSISTED_CHAT_STATE\";\n\nconst SET_TOUR_DATA = \"SET_TOUR_DATA\";\n\nconst CLEAR_TOUR_DATA = \"CLEAR_TOUR_DATA\";\n\nconst CHANGE_STEP_IN_TOUR = \"CHANGE_STEP_IN_TOUR\";\n\nconst SET_HOME_SCREEN_IS_OPEN = \"SET_HOME_SCREEN_IS_OPEN\";\n\nconst UPDATE_LAUNCHER_CONFIG = \"UPDATE_LAUNCHER_CONFIG\";\n\nconst UPDATE_MESSAGE = \"UPDATE_MESSAGE\";\n\nconst SET_LAUNCHER_MINIMIZED = \"SET_LAUNCHER_MINIMIZED\";\n\nconst CLOSE_IFRAME_PANEL = \"CLOSE_IFRAME_PANEL\";\n\nconst OPEN_IFRAME_CONTENT = \"OPEN_IFRAME_CONTENT\";\n\nconst SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN = \"SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN\";\n\nconst SET_CUSTOM_PANEL_OPTIONS = \"SET_CUSTOM_PANEL_OPTIONS\";\n\nconst SET_CUSTOM_PANEL_OPEN = \"SET_CUSTOM_PANEL_OPEN\";\n\nconst TOGGLE_HOME_SCREEN = \"GO_BACK_TO_HOME\";\n\nconst UPDATE_INPUT_STATE = \"UPDATE_INPUT_STATE\";\n\nconst SET_IS_BROWSER_PAGE_VISIBLE = \"SET_IS_PAGE_VISIBLE\";\n\nconst ADD_INPUT_FILE = \"ADD_INPUT_FILE\";\n\nconst CLEAR_INPUT_FILES = \"CLEAR_INPUT_FILES\";\n\nconst REMOVE_INPUT_FILE = \"REMOVE_INPUT_FILE\";\n\nconst REMOVE_LOCAL_MESSAGE_ITEM = \"REMOVE_LOCAL_MESSAGE_ITEM\";\n\nconst FILE_UPLOAD_INPUT_ERROR = \"FILE_UPLOAD_INPUT_ERROR\";\n\nconst ADD_NESTED_MESSAGES = \"ADD_NESTED_MESSAGES\";\n\nconst SET_RESPONSE_PANEL_IS_OPEN = \"SET_RESPONSE_PANEL_IS_OPEN\";\n\nconst SET_RESPONSE_PANEL_CONTENT = \"SET_PANEL_RESPONSE_CONTENT\";\n\nconst STREAMING_ADD_CHUNK = \"STREAMING_ADD_CHUNK\";\n\nconst STREAMING_START = \"STREAMING_START\";\n\nconst STREAMING_MERGE_HISTORY = \"STREAMING_MERGE_HISTORY\";\n\nconst ADD_NOTIFICATION = \"ADD_NOTIFICATION\";\n\nconst REMOVE_ALL_NOTIFICATIONS = \"REMOVE_ALL_NOTIFICATIONS\";\n\nconst REMOVE_NOTIFICATIONS = \"REMOVE_NOTIFICATIONS\";\n\nconst UPDATE_CHAT_HEADER_CONFIG = \"UPDATE_CHAT_HEADER_CONFIG\";\n\nconst UPDATE_MAX_VISIBLE_HEADER_OBJECTS = \"UPDATE_MAX_VISIBLE_HEADER_OBJECTS\";\n\nconst SET_STOP_STREAMING_BUTTON_VISIBLE = \"SET_STOP_STREAMING_BUTTON_VISIBLE\";\n\nconst SET_STOP_STREAMING_BUTTON_DISABLED = \"SET_STOP_STREAMING_BUTTON_DISABLED\";\n\nconst SET_STREAM_ID = \"SET_STREAM_ID\";\n\nconst UPDATE_MAIN_HEADER_AVATAR = \"UPDATE_MAIN_HEADER_AVATAR\";\n\nconst actions = {\n  changeState(partialState) {\n    return {\n      type: CHANGE_STATE,\n      partialState: partialState\n    };\n  },\n  chatWasHydrated() {\n    return {\n      type: HYDRATE_CHAT\n    };\n  },\n  hydrateMessageHistory(messageHistory) {\n    return {\n      type: HYDRATE_MESSAGE_HISTORY,\n      messageHistory: messageHistory\n    };\n  },\n  removeMessages(messageIDs) {\n    return {\n      type: REMOVE_MESSAGES,\n      messageIDs: messageIDs\n    };\n  },\n  restartConversation() {\n    return {\n      type: RESTART_CONVERSATION\n    };\n  },\n  addLocalMessageItem(messageItem, message, addMessage, addAfterID) {\n    return {\n      type: ADD_LOCAL_MESSAGE_ITEM,\n      messageItem: messageItem,\n      message: message,\n      addMessage: addMessage,\n      addAfterID: addAfterID\n    };\n  },\n  addMessage(message) {\n    return {\n      type: ADD_MESSAGE,\n      message: message\n    };\n  },\n  updateLocalMessageItem(messageItem) {\n    return {\n      type: UPDATE_LOCAL_MESSAGE_ITEM,\n      messageItem: messageItem\n    };\n  },\n  updateMessage(message) {\n    return {\n      type: UPDATE_MESSAGE,\n      message: message\n    };\n  },\n  messageSetOptionSelected(messageID, sentMessage) {\n    return {\n      type: MESSAGE_SET_OPTION_SELECTED,\n      messageID: messageID,\n      sentMessage: sentMessage\n    };\n  },\n  updatePersistedChatState(chatState) {\n    return {\n      type: UPDATE_PERSISTED_CHAT_STATE,\n      chatState: chatState\n    };\n  },\n  setTourData(newActiveTourMessageID) {\n    return {\n      type: SET_TOUR_DATA,\n      newActiveTourMessageID: newActiveTourMessageID\n    };\n  },\n  clearTourData() {\n    return {\n      type: CLEAR_TOUR_DATA\n    };\n  },\n  changeStepInTour(newStepNumber) {\n    return {\n      type: CHANGE_STEP_IN_TOUR,\n      newStepNumber: newStepNumber\n    };\n  },\n  updateHasSentNonWelcomeMessage(hasSentNonWelcomeMessage) {\n    return {\n      type: UPDATE_HAS_SENT_NON_WELCOME_MESSAGE,\n      hasSentNonWelcomeMessage: hasSentNonWelcomeMessage\n    };\n  },\n  setAppStateValue(key, value) {\n    return {\n      type: SET_APP_STATE_VALUE,\n      key: key,\n      value: value\n    };\n  },\n  addIsTypingCounter(addToIsTyping) {\n    return {\n      type: ADD_IS_TYPING_COUNTER,\n      addToIsTyping: addToIsTyping\n    };\n  },\n  addIsLoadingCounter(addToIsLoading) {\n    return {\n      type: ADD_IS_LOADING_COUNTER,\n      addToIsLoading: addToIsLoading\n    };\n  },\n  addIsHydratingCounter(addToIsHydrating) {\n    return {\n      type: ADD_IS_HYDRATING_COUNTER,\n      addToIsHydrating: addToIsHydrating\n    };\n  },\n  updateBotName(name) {\n    return {\n      type: UPDATE_BOT_NAME,\n      name: name\n    };\n  },\n  updateMainHeaderTitle(title) {\n    return {\n      type: UPDATE_MAIN_HEADER_TITLE,\n      title: title\n    };\n  },\n  updateBotAvatarURL(url) {\n    return {\n      type: UPDATE_BOT_AVATAR_URL,\n      url: url\n    };\n  },\n  updateCSSVariables(variables, publicVars, whiteLabelVariables) {\n    return {\n      type: UPDATE_CSS_VARIABLES,\n      variables: variables,\n      publicVars: publicVars,\n      whiteLabelVariables: whiteLabelVariables\n    };\n  },\n  updateHomeScreenConfig(homeScreenConfig) {\n    return {\n      type: UPDATE_HOME_SCREEN_CONFIG,\n      homeScreenConfig: homeScreenConfig\n    };\n  },\n  setViewState(viewState) {\n    return {\n      type: SET_VIEW_STATE,\n      viewState: viewState\n    };\n  },\n  setViewChanging(viewChanging) {\n    return {\n      type: SET_VIEW_CHANGING,\n      viewChanging: viewChanging\n    };\n  },\n  setInitialViewChangeComplete(changeComplete) {\n    return {\n      type: SET_INITIAL_VIEW_CHANGE_COMPLETE,\n      changeComplete: changeComplete\n    };\n  },\n  setMessageUIProperty(localMessageID, propertyName, propertyValue) {\n    return {\n      type: SET_MESSAGE_UI_PROPERTY,\n      localMessageID: localMessageID,\n      propertyName: propertyName,\n      propertyValue: propertyValue\n    };\n  },\n  setLauncherProperty(propertyName, propertyValue) {\n    return {\n      type: SET_LAUNCHER_PROPERTY,\n      propertyName: propertyName,\n      propertyValue: propertyValue\n    };\n  },\n  setLauncherConfigProperty(propertyName, propertyValue, launcherType) {\n    return {\n      type: SET_LAUNCHER_CONFIG_PROPERTY,\n      propertyName: propertyName,\n      propertyValue: propertyValue,\n      launcherType: launcherType\n    };\n  },\n  setMessageHistoryProperty(messageID, propertyName, propertyValue) {\n    return {\n      type: SET_MESSAGE_HISTORY_PROPERTY,\n      messageID: messageID,\n      propertyName: propertyName,\n      propertyValue: propertyValue\n    };\n  },\n  mergeMessageHistory(messageID, history) {\n    return {\n      type: MERGE_HISTORY,\n      messageID: messageID,\n      history: history\n    };\n  },\n  setMessageErrorState(messageID, errorState) {\n    return actions.setMessageHistoryProperty(messageID, \"error_state\", errorState);\n  },\n  setMessageWasAnnounced(messageID) {\n    return actions.setMessageUIProperty(messageID, \"needsAnnouncement\", false);\n  },\n  announceMessage(message) {\n    return {\n      type: ANNOUNCE_MESSAGE,\n      message: message\n    };\n  },\n  setChatMessagesStateProperty(propertyName, propertyValue) {\n    return {\n      type: SET_CHAT_MESSAGES_PROPERTY,\n      propertyName: propertyName,\n      propertyValue: propertyValue\n    };\n  },\n  addNotification(notification) {\n    const notificationID = uuid();\n    return {\n      type: ADD_NOTIFICATION,\n      notificationID: notificationID,\n      notification: notification\n    };\n  },\n  removeNotifications({groupID: groupID, notificationID: notificationID}) {\n    return {\n      type: REMOVE_NOTIFICATIONS,\n      groupID: groupID,\n      notificationID: notificationID\n    };\n  },\n  removeAllNotifications() {\n    return {\n      type: REMOVE_ALL_NOTIFICATIONS\n    };\n  },\n  acceptDisclaimer() {\n    return {\n      type: ACCEPTED_DISCLAIMER\n    };\n  },\n  setHomeScreenIsOpen(isOpen) {\n    return {\n      type: SET_HOME_SCREEN_IS_OPEN,\n      isOpen: isOpen\n    };\n  },\n  updateLauncherConfig(launcherConfig) {\n    return {\n      type: UPDATE_LAUNCHER_CONFIG,\n      launcherConfig: launcherConfig\n    };\n  },\n  setLauncherMinimized() {\n    return {\n      type: SET_LAUNCHER_MINIMIZED\n    };\n  },\n  closeIFramePanel() {\n    return {\n      type: CLOSE_IFRAME_PANEL\n    };\n  },\n  setIFrameContent(messageItem) {\n    return {\n      type: OPEN_IFRAME_CONTENT,\n      messageItem: messageItem\n    };\n  },\n  setViewSourcePanelIsOpen(isOpen, citationItem, relatedSearchResult) {\n    return {\n      type: SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN,\n      isOpen: isOpen,\n      citationItem: citationItem,\n      relatedSearchResult: relatedSearchResult\n    };\n  },\n  setCustomPanelConfigOptions(options) {\n    return {\n      type: SET_CUSTOM_PANEL_OPTIONS,\n      options: options\n    };\n  },\n  setCustomPanelOpen(isOpen) {\n    return {\n      type: SET_CUSTOM_PANEL_OPEN,\n      isOpen: isOpen\n    };\n  },\n  toggleHomeScreen() {\n    return {\n      type: TOGGLE_HOME_SCREEN\n    };\n  },\n  updateInputState(newState, isInputToAgent) {\n    return {\n      type: UPDATE_INPUT_STATE,\n      newState: newState,\n      isInputToAgent: isInputToAgent\n    };\n  },\n  setIsBrowserPageVisible(isVisible) {\n    return {\n      type: SET_IS_BROWSER_PAGE_VISIBLE,\n      isVisible: isVisible\n    };\n  },\n  addInputFile(file, isInputToAgent) {\n    return {\n      type: ADD_INPUT_FILE,\n      file: file,\n      isInputToAgent: isInputToAgent\n    };\n  },\n  removeFileUpload(fileID, isInputToAgent) {\n    return {\n      type: REMOVE_INPUT_FILE,\n      fileID: fileID,\n      isInputToAgent: isInputToAgent\n    };\n  },\n  removeLocalMessageItem(localMessageItemID) {\n    return {\n      type: REMOVE_LOCAL_MESSAGE_ITEM,\n      localMessageItemID: localMessageItemID\n    };\n  },\n  fileUploadInputError(fileID, errorMessage, isInputToAgent) {\n    return {\n      type: FILE_UPLOAD_INPUT_ERROR,\n      fileID: fileID,\n      errorMessage: errorMessage,\n      isInputToAgent: isInputToAgent\n    };\n  },\n  clearInputFiles(isInputToAgent) {\n    return {\n      type: CLEAR_INPUT_FILES,\n      isInputToAgent: isInputToAgent\n    };\n  },\n  addNestedMessages(localMessageItems) {\n    return {\n      type: ADD_NESTED_MESSAGES,\n      localMessageItems: localMessageItems\n    };\n  },\n  setResponsePanelIsOpen(isOpen) {\n    return {\n      type: SET_RESPONSE_PANEL_IS_OPEN,\n      isOpen: isOpen\n    };\n  },\n  setResponsePanelContent(localMessageItem, isMessageForInput = false) {\n    return {\n      type: SET_RESPONSE_PANEL_CONTENT,\n      localMessageItem: localMessageItem,\n      isMessageForInput: isMessageForInput\n    };\n  },\n  streamingStart(messageID) {\n    return {\n      type: STREAMING_START,\n      messageID: messageID\n    };\n  },\n  streamingMergeHistory(messageID, history) {\n    return {\n      type: STREAMING_MERGE_HISTORY,\n      messageID: messageID,\n      history: history\n    };\n  },\n  streamingAddChunk(fullMessageID, chunkItem, isCompleteItem, disableFadeAnimation) {\n    return {\n      type: STREAMING_ADD_CHUNK,\n      fullMessageID: fullMessageID,\n      chunkItem: chunkItem,\n      isCompleteItem: isCompleteItem,\n      disableFadeAnimation: disableFadeAnimation\n    };\n  },\n  updateChatHeaderConfig(chatHeaderConfig) {\n    return {\n      type: UPDATE_CHAT_HEADER_CONFIG,\n      chatHeaderConfig: chatHeaderConfig\n    };\n  },\n  setMaxVisibleHeaderObjects(maxTotal) {\n    return {\n      type: UPDATE_MAX_VISIBLE_HEADER_OBJECTS,\n      maxTotal: maxTotal\n    };\n  },\n  setStopStreamingButtonVisible(isVisible) {\n    return {\n      type: SET_STOP_STREAMING_BUTTON_VISIBLE,\n      isVisible: isVisible\n    };\n  },\n  setStopStreamingButtonDisabled(isDisabled) {\n    return {\n      type: SET_STOP_STREAMING_BUTTON_DISABLED,\n      isDisabled: isDisabled\n    };\n  },\n  setStreamID(currentStreamID) {\n    return {\n      type: SET_STREAM_ID,\n      currentStreamID: currentStreamID\n    };\n  },\n  updateMainHeaderAvatar(config) {\n    return {\n      type: UPDATE_MAIN_HEADER_AVATAR,\n      config: config\n    };\n  }\n};\n\nexport { ACCEPTED_DISCLAIMER, ADD_INPUT_FILE, ADD_IS_HYDRATING_COUNTER, ADD_IS_LOADING_COUNTER, ADD_IS_TYPING_COUNTER, ADD_LOCAL_MESSAGE_ITEM, ADD_MESSAGE, ADD_NESTED_MESSAGES, ADD_NOTIFICATION, ANNOUNCE_MESSAGE, CHANGE_STATE, CHANGE_STEP_IN_TOUR, CLEAR_INPUT_FILES, CLEAR_TOUR_DATA, CLOSE_IFRAME_PANEL, FILE_UPLOAD_INPUT_ERROR, HYDRATE_CHAT, HYDRATE_MESSAGE_HISTORY, MERGE_HISTORY, MESSAGE_SET_OPTION_SELECTED, OPEN_IFRAME_CONTENT, REMOVE_ALL_NOTIFICATIONS, REMOVE_INPUT_FILE, REMOVE_LOCAL_MESSAGE_ITEM, REMOVE_MESSAGES, REMOVE_NOTIFICATIONS, RESTART_CONVERSATION, SET_APP_STATE_VALUE, SET_CHAT_MESSAGES_PROPERTY, SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN, SET_CUSTOM_PANEL_OPEN, SET_CUSTOM_PANEL_OPTIONS, SET_HOME_SCREEN_IS_OPEN, SET_INITIAL_VIEW_CHANGE_COMPLETE, SET_IS_BROWSER_PAGE_VISIBLE, SET_LAUNCHER_CONFIG_PROPERTY, SET_LAUNCHER_MINIMIZED, SET_LAUNCHER_PROPERTY, SET_MESSAGE_HISTORY_PROPERTY, SET_MESSAGE_UI_PROPERTY, SET_RESPONSE_PANEL_CONTENT, SET_RESPONSE_PANEL_IS_OPEN, SET_STOP_STREAMING_BUTTON_DISABLED, SET_STOP_STREAMING_BUTTON_VISIBLE, SET_STREAM_ID, SET_TOUR_DATA, SET_VIEW_CHANGING, SET_VIEW_STATE, STREAMING_ADD_CHUNK, STREAMING_MERGE_HISTORY, STREAMING_START, TOGGLE_HOME_SCREEN, UPDATE_BOT_AVATAR_URL, UPDATE_BOT_NAME, UPDATE_CHAT_HEADER_CONFIG, UPDATE_CSS_VARIABLES, UPDATE_HAS_SENT_NON_WELCOME_MESSAGE, UPDATE_HOME_SCREEN_CONFIG, UPDATE_INPUT_STATE, UPDATE_LAUNCHER_AVATAR_URL, UPDATE_LAUNCHER_CONFIG, UPDATE_LOCAL_MESSAGE_ITEM, UPDATE_MAIN_HEADER_AVATAR, UPDATE_MAIN_HEADER_TITLE, UPDATE_MAX_VISIBLE_HEADER_OBJECTS, UPDATE_MESSAGE, UPDATE_PERSISTED_CHAT_STATE, actions as default };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction withoutEmptyStarters(config) {\n  let newConfig = config;\n  if (config?.starters?.buttons?.length) {\n    newConfig = {\n      allow_return: true,\n      ...config,\n      starters: {\n        ...config.starters,\n        buttons: config.starters.buttons.filter(button => Boolean(button.label?.trim()))\n      }\n    };\n    if (!newConfig?.starters?.buttons?.length) {\n      newConfig.starters.is_on = false;\n    }\n  }\n  return newConfig;\n}\n\nexport { withoutEmptyStarters };\n","import { createIntl } from \"react-intl\";\n\nimport actions from \"../store/actions.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function setIntl(serviceManager, locale, messages) {\n  serviceManager.intl = createIntl({\n    locale: locale,\n    messages: messages\n  });\n  serviceManager.store.dispatch(actions.setAppStateValue(\"languagePack\", messages));\n  serviceManager.store.dispatch(actions.setAppStateValue(\"locale\", locale));\n}\n\nexport { setIntl };\n","import dayjs from \"dayjs\";\n\nimport cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport actions from \"./store/actions.js\";\n\nimport { selectInputState } from \"./store/selectors.js\";\n\nimport \"../../types/state/AppState.js\";\n\nimport { withoutEmptyStarters } from \"./utils/homeScreenUtils.js\";\n\nimport { loadLocale, loadLanguagePack } from \"./utils/languages.js\";\n\nimport { consoleDebug, debugLog, consoleError, consoleWarn } from \"./utils/miscUtils.js\";\n\nimport { ViewChangeReason, MessageSendSource } from \"../../types/events/eventBusTypes.js\";\n\nimport { setIntl } from \"./utils/intlUtils.js\";\n\nimport { ViewType } from \"../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function createChatInstance({serviceManager: serviceManager, callRender: callRender}) {\n  let wasRendered = false;\n  function getMainWindow() {\n    return {\n      addClassName: name => serviceManager.mainWindow?.addClassName(name),\n      removeClassName: name => serviceManager.mainWindow?.removeClassName(name)\n    };\n  }\n  function getMessageInput() {\n    return {\n      getHTMLElement: () => serviceManager.mainWindow?.getMessageInput()?.getHTMLElement(),\n      setValue: value => serviceManager.mainWindow?.getMessageInput()?.setValue(value),\n      setEnableEnterKey: value => serviceManager.mainWindow?.getMessageInput()?.setEnableEnterKey(value),\n      addChangeListener: listener => serviceManager.mainWindow?.getMessageInput()?.addChangeListener(listener),\n      removeChangeListener: listener => serviceManager.mainWindow?.getMessageInput()?.removeChangeListener(listener)\n    };\n  }\n  function getHomeScreenInput() {\n    return {\n      getHTMLElement: () => serviceManager.mainWindow?.getHomeScreenInput()?.getHTMLElement(),\n      setValue: value => serviceManager.mainWindow?.getHomeScreenInput()?.setValue(value),\n      setEnableEnterKey: value => serviceManager.mainWindow?.getHomeScreenInput()?.setEnableEnterKey(value),\n      addChangeListener: listener => serviceManager.mainWindow?.getHomeScreenInput()?.addChangeListener(listener),\n      removeChangeListener: listener => serviceManager.mainWindow?.getHomeScreenInput()?.removeChangeListener(listener)\n    };\n  }\n  let instance = {\n    render: () => {\n      if (wasRendered) {\n        consoleError(\"The render function has already been called!\");\n        return Promise.resolve(instance);\n      }\n      wasRendered = true;\n      return callRender();\n    },\n    on: handlers => {\n      serviceManager.eventBus.on(handlers);\n      return instance;\n    },\n    off: handlers => {\n      serviceManager.eventBus.off(handlers);\n      return instance;\n    },\n    once: handlers => {\n      serviceManager.eventBus.once(handlers);\n      return instance;\n    },\n    updateLanguagePack: newPack => {\n      debugLog(\"Called instance.updateLanguagePack\", newPack);\n      return serviceManager.actions.updateLanguagePack(newPack);\n    },\n    updateLocale: newLocale => {\n      debugLog(\"Called instance.updateLocale\", newLocale);\n      const localePromise = loadLocale(newLocale);\n      const languagePackPromise = loadLanguagePack(serviceManager.store.getState().languagePack);\n      return Promise.all([ localePromise, languagePackPromise ]).then(([localePack, languagePack]) => {\n        dayjs.locale(localePack);\n        setIntl(serviceManager, localePack.name, languagePack);\n        serviceManager.messageService.pendingLocale = true;\n        serviceManager.messageService.localeIsExplicit = true;\n      });\n    },\n    updateCSSVariables: (variables, whiteLabelVariables) => {\n      debugLog(\"Called instance.updateCSSVariables\", variables);\n      return serviceManager.actions.updateCSSVariables(variables, whiteLabelVariables);\n    },\n    send: async (message, options) => {\n      debugLog(\"Called instance.send\", message, options);\n      if (selectInputState(serviceManager.store.getState()).isReadonly) {\n        throw new Error(\"You are unable to send messages in read only mode.\");\n      }\n      return serviceManager.actions.send(message, MessageSendSource.INSTANCE_SEND, options);\n    },\n    doAutoScroll: (options = {}) => {\n      debugLog(\"Called instance.doAutoScroll\", options);\n      serviceManager.mainWindow?.doAutoScroll?.(options);\n    },\n    destroy: () => {\n      debugLog(\"Called instance.destroy\");\n      serviceManager.store.dispatch(actions.setAppStateValue(\"isDestroyed\", true));\n      serviceManager.container?.remove();\n      instance = undefined;\n    },\n    updateAssistantInputFieldVisibility: isVisible => {\n      debugLog(\"Called instance.updateAssistantInputFieldVisibility\", isVisible);\n      serviceManager.store.dispatch(actions.updateInputState({\n        fieldVisible: isVisible\n      }, false));\n    },\n    updateInputIsDisabled: isDisabled => {\n      debugLog(\"Called instance.updateInputIsDisabled\", isDisabled);\n      serviceManager.store.dispatch(actions.updateInputState({\n        isReadonly: isDisabled\n      }, false));\n    },\n    updateBotUnreadIndicatorVisibility: isVisible => {\n      debugLog(\"Called instance.updateBotUnreadIndicatorVisibility\", isVisible);\n      serviceManager.store.dispatch(actions.setLauncherProperty(\"showUnreadIndicator\", isVisible));\n    },\n    changeView: async newView => {\n      debugLog(\"Called instance.changeView\", newView);\n      let issueWithNewView = false;\n      if (!wasRendered) {\n        consoleError(`You tried to call \"changeView\" without ever having called the \"render\" method. There is no view to change!`);\n        issueWithNewView = true;\n      }\n      const viewTypeValues = Object.values(ViewType);\n      if (typeof newView === \"string\") {\n        if (!viewTypeValues.includes(newView)) {\n          consoleError(`You tried to change the view but the view you specified is not a valid view name. Please use` + ` the valid view names; ${viewTypeValues.join(\", \")}.`);\n          issueWithNewView = true;\n        }\n      } else if (typeof newView === \"object\") {\n        Object.keys(newView).forEach(key => {\n          if (!viewTypeValues.includes(key)) {\n            consoleError(`You tried to change the state of multiple views by providing an object, however you included the key` + ` \"${key}\" within the object which is not a valid view name. Please use the valid view names; ` + `${viewTypeValues.join(\", \")}.`);\n            issueWithNewView = true;\n          }\n        });\n      } else {\n        consoleError(\"You tried to change the view but the view you provided was not a string or an object. You can either change\" + ' to one of the supported views by providing a string, ex. \"launcher\", \"mainWindow\", or \"tour\". Or you can' + ' change the state of multiple views by providing an object, ex. { \"launcher\": true, \"mainWindow\": false,' + ' \"tour\": true }. Please use one of these supported options.');\n        issueWithNewView = true;\n      }\n      if (!issueWithNewView) {\n        await serviceManager.actions.changeView(newView, {\n          viewChangeReason: ViewChangeReason.CALLED_CHANGE_VIEW\n        });\n      }\n    },\n    notifications: {\n      addNotification: notification => {\n        debugLog(\"Called instance.addNotification\", notification);\n        serviceManager.actions.addNotification(notification);\n      },\n      removeNotifications: groupID => {\n        debugLog(\"Called instance.removeNotifications\", groupID);\n        serviceManager.actions.removeNotification(groupID);\n      },\n      removeAllNotifications: () => {\n        debugLog(\"Called instance.removeAllNotifications\");\n        serviceManager.actions.removeAllNotifications();\n      }\n    },\n    updateMainHeaderTitle: title => {\n      debugLog(\"Called instance.updateMainHeaderTitle\", title);\n      if (!title) {\n        title = null;\n      }\n      serviceManager.actions.updateMainHeaderTitle(title);\n    },\n    updateHomeScreenConfig: homeScreenConfig => {\n      debugLog(\"Called instance.updateHomeScreenConfig\", homeScreenConfig);\n      const homeScreenConfigClone = cloneDeep(homeScreenConfig);\n      const isAIThemeEnabled = serviceManager.store.getState().theme.useAITheme;\n      if (isAIThemeEnabled) {\n        if (homeScreenConfig?.background) {\n          consoleWarn(\"The home screen background can not be changed when the AI theme is enabled.\");\n          delete homeScreenConfigClone.background;\n        }\n      }\n      serviceManager.actions.updateHomeScreenConfig(withoutEmptyStarters(homeScreenConfigClone));\n    },\n    getState: () => serviceManager.actions.getPublicWebChatState(),\n    writeableElements: createWriteableElementsProxy(serviceManager),\n    scrollToMessage: (messageID, animate) => {\n      debugLog(\"Called instance.scrollToMessage\", messageID, animate);\n      serviceManager.mainWindow?.doScrollToMessage(messageID, animate);\n    },\n    updateLauncherConfig: config => serviceManager.actions.updateLauncherConfig(config),\n    customPanels: serviceManager.customPanelManager,\n    updateCustomMenuOptions: options => {\n      debugLog(\"Called instance.updateCustomMenuOptions\", options);\n      serviceManager.store.dispatch(actions.setAppStateValue(\"customMenuOptions\", options));\n    },\n    restartConversation: async () => {\n      debugLog(\"Called instance.restartConversation\");\n      return serviceManager.actions.restartConversation();\n    },\n    agentEndConversation: () => {\n      debugLog(\"Called instance.agentEndConversation\");\n      consoleWarn(`The instance.agentEndConversation method is deprecated. Use instance.serviceDesk.endConversation instead.`);\n      return serviceManager.actions.agentEndConversation(false);\n    },\n    updateIsTypingCounter(direction) {\n      debugLog(\"Called instance.updateIsTypingCounter\", direction);\n      const {store: store} = serviceManager;\n      if (direction === \"increase\") {\n        store.dispatch(actions.addIsTypingCounter(1));\n      } else if (direction === \"decrease\") {\n        if (store.getState().botMessageState.isTypingCounter <= 0) {\n          consoleError(\"You cannot decrease the typing counter when it is already <= 0\");\n          return;\n        }\n        store.dispatch(actions.addIsTypingCounter(-1));\n      } else {\n        consoleError(`[updateIsTypingCounter] Invalid direction: ${direction}. Valid values are \"increase\" and \"decrease\".`);\n      }\n    },\n    updateIsLoadingCounter(direction) {\n      debugLog(\"Called instance.updateIsLoadingCounter\", direction);\n      const {store: store} = serviceManager;\n      if (direction === \"increase\") {\n        store.dispatch(actions.addIsLoadingCounter(1));\n      } else if (direction === \"decrease\") {\n        if (store.getState().botMessageState.isLoadingCounter <= 0) {\n          consoleError(\"You cannot decrease the loading counter when it is already <= 0\");\n          return;\n        }\n        store.dispatch(actions.addIsLoadingCounter(-1));\n      } else {\n        consoleError(`[updateIsLoadingCounter] Invalid direction: ${direction}. Valid values are \"increase\" and \"decrease\".`);\n      }\n    },\n    updateIsChatLoadingCounter(direction) {\n      debugLog(\"Called instance.updateIsChatLoadingCounter\", direction);\n      const {store: store} = serviceManager;\n      if (direction === \"increase\") {\n        store.dispatch(actions.addIsHydratingCounter(1));\n      } else if (direction === \"decrease\") {\n        if (store.getState().botMessageState.isHydratingCounter <= 0) {\n          consoleError(\"You cannot decrease the hydrating counter when it is already <= 0\");\n          return;\n        }\n        store.dispatch(actions.addIsHydratingCounter(-1));\n      } else {\n        consoleError(`[updateIsChatLoadingCounter] Invalid direction: ${direction}. Valid values are \"increase\" and \"decrease\".`);\n      }\n    },\n    updateHeaderConfig: config => {\n      const configCopy = cloneDeep(config);\n      serviceManager.store.dispatch(actions.updateChatHeaderConfig(configCopy));\n    },\n    updateMainHeaderAvatar: config => {\n      serviceManager.store.dispatch(actions.updateMainHeaderAvatar(config));\n    },\n    updateBotName: name => serviceManager.actions.updateBotName(name),\n    updateBotAvatarURL: url => serviceManager.actions.updateBotAvatarURL(url),\n    elements: {\n      getMainWindow: getMainWindow,\n      getMessageInput: getMessageInput,\n      getHomeScreenInput: getHomeScreenInput\n    },\n    tours: {\n      startTour: async message => {\n        debugLog(\"Called instance.tours.startTour\", message);\n        await serviceManager.actions.send(message, MessageSendSource.START_TOUR_METHOD, {\n          skipTourCard: true\n        });\n      },\n      endTour: async () => {\n        debugLog(\"Called instance.tours.endTour\");\n        serviceManager.actions.endTour({\n          viewChangeReason: ViewChangeReason.CALLED_END_TOUR\n        });\n      },\n      goToNextStep: async () => {\n        debugLog(\"Called instance.tours.goToNextStep\");\n        serviceManager.actions.changeStepInTour({\n          nextStep: true\n        });\n      },\n      goToStep: async stepId => {\n        debugLog(\"Called instance.tours.goToStep\", stepId);\n        serviceManager.actions.goToSpecificTourStep(stepId);\n      }\n    },\n    messaging: {\n      addMessage: (message, options = {}) => {\n        debugLog(\"Called instance.messaging.addMessage\", message, options);\n        serviceManager.messageService.messageLoadingManager.end();\n        return serviceManager.actions.receive(message, options?.isLatestWelcomeNode ?? false, null, {\n          disableFadeAnimation: options?.disableFadeAnimation\n        });\n      },\n      addMessageChunk: async (chunk, options = {}) => {\n        debugLog(\"Called instance.messaging.addMessageChunk\", chunk, options);\n        serviceManager.messageService.messageLoadingManager.end();\n        await serviceManager.actions.receiveChunk(chunk, null, options);\n      },\n      removeMessages: async messageIDs => {\n        debugLog(\"Called instance.messaging.removeMessages\", messageIDs);\n        return serviceManager.actions.removeMessages(messageIDs);\n      },\n      clearConversation: () => {\n        debugLog(\"Called instance.messaging.clearConversation\");\n        return serviceManager.actions.restartConversation({\n          skipHydration: true,\n          endAgentConversation: false,\n          fireEvents: false\n        });\n      },\n      insertHistory: messages => {\n        debugLog(\"Called instance.messaging.insertHistory\", messages);\n        return serviceManager.actions.insertHistory(messages);\n      }\n    },\n    requestFocus: () => {\n      debugLog(\"Called instance.requestFocus\");\n      serviceManager.appWindow?.requestFocus();\n    },\n    serviceDesk: {\n      endConversation: () => {\n        debugLog(\"Called instance.serviceDesk.endConversation\");\n        return serviceManager.actions.agentEndConversation(false);\n      },\n      updateIsSuspended: async isSuspended => {\n        debugLog(\"Called instance.serviceDesk.updateIsSuspended\", isSuspended);\n        return serviceManager.actions.agentUpdateIsSuspended(isSuspended);\n      }\n    }\n  };\n  if (serviceManager.store.getState().config.public.debug) {\n    consoleDebug(\"[ChatInstanceImpl] Created chat instance\", instance);\n  }\n  return instance;\n}\n\nfunction createWriteableElementsProxy(serviceManager) {\n  const elementSet = new Set;\n  const handler = {\n    get(target, element) {\n      if (!elementSet.has(element)) {\n        elementSet.add(element);\n      }\n      return target[element];\n    }\n  };\n  return new Proxy(serviceManager.writeableElements, handler);\n}\n\nexport { createChatInstance };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst NODE_ENV = \"production\";\n\nconst VERSION = \"0.3.3\";\n\nexport { NODE_ENV, VERSION };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar NotificationType;\n\n(function(NotificationType) {\n  NotificationType[\"TEXT_NOTIFICATION\"] = \"text_notification\";\n})(NotificationType || (NotificationType = {}));\n\nconst BOUNCING_ANIMATION_TIMEOUTS = [ 15e3, 6e4 ];\n\nconst TIME_TO_ENTRANCE_ANIMATION_START = 15e3;\n\nexport { BOUNCING_ANIMATION_TIMEOUTS, NotificationType, TIME_TO_ENTRANCE_ANIMATION_START };\n","import isEqual from \"lodash-es/isEqual.js\";\n\nimport { VERSION } from \"../environmentVariables.js\";\n\nimport { NotificationType, TIME_TO_ENTRANCE_ANIMATION_START } from \"../../../types/config/LauncherConfig.js\";\n\nimport { DEFAULT_CUSTOM_PANEL_ID } from \"../utils/constants.js\";\n\nimport { deepFreeze } from \"../utils/lang/objectUtils.js\";\n\nimport \"../../../types/utilities/carbonTypes.js\";\n\nimport { CarbonTheme } from \"../../../types/config/PublicConfig.js\";\n\nimport { CornersType } from \"../../../types/config/CornersType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const DEFAULT_LAUNCHER = {\n  config: {\n    is_on: true,\n    mobile: {\n      is_on: true,\n      title: \"\",\n      time_to_expand: TIME_TO_ENTRANCE_ANIMATION_START,\n      new_expand_time: false,\n      time_to_reduce: 1e4,\n      notification_type: NotificationType.TEXT_NOTIFICATION\n    },\n    desktop: {\n      is_on: true,\n      title: \"\",\n      new_expand_time: false,\n      time_to_expand: TIME_TO_ENTRANCE_ANIMATION_START,\n      notification_type: NotificationType.TEXT_NOTIFICATION\n    }\n  }\n};\n\ndeepFreeze(DEFAULT_LAUNCHER);\n\nconst DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS = {\n  title: null,\n  hideBackButton: false,\n  hidePanelHeader: false,\n  disableAnimation: false\n};\n\ndeepFreeze(DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS);\n\nconst DEFAULT_CUSTOM_PANEL_STATE = {\n  isOpen: false,\n  panelID: DEFAULT_CUSTOM_PANEL_ID,\n  options: DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS\n};\n\ndeepFreeze(DEFAULT_CUSTOM_PANEL_STATE);\n\nconst DEFAULT_IFRAME_PANEL_STATE = {\n  isOpen: false,\n  messageItem: null\n};\n\ndeepFreeze(DEFAULT_IFRAME_PANEL_STATE);\n\nconst DEFAULT_CITATION_PANEL_STATE = {\n  isOpen: false,\n  citationItem: null\n};\n\ndeepFreeze(DEFAULT_CITATION_PANEL_STATE);\n\nconst DEFAULT_TOUR_STATE = {\n  activeTourStepItems: null\n};\n\ndeepFreeze(DEFAULT_TOUR_STATE);\n\nconst DEFAULT_MESSAGE_PANEL_STATE = {\n  isOpen: false,\n  localMessageItem: null,\n  isMessageForInput: false\n};\n\ndeepFreeze(DEFAULT_MESSAGE_PANEL_STATE);\n\nconst VIEW_STATE_ALL_CLOSED = {\n  launcher: false,\n  mainWindow: false,\n  tour: false\n};\n\ndeepFreeze(VIEW_STATE_ALL_CLOSED);\n\nconst VIEW_STATE_LAUNCHER_OPEN = {\n  launcher: true,\n  mainWindow: false,\n  tour: false\n};\n\ndeepFreeze(VIEW_STATE_LAUNCHER_OPEN);\n\nconst VIEW_STATE_MAIN_WINDOW_OPEN = {\n  mainWindow: true,\n  launcher: false,\n  tour: false\n};\n\ndeepFreeze(VIEW_STATE_MAIN_WINDOW_OPEN);\n\nconst DEFAULT_PERSISTED_TO_BROWSER = {\n  chatState: {\n    version: VERSION,\n    disclaimersAccepted: {},\n    homeScreenState: {\n      isHomeScreenOpen: false,\n      showBackToBot: false\n    },\n    hasSentNonWelcomeMessage: false,\n    persistedTourState: {\n      activeTourID: null,\n      activeTourCurrentStepIndex: null\n    },\n    agentState: {\n      isConnected: false,\n      isSuspended: false,\n      agentProfiles: {}\n    }\n  },\n  launcherState: {\n    wasLoadedFromBrowser: false,\n    version: VERSION,\n    viewState: VIEW_STATE_ALL_CLOSED,\n    activeTour: false,\n    showUnreadIndicator: false,\n    mobileLauncherIsExtended: false,\n    mobileLauncherWasReduced: false,\n    mobileLauncherDisableBounce: false,\n    desktopLauncherIsExpanded: false,\n    desktopLauncherWasMinimized: false,\n    bounceTurn: 1,\n    hasSentNonWelcomeMessage: false\n  }\n};\n\ndeepFreeze(DEFAULT_PERSISTED_TO_BROWSER);\n\nconst DEFAULT_CHAT_MESSAGES_STATE = {\n  localMessageIDs: [],\n  messageIDs: [],\n  isTypingCounter: 0,\n  isLoadingCounter: 0,\n  isHydratingCounter: 0,\n  isScrollAnchored: false\n};\n\ndeepFreeze(DEFAULT_CHAT_MESSAGES_STATE);\n\nconst DEFAULT_MESSAGE_STATE = {\n  allMessageItemsByID: {},\n  allMessagesByID: {},\n  botMessageState: {\n    ...DEFAULT_CHAT_MESSAGES_STATE\n  }\n};\n\ndeepFreeze(DEFAULT_MESSAGE_STATE);\n\nconst DEFAULT_INPUT_STATE = () => ({\n  fieldVisible: true,\n  isReadonly: false,\n  files: [],\n  allowFileUploads: false,\n  allowMultipleFileUploads: false,\n  allowedFileUploadTypes: null,\n  stopStreamingButtonState: {\n    currentStreamID: null,\n    isVisible: false,\n    isDisabled: false\n  }\n});\n\nconst DEFAULT_AGENT_STATE = {\n  isConnecting: false,\n  isReconnecting: false,\n  numUnreadMessages: 0,\n  fileUploadInProgress: false,\n  showScreenShareRequest: false,\n  isScreenSharing: false,\n  isAgentTyping: false,\n  inputState: DEFAULT_INPUT_STATE()\n};\n\ndeepFreeze(DEFAULT_AGENT_STATE);\n\nconst DEFAULT_THEME_STATE = {\n  carbonTheme: CarbonTheme.G10,\n  useAITheme: false,\n  corners: CornersType.ROUND\n};\n\ndeepFreeze(DEFAULT_THEME_STATE);\n\nconst DEFAULT_LAYOUT_STATE = {\n  showFrame: true,\n  hasContentMaxWidth: true\n};\n\ndeepFreeze(DEFAULT_LAYOUT_STATE);\n\nfunction calcAnnouncementForWidgetOpen(previousState, newViewState) {\n  if (isEqual(previousState.persistedToBrowserStorage.launcherState.viewState, newViewState)) {\n    return previousState.announceMessage;\n  }\n  return {\n    messageID: newViewState.mainWindow ? \"window_ariaWindowOpened\" : \"window_ariaWindowClosed\"\n  };\n}\n\nfunction applyBotMessageState(state, newState) {\n  return {\n    ...state,\n    botMessageState: {\n      ...state.botMessageState,\n      ...newState\n    }\n  };\n}\n\nfunction handleViewStateChange(state, viewState) {\n  let {agentState: agentState} = state;\n  let {showUnreadIndicator: showUnreadIndicator} = state.persistedToBrowserStorage.launcherState;\n  if (viewState.mainWindow && state.isBrowserPageVisible) {\n    if (agentState.numUnreadMessages !== 0) {\n      agentState = {\n        ...agentState,\n        numUnreadMessages: 0\n      };\n    }\n    showUnreadIndicator = false;\n  }\n  return {\n    ...state,\n    announceMessage: calcAnnouncementForWidgetOpen(state, viewState),\n    agentState: agentState,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      launcherState: {\n        ...state.persistedToBrowserStorage.launcherState,\n        viewState: viewState,\n        showUnreadIndicator: showUnreadIndicator\n      }\n    }\n  };\n}\n\nfunction setHomeScreenOpenState(state, isOpen, showBackToBot) {\n  if (showBackToBot === undefined) {\n    showBackToBot = state.persistedToBrowserStorage.chatState.homeScreenState.showBackToBot;\n  }\n  return {\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        homeScreenState: {\n          ...state.persistedToBrowserStorage.chatState.homeScreenState,\n          isHomeScreenOpen: isOpen,\n          showBackToBot: showBackToBot\n        }\n      }\n    }\n  };\n}\n\nfunction applyLocalMessageUIState(state, localMessageID, propertyName, propertyValue) {\n  const oldMessage = state.allMessageItemsByID[localMessageID];\n  if (oldMessage) {\n    return {\n      ...state,\n      allMessageItemsByID: {\n        ...state.allMessageItemsByID,\n        [localMessageID]: {\n          ...oldMessage,\n          ui_state: {\n            ...oldMessage.ui_state,\n            [propertyName]: propertyValue\n          }\n        }\n      }\n    };\n  }\n  return state;\n}\n\nfunction applyFullMessage(state, message) {\n  const newState = {\n    ...state,\n    allMessagesByID: {\n      ...state.allMessagesByID,\n      [message.id]: message\n    }\n  };\n  if (!state.allMessagesByID[message.id]) {\n    const currentMessageIDs = state.botMessageState.messageIDs;\n    const newMessageIDs = [ ...currentMessageIDs, message.id ];\n    return applyBotMessageState(newState, {\n      messageIDs: newMessageIDs\n    });\n  }\n  return newState;\n}\n\nexport { DEFAULT_AGENT_STATE, DEFAULT_CHAT_MESSAGES_STATE, DEFAULT_CITATION_PANEL_STATE, DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS, DEFAULT_CUSTOM_PANEL_STATE, DEFAULT_IFRAME_PANEL_STATE, DEFAULT_INPUT_STATE, DEFAULT_LAUNCHER, DEFAULT_LAYOUT_STATE, DEFAULT_MESSAGE_PANEL_STATE, DEFAULT_MESSAGE_STATE, DEFAULT_PERSISTED_TO_BROWSER, DEFAULT_THEME_STATE, DEFAULT_TOUR_STATE, VIEW_STATE_ALL_CLOSED, VIEW_STATE_LAUNCHER_OPEN, VIEW_STATE_MAIN_WINDOW_OPEN, applyBotMessageState, applyFullMessage, applyLocalMessageUIState, handleViewStateChange, setHomeScreenOpenState };\n","import { gray100, white } from \"../../../node_modules/@carbon/colors/es/index.js\";\n\nimport Color from \"color\";\n\nimport { consoleError } from \"./miscUtils.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst MIN_CONTRAST = 4.5;\n\nfunction hexCodeToRGB(color) {\n  if (color.length === 7) {\n    const red = color.substring(1, 3);\n    const blue = color.substring(3, 5);\n    const green = color.substring(5, 7);\n    return [ parseInt(red, 16), parseInt(blue, 16), parseInt(green, 16) ];\n  }\n  if (color.length === 4) {\n    const red = color.substring(1, 2);\n    const blue = color.substring(2, 3);\n    const green = color.substring(3, 4);\n    return [ parseInt(red + red, 16), parseInt(blue + blue, 16), parseInt(green + green, 16) ];\n  }\n  consoleError(`Unsupported color code: \"${color}\"`);\n  return [ 0, 0, 0 ];\n}\n\nfunction calculateContrast(color1, color2) {\n  const rgb1 = hexCodeToRGB(color1);\n  const rgb2 = hexCodeToRGB(color2);\n  const luminance1 = calculateRelativeLuminance(rgb1);\n  const luminance2 = calculateRelativeLuminance(rgb2);\n  let contrast;\n  if (luminance1 > luminance2) {\n    contrast = (luminance1 + .05) / (luminance2 + .05);\n  } else {\n    contrast = (luminance2 + .05) / (luminance1 + .05);\n  }\n  return contrast;\n}\n\nfunction calculateRelativeLuminance([r8, g8, b8]) {\n  const rRGB = r8 / 255;\n  const gRGB = g8 / 255;\n  const bRGB = b8 / 255;\n  const R = rRGB <= .03928 ? rRGB / 12.92 : ((rRGB + .055) / 1.055) ** 2.4;\n  const G = gRGB <= .03928 ? gRGB / 12.92 : ((gRGB + .055) / 1.055) ** 2.4;\n  const B = bRGB <= .03928 ? bRGB / 12.92 : ((bRGB + .055) / 1.055) ** 2.4;\n  const luminance = .2126 * R + .7152 * G + .0722 * B;\n  return luminance;\n}\n\nfunction whiteOrBlackText(background) {\n  return calculateContrast(gray100, background) >= MIN_CONTRAST ? gray100 : white;\n}\n\nfunction adjustLightness(token, shift) {\n  const original = Color(token).hsl().object();\n  return Color({\n    ...original,\n    l: original.l + shift\n  }).round().hex().toLowerCase();\n}\n\nexport { MIN_CONTRAST, adjustLightness, calculateContrast, hexCodeToRGB, whiteOrBlackText };\n","import { white, gray100, gray10, blue60, gray80 } from \"../../../node_modules/@carbon/colors/es/index.js\";\n\nimport { whiteOrBlackText, adjustLightness, calculateContrast, MIN_CONTRAST, hexCodeToRGB } from \"./colors.js\";\n\nimport { WA_CONSOLE_PREFIX } from \"./constants.js\";\n\nimport { CarbonTheme } from \"../../../types/config/PublicConfig.js\";\n\nimport { CarbonThemeClassNames } from \"../../../types/utilities/carbonTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst CSS_VAR_PREFIX = \"--cds-\";\n\nconst CSS_CHAT_PREFIX = \"chat-\";\n\nconst HEXADECIMAL_REGEX = /#([a-f0-9]{3}){1,2}\\b/i;\n\nconst INTERNAL_OVERRIDES_LIGHT_THEME_MAP = {\n  \"$chat-button\": \"#000000\",\n  \"$chat-button-text-hover\": \"#525252\"\n};\n\nconst INTERNAL_OVERRIDES_DARK_THEME_MAP = {\n  \"$chat-button\": \"#ffffff\",\n  \"$chat-button-text-hover\": \"#f4f4f4\"\n};\n\nfunction convertCSSVariablesToString(cssVariables) {\n  const pieces = Object.keys(cssVariables).map(key => {\n    const value = cssVariables[key];\n    if (value === undefined) {\n      return \"\";\n    }\n    const fullName = key.startsWith(\"$\") ? `${CSS_VAR_PREFIX}${key.replace(/^\\$/, \"\")}` : `${CSS_VAR_PREFIX}${CSS_CHAT_PREFIX}${key}`;\n    return `${fullName}:${value};`;\n  });\n  let cssVariablesString = \"\";\n  const allValues = pieces.join(\"\");\n  const prefix = \"\";\n  if (allValues.length > 0) {\n    const rule = `${prefix}.WACContainer .cds--white, ${prefix}.WACContainer .cds--g10, ${prefix}.WACContainer .cds--g90, ${prefix}.WACContainer .cds--g100`;\n    cssVariablesString = `${rule}${`, :host`}{${allValues}}`;\n  }\n  return cssVariablesString;\n}\n\nfunction remoteStylesToCSSVars(whiteLabelVariables, carbonTheme) {\n  const cssOverrides = {};\n  const primaryColor = whiteLabelVariables[\"BASE-primary-color\"];\n  const secondaryColor = whiteLabelVariables[\"BASE-secondary-color\"];\n  const accentColor = whiteLabelVariables[\"BASE-accent-color\"];\n  if (primaryColor) {\n    cssOverrides[\"PRIMARY-color\"] = primaryColor;\n    cssOverrides[\"PRIMARY-color-text\"] = whiteOrBlackText(primaryColor);\n    cssOverrides[\"PRIMARY-color-hover\"] = adjustLightness(primaryColor, -8);\n    cssOverrides[\"PRIMARY-color-active\"] = adjustLightness(primaryColor, -10);\n    const useAccentColor = accentColor || blue60;\n    const tryFocusColor = carbonTheme === CarbonTheme.G90 || carbonTheme === CarbonTheme.G100 ? white : useAccentColor;\n    let useFocusColor;\n    if (calculateContrast(primaryColor, tryFocusColor) >= MIN_CONTRAST) {\n      useFocusColor = tryFocusColor;\n    } else if (tryFocusColor !== useAccentColor && calculateContrast(primaryColor, useAccentColor) >= MIN_CONTRAST) {\n      useFocusColor = useAccentColor;\n    } else if (tryFocusColor !== white && calculateContrast(primaryColor, white) >= MIN_CONTRAST) {\n      useFocusColor = white;\n    } else {\n      useFocusColor = gray100;\n    }\n    if (useFocusColor !== tryFocusColor) {\n      cssOverrides[\"PRIMARY-color-focus\"] = useFocusColor;\n    }\n  }\n  if (secondaryColor) {\n    cssOverrides[\"SECONDARY-color\"] = secondaryColor;\n    cssOverrides[\"SECONDARY-color-text\"] = whiteOrBlackText(secondaryColor);\n  } else if (carbonTheme === CarbonTheme.G90 || carbonTheme === CarbonTheme.G100) {\n    cssOverrides[\"SECONDARY-color\"] = `var(${CSS_VAR_PREFIX}layer-02)`;\n    cssOverrides[\"SECONDARY-color-text\"] = `var(${CSS_VAR_PREFIX}text-primary);`;\n  }\n  if (accentColor) {\n    const colorMap = ACCENT_COLOR_MAPS[carbonTheme];\n    const accentBlue20 = adjustLightness(accentColor, 40);\n    const accentBlue60Hover = adjustLightness(accentColor, -8);\n    const accentBlue80 = adjustLightness(accentColor, -20);\n    fillValues(cssOverrides, colorMap.blue20, accentBlue20);\n    fillValues(cssOverrides, colorMap.blue60, accentColor);\n    fillValues(cssOverrides, colorMap.blue60Hover, accentBlue60Hover);\n    fillValues(cssOverrides, colorMap.blue80, accentBlue80);\n    cssOverrides[\"LAUNCHER-color-background\"] = accentColor;\n    cssOverrides[\"LAUNCHER-color-background-hover\"] = accentBlue60Hover;\n    cssOverrides[\"LAUNCHER-color-background-active\"] = accentBlue80;\n    cssOverrides[\"LAUNCHER-EXPANDED-MESSAGE-color-background\"] = accentColor;\n    cssOverrides[\"LAUNCHER-EXPANDED-MESSAGE-color-hover\"] = accentBlue60Hover;\n    cssOverrides[\"LAUNCHER-EXPANDED-MESSAGE-color-active\"] = accentBlue80;\n    cssOverrides[\"ACCENT-color\"] = accentColor;\n    const accentColorRGB = hexCodeToRGB(accentColor);\n    cssOverrides[\"ACCENT-color-r\"] = accentColorRGB[0].toString();\n    cssOverrides[\"ACCENT-color-g\"] = accentColorRGB[1].toString();\n    cssOverrides[\"ACCENT-color-b\"] = accentColorRGB[2].toString();\n    cssOverrides[\"ACCENT-color-ghost-text\"] = accentColor;\n    const accentColorBW = whiteOrBlackText(accentColor);\n    cssOverrides[\"ACCENT-color-text\"] = accentColorBW;\n    cssOverrides[\"ACCENT-color-background-hover\"] = accentBlue60Hover;\n    cssOverrides[\"ACCENT-color-background-active\"] = accentBlue80;\n    cssOverrides[\"LAUNCHER-color-focus-border\"] = accentColorBW;\n    cssOverrides[\"LAUNCHER-color-avatar\"] = accentColorBW;\n    cssOverrides[\"LAUNCHER-EXPANDED-MESSAGE-color-text\"] = accentColorBW;\n    cssOverrides[\"LAUNCHER-EXPANDED-MESSAGE-color-focus-border\"] = accentColorBW;\n    cssOverrides[\"LAUNCHER-MOBILE-color-text\"] = accentColorBW;\n    cssOverrides[\"ACCENT-color-bw\"] = accentColorBW;\n    cssOverrides[\"ACCENT-color-bw-hover\"] = adjustLightness(accentColorBW, -8);\n    cssOverrides[\"ACCENT-color-bw-active\"] = adjustLightness(accentColorBW, -10);\n    cssOverrides[\"ACCENT-color-bw-inverse\"] = accentColorBW === gray100 ? white : gray100;\n    cssOverrides[\"ACCENT-color-bw-gray\"] = accentColorBW === gray100 ? gray80 : gray10;\n    cssOverrides[\"ACCENT-color-pastel\"] = accentColorBW === gray100 ? adjustLightness(accentColor, 20) : adjustLightness(accentColor, -15);\n  }\n  return cssOverrides;\n}\n\nconst ACCENT_COLOR_MAPS = {\n  white: {\n    blue20: [ \"$highlight\" ],\n    blue60: [ \"$background-brand\", \"$interactive\", \"$border-interactive\", \"$button-primary\", \"$button-tertiary\", \"$icon-interactive\", \"$focus\" ],\n    blue60Hover: [ \"$button-primary-hover\", \"$button-tertiary-hover\" ],\n    blue80: [ \"$button-primary-active\", \"$button-tertiary-active\" ]\n  },\n  g10: {\n    blue20: [ \"$highlight\" ],\n    blue60: [ \"$background-brand\", \"$interactive\", \"$border-interactive\", \"$button-primary\", \"$button-tertiary\", \"$icon-interactive\", \"$focus\" ],\n    blue60Hover: [ \"$button-primary-hover\", \"$button-tertiary-hover\" ],\n    blue80: [ \"$button-primary-active\", \"$button-tertiary-active\" ]\n  },\n  g90: {\n    blue20: [],\n    blue60: [ \"$background-brand\", \"$interactive\", \"$border-interactive\", \"$button-primary\", \"$button-tertiary\", \"$focus-inverse\" ],\n    blue60Hover: [ \"$button-primary-hover\", \"$button-tertiary-hover\" ],\n    blue80: [ \"$button-primary-active\", \"$highlight\", \"$button-tertiary-active\" ]\n  },\n  g100: {\n    blue20: [],\n    blue60: [ \"$background-brand\", \"$interactive\", \"$border-interactive\", \"$button-primary\", \"$button-tertiary\", \"$focus-inverse\" ],\n    blue60Hover: [ \"$button-primary-hover\", \"$button-tertiary-hover\" ],\n    blue80: [ \"$button-primary-active\", \"$highlight\", \"$button-tertiary-active\" ]\n  }\n};\n\nfunction fillValues(styles, propertyNames, value) {\n  propertyNames.forEach(propertyName => {\n    styles[propertyName] = value;\n  });\n}\n\nfunction mergeCSSVariables(publicVars, whiteLabelVariables, carbonTheme, useAITheme) {\n  carbonTheme = carbonTheme || CarbonTheme.G10;\n  useAITheme = useAITheme || false;\n  publicVars = publicVars || {};\n  const internalOverrides = createInternalCSSOverridesMap(carbonTheme, useAITheme);\n  const result = {\n    ...internalOverrides,\n    ...publicVars\n  };\n  Object.entries(result).forEach(([key, value]) => {\n    if (key.startsWith(\"$\") && !value.match(HEXADECIMAL_REGEX)) {\n      console.warn(`${WA_CONSOLE_PREFIX} You tried to call \"updateCSSVariables\" with an invalid value for \"${key}\": \"${publicVars[key]}\". You must use hexadecimal values for colors.`);\n      delete result[key];\n    }\n  });\n  const remoteVars = remoteStylesToCSSVars(whiteLabelVariables || {}, carbonTheme);\n  Object.entries(remoteVars).forEach(([key, value]) => {\n    if (value !== \"\" && publicVars[key] === undefined) {\n      result[key] = value;\n    }\n  });\n  return result;\n}\n\nfunction createInternalCSSOverridesMap(carbonTheme, useAITheme) {\n  let internalOverridesMap = {};\n  if (!useAITheme) {\n    if ([ CarbonTheme.G10, CarbonTheme.WHITE ].includes(carbonTheme)) {\n      internalOverridesMap = {\n        ...internalOverridesMap,\n        ...INTERNAL_OVERRIDES_LIGHT_THEME_MAP\n      };\n    } else if ([ CarbonTheme.G90, CarbonTheme.G100 ].includes(carbonTheme)) {\n      internalOverridesMap = {\n        ...internalOverridesMap,\n        ...INTERNAL_OVERRIDES_DARK_THEME_MAP\n      };\n    }\n  }\n  return internalOverridesMap;\n}\n\nfunction getThemeClassNames(themeState) {\n  let themeClassnames;\n  switch (themeState?.carbonTheme) {\n   case CarbonTheme.WHITE:\n    themeClassnames = CarbonThemeClassNames.WHITE;\n    break;\n\n   case CarbonTheme.G10:\n    themeClassnames = CarbonThemeClassNames.G10;\n    break;\n\n   case CarbonTheme.G90:\n    themeClassnames = CarbonThemeClassNames.G90;\n    break;\n\n   case CarbonTheme.G100:\n    themeClassnames = CarbonThemeClassNames.G100;\n    break;\n\n   default:\n    themeClassnames = CarbonThemeClassNames.G10;\n    break;\n  }\n  if (themeState?.useAITheme) {\n    themeClassnames += \" WAC--aiTheme\";\n  }\n  return themeClassnames;\n}\n\nexport { convertCSSVariablesToString, getThemeClassNames, mergeCSSVariables };\n","import { VIEW_STATE_ALL_CLOSED } from \"../store/reducerUtils.js\";\n\nimport { consoleError } from \"./miscUtils.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function constructViewState(newView, appState) {\n  const {viewState: viewState} = appState.persistedToBrowserStorage.launcherState;\n  let newViewState;\n  if (typeof newView === \"string\") {\n    newViewState = {\n      ...VIEW_STATE_ALL_CLOSED,\n      [newView]: true\n    };\n  } else {\n    newViewState = {\n      ...viewState,\n      ...newView\n    };\n  }\n  return newViewState;\n}\n\nfunction validateViewState(viewState, appState) {\n  const {activeTour: activeTour} = appState.persistedToBrowserStorage.launcherState;\n  if (viewState.tour && !activeTour) {\n    consoleError(\"Error changing the view. The new view was supposed to show a tour however there is no active tour to show.\" + \" Changing the view has been canceled.\");\n    return false;\n  }\n  return true;\n}\n\nexport { constructViewState, validateViewState };\n","import cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport isEqual from \"lodash-es/isEqual.js\";\n\nimport merge from \"lodash-es/merge.js\";\n\nimport inputItemToLocalItem from \"../schema/inputItemToLocalItem.js\";\n\nimport { outputItemToLocalItem, createLocalMessageItemsForNestedMessageItems } from \"../schema/outputItemToLocalItem.js\";\n\nimport { AgentsOnlineStatus } from \"../../../types/config/ServiceDeskConfig.js\";\n\nimport actions from \"../store/actions.js\";\n\nimport { agentUpdateIsSuspended } from \"../store/agentActions.js\";\n\nimport { DEFAULT_PERSISTED_TO_BROWSER, VIEW_STATE_LAUNCHER_OPEN } from \"../store/reducerUtils.js\";\n\nimport \"../../../types/state/AppState.js\";\n\nimport { arrayLastValue, asyncForEach } from \"../utils/lang/arrayUtils.js\";\n\nimport { deepFreeze } from \"../utils/lang/objectUtils.js\";\n\nimport { sleep } from \"../utils/lang/promiseUtils.js\";\n\nimport { uuid } from \"../utils/lang/uuid.js\";\n\nimport { createWelcomeRequest, isLiveAgentMessage, isRequest, createMessageRequestForText, addDefaultsToMessage, isResponse, createMessageResponseForText, isStreamCompleteItem, isStreamPartialItem, isStreamFinalResponse, renderAsUserDefinedMessage, isResponseWithNestedItems, streamItemID, isPause, isConnectToAgent, hasTourUserDefinedType, hasServiceDesk, isTyping } from \"../utils/messageUtils.js\";\n\nimport { debugLog, isEnableDebugLog, consoleError, consoleWarn, callOnError } from \"../utils/miscUtils.js\";\n\nimport { resolvablePromise } from \"../utils/resolvablePromise.js\";\n\nimport { mergeCSSVariables } from \"../utils/styleUtils.js\";\n\nimport { constructViewState, validateViewState } from \"../utils/viewStateUtils.js\";\n\nimport { MessageResponseTypes } from \"../../../types/messaging/Messages.js\";\n\nimport { BusEventType, MessageSendSource, TourStartReason, MainWindowCloseReason, ViewChangeReason, MainWindowOpenReason } from \"../../../types/events/eventBusTypes.js\";\n\nimport { CSSVariable } from \"../../../types/instance/ChatInstance.js\";\n\nimport { OnErrorType } from \"../../../types/config/PublicConfig.js\";\n\nimport { setIntl } from \"../utils/intlUtils.js\";\n\nimport { UUIDType } from \"../utils/lang/UUIDType.js\";\n\nimport { ViewType } from \"../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const VALID_PUBLIC_VARS_IN_AI_THEME_SET = new Set(Object.values(CSSVariable));\n\nconst UPDATE_CSS_VARS_AI_THEME_WARNING_MESSAGE = `[updateCSSVariables] The AI theme is enabled and only ${Object.values(CSSVariable).join(\", \")} can be updated.`;\n\nclass ChatActionsImpl {\n  constructor(serviceManager) {\n    this.hydrating = false;\n    this.restarting = false;\n    this.alreadyHydrated = false;\n    this.chunkQueue = [];\n    this.serviceManager = serviceManager;\n  }\n  async hydrateChat(alternateWelcomeRequest, alternateWelcomeRequestSource, alternateOptions) {\n    let fireReady = false;\n    try {\n      if (!this.hydrationPromise) {\n        this.hydrating = true;\n        this.hydrationPromise = this.doHydrateChat(alternateWelcomeRequest, alternateWelcomeRequestSource, alternateOptions);\n        fireReady = true;\n      }\n      await this.hydrationPromise;\n    } finally {\n      this.hydrating = false;\n    }\n    if (fireReady) {\n      await this.serviceManager.fire({\n        type: BusEventType.CHAT_READY\n      });\n    }\n  }\n  async doHydrateChat(alternateWelcomeRequest, alternateWelcomeRequestSource, alternateOptions) {\n    debugLog(\"Hydrating Carbon AI chat\", alternateWelcomeRequest, alternateWelcomeRequestSource, alternateOptions);\n    let history;\n    const {serviceManager: serviceManager} = this;\n    serviceManager.store.dispatch(actions.addIsHydratingCounter(1));\n    if (!this.alreadyHydrated) {\n      history = await this.serviceManager.historyService.loadHistory();\n      if (serviceManager.humanAgentService) {\n        debugLog(\"Initializing the human agent service\");\n        await serviceManager.humanAgentService.initialize();\n      } else {\n        debugLog(\"No service desk integrations present\");\n      }\n    }\n    const {config: config} = serviceManager.store.getState();\n    if (!history) {\n      if (!alternateWelcomeRequest) {\n        const state = serviceManager.store.getState();\n        if (state.homeScreenConfig?.is_on) {\n          serviceManager.store.dispatch(actions.setHomeScreenIsOpen(true));\n        } else if (!config.public.messaging?.skipWelcome) {\n          await serviceManager.actions.send(createWelcomeRequest(), MessageSendSource.WELCOME_REQUEST, {\n            returnBeforeStreaming: true\n          }, true);\n        }\n      }\n    } else {\n      serviceManager.store.dispatch(actions.hydrateMessageHistory(history.messageHistory));\n      await this.createElementsForUserDefinedResponses(history.messageHistory);\n      if (history.latestPanelLocalMessageItem) {\n        this.openResponsePanel(history.latestPanelLocalMessageItem, true);\n      }\n    }\n    if (alternateWelcomeRequest) {\n      serviceManager.store.dispatch(actions.setHomeScreenIsOpen(false));\n      await serviceManager.actions.send(alternateWelcomeRequest, alternateWelcomeRequestSource, alternateOptions, true);\n    }\n    serviceManager.store.dispatch(actions.chatWasHydrated());\n    serviceManager.store.dispatch(actions.addIsHydratingCounter(-1));\n    if (history) {\n      const lastMessageID = arrayLastValue(history.messageHistory.botMessageState.localMessageIDs);\n      const lastMessage = history.messageHistory.allMessageItemsByID[lastMessageID];\n      const lastOriginalMessage = history.messageHistory.allMessagesByID[lastMessage?.fullMessageID];\n      if (!isLiveAgentMessage(lastMessage) && isRequest(lastOriginalMessage)) {\n        serviceManager.messageService.resendMessage(lastOriginalMessage, lastMessage.ui_state.id);\n      }\n    }\n    const allowReconnect = config.public.serviceDesk.allowReconnect ?? true;\n    this.serviceManager?.humanAgentService?.handleHydration(allowReconnect, Boolean(history));\n    this.alreadyHydrated = true;\n  }\n  getPublicWebChatState() {\n    const state = this.serviceManager.store.getState();\n    const {persistedToBrowserStorage: persistedToBrowserStorage} = state;\n    const {chatState: chatState, launcherState: launcherState} = persistedToBrowserStorage;\n    const publicWebChatState = {\n      isConnectedWithHumanAgent: chatState.agentState.isConnected,\n      isWebChatOpen: launcherState.viewState.mainWindow,\n      isConnectingWithHumanAgent: state.agentState.isConnecting,\n      isHomeScreenOpen: chatState.homeScreenState.isHomeScreenOpen,\n      isDebugEnabled: isEnableDebugLog(),\n      hasUserSentMessage: chatState.hasSentNonWelcomeMessage,\n      isTourActive: launcherState.activeTour,\n      viewState: {\n        ...launcherState.viewState\n      },\n      serviceDesk: {\n        isConnected: chatState.agentState.isConnected,\n        isConnecting: state.agentState.isConnecting,\n        isSuspended: chatState.agentState.isSuspended ?? false\n      },\n      locale: this.serviceManager.store.getState().locale,\n      intl: this.serviceManager.intl\n    };\n    return publicWebChatState;\n  }\n  async sendWithCatch(message, source, options = {}, ignoreHydration = false) {\n    try {\n      await this.send(message, source, options, ignoreHydration);\n    } catch (error) {\n      consoleError(\"An error occurred sending the message\", error);\n    }\n  }\n  async send(message, source, options = {}, ignoreHydration = false) {\n    const messageRequest = typeof message === \"string\" ? createMessageRequestForText(message) : message;\n    if (this.serviceManager.store.getState().persistedToBrowserStorage.chatState.homeScreenState.isHomeScreenOpen) {\n      this.serviceManager.store.dispatch(actions.setHomeScreenIsOpen(false));\n    }\n    if (this.serviceManager.store.getState().responsePanelState.isOpen) {\n      this.serviceManager.store.dispatch(actions.setResponsePanelIsOpen(false));\n    }\n    if (this.hydrationPromise || ignoreHydration) {\n      if (!ignoreHydration) {\n        await this.hydrationPromise;\n      }\n      await this.doSend(messageRequest, source, options);\n    } else {\n      await this.hydrateChat(messageRequest, source, options);\n    }\n  }\n  async doSend(message, source, options = {}) {\n    const {store: store} = this.serviceManager;\n    addDefaultsToMessage(message);\n    const originalUserText = message.history?.label || message.input.text;\n    if (options.silent) {\n      message.history.silent = true;\n    }\n    const localMessage = inputItemToLocalItem(message, originalUserText);\n    if (!message.history.silent) {\n      store.dispatch(actions.addLocalMessageItem(localMessage, message, true));\n    } else {\n      store.dispatch(actions.addMessage(message));\n    }\n    if (options.setValueSelectedForMessageID) {\n      store.dispatch(actions.messageSetOptionSelected(options.setValueSelectedForMessageID, message));\n    }\n    deepFreeze(message);\n    await this.serviceManager.messageService.send(cloneDeep(message), source, localMessage.ui_state.id, options);\n  }\n  async receive(message, isLatestWelcomeNode = false, requestMessage, requestOptions) {\n    const {restartCount: initialRestartCount} = this.serviceManager;\n    if (!message.id) {\n      message.id = uuid(UUIDType.MESSAGE);\n    }\n    const preReceiveEvent = {\n      type: BusEventType.PRE_RECEIVE,\n      data: message\n    };\n    await this.serviceManager.fire(preReceiveEvent);\n    if (initialRestartCount !== this.serviceManager.restartCount) {\n      return;\n    }\n    if (!isLatestWelcomeNode) {\n      this.serviceManager.store.dispatch(actions.updateHasSentNonWelcomeMessage(true));\n    }\n    if (initialRestartCount !== this.serviceManager.restartCount) {\n      return;\n    }\n    const {languagePack: languagePack} = this.serviceManager.store.getState();\n    if (isResponse(message)) {\n      this.processMessageResponse(message, isLatestWelcomeNode, requestMessage, requestOptions).catch(error => {\n        consoleError(\"Error processing the message response\", error);\n      });\n    } else {\n      const inlineError = createMessageResponseForText(languagePack.errors_singleMessage, message.thread_id, MessageResponseTypes.INLINE_ERROR);\n      this.receive(inlineError, false);\n    }\n    deepFreeze(message);\n    await this.serviceManager.fire({\n      type: BusEventType.RECEIVE,\n      data: message\n    });\n  }\n  async removeMessages(messageIDs) {\n    this.serviceManager.store.dispatch(actions.removeMessages(messageIDs));\n  }\n  async insertHistory(messages) {\n    const scrollBottom = this.serviceManager.mainWindow?.getMessagesScrollBottom();\n    const state = this.serviceManager.store.getState();\n    const notes = {\n      notes: [ {\n        body: messages\n      } ]\n    };\n    const history = await this.serviceManager.historyService.loadHistory(notes);\n    const currentAppStateMessages = {\n      allMessageItemsByID: state.allMessageItemsByID,\n      allMessagesByID: state.allMessagesByID,\n      botMessageState: state.botMessageState\n    };\n    const newAppStateMessages = merge({}, history.messageHistory, currentAppStateMessages);\n    newAppStateMessages.botMessageState.messageIDs = [ ...history.messageHistory.botMessageState.messageIDs, ...currentAppStateMessages.botMessageState.messageIDs ];\n    newAppStateMessages.botMessageState.localMessageIDs = [ ...history.messageHistory.botMessageState.localMessageIDs, ...currentAppStateMessages.botMessageState.localMessageIDs ];\n    this.serviceManager.store.dispatch(actions.hydrateMessageHistory(newAppStateMessages));\n    await this.createElementsForUserDefinedResponses(history.messageHistory);\n    this.serviceManager.mainWindow?.doAutoScroll({\n      scrollToBottom: scrollBottom\n    });\n  }\n  async receiveChunk(chunk, messageID, options = {}) {\n    const chunkPromise = resolvablePromise();\n    this.chunkQueue.push({\n      chunk: chunk,\n      messageID: messageID,\n      options: options,\n      chunkPromise: chunkPromise\n    });\n    if (this.chunkQueue.length === 1) {\n      this.processChunkQueue();\n    }\n    return chunkPromise;\n  }\n  async processChunkQueue() {\n    const {chunk: chunk, options: options, chunkPromise: chunkPromise} = this.chunkQueue[0];\n    let {messageID: messageID} = this.chunkQueue[0];\n    const isCompleteItem = isStreamCompleteItem(chunk);\n    const isPartialItem = isStreamPartialItem(chunk);\n    const {store: store} = this.serviceManager;\n    const isStopGeneratingVisible = store.getState().botInputState.stopStreamingButtonState.isVisible;\n    if (isPartialItem) {\n      const streamingData = chunk.partial_item.streaming_metadata;\n      if (streamingData.cancellable && !isStopGeneratingVisible) {\n        store.dispatch(actions.setStopStreamingButtonVisible(true));\n      }\n    }\n    if (isCompleteItem || isPartialItem) {\n      if (!messageID) {\n        messageID = chunk.streaming_metadata.response_id;\n      }\n      if (!store.getState().allMessagesByID[messageID]) {\n        store.dispatch(actions.streamingStart(messageID));\n      }\n      const item = chunk.partial_item || chunk.complete_item;\n      store.dispatch(actions.streamingAddChunk(messageID, item, isCompleteItem, options.disableFadeAnimation ?? true));\n      if (chunk.partial_response?.history) {\n        if (Object.keys(chunk.partial_response).length > 1) {\n          throw new Error(`The partial_response object only supports the \"history\" property.`);\n        }\n        store.dispatch(actions.streamingMergeHistory(messageID, chunk.partial_response?.history));\n      }\n      await this.handleUserDefinedResponseItemsChunk(messageID, chunk, item);\n    } else if (isStreamFinalResponse(chunk)) {\n      this.receive(chunk.final_response, options.isLatestWelcomeNode, null, {\n        disableFadeAnimation: true\n      });\n    }\n    if ((isCompleteItem || isStreamFinalResponse(chunk)) && isStopGeneratingVisible) {\n      store.dispatch(actions.setStopStreamingButtonDisabled(false));\n      store.dispatch(actions.setStopStreamingButtonVisible(false));\n    }\n    this.chunkQueue.shift();\n    chunkPromise.doResolve();\n    if (this.chunkQueue[0]) {\n      this.processChunkQueue();\n    }\n  }\n  getOrCreateUserDefinedElement(messageItemID) {\n    let userDefinedItem = this.serviceManager.userDefinedElementRegistry.get(messageItemID);\n    if (!userDefinedItem) {\n      userDefinedItem = {\n        element: document.createElement(\"div\"),\n        slotName: `slot-user-defined-${uuid()}`\n      };\n      userDefinedItem.element.setAttribute(\"slot\", userDefinedItem.slotName);\n      this.serviceManager.userDefinedElementRegistry.set(messageItemID, userDefinedItem);\n    }\n    return userDefinedItem;\n  }\n  async handleUserDefinedResponseItems(localMessage, originalMessage) {\n    if (renderAsUserDefinedMessage(localMessage.item)) {\n      let element;\n      let slotName;\n      if (!localMessage.item.user_defined?.silent) {\n        ({element: element, slotName: slotName} = this.getOrCreateUserDefinedElement(localMessage.ui_state.id));\n      }\n      const userDefinedResponseEvent = {\n        type: BusEventType.USER_DEFINED_RESPONSE,\n        data: {\n          message: localMessage.item,\n          fullMessage: originalMessage,\n          element: element,\n          slot: slotName,\n          fullWidth: false\n        }\n      };\n      await this.serviceManager.fire(userDefinedResponseEvent);\n      if (userDefinedResponseEvent.data.fullWidth) {\n        this.serviceManager.store.dispatch(actions.setMessageUIProperty(localMessage.ui_state.id, \"fullWidth\", true));\n      }\n    } else if (isResponseWithNestedItems(localMessage.item)) {\n      const {itemsLocalMessageItemIDs: itemsLocalMessageItemIDs, bodyLocalMessageItemIDs: bodyLocalMessageItemIDs, footerLocalMessageItemIDs: footerLocalMessageItemIDs, gridLocalMessageItemIDs: gridLocalMessageItemIDs} = localMessage.ui_state;\n      const {allMessageItemsByID: allMessageItemsByID} = this.serviceManager.store.getState();\n      const createElementForNestedUserDefinedResponse = localMessageItemID => {\n        const nestedLocalMessage = allMessageItemsByID[localMessageItemID];\n        return this.handleUserDefinedResponseItems(nestedLocalMessage, originalMessage);\n      };\n      if (gridLocalMessageItemIDs?.length) {\n        await asyncForEach(gridLocalMessageItemIDs, row => asyncForEach(row, cell => asyncForEach(cell, itemID => createElementForNestedUserDefinedResponse(itemID))));\n      }\n      if (itemsLocalMessageItemIDs?.length) {\n        await asyncForEach(itemsLocalMessageItemIDs, createElementForNestedUserDefinedResponse);\n      }\n      if (bodyLocalMessageItemIDs?.length) {\n        await asyncForEach(bodyLocalMessageItemIDs, createElementForNestedUserDefinedResponse);\n      }\n      if (footerLocalMessageItemIDs?.length) {\n        await asyncForEach(footerLocalMessageItemIDs, createElementForNestedUserDefinedResponse);\n      }\n    }\n  }\n  async handleUserDefinedResponseItemsChunk(messageID, chunk, messageItem) {\n    if (renderAsUserDefinedMessage(messageItem)) {\n      const {store: store} = this.serviceManager;\n      const itemID = streamItemID(messageID, messageItem);\n      let element;\n      let slotName;\n      if (!messageItem.user_defined?.silent) {\n        ({element: element, slotName: slotName} = this.getOrCreateUserDefinedElement(itemID));\n      }\n      const userDefinedResponseEvent = {\n        type: BusEventType.CHUNK_USER_DEFINED_RESPONSE,\n        data: {\n          messageItem: messageItem,\n          chunk: chunk,\n          element: element,\n          slot: slotName,\n          fullWidth: false\n        }\n      };\n      await this.serviceManager.fire(userDefinedResponseEvent);\n      if (store.getState().allMessageItemsByID[itemID].ui_state.fullWidth !== userDefinedResponseEvent.data.fullWidth) {\n        store.dispatch(actions.setMessageUIProperty(itemID, \"fullWidth\", userDefinedResponseEvent.data.fullWidth));\n      }\n    }\n  }\n  async processMessageResponse(fullMessage, isLatestWelcomeNode, requestMessage, requestOptions = {}) {\n    const {store: store} = this.serviceManager;\n    const {config: config} = store.getState();\n    const initialRestartCount = this.serviceManager.restartCount;\n    const output = fullMessage.output.generic;\n    fullMessage.request_id = requestMessage?.id;\n    addDefaultsToMessage(fullMessage);\n    store.dispatch(actions.addMessage(fullMessage));\n    let previousItemID = null;\n    for (let index = 0; index < output.length && initialRestartCount === this.serviceManager.restartCount; index++) {\n      const messageItem = output[index];\n      if (messageItem) {\n        const pause = isPause(messageItem);\n        const agent = isConnectToAgent(messageItem);\n        const tour = hasTourUserDefinedType(messageItem);\n        const localMessageItem = outputItemToLocalItem(messageItem, fullMessage, isLatestWelcomeNode, requestOptions.disableFadeAnimation);\n        if (tour && (requestOptions.skipTourCard || messageItem.user_defined?.skip_card)) {\n          const startTourReason = requestOptions.skipTourCard ? TourStartReason.START_TOUR_METHOD : TourStartReason.SKIP_CARD;\n          const {viewState: viewState} = store.getState().persistedToBrowserStorage.launcherState;\n          if (viewState.mainWindow) {\n            const mainWindowCloseReason = requestOptions.skipTourCard ? MainWindowCloseReason.CALLED_START_TOUR : MainWindowCloseReason.TOUR_SKIP_CARD;\n            this.startTour(localMessageItem, startTourReason, {\n              mainWindowCloseReason: mainWindowCloseReason\n            }).catch(error => {\n              consoleError(\"Error starting the tour\", error);\n            });\n          } else {\n            const viewChangeReason = requestOptions.skipTourCard ? ViewChangeReason.CALLED_START_TOUR : ViewChangeReason.TOUR_SKIP_CARD;\n            this.startTour(localMessageItem, startTourReason, {\n              viewChangeReason: viewChangeReason\n            }).catch(error => {\n              consoleError(\"Error starting the tour\", error);\n            });\n          }\n        } else if (!tour && requestOptions.skipTourCard) {\n          consoleError(\"The message response received was not a tour, so the tour card was not skipped nor was a tour started by the startTour() call.\");\n        }\n        const nestedLocalMessageItems = [];\n        createLocalMessageItemsForNestedMessageItems(localMessageItem, fullMessage, false, nestedLocalMessageItems, true);\n        store.dispatch(actions.addNestedMessages(nestedLocalMessageItems));\n        if (agent && isResponse(fullMessage)) {\n          store.dispatch(actions.addIsTypingCounter(1));\n          if (!hasServiceDesk(config)) {\n            const message = 'Web chat received a \"connect_to_agent\" message but there is no service desk configured. Check your chat configuration.';\n            this.errorOccurred({\n              errorType: OnErrorType.INTEGRATION_ERROR,\n              message: message\n            });\n            store.dispatch(actions.setMessageHistoryProperty(localMessageItem.fullMessageID, \"agent_no_service_desk\", true));\n          }\n          const agentAvailability = await (this.serviceManager.humanAgentService?.checkAreAnyAgentsOnline(fullMessage));\n          if (initialRestartCount === this.serviceManager.restartCount) {\n            store.dispatch(actions.setMessageHistoryProperty(localMessageItem.fullMessageID, \"agent_availability\", agentAvailability));\n            let shouldAutoRequestAgent = false;\n            if (config.public.serviceDesk?.skipConnectAgentCard) {\n              shouldAutoRequestAgent = true;\n            }\n            store.dispatch(actions.addIsTypingCounter(-1));\n            if (shouldAutoRequestAgent && agentAvailability === AgentsOnlineStatus.ONLINE) {\n              this.serviceManager.humanAgentService.startChat(localMessageItem, fullMessage);\n            }\n          }\n        }\n        if (pause) {\n          const showIsTyping = isTyping(messageItem);\n          if (showIsTyping) {\n            store.dispatch(actions.addIsTypingCounter(1));\n          }\n          await sleep(messageItem.time);\n          if (showIsTyping && initialRestartCount === this.serviceManager.restartCount) {\n            store.dispatch(actions.addIsTypingCounter(-1));\n          }\n        } else {\n          await this.handleUserDefinedResponseItems(localMessageItem, fullMessage);\n          if (!localMessageItem.item.user_defined?.silent && initialRestartCount === this.serviceManager.restartCount) {\n            this.serviceManager.store.dispatch(actions.addLocalMessageItem(localMessageItem, fullMessage, false, previousItemID));\n            previousItemID = localMessageItem.ui_state.id;\n          }\n        }\n      }\n    }\n  }\n  openResponsePanel(localMessageItem, isMessageForInput) {\n    this.serviceManager.store.dispatch(actions.setResponsePanelContent(localMessageItem, isMessageForInput));\n    this.serviceManager.store.dispatch(actions.setResponsePanelIsOpen(true));\n  }\n  async insertLocalMessageResponse(message) {\n    message.id = uuid(UUIDType.MESSAGE);\n    await this.processMessageResponse(message, false, null, {});\n  }\n  updateLanguagePack(changes) {\n    const {languagePack: languagePack, locale: locale} = this.serviceManager.store.getState();\n    const messages = {\n      ...languagePack,\n      ...changes\n    };\n    setIntl(this.serviceManager, locale, messages);\n  }\n  addNotification(notification) {\n    this.serviceManager.store.dispatch(actions.addNotification(notification));\n  }\n  removeNotification(groupID) {\n    this.serviceManager.store.dispatch(actions.removeNotifications({\n      groupID: groupID\n    }));\n  }\n  removeAllNotifications() {\n    this.serviceManager.store.dispatch(actions.removeAllNotifications());\n  }\n  updateCSSVariables(publicVars, whiteLabelVariables = {}) {\n    const {store: store} = this.serviceManager;\n    const {theme: theme} = store.getState();\n    const {carbonTheme: carbonTheme, useAITheme: useAITheme} = theme;\n    if (useAITheme) {\n      const usePublicVars = publicVars;\n      publicVars = {};\n      whiteLabelVariables = {};\n      usePublicVars && Object.entries(usePublicVars).forEach(([variable]) => {\n        if (VALID_PUBLIC_VARS_IN_AI_THEME_SET.has(variable)) {\n          publicVars[variable] = usePublicVars[variable];\n        } else {\n          consoleWarn(UPDATE_CSS_VARS_AI_THEME_WARNING_MESSAGE);\n        }\n      });\n    } else {\n      publicVars = {\n        ...publicVars\n      };\n      whiteLabelVariables = {\n        ...whiteLabelVariables\n      };\n    }\n    const allVariables = mergeCSSVariables(publicVars, whiteLabelVariables, carbonTheme, useAITheme);\n    store.dispatch(actions.updateCSSVariables(allVariables, publicVars, whiteLabelVariables));\n  }\n  updateBotName(name) {\n    this.serviceManager.store.dispatch(actions.updateBotName(name));\n  }\n  updateMainHeaderTitle(title) {\n    this.serviceManager.store.dispatch(actions.updateMainHeaderTitle(title));\n  }\n  updateBotAvatarURL(url) {\n    this.serviceManager.store.dispatch(actions.updateBotAvatarURL(url));\n  }\n  updateHomeScreenConfig(homeScreenConfig) {\n    this.serviceManager.store.dispatch(actions.updateHomeScreenConfig(homeScreenConfig));\n  }\n  updateLauncherConfig(launcherConfig) {\n    this.serviceManager.store.dispatch(actions.updateLauncherConfig(launcherConfig));\n  }\n  async changeView(newView, reason, tryHydrating = true, forceViewChange = false) {\n    const {store: store} = this.serviceManager;\n    const {viewState: viewState} = store.getState().persistedToBrowserStorage.launcherState;\n    let newViewState = constructViewState(newView, store.getState());\n    if (!validateViewState(newViewState, store.getState())) {\n      return viewState;\n    }\n    if (!isEqual(newViewState, viewState) || forceViewChange) {\n      await this.fireViewChangeEventsAndChangeView(newViewState, reason);\n      newViewState = store.getState().persistedToBrowserStorage.launcherState.viewState;\n      if (tryHydrating && (newViewState.mainWindow || newViewState.tour) && !store.getState().isHydrated) {\n        this.hydrateChat().catch(error => {\n          consoleError(\"Error hydrating the chat\", error);\n        });\n      }\n    }\n    return newViewState;\n  }\n  async fireViewChangeEventsAndChangeView(newViewState, reason) {\n    const {store: store} = this.serviceManager;\n    if (store.getState().viewChanging) {\n      throw new Error(\"The view may not be changed while a view change event is already running. Please make sure to resolve any promises from these events.\");\n    }\n    store.dispatch(actions.setViewChanging(true));\n    const {viewState: viewState} = store.getState().persistedToBrowserStorage.launcherState;\n    const {viewChangeReason: viewChangeReason} = reason;\n    const oldViewState = deepFreeze(viewState);\n    try {\n      const preViewChangeEvent = {\n        type: BusEventType.VIEW_PRE_CHANGE,\n        reason: viewChangeReason,\n        oldViewState: oldViewState,\n        newViewState: newViewState,\n        cancelViewChange: false\n      };\n      await this.serviceManager.fire(preViewChangeEvent);\n      if (preViewChangeEvent.cancelViewChange) {\n        debugLog(\"The view changing was cancelled by a view:pre:change event.\");\n        return;\n      }\n      if (!validateViewState(preViewChangeEvent.newViewState, store.getState())) {\n        return;\n      }\n      newViewState = preViewChangeEvent.newViewState;\n      store.dispatch(actions.setViewState(deepFreeze(newViewState)));\n      const viewChangeEvent = {\n        type: BusEventType.VIEW_CHANGE,\n        reason: viewChangeReason,\n        oldViewState: oldViewState,\n        newViewState: newViewState,\n        cancelViewChange: false\n      };\n      await this.serviceManager.fire(viewChangeEvent);\n      if (viewChangeEvent.cancelViewChange) {\n        store.dispatch(actions.setViewState(oldViewState));\n        debugLog(\"The view changing was cancelled by a view:change event.\");\n        return;\n      }\n      if (!validateViewState(viewChangeEvent.newViewState, store.getState())) {\n        store.dispatch(actions.setViewState(oldViewState));\n        return;\n      }\n      newViewState = viewChangeEvent.newViewState;\n      store.dispatch(actions.setViewState(deepFreeze(newViewState)));\n    } finally {\n      store.dispatch(actions.setViewChanging(false));\n    }\n  }\n  async startTour(message, startTourReason, changeViewReason) {\n    this.serviceManager.store.dispatch(actions.setTourData(message.fullMessageID));\n    const newViewState = await this.changeView(ViewType.TOUR, changeViewReason);\n    if (newViewState.tour) {\n      await this.serviceManager.fire({\n        type: BusEventType.TOUR_START,\n        reason: startTourReason\n      });\n      await this.serviceManager.fire({\n        type: BusEventType.TOUR_STEP,\n        step: this.serviceManager.store.getState().tourState.activeTourStepItems[0]\n      });\n    }\n  }\n  async endTour(reason) {\n    const {viewState: viewState} = this.serviceManager.store.getState().persistedToBrowserStorage.launcherState;\n    let newViewState = viewState;\n    if (viewState.tour) {\n      newViewState = await this.changeView(ViewType.LAUNCHER, reason);\n    }\n    if (!newViewState.tour) {\n      this.serviceManager.store.dispatch(actions.clearTourData());\n      return true;\n    }\n    return false;\n  }\n  goToSpecificTourStep(stepId) {\n    const {activeTourStepItems: activeTourStepItems} = this.serviceManager.store.getState().tourState;\n    const newStepIndex = activeTourStepItems.findIndex(stepItem => stepItem.step_id === stepId);\n    if (newStepIndex) {\n      this.changeStepInTour({\n        newStepIndex: newStepIndex\n      });\n    } else {\n      consoleError(`No step with the id \"${stepId}\" was found within the current tour. As a result, goToTourStep() did not change the current tour step.`);\n    }\n  }\n  async changeStepInTour(changeStepOptions) {\n    const {store: store} = this.serviceManager;\n    const {activeTourStepItems: activeTourStepItems} = store.getState().tourState;\n    const {activeTourCurrentStepIndex: activeTourCurrentStepIndex} = store.getState().persistedToBrowserStorage.chatState.persistedTourState;\n    let {newStepIndex: newStepIndex} = changeStepOptions;\n    if (changeStepOptions.nextStep) {\n      newStepIndex = activeTourCurrentStepIndex + 1;\n    } else if (changeStepOptions.previousStep) {\n      newStepIndex = activeTourCurrentStepIndex - 1;\n    }\n    store.dispatch(actions.changeStepInTour(newStepIndex));\n    const actualNewStepIndex = store.getState().persistedToBrowserStorage.chatState.persistedTourState.activeTourCurrentStepIndex;\n    if (actualNewStepIndex === newStepIndex) {\n      await this.serviceManager.fire({\n        type: BusEventType.TOUR_STEP,\n        step: activeTourStepItems[actualNewStepIndex]\n      });\n    } else {\n      consoleWarn(\"The tour tried to change to a step that was out of bounds for the step array, so no step change was made.\");\n    }\n  }\n  errorOccurred(error) {\n    consoleError(\"An error has occurred\", error);\n    if (error.catastrophicErrorType) {\n      this.serviceManager.store.dispatch(actions.setAppStateValue(\"catastrophicErrorType\", error.catastrophicErrorType));\n    }\n    callOnError(this.serviceManager.additionalChatParameters.onError, error);\n  }\n  async restartConversation(options = {}) {\n    const {skipHydration: skipHydration = false, endAgentConversation: endAgentConversation = true, fireEvents: fireEvents = true} = options;\n    debugLog(\"Restarting conversation\");\n    if (this.restarting) {\n      consoleWarn(\"You cannot restart a conversation while a previous restart is still pending.\");\n      return;\n    }\n    this.restarting = true;\n    try {\n      const {serviceManager: serviceManager} = this;\n      const {store: store} = serviceManager;\n      if (fireEvents) {\n        await serviceManager.fire({\n          type: BusEventType.PRE_RESTART_CONVERSATION\n        });\n      }\n      serviceManager.restartCount++;\n      if (this.hydrating) {\n        await this.hydrationPromise;\n      }\n      const currentState = store.getState();\n      const {persistedToBrowserStorage: persistedToBrowserStorage} = currentState;\n      const {viewState: viewState} = persistedToBrowserStorage.launcherState;\n      const {isConnecting: isConnecting} = currentState.agentState;\n      const {isConnected: isConnected} = currentState.persistedToBrowserStorage.chatState.agentState;\n      if ((isConnected || isConnecting) && endAgentConversation) {\n        await serviceManager.humanAgentService.endChat(true, false, false);\n      }\n      if (viewState.tour) {\n        await this.serviceManager.actions.changeView(ViewType.MAIN_WINDOW, {\n          mainWindowOpenReason: MainWindowOpenReason.CALLED_RESTART_CONVERSATION\n        }, false);\n      }\n      this.serviceManager.instance.updateAssistantInputFieldVisibility(true);\n      this.serviceManager.messageService.cancelAllMessageRequests();\n      store.dispatch(actions.restartConversation());\n      if (!skipHydration) {\n        this.hydrationPromise = null;\n      }\n      if (fireEvents) {\n        await serviceManager.fire({\n          type: BusEventType.RESTART_CONVERSATION\n        });\n      }\n      if (this.hydrating) {\n        await this.hydrationPromise;\n      }\n      if (!skipHydration && !serviceManager.store.getState().isHydrated) {\n        this.hydrationPromise = null;\n        if (store.getState().persistedToBrowserStorage.launcherState.viewState.mainWindow) {\n          await serviceManager.actions.hydrateChat();\n        }\n      } else {\n        store.dispatch(actions.chatWasHydrated());\n      }\n    } finally {\n      this.restarting = false;\n    }\n  }\n  async destroySession(keepOpenState) {\n    const {store: store} = this.serviceManager;\n    const {persistedToBrowserStorage: persistedToBrowserStorage} = store.getState();\n    const originalViewState = persistedToBrowserStorage.launcherState.viewState;\n    const newPersistedToBrowserStorage = cloneDeep(DEFAULT_PERSISTED_TO_BROWSER);\n    if (keepOpenState) {\n      newPersistedToBrowserStorage.launcherState.viewState = originalViewState;\n      if (originalViewState.tour) {\n        newPersistedToBrowserStorage.launcherState.viewState = {\n          ...originalViewState,\n          tour: false,\n          mainWindow: true\n        };\n      }\n    } else {\n      newPersistedToBrowserStorage.launcherState.viewState = VIEW_STATE_LAUNCHER_OPEN;\n    }\n    this.serviceManager.messageService.cancelAllMessageRequests();\n    this.serviceManager.userSessionStorageService.clearLauncherSession();\n    this.serviceManager.userSessionStorageService.clearChatSession();\n    this.serviceManager.store.dispatch(actions.setAppStateValue(\"persistedToBrowserStorage\", newPersistedToBrowserStorage));\n  }\n  agentEndConversation(endedByUser) {\n    return this.serviceManager.humanAgentService.endChat(endedByUser);\n  }\n  agentUpdateIsSuspended(isSuspended) {\n    this.serviceManager.store.dispatch(agentUpdateIsSuspended(isSuspended));\n  }\n  async createElementsForUserDefinedResponses(messages) {\n    await asyncForEach(Object.values(messages.allMessageItemsByID), localMessage => {\n      const originalMessage = messages.allMessagesByID[localMessage.fullMessageID];\n      return this.handleUserDefinedResponseItems(localMessage, originalMessage);\n    });\n  }\n}\n\nexport { ChatActionsImpl };\n","import cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport { asyncForEach, asArray } from \"../utils/lang/arrayUtils.js\";\n\nimport { debugStackTrace, consoleError, consoleLog, consoleWarn, isEnableDebugLog, debugLog } from \"../utils/miscUtils.js\";\n\nimport { resolvablePromise } from \"../utils/resolvablePromise.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const HANDLER_NOT_FUNCTION = \"The event handler is not a function.\";\n\nclass EventBus {\n  constructor() {\n    this.handlersByType = new Map;\n    this.eventsTypesRunning = new Set;\n    this.eventsRunningCount = 0;\n  }\n  async fire(busEvent, instance) {\n    logEvent(\"Before fire\", busEvent);\n    const {type: type} = busEvent;\n    if (!type) {\n      throw new Error(`Attempted to fire an event with no type! ${JSON.stringify(busEvent)}`);\n    }\n    function wrappedHandler(handler) {\n      const result = handler(busEvent, instance);\n      if (result && !(result instanceof Promise)) {\n        consoleWarn(`An event handler for event ${type} returned a non-promise. This might be a mistake.`, result);\n      }\n      return result;\n    }\n    if (this.eventsTypesRunning.has(type)) {\n      throw new Error(`An event of type ${type} is already running. Please make sure that you have resolved the Promises for any earlier events that were fired.`);\n    }\n    try {\n      this.eventsRunningCount++;\n      try {\n        this.eventsTypesRunning.add(type);\n        const handlersForType = this.handlersByType.get(type);\n        if (handlersForType && handlersForType.length) {\n          const handlersCopy = handlersForType.slice();\n          await asyncForEach(handlersCopy, wrappedHandler);\n        }\n      } finally {\n        this.eventsTypesRunning.delete(type);\n      }\n    } finally {\n      this.eventsRunningCount--;\n      if (this.waitForEmptyPromise && this.eventsRunningCount === 0) {\n        this.waitForEmptyPromise.doResolve();\n      }\n    }\n    logEvent(\"After fire\", busEvent);\n  }\n  fireSync(busEvent, instance) {\n    logEvent(\"Before fire\", busEvent);\n    const {type: type} = busEvent;\n    const handlersForType = this.handlersByType.get(type);\n    if (handlersForType && handlersForType.length) {\n      const handlersCopy = handlersForType.slice();\n      handlersCopy.forEach(handler => handler(busEvent, instance));\n    }\n    logEvent(\"After fire\", busEvent);\n  }\n  async waitForEmpty() {\n    if (this.eventsRunningCount === 0) {\n      return;\n    }\n    if (!this.waitForEmptyPromise) {\n      this.waitForEmptyPromise = resolvablePromise();\n    }\n    await this.waitForEmptyPromise;\n    this.waitForEmptyPromise = null;\n  }\n  on(handlers) {\n    const data = asArray(handlers);\n    data.forEach(({type: type, handler: handler}) => {\n      if (!type) {\n        throw new Error(`Attempted to listen to an event with no type: \"${type}\"!`);\n      }\n      if (typeof handler === \"function\") {\n        if (!this.handlersByType.has(type)) {\n          this.handlersByType.set(type, []);\n        }\n        const handlersForType = this.handlersByType.get(type);\n        debugStackTrace(`[EventBus] Adding ${type} event handler`, handler);\n        handlersForType.push(handler);\n      } else {\n        consoleError(HANDLER_NOT_FUNCTION, handler);\n      }\n    });\n    return this;\n  }\n  off(handlers) {\n    const data = asArray(handlers);\n    data.forEach(({type: type, handler: handler}) => {\n      const handlersForType = this.handlersByType.get(type);\n      if (handlersForType) {\n        if (handler) {\n          const index = handlersForType.indexOf(handler);\n          if (index !== -1) {\n            const removed = handlersForType.splice(index, 1);\n            debugStackTrace(`[EventBus] Removing ${type} event handlers`, removed);\n          }\n        } else {\n          debugStackTrace(`[EventBus] Removing all ${type} event handlers`);\n          this.handlersByType.set(type, []);\n        }\n      }\n    });\n    return this;\n  }\n  once(handlers) {\n    const data = asArray(handlers);\n    data.forEach(({type: type, handler: handler}) => {\n      if (typeof handler === \"function\") {\n        const onceHandler = (event, instance) => {\n          this.off({\n            type: type,\n            handler: onceHandler\n          });\n          return handler(event, instance);\n        };\n        this.on({\n          type: type,\n          handler: onceHandler\n        });\n      } else {\n        consoleError(HANDLER_NOT_FUNCTION, handler);\n      }\n    });\n    return this;\n  }\n  logListeners() {\n    this.handlersByType.forEach((listeners, type) => {\n      console.group(`Event ${type} (${listeners.length})`);\n      listeners.forEach(listener => {\n        consoleLog(\"Listener\", listener);\n      });\n      console.groupEnd();\n    });\n  }\n  clear() {\n    this.handlersByType.clear();\n    return this;\n  }\n}\n\nfunction logEvent(message, busEvent) {\n  if (isEnableDebugLog()) {\n    const eventCopy = cloneDeep(busEvent);\n    debugLog(`[EventBus] ${message}`, eventCopy);\n  }\n}\n\nexport { EventBus };\n","import actions from \"../store/actions.js\";\n\nimport { DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS } from \"../store/reducerUtils.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function createCustomPanelInstance(serviceManager) {\n  const customPanelInstance = {\n    open(options = DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS) {\n      const {store: store} = serviceManager;\n      store.dispatch(actions.setCustomPanelConfigOptions(options));\n      store.dispatch(actions.setCustomPanelOpen(true));\n    },\n    close() {\n      serviceManager.store.dispatch(actions.setCustomPanelOpen(false));\n    }\n  };\n  return Object.freeze(customPanelInstance);\n}\n\nexport { createCustomPanelInstance };\n","import { notesToLoadedHistory } from \"../schema/historyToMessages.js\";\n\nimport actions from \"../store/actions.js\";\n\nimport \"../../../types/state/AppState.js\";\n\nimport { consoleError } from \"../utils/miscUtils.js\";\n\nimport { MainWindowOpenReason } from \"../../../types/events/eventBusTypes.js\";\n\nimport { ViewType } from \"../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ class HistoryService {\n  constructor(serviceManager) {\n    this.serviceManager = serviceManager;\n  }\n  async loadHistory(useHistory) {\n    const state = this.serviceManager.store.getState();\n    const {config: config, persistedToBrowserStorage: persistedToBrowserStorage} = state;\n    const publicConfig = config.public;\n    const {viewState: viewState} = persistedToBrowserStorage.launcherState;\n    try {\n      let resultData;\n      if (useHistory) {\n        resultData = useHistory;\n      } else if (publicConfig.messaging?.customLoadHistory) {\n        const items = await publicConfig.messaging.customLoadHistory(this.serviceManager.instance);\n        const note = {\n          body: items\n        };\n        resultData = {\n          notes: [ note ]\n        };\n      }\n      if (resultData) {\n        const historyNotes = resultData?.notes;\n        return notesToLoadedHistory(historyNotes, this.serviceManager);\n      }\n      if (viewState.tour) {\n        await this.serviceManager.actions.changeView(ViewType.MAIN_WINDOW, {\n          mainWindowOpenReason: MainWindowOpenReason.SESSION_HISTORY\n        }, false);\n        this.serviceManager.store.dispatch(actions.clearTourData());\n      }\n    } catch (error) {\n      consoleError(\"An error occurred while attempting to load the conversation history\", error);\n    }\n    return null;\n  }\n}\n\nexport { HistoryService };\n","import { DEFAULT_CHAT_MESSAGES_STATE } from \"../store/reducerUtils.js\";\n\nimport { MessageErrorState } from \"../../../types/messaging/LocalMessageItem.js\";\n\nimport \"../utils/constants.js\";\n\nimport { findLast } from \"../utils/lang/arrayUtils.js\";\n\nimport { deepFreeze } from \"../utils/lang/objectUtils.js\";\n\nimport { isResponse, isRequest, isPause, isResponseWithNestedItems, THREAD_ID_MAIN, isOptionItem, isDateResponseType, isEventRequest } from \"../utils/messageUtils.js\";\n\nimport inputItemToLocalItem from \"./inputItemToLocalItem.js\";\n\nimport { outputItemToLocalItem, createLocalMessageItemsForNestedMessageItems } from \"./outputItemToLocalItem.js\";\n\nimport { BusEventType } from \"../../../types/events/eventBusTypes.js\";\n\nimport { FileStatusValue } from \"../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ async function notesToLoadedHistory(notes, serviceManager) {\n  const allLocalMessagesByID = {};\n  const allMessagesByID = {};\n  const loadingState = {\n    serviceManager: serviceManager,\n    allMessages: [],\n    allMessagesByID: allMessagesByID,\n    allLocalMessagesByID: allLocalMessagesByID,\n    threadMessagesByThreadID: {},\n    responsesByRequestID: {},\n    relatedMessageByID: {},\n    localMessagesByOriginalMessageID: {},\n    lastThreadID: null,\n    loadedHistory: {\n      messageHistory: {\n        allMessageItemsByID: allLocalMessagesByID,\n        allMessagesByID: allMessagesByID,\n        botMessageState: null\n      },\n      latestTransferToAgentResponse: null,\n      latestPanelLocalMessageItem: null\n    }\n  };\n  await notesToMessages(notes, loadingState);\n  if (!loadingState.allMessages.length) {\n    return null;\n  }\n  createLocalMessages(loadingState);\n  createChatStates(loadingState);\n  markIsLatestWelcomeNode(loadingState);\n  markSelectedOptions(loadingState);\n  return loadingState.loadedHistory;\n}\n\nasync function notesToMessages(notes, loadingState) {\n  const {allMessages: allMessages, allMessagesByID: allMessagesByID, responsesByRequestID: responsesByRequestID, relatedMessageByID: relatedMessageByID, serviceManager: serviceManager, localMessagesByOriginalMessageID: localMessagesByOriginalMessageID} = loadingState;\n  if (!notes?.length) {\n    return;\n  }\n  notes.forEach(note => {\n    const sessionHistory = note.body;\n    const pushAndPrepareMessage = historyItem => {\n      const {message: message} = historyItem;\n      if (!isEventRequest(message) && (isRequest(message) || isResponse(message))) {\n        addMessage(message, loadingState, historyItem);\n      }\n    };\n    sessionHistory.forEach(pushAndPrepareMessage);\n  });\n  for (let index = allMessages.length - 1; index >= 0; index--) {\n    const message = allMessages[index];\n    if (message.history?.file_upload_status === FileStatusValue.UPLOADING) {\n      message.history.file_upload_status = FileStatusValue.COMPLETE;\n      message.history.error_state = MessageErrorState.FAILED;\n    }\n    if (isResponse(message) && message.history.silent) {\n      allMessages.splice(index, 1);\n      delete allMessagesByID[message.id];\n    } else {\n      localMessagesByOriginalMessageID[message.id] = [];\n      if (isResponse(message) && message.request_id) {\n        responsesByRequestID[message.request_id] = message;\n      }\n      if (message.history.related_message_id) {\n        relatedMessageByID[message.history.related_message_id] = message;\n      }\n    }\n  }\n  if (!allMessages.length) {\n    return;\n  }\n  Object.freeze(allMessages);\n  const beginEvent = {\n    type: BusEventType.HISTORY_BEGIN,\n    messages: allMessages\n  };\n  await serviceManager.eventBus.fire(beginEvent, serviceManager.instance);\n  allMessages.forEach(deepFreeze);\n  await serviceManager.eventBus.fire({\n    type: BusEventType.HISTORY_END,\n    messages: allMessages\n  }, serviceManager.instance);\n}\n\nfunction addMessage(message, loadingState, historyItem) {\n  message.history = message.history || {};\n  message.history.from_history = true;\n  message.history.timestamp = new Date(historyItem.time).getTime();\n  if (message.thread_id !== THREAD_ID_MAIN) {\n    loadingState.lastThreadID = message.thread_id;\n  }\n  loadingState.allMessagesByID[message.id] = message;\n  loadingState.allMessages.push(message);\n}\n\nfunction createLocalMessages(loadingState) {\n  const {allMessages: allMessages, allLocalMessagesByID: allLocalMessagesByID, localMessagesByOriginalMessageID: localMessagesByOriginalMessageID} = loadingState;\n  allMessages.forEach(message => {\n    if (isRequest(message)) {\n      if (!message.history?.silent) {\n        const text = message.history?.label || message.input.text;\n        const localMessage = inputItemToLocalItem(message, text);\n        localMessagesByOriginalMessageID[message.id].push(localMessage);\n        allLocalMessagesByID[localMessage.ui_state.id] = localMessage;\n      }\n    } else {\n      const items = getResponseItems(message);\n      if (items?.length) {\n        items.forEach(messageItem => {\n          if (!isPause(messageItem)) {\n            const localMessage = outputItemToLocalItem(messageItem, message, false);\n            localMessagesByOriginalMessageID[message.id].push(localMessage);\n            allLocalMessagesByID[localMessage.ui_state.id] = localMessage;\n            if (isResponseWithNestedItems(localMessage.item)) {\n              const nestedLocalMessageItems = [];\n              createLocalMessageItemsForNestedMessageItems(localMessage, message, true, nestedLocalMessageItems, true);\n              nestedLocalMessageItems.forEach(localMessageItem => {\n                const localMessageID = localMessageItem.ui_state.id;\n                loadingState.loadedHistory.messageHistory.allMessageItemsByID[localMessageID] = localMessageItem;\n              });\n            }\n          }\n        });\n      }\n    }\n    addMessageToThread(message, loadingState);\n  });\n}\n\nfunction getResponseItems(message) {\n  if (isResponse(message)) {\n    return message.output.generic;\n  }\n  return null;\n}\n\nfunction addMessageToThread(message, loadingState) {\n  const {threadMessagesByThreadID: threadMessagesByThreadID} = loadingState;\n  let thread = threadMessagesByThreadID[THREAD_ID_MAIN];\n  if (!thread) {\n    thread = [];\n    threadMessagesByThreadID[THREAD_ID_MAIN] = thread;\n  }\n  thread.push(message);\n}\n\nfunction createChatStates(loadingState) {\n  const {loadedHistory: loadedHistory, threadMessagesByThreadID: threadMessagesByThreadID, localMessagesByOriginalMessageID: localMessagesByOriginalMessageID} = loadingState;\n  loadedHistory.messageHistory.botMessageState = toChatMessageState(threadMessagesByThreadID[THREAD_ID_MAIN], localMessagesByOriginalMessageID);\n}\n\nfunction toChatMessageState(messages, localMessagesByFullMessageID) {\n  const localMessageIDs = [];\n  const messageIDs = [];\n  if (messages) {\n    messages.forEach(message => {\n      messageIDs.push(message.id);\n      localMessagesByFullMessageID[message.id].forEach(localMessage => {\n        localMessageIDs.push(localMessage.ui_state.id);\n      });\n    });\n  }\n  return {\n    ...DEFAULT_CHAT_MESSAGES_STATE,\n    localMessageIDs: localMessageIDs,\n    messageIDs: messageIDs\n  };\n}\n\nfunction markIsLatestWelcomeNode(loadingState) {\n  const {responsesByRequestID: responsesByRequestID, threadMessagesByThreadID: threadMessagesByThreadID, localMessagesByOriginalMessageID: localMessagesByOriginalMessageID} = loadingState;\n  const mainThreadMessages = threadMessagesByThreadID[THREAD_ID_MAIN];\n  const welcomeRequest = findLast(mainThreadMessages, message => isRequest(message) && message.history.is_welcome_request);\n  if (welcomeRequest) {\n    const welcomeResponse = responsesByRequestID[welcomeRequest.id];\n    if (welcomeResponse) {\n      localMessagesByOriginalMessageID[welcomeResponse.id].forEach(localMessage => {\n        localMessage.ui_state.isWelcomeResponse = true;\n      });\n    }\n  }\n}\n\nfunction markSelectedOptions({allMessages: allMessages, relatedMessageByID: relatedMessageByID, localMessagesByOriginalMessageID: localMessagesByOriginalMessageID}) {\n  allMessages.forEach(message => {\n    if (isResponse(message)) {\n      localMessagesByOriginalMessageID[message.id].forEach(localMessage => {\n        if (isOptionItem(localMessage.item)) {\n          const relatedRequest = relatedMessageByID[message.id];\n          if (isRequest(relatedRequest)) {\n            localMessage.ui_state.optionSelected = relatedRequest;\n          }\n        } else if (isDateResponseType(localMessage)) {\n          const relatedRequest = relatedMessageByID[message.id];\n          if (isRequest(relatedRequest)) {\n            localMessage.ui_state.originalUserText = relatedRequest.history.label;\n          }\n        }\n      });\n    }\n  });\n}\n\nexport { notesToLoadedHistory };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nclass MessageLoadingManager {\n  start(onExceededMaxSilentLoading, onEnd, onTimeout, msMaxSilentLoading, msMaxAttempt) {\n    this.hasExceededMaxSilentLoading = false;\n    this.onEnd = onEnd;\n    this.onSilentLoading = setTimeout(() => {\n      this.hasExceededMaxSilentLoading = true;\n      onExceededMaxSilentLoading();\n    }, msMaxSilentLoading);\n    this.onMaxAttempt = setTimeout(() => {\n      onTimeout();\n    }, msMaxAttempt);\n  }\n  end() {\n    if (this.onMaxAttempt) {\n      clearTimeout(this.onMaxAttempt);\n    }\n    if (this.onSilentLoading) {\n      clearTimeout(this.onSilentLoading);\n    }\n    if (this.onEnd) {\n      this.onEnd(this.hasExceededMaxSilentLoading);\n    }\n    this.hasExceededMaxSilentLoading = null;\n    this.onEnd = null;\n  }\n}\n\nexport { MessageLoadingManager };\n","import cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport inputItemToLocalItem from \"../schema/inputItemToLocalItem.js\";\n\nimport { createLocalMessageForInlineError } from \"../schema/outputItemToLocalItem.js\";\n\nimport actions from \"../store/actions.js\";\n\nimport { MessageErrorState } from \"../../../types/messaging/LocalMessageItem.js\";\n\nimport { deepFreeze } from \"../utils/lang/objectUtils.js\";\n\nimport { MessageLoadingManager } from \"../utils/messageServiceUtils.js\";\n\nimport { getLastBotResponseWithContext, THREAD_ID_MAIN } from \"../utils/messageUtils.js\";\n\nimport { debugLog, consoleError, safeFetchTextWithTimeout } from \"../utils/miscUtils.js\";\n\nimport { resolvablePromise } from \"../utils/resolvablePromise.js\";\n\nimport { MessageInputType } from \"../../../types/messaging/Messages.js\";\n\nimport { MessageSendSource, BusEventType } from \"../../../types/events/eventBusTypes.js\";\n\nimport { OnErrorType } from \"../../../types/config/PublicConfig.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst MS_BETWEEN_RETRIES = [ 1e3, 3e3, 5e3 ];\n\nconst MS_MAX_ATTEMPT = 150 * 1e3;\n\nconst MS_MAX_SILENT_ERROR = 6e3;\n\nconst MS_MAX_SILENT_LOADING = 4e3;\n\nvar RetryType;\n\n(function(RetryType) {\n  RetryType[RetryType[\"SILENT\"] = 1] = \"SILENT\";\n  RetryType[RetryType[\"VISIBLE\"] = 2] = \"VISIBLE\";\n})(RetryType || (RetryType = {}));\n\nclass MessageService {\n  constructor(serviceManager, publicConfig) {\n    this.pendingLocale = false;\n    this.localeIsExplicit = false;\n    this.serviceManager = serviceManager;\n    this.messageLoadingManager = new MessageLoadingManager;\n    this.queue = {\n      waiting: [],\n      current: null\n    };\n    const timeoutOverride = publicConfig.messaging?.messageTimeoutSecs;\n    this.timeoutMS = timeoutOverride ? timeoutOverride * 1e3 : MS_MAX_ATTEMPT;\n  }\n  async processSuccess(current, received) {\n    const {requestOptions: requestOptions, isProcessed: isProcessed} = current;\n    const isWelcomeNode = Boolean(current.message.history.is_welcome_request);\n    if (isProcessed) {\n      return;\n    }\n    this.setMessageErrorState(current, MessageErrorState.NONE);\n    const {message: message} = current;\n    if (received) {\n      if (message.input.message_type !== MessageInputType.EVENT) {\n        if (!isWelcomeNode) {\n          this.messageLoadingManager.end();\n        }\n        received.history = received.history || {};\n        received.history.timestamp = received.history.timestamp || Date.now();\n        current.trackData.lastRequestTime = Date.now() - current.timeLastRequest;\n        current.trackData.totalRequestTime = Date.now() - current.timeFirstRequest;\n        await this.serviceManager.actions.receive(received, isWelcomeNode, message, requestOptions);\n      }\n      this.messageLoadingManager.end();\n    }\n    if (current.isProcessed) {\n      return;\n    }\n    {\n      current.sendMessagePromise.doResolve();\n      current.isProcessed = true;\n    }\n    this.moveToNextQueueItem();\n  }\n  addErrorMessage() {\n    const {store: store} = this.serviceManager;\n    const errorMessage = store.getState().languagePack.errors_singleMessage;\n    const {originalMessage: originalMessage, localMessage: localMessage} = createLocalMessageForInlineError(errorMessage);\n    store.dispatch(actions.addLocalMessageItem(localMessage, originalMessage, true));\n  }\n  async resendMessage(message, localMessageID) {\n    await this.send(cloneDeep(message), MessageSendSource.HYDRATE_RESEND, localMessageID, {\n      skipQueue: true,\n      silent: true\n    });\n  }\n  sendToAssistantAndUpdateErrorState(current) {\n    if (current.isProcessed) {\n      return;\n    }\n    this.sendToAssistant(current);\n    const now = Date.now();\n    const msSinceStarted = now - current.timeFirstRequest;\n    const isSilentErrorWindow = MS_MAX_SILENT_ERROR > msSinceStarted;\n    const type = isSilentErrorWindow ? RetryType.SILENT : RetryType.VISIBLE;\n    if (type === RetryType.VISIBLE) {\n      this.setMessageErrorState(current, MessageErrorState.RETRYING);\n      this.queue.waiting.forEach(waitingMessage => {\n        this.setMessageErrorState(waitingMessage, MessageErrorState.WAITING);\n      });\n    }\n  }\n  async processError(pendingRequest, resultText, allowRetry) {\n    const {message: message, timeFirstRequest: timeFirstRequest, timeLastRequest: timeLastRequest, tryCount: tryCount, isProcessed: isProcessed, trackData: trackData, requestOptions: requestOptions} = pendingRequest;\n    const isWelcome = message.history.is_welcome_request;\n    const now = Date.now();\n    const msSinceStarted = now - timeFirstRequest;\n    const isInAttemptWindow = this.timeoutMS > msSinceStarted && tryCount < MS_BETWEEN_RETRIES.length;\n    if (isProcessed) {\n      return;\n    }\n    trackData.lastRequestTime = Date.now() - timeLastRequest;\n    trackData.totalRequestTime = Date.now() - timeFirstRequest;\n    if (isInAttemptWindow && allowRetry) {\n      trackData.numErrors++;\n      const retryDelay = MS_BETWEEN_RETRIES[pendingRequest.tryCount++];\n      setTimeout(() => {\n        this.sendToAssistantAndUpdateErrorState(pendingRequest);\n      }, retryDelay);\n    } else {\n      let catastrophicErrorType = false;\n      if (isWelcome) {\n        catastrophicErrorType = true;\n      } else if (requestOptions.silent) {\n        this.addErrorMessage();\n      }\n      this.serviceManager.actions.errorOccurred({\n        errorType: OnErrorType.MESSAGE_COMMUNICATION,\n        message: \"An error occurred sending a message\",\n        otherData: resultText,\n        catastrophicErrorType: catastrophicErrorType\n      });\n      this.rejectFinalErrorOnMessage(pendingRequest, resultText);\n    }\n  }\n  rejectFinalErrorOnMessage(pendingRequest, resultText = \"An undefined error occurred trying to send your message.\") {\n    const {sendMessagePromise: sendMessagePromise} = pendingRequest;\n    this.setMessageErrorState(pendingRequest, MessageErrorState.FAILED);\n    const {message: message} = pendingRequest;\n    if (pendingRequest === this.queue.current && message.input.message_type !== MessageInputType.EVENT && !message.history.is_welcome_request) {\n      this.messageLoadingManager.end();\n    }\n    sendMessagePromise.doReject(new Error(resultText));\n    pendingRequest.isProcessed = true;\n    if (pendingRequest === this.queue.current) {\n      this.moveToNextQueueItem();\n    }\n  }\n  async sendToAssistant(current) {\n    const {store: store} = this.serviceManager;\n    const state = store.getState();\n    const {customSendMessage: customSendMessage} = state.config.public.messaging;\n    current.timeLastRequest = Date.now();\n    if (current.isProcessed) {\n      return;\n    }\n    try {\n      const message = cloneDeep(current.message);\n      current.message = message;\n      store.dispatch(actions.updateMessage(message));\n      const controller = new AbortController;\n      current.sendMessageController = controller;\n      debugLog(\"Called customSendMessage\", message);\n      await customSendMessage(message, {\n        signal: controller.signal\n      }, this.serviceManager.instance);\n      await this.processSuccess(current, null);\n    } catch (error) {\n      consoleError(\"An error occurred while sending a message\", error);\n      const resultText = error && (typeof error === \"string\" ? error : JSON.stringify(error)) || \"There was an unidentified error.\";\n      this.processError(current, resultText, !customSendMessage);\n    }\n  }\n  async runQueueIfReady() {\n    if (!this.queue.current && this.queue.waiting.length > 0) {\n      const {eventBus: eventBus, store: store} = this.serviceManager;\n      this.clearCurrentQueueItem();\n      this.queue.current = this.queue.waiting.shift();\n      const {current: current} = this.queue;\n      const {message: message, source: source} = current;\n      const state = store.getState();\n      const {config: config} = store.getState();\n      const {public: publicConfig} = config;\n      current.timeFirstRequest = Date.now();\n      if (message.input.message_type !== MessageInputType.EVENT) {\n        const lastResponse = getLastBotResponseWithContext(state);\n        if (lastResponse) {\n          message.thread_id = THREAD_ID_MAIN;\n        }\n        if (!message.history.is_welcome_request) {\n          const LOADING_INDICATOR_TIMER = !publicConfig.messaging?.messageLoadingIndicatorTimeoutSecs && publicConfig.messaging?.messageLoadingIndicatorTimeoutSecs !== 0 ? MS_MAX_SILENT_LOADING : publicConfig.messaging.messageLoadingIndicatorTimeoutSecs * 1e3;\n          this.messageLoadingManager.start(() => {\n            this.serviceManager.store.dispatch(actions.addIsLoadingCounter(1));\n          }, didExceedMaxLoading => {\n            if (didExceedMaxLoading) {\n              this.serviceManager.store.dispatch(actions.addIsLoadingCounter(-1));\n            }\n          }, () => {\n            this.cancelMessageRequestByID(message.id, true);\n          }, LOADING_INDICATOR_TIMER, this.timeoutMS);\n        }\n        if (current.isProcessed) {\n          return;\n        }\n        const originalUserText = message.history?.label || message.input.text;\n        await eventBus.fire({\n          type: BusEventType.PRE_SEND,\n          data: message,\n          source: source\n        }, this.serviceManager.instance);\n        if (current.isProcessed) {\n          return;\n        }\n        const localMessage = inputItemToLocalItem(message, originalUserText, current.localMessageID);\n        if (!message.history.silent) {\n          store.dispatch(actions.updateLocalMessageItem(localMessage));\n          store.dispatch(actions.updateMessage(message));\n        }\n        deepFreeze(message);\n        await eventBus.fire({\n          type: BusEventType.SEND,\n          data: message,\n          source: source\n        }, this.serviceManager.instance);\n      }\n      this.sendToAssistant(current);\n    }\n  }\n  addToMessageQueue(message, source, localMessageID, sendMessagePromise, requestOptions = {}) {\n    const newPendingMessage = {\n      localMessageID: localMessageID,\n      message: message,\n      sendMessagePromise: sendMessagePromise,\n      requestOptions: requestOptions || {},\n      timeFirstRequest: 0,\n      timeLastRequest: 0,\n      trackData: {\n        numErrors: 0,\n        lastRequestTime: 0,\n        totalRequestTime: 0\n      },\n      tryCount: 0,\n      isProcessed: false,\n      source: source\n    };\n    this.queue.waiting.push(newPendingMessage);\n    if (this.queue.current) {\n      if (message.history?.error_state === MessageErrorState.RETRYING) {\n        this.setMessageErrorState(newPendingMessage, MessageErrorState.WAITING);\n      }\n    }\n  }\n  clearCurrentQueueItem() {\n    if (this.queue.current) {\n      this.queue.current = null;\n    }\n  }\n  moveToNextQueueItem() {\n    this.clearCurrentQueueItem();\n    this.runQueueIfReady();\n  }\n  setMessageErrorState(pendingRequest, errorState) {\n    const {message: message} = pendingRequest;\n    const {allMessagesByID: allMessagesByID} = this.serviceManager.store.getState();\n    const messageToUpdate = allMessagesByID[message.id];\n    if (messageToUpdate) {\n      const currentState = messageToUpdate.history?.error_state;\n      const errorSame = currentState === errorState || errorState === MessageErrorState.NONE && !currentState;\n      if (!errorSame) {\n        let announceMessageID;\n        switch (errorState) {\n         case MessageErrorState.FAILED:\n          {\n            announceMessageID = \"errors_ariaMessageFailed\";\n            break;\n          }\n        }\n        if (announceMessageID) {\n          this.serviceManager.store.dispatch(actions.announceMessage({\n            messageID: announceMessageID\n          }));\n        }\n        this.serviceManager.store.dispatch(actions.setMessageErrorState(message.id, errorState));\n        const {allMessagesByID: allMessagesByID} = this.serviceManager.store.getState();\n        pendingRequest.message = allMessagesByID[message.id];\n      }\n    }\n  }\n  send(message, source, localMessageID, requestOptions) {\n    message.history.timestamp = message.history.timestamp || Date.now();\n    message.input = message.input || {};\n    message.input.message_type = message.input.message_type || MessageInputType.TEXT;\n    const sendMessagePromise = resolvablePromise();\n    this.addToMessageQueue(message, source, localMessageID, sendMessagePromise, requestOptions);\n    this.runQueueIfReady();\n    return sendMessagePromise;\n  }\n  cancelAllMessageRequests() {\n    while (this.queue.waiting.length) {\n      this.cancelMessageRequestByID(this.queue.waiting[0].message.id, false);\n    }\n    if (this.queue.current) {\n      this.cancelMessageRequestByID(this.queue.current.message.id, false);\n      this.clearCurrentQueueItem();\n    }\n  }\n  async cancelMessageRequestByID(messageID, logError) {\n    let pendingRequest;\n    if (this.queue.current?.message.id === messageID) {\n      pendingRequest = this.queue.current;\n    } else {\n      const index = this.queue.waiting.findIndex(item => item.message.id === messageID);\n      if (index !== -1) {\n        pendingRequest = this.queue.waiting[index];\n        this.queue.waiting.splice(index, 1);\n      }\n    }\n    if (pendingRequest) {\n      const {lastResponse: lastResponse, sendMessageController: sendMessageController} = pendingRequest;\n      sendMessageController?.abort(\"Message was cancelled\");\n      this.rejectFinalErrorOnMessage(pendingRequest, \"Message was cancelled\");\n      if (logError) {\n        this.serviceManager.actions.errorOccurred({\n          errorType: OnErrorType.MESSAGE_COMMUNICATION,\n          message: \"Message was cancelled\",\n          otherData: await safeFetchTextWithTimeout(lastResponse)\n        });\n      }\n    }\n  }\n}\n\nexport { MessageService as default };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nclass NamespaceService {\n  constructor(namespace) {\n    this.originalName = namespace;\n    this.attributeSafe = namespace;\n    this.suffix = getSuffix(namespace);\n  }\n}\n\nfunction getSuffix(namespace) {\n  const computedName = computeNamespaceName(namespace);\n  return computedName?.length ? `--${namespace}` : \"\";\n}\n\nfunction computeNamespaceName(namespace) {\n  return namespace ? namespace.trim() : \"\";\n}\n\nexport { NamespaceService };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nclass ServiceManager {\n  constructor() {\n    this.userDefinedElementRegistry = new Map;\n    this.restartCount = 0;\n  }\n  async fire(busEvent) {\n    return this.eventBus.fire(busEvent, this.instance);\n  }\n}\n\nexport { ServiceManager };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nlet innerStorage = {};\n\nconst storage = {\n  getItem(key) {\n    return innerStorage[key];\n  },\n  setItem(key, value) {\n    innerStorage[key] = value;\n  },\n  removeItem(key) {\n    delete innerStorage[key];\n  },\n  length: Object.keys(innerStorage).length,\n  clear() {\n    innerStorage = {};\n  },\n  key(index) {\n    return Object.keys(innerStorage)[index];\n  }\n};\n\nexport { storage as default };\n","import { VERSION } from \"../environmentVariables.js\";\n\nimport { IS_SESSION_STORAGE } from \"../utils/browserUtils.js\";\n\nimport { consoleError } from \"../utils/miscUtils.js\";\n\nimport storage$1 from \"./mockStorage.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst storage = IS_SESSION_STORAGE() ? window.sessionStorage : storage$1;\n\nclass UserSessionStorageService {\n  constructor(serviceManager) {\n    this.serviceManager = serviceManager;\n    this.prefix = `CARBON_CHAT_SESSION${this.serviceManager?.namespace?.suffix || \"\"}`;\n  }\n  loadChatSession() {\n    try {\n      const chatSessionString = storage.getItem(this.getChatSessionKey());\n      const chatSession = chatSessionString ? JSON.parse(chatSessionString) : null;\n      if (chatSession?.version === VERSION) {\n        return chatSession;\n      }\n      this.clearChatSession();\n      return null;\n    } catch (error) {\n      this.clearChatSession();\n      return null;\n    }\n  }\n  loadLauncherSession() {\n    try {\n      const launcherSessionString = storage.getItem(this.getLauncherSessionKey());\n      const launcherSession = launcherSessionString ? JSON.parse(launcherSessionString) : null;\n      if (launcherSession?.version === VERSION) {\n        launcherSession.wasLoadedFromBrowser = true;\n        return launcherSession;\n      }\n      this.clearLauncherSession();\n      return null;\n    } catch (error) {\n      this.clearLauncherSession();\n      return null;\n    }\n  }\n  persistChatSession(session) {\n    try {\n      storage.setItem(this.getChatSessionKey(), JSON.stringify(session));\n    } catch (error) {\n      consoleError(\"Error in persistChatSession\", error);\n    }\n  }\n  persistLauncherSession(session) {\n    try {\n      storage.setItem(this.getLauncherSessionKey(), JSON.stringify(session));\n    } catch (error) {\n      consoleError(\"Error in persistLauncherSession\", error);\n    }\n  }\n  clearChatSession() {\n    try {\n      storage.removeItem(this.getChatSessionKey());\n    } catch (error) {\n      consoleError(\"Error in clearChatSession\", error);\n    }\n  }\n  clearLauncherSession() {\n    try {\n      storage.removeItem(this.getLauncherSessionKey());\n    } catch (error) {\n      consoleError(\"Error in clearLauncherSession\", error);\n    }\n  }\n  getChatSessionKey() {\n    return this.prefix;\n  }\n  getLauncherSessionKey() {\n    return this.prefix;\n  }\n}\n\nexport { UserSessionStorageService };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction replaceCurrentArrayValue(currentValue, newValue) {\n  if (Array.isArray(newValue)) {\n    return newValue;\n  }\n  return undefined;\n}\n\nexport { replaceCurrentArrayValue };\n","import { HA_END_CHAT, HA_UPDATE_FILE_UPLOAD_IN_PROGRESS, HA_SET_IS_SCREEN_SHARING, HA_UPDATE_CAPABILITIES, HA_SET_AGENT_LEFT_CHAT, HA_UPDATE_IS_TYPING, HA_UPDATE_IS_SUSPENDED, HA_SET_PERSISTED_STATE, HA_SET_AGENT_JOINED, HA_SET_SHOW_SCREEN_SHARE_REQUEST, HA_SET_AGENT_AVAILABILITY, HA_SET_IS_RECONNECTING, HA_SET_IS_CONNECTING } from \"./agentActions.js\";\n\nimport { applyLocalMessageUIState } from \"./reducerUtils.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const agentReducers = {\n  [HA_SET_IS_CONNECTING]: (state, action) => {\n    const {isConnecting: isConnecting, localMessageID: localMessageID} = action;\n    return {\n      ...state,\n      agentState: {\n        ...state.agentState,\n        isConnecting: isConnecting,\n        activeLocalMessageID: localMessageID,\n        numUnreadMessages: isConnecting ? 0 : state.agentState.numUnreadMessages\n      },\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          agentState: {\n            ...state.persistedToBrowserStorage.chatState.agentState,\n            isSuspended: isConnecting ? state.persistedToBrowserStorage.chatState.agentState.isSuspended : false\n          }\n        }\n      }\n    };\n  },\n  [HA_SET_IS_RECONNECTING]: (state, action) => {\n    const {isReconnecting: isReconnecting} = action;\n    return {\n      ...state,\n      agentState: {\n        ...state.agentState,\n        isReconnecting: isReconnecting\n      }\n    };\n  },\n  [HA_SET_AGENT_AVAILABILITY]: (state, action) => {\n    if (!state.agentState.isConnecting) {\n      return state;\n    }\n    return {\n      ...state,\n      agentState: {\n        ...state.agentState,\n        availability: state.agentState.isConnecting ? action.availability : null\n      }\n    };\n  },\n  [HA_SET_SHOW_SCREEN_SHARE_REQUEST]: (state, {showRequest: showRequest}) => ({\n    ...state,\n    agentState: {\n      ...state.agentState,\n      showScreenShareRequest: showRequest\n    }\n  }),\n  [HA_SET_AGENT_JOINED]: (state, action) => {\n    const agentProfiles = {\n      ...state.persistedToBrowserStorage.chatState.agentState.agentProfiles\n    };\n    const {agentProfile: agentProfile} = action;\n    if (agentProfile) {\n      agentProfiles[agentProfile.id] = agentProfile;\n    }\n    return {\n      ...state,\n      agentState: {\n        ...state.agentState,\n        isConnecting: false,\n        isReconnecting: false,\n        availability: null\n      },\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          agentState: {\n            ...state.persistedToBrowserStorage.chatState.agentState,\n            isConnected: true,\n            agentProfile: agentProfile,\n            agentProfiles: agentProfiles\n          }\n        }\n      }\n    };\n  },\n  [HA_SET_PERSISTED_STATE]: (state, action) => ({\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        agentState: {\n          ...state.persistedToBrowserStorage.chatState.agentState,\n          serviceDeskState: action.state\n        }\n      }\n    }\n  }),\n  [HA_UPDATE_IS_SUSPENDED]: (state, action) => {\n    if (!state.agentState.isConnecting && !state.persistedToBrowserStorage.chatState.agentState.isConnected) {\n      return state;\n    }\n    return {\n      ...state,\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          agentState: {\n            ...state.persistedToBrowserStorage.chatState.agentState,\n            isSuspended: action.isSuspended\n          }\n        }\n      }\n    };\n  },\n  [HA_UPDATE_IS_TYPING]: (state, action) => ({\n    ...state,\n    agentState: {\n      ...state.agentState,\n      isAgentTyping: action.isTyping\n    }\n  }),\n  [HA_SET_AGENT_LEFT_CHAT]: state => ({\n    ...state,\n    botMessageState: {\n      ...state.botMessageState\n    },\n    agentState: {\n      ...state.agentState,\n      isAgentTyping: false\n    },\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        agentState: {\n          ...state.persistedToBrowserStorage.chatState.agentState,\n          agentProfile: null\n        }\n      }\n    }\n  }),\n  [HA_UPDATE_CAPABILITIES]: (state, action) => {\n    const newInputState = {\n      ...state.agentState.inputState,\n      ...action.capabilities\n    };\n    if (!newInputState.allowFileUploads) {\n      newInputState.files = [];\n    }\n    return {\n      ...state,\n      agentState: {\n        ...state.agentState,\n        inputState: newInputState\n      }\n    };\n  },\n  [HA_SET_IS_SCREEN_SHARING]: (state, {isSharing: isSharing}) => ({\n    ...state,\n    agentState: {\n      ...state.agentState,\n      isScreenSharing: isSharing\n    }\n  }),\n  [HA_UPDATE_FILE_UPLOAD_IN_PROGRESS]: (state, action) => ({\n    ...state,\n    agentState: {\n      ...state.agentState,\n      fileUploadInProgress: action.fileUploadInProgress\n    }\n  }),\n  [HA_END_CHAT]: state => {\n    let newState = applyLocalMessageUIState(state, state.agentState.activeLocalMessageID, \"wasAgentChatEnded\", true);\n    newState = {\n      ...newState,\n      agentState: {\n        ...newState.agentState,\n        isConnecting: false,\n        isReconnecting: false,\n        availability: null,\n        activeLocalMessageID: null,\n        isAgentTyping: false,\n        inputState: {\n          ...newState.agentState.inputState,\n          isReadonly: false\n        }\n      },\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          agentState: {\n            ...state.persistedToBrowserStorage.chatState.agentState,\n            isConnected: false,\n            isSuspended: false,\n            agentProfile: null\n          }\n        }\n      }\n    };\n    return newState;\n  }\n};\n\nexport { agentReducers };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction populateTourStepItems(state) {\n  const {activeTourID: activeTourID} = state.persistedToBrowserStorage.chatState.persistedTourState;\n  if (activeTourID) {\n    const originalMessage = state.allMessagesByID[activeTourID];\n    const tourMessageItem = originalMessage?.output?.generic?.find(message => Boolean(message.user_defined?.steps));\n    if (tourMessageItem) {\n      return {\n        ...state,\n        tourState: {\n          ...state.tourState,\n          activeTourStepItems: tourMessageItem.user_defined?.steps\n        }\n      };\n    }\n  }\n  return clearTourState(state);\n}\n\nfunction clearTourState(state) {\n  return {\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        persistedTourState: {\n          activeTourID: null,\n          activeTourCurrentStepIndex: null\n        }\n      },\n      launcherState: {\n        ...state.persistedToBrowserStorage.launcherState,\n        activeTour: false\n      }\n    },\n    tourState: {\n      ...state.tourState,\n      activeTourStepItems: null\n    }\n  };\n}\n\nexport { clearTourState, populateTourStepItems };\n","import merge from \"lodash-es/merge.js\";\n\nimport mergeWith from \"lodash-es/mergeWith.js\";\n\nimport { outputItemToLocalItem } from \"../schema/outputItemToLocalItem.js\";\n\nimport \"../utils/constants.js\";\n\nimport { replaceCurrentArrayValue } from \"../utils/customizers.js\";\n\nimport { streamItemID, isResponse, isRequest } from \"../utils/messageUtils.js\";\n\nimport { UPDATE_MAIN_HEADER_AVATAR, SET_STREAM_ID, SET_STOP_STREAMING_BUTTON_DISABLED, SET_STOP_STREAMING_BUTTON_VISIBLE, UPDATE_MAX_VISIBLE_HEADER_OBJECTS, UPDATE_CHAT_HEADER_CONFIG, STREAMING_ADD_CHUNK, STREAMING_MERGE_HISTORY, STREAMING_START, SET_RESPONSE_PANEL_CONTENT, SET_RESPONSE_PANEL_IS_OPEN, ADD_NESTED_MESSAGES, FILE_UPLOAD_INPUT_ERROR, CLEAR_INPUT_FILES, REMOVE_ALL_NOTIFICATIONS, REMOVE_NOTIFICATIONS, ADD_NOTIFICATION, REMOVE_LOCAL_MESSAGE_ITEM, REMOVE_INPUT_FILE, ADD_INPUT_FILE, SET_IS_BROWSER_PAGE_VISIBLE, UPDATE_INPUT_STATE, CHANGE_STEP_IN_TOUR, CLEAR_TOUR_DATA, SET_TOUR_DATA, SET_CUSTOM_PANEL_OPTIONS, SET_CUSTOM_PANEL_OPEN, SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN, CLOSE_IFRAME_PANEL, OPEN_IFRAME_CONTENT, SET_LAUNCHER_MINIMIZED, SET_CHAT_MESSAGES_PROPERTY, SET_LAUNCHER_CONFIG_PROPERTY, SET_LAUNCHER_PROPERTY, UPDATE_LAUNCHER_CONFIG, TOGGLE_HOME_SCREEN, SET_HOME_SCREEN_IS_OPEN, ACCEPTED_DISCLAIMER, ANNOUNCE_MESSAGE, MERGE_HISTORY, SET_MESSAGE_HISTORY_PROPERTY, SET_MESSAGE_UI_PROPERTY, UPDATE_HOME_SCREEN_CONFIG, UPDATE_CSS_VARIABLES, UPDATE_MAIN_HEADER_TITLE, UPDATE_LAUNCHER_AVATAR_URL, UPDATE_BOT_AVATAR_URL, UPDATE_BOT_NAME, SET_INITIAL_VIEW_CHANGE_COMPLETE, SET_VIEW_CHANGING, SET_VIEW_STATE, UPDATE_HAS_SENT_NON_WELCOME_MESSAGE, UPDATE_PERSISTED_CHAT_STATE, SET_APP_STATE_VALUE, ADD_IS_HYDRATING_COUNTER, ADD_IS_LOADING_COUNTER, ADD_IS_TYPING_COUNTER, MESSAGE_SET_OPTION_SELECTED, ADD_MESSAGE, UPDATE_MESSAGE, UPDATE_LOCAL_MESSAGE_ITEM, REMOVE_MESSAGES, ADD_LOCAL_MESSAGE_ITEM, HYDRATE_MESSAGE_HISTORY, RESTART_CONVERSATION, HYDRATE_CHAT, CHANGE_STATE } from \"./actions.js\";\n\nimport { agentReducers } from \"./agentReducers.js\";\n\nimport { setHomeScreenOpenState, applyFullMessage, applyBotMessageState, applyLocalMessageUIState, handleViewStateChange, DEFAULT_CUSTOM_PANEL_STATE, DEFAULT_CITATION_PANEL_STATE, DEFAULT_IFRAME_PANEL_STATE } from \"./reducerUtils.js\";\n\nimport { clearTourState, populateTourStepItems } from \"./tourReducerUtils.js\";\n\nimport { AgentMessageType } from \"../../../types/messaging/Messages.js\";\n\nimport { FileStatusValue, LauncherType } from \"../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst EXCLUDE_AGENT_UNREAD = new Set([ AgentMessageType.USER_ENDED_CHAT, AgentMessageType.CHAT_WAS_ENDED, AgentMessageType.RELOAD_WARNING ]);\n\nconst reducers = {\n  [CHANGE_STATE]: (state, action) => merge({}, state, action.partialState),\n  [HYDRATE_CHAT]: state => ({\n    ...state,\n    isHydrated: true\n  }),\n  [RESTART_CONVERSATION]: state => {\n    let newState = {\n      ...state,\n      botMessageState: {\n        ...state.botMessageState,\n        localMessageIDs: [],\n        messageIDs: [],\n        isTypingCounter: 0,\n        isScrollAnchored: false\n      },\n      allMessageItemsByID: {},\n      allMessagesByID: {},\n      iFramePanelState: {\n        ...DEFAULT_IFRAME_PANEL_STATE\n      },\n      viewSourcePanelState: {\n        ...DEFAULT_CITATION_PANEL_STATE\n      },\n      customPanelState: {\n        ...DEFAULT_CUSTOM_PANEL_STATE\n      },\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          homeScreenState: {\n            ...state.persistedToBrowserStorage.chatState.homeScreenState,\n            showBackToBot: false\n          }\n        }\n      },\n      isHydrated: false,\n      catastrophicErrorType: null\n    };\n    newState = clearTourState(newState);\n    if (newState.homeScreenConfig.is_on) {\n      newState = setHomeScreenOpenState(newState, true);\n    }\n    return newState;\n  },\n  [HYDRATE_MESSAGE_HISTORY]: (state, action) => {\n    let newState = {\n      ...state,\n      ...action.messageHistory\n    };\n    if (state.persistedToBrowserStorage.chatState.persistedTourState.activeTourID) {\n      newState = populateTourStepItems(newState);\n    }\n    return newState;\n  },\n  [ADD_LOCAL_MESSAGE_ITEM]: (state, action) => {\n    const {messageItem: messageItem, message: message, addMessage: addMessage, addAfterID: addAfterID} = action;\n    const {id: id} = messageItem.ui_state;\n    const isSilent = message.history.silent;\n    let newState = state;\n    if (addMessage) {\n      newState = applyFullMessage(newState, message);\n    }\n    const currentIndex = newState.botMessageState.localMessageIDs.findIndex(existingID => existingID === id);\n    const newLocalMessageIDs = [ ...newState.botMessageState.localMessageIDs ];\n    let insertAtIndex = currentIndex;\n    if (currentIndex !== -1) {\n      newLocalMessageIDs.splice(currentIndex, 1);\n    } else {\n      insertAtIndex = newLocalMessageIDs.length;\n    }\n    if (addAfterID) {\n      const afterIDIndex = newLocalMessageIDs.findIndex(existingID => existingID === addAfterID);\n      if (afterIDIndex !== -1) {\n        insertAtIndex = afterIDIndex + 1;\n      }\n    }\n    newLocalMessageIDs.splice(insertAtIndex, 0, id);\n    if (!isSilent) {\n      newState = {\n        ...newState,\n        allMessageItemsByID: {\n          ...newState.allMessageItemsByID,\n          [id]: messageItem\n        },\n        botMessageState: {\n          ...newState.botMessageState,\n          localMessageIDs: newLocalMessageIDs\n        }\n      };\n      if (newState.persistedToBrowserStorage.chatState.homeScreenState.isHomeScreenOpen) {\n        newState = setHomeScreenOpenState(newState, false);\n      }\n      const isBotMessage = !messageItem.item.agent_message_type;\n      const isMainWindowOpen = state.persistedToBrowserStorage.launcherState.viewState.mainWindow;\n      if (!isBotMessage && (!isMainWindowOpen || !state.isBrowserPageVisible)) {\n        const fromAgent = !isRequest(message);\n        if (fromAgent && !EXCLUDE_AGENT_UNREAD.has(messageItem.item.agent_message_type)) {\n          newState = {\n            ...newState,\n            agentState: {\n              ...newState.agentState,\n              numUnreadMessages: newState.agentState.numUnreadMessages + 1\n            }\n          };\n        }\n      }\n    }\n    return newState;\n  },\n  [REMOVE_MESSAGES]: (state, {messageIDs: messageIDs}) => {\n    const idsSet = new Set(messageIDs);\n    const newAllMessages = {\n      ...state.allMessagesByID\n    };\n    const newAllMessageItems = {\n      ...state.allMessageItemsByID\n    };\n    const newMessageIDs = state.botMessageState.messageIDs.filter(messageID => !idsSet.has(messageID));\n    const newMessageItemsIDs = state.botMessageState.localMessageIDs.filter(messageItemID => {\n      const messageItem = newAllMessageItems[messageItemID];\n      const removeItem = idsSet.has(messageItem?.fullMessageID);\n      if (removeItem) {\n        delete newAllMessageItems[messageItemID];\n      }\n      return !removeItem;\n    });\n    messageIDs.forEach(messageID => {\n      delete newAllMessages[messageID];\n    });\n    const newState = {\n      ...state,\n      allMessagesByID: newAllMessages,\n      allMessageItemsByID: newAllMessageItems,\n      botMessageState: {\n        ...state.botMessageState,\n        messageIDs: newMessageIDs,\n        localMessageIDs: newMessageItemsIDs\n      }\n    };\n    return newState;\n  },\n  [UPDATE_LOCAL_MESSAGE_ITEM]: (state, action) => {\n    const {messageItem: messageItem} = action;\n    return {\n      ...state,\n      allMessageItemsByID: {\n        ...state.allMessageItemsByID,\n        [messageItem.ui_state.id]: messageItem\n      }\n    };\n  },\n  [UPDATE_MESSAGE]: (state, action) => {\n    const {message: message} = action;\n    return {\n      ...state,\n      allMessagesByID: {\n        ...state.allMessagesByID,\n        [message.id]: message\n      }\n    };\n  },\n  [ADD_MESSAGE]: (state, action) => {\n    const {message: message} = action;\n    const messageID = message.id;\n    let newState = state;\n    if (isResponse(message)) {\n      const itemIDsInNewMessage = [];\n      message.output.generic.forEach(item => {\n        const id = streamItemID(messageID, item);\n        if (id) {\n          itemIDsInNewMessage.push(id);\n        }\n      });\n      const newAllMessageItemsByID = {\n        ...state.allMessageItemsByID\n      };\n      const existingItemIDs = [];\n      let firstFoundIndex;\n      const newLocalMessageIDs = state.botMessageState.localMessageIDs.filter((itemID, index) => {\n        const item = state.allMessageItemsByID[itemID];\n        const isItemInMessage = item.fullMessageID === messageID;\n        if (isItemInMessage) {\n          if (firstFoundIndex === undefined) {\n            firstFoundIndex = index;\n          }\n          if (!itemIDsInNewMessage.includes(itemID)) {\n            delete newAllMessageItemsByID[itemID];\n          } else {\n            existingItemIDs.push(itemID);\n          }\n        }\n        return !isItemInMessage;\n      });\n      if (existingItemIDs.length) {\n        const itemIDsToInsert = itemIDsInNewMessage.filter(itemID => existingItemIDs.includes(itemID));\n        if (itemIDsToInsert.length) {\n          newLocalMessageIDs.splice(firstFoundIndex, 0, ...itemIDsToInsert);\n        }\n      }\n      newState = {\n        ...newState,\n        allMessageItemsByID: newAllMessageItemsByID,\n        botMessageState: {\n          ...newState.botMessageState,\n          localMessageIDs: newLocalMessageIDs\n        }\n      };\n    }\n    return applyFullMessage(newState, message);\n  },\n  [MESSAGE_SET_OPTION_SELECTED]: (state, action) => {\n    const newMessagesByID = {\n      ...state.allMessageItemsByID\n    };\n    newMessagesByID[action.messageID] = {\n      ...state.allMessageItemsByID[action.messageID],\n      ui_state: {\n        ...state.allMessageItemsByID[action.messageID].ui_state,\n        optionSelected: action.sentMessage\n      }\n    };\n    return {\n      ...state,\n      allMessageItemsByID: newMessagesByID\n    };\n  },\n  [ADD_IS_TYPING_COUNTER]: (state, action) => ({\n    ...state,\n    botMessageState: {\n      ...state.botMessageState,\n      isTypingCounter: Math.max(state.botMessageState.isTypingCounter + action.addToIsTyping, 0)\n    }\n  }),\n  [ADD_IS_LOADING_COUNTER]: (state, action) => ({\n    ...state,\n    botMessageState: {\n      ...state.botMessageState,\n      isLoadingCounter: Math.max(state.botMessageState.isLoadingCounter + action.addToIsLoading, 0)\n    }\n  }),\n  [ADD_IS_HYDRATING_COUNTER]: (state, action) => ({\n    ...state,\n    botMessageState: {\n      ...state.botMessageState,\n      isHydratingCounter: Math.max(state.botMessageState.isHydratingCounter + action.addToIsHydrating, 0)\n    }\n  }),\n  [SET_APP_STATE_VALUE]: (state, action) => ({\n    ...state,\n    [action.key]: action.value\n  }),\n  [UPDATE_PERSISTED_CHAT_STATE]: (state, action) => ({\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        ...action.chatState\n      }\n    }\n  }),\n  [UPDATE_HAS_SENT_NON_WELCOME_MESSAGE]: (state, action) => {\n    if (state.persistedToBrowserStorage.chatState.hasSentNonWelcomeMessage === action.hasSentNonWelcomeMessage) {\n      return state;\n    }\n    return {\n      ...state,\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          hasSentNonWelcomeMessage: action.hasSentNonWelcomeMessage\n        },\n        launcherState: {\n          ...state.persistedToBrowserStorage.launcherState,\n          hasSentNonWelcomeMessage: action.hasSentNonWelcomeMessage\n        }\n      }\n    };\n  },\n  [SET_VIEW_STATE]: (state, action) => handleViewStateChange(state, action.viewState),\n  [SET_VIEW_CHANGING]: (state, action) => ({\n    ...state,\n    viewChanging: action.viewChanging\n  }),\n  [SET_INITIAL_VIEW_CHANGE_COMPLETE]: (state, action) => ({\n    ...state,\n    initialViewChangeComplete: action.changeComplete\n  }),\n  [UPDATE_BOT_NAME]: (state, action) => ({\n    ...state,\n    botName: action.name,\n    headerDisplayName: state.theme.useAITheme ? state.headerDisplayName : action.name\n  }),\n  [UPDATE_BOT_AVATAR_URL]: (state, action) => ({\n    ...state,\n    botAvatarURL: action.url\n  }),\n  [UPDATE_LAUNCHER_AVATAR_URL]: (state, action) => ({\n    ...state,\n    launcher: {\n      ...state.launcher,\n      config: {\n        ...state.launcher.config,\n        mobile: {\n          ...state.launcher.config.mobile,\n          avatar_url_override: action.source\n        },\n        desktop: {\n          ...state.launcher.config.desktop,\n          avatar_url_override: action.source\n        }\n      }\n    }\n  }),\n  [UPDATE_MAIN_HEADER_TITLE]: (state, action) => ({\n    ...state,\n    headerDisplayName: action.title\n  }),\n  [UPDATE_CSS_VARIABLES]: (state, action) => {\n    const {config: config} = state;\n    const {variables: variables} = action;\n    const newConfig = {\n      public: {\n        ...config.public\n      }\n    };\n    return {\n      ...state,\n      config: newConfig,\n      cssVariableOverrides: variables\n    };\n  },\n  [UPDATE_HOME_SCREEN_CONFIG]: (state, action) => {\n    const newHomeScreenConfig = action.homeScreenConfig;\n    return {\n      ...state,\n      homeScreenConfig: mergeWith({}, state.homeScreenConfig, newHomeScreenConfig, replaceCurrentArrayValue)\n    };\n  },\n  [SET_MESSAGE_UI_PROPERTY]: (state, action) => applyLocalMessageUIState(state, action.localMessageID, action.propertyName, action.propertyValue),\n  [SET_MESSAGE_HISTORY_PROPERTY]: (state, action) => {\n    const {messageID: messageID, propertyName: propertyName, propertyValue: propertyValue} = action;\n    const oldMessage = state.allMessagesByID[messageID];\n    if (oldMessage) {\n      return {\n        ...state,\n        allMessagesByID: {\n          ...state.allMessagesByID,\n          [messageID]: {\n            ...oldMessage,\n            history: {\n              ...oldMessage.history,\n              [propertyName]: propertyValue\n            }\n          }\n        }\n      };\n    }\n    return state;\n  },\n  [MERGE_HISTORY]: (state, action) => {\n    const oldMessage = state.allMessagesByID[action.messageID];\n    if (oldMessage) {\n      return {\n        ...state,\n        allMessagesByID: {\n          ...state.allMessagesByID,\n          [action.messageID]: {\n            ...oldMessage,\n            history: merge({}, oldMessage.history, action.history)\n          }\n        }\n      };\n    }\n    return state;\n  },\n  [ANNOUNCE_MESSAGE]: (state, action) => ({\n    ...state,\n    announceMessage: action.message\n  }),\n  [ACCEPTED_DISCLAIMER]: state => ({\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        disclaimersAccepted: {\n          ...state.persistedToBrowserStorage.chatState.disclaimersAccepted,\n          [window.location.hostname]: true\n        }\n      }\n    }\n  }),\n  [SET_HOME_SCREEN_IS_OPEN]: (state, {isOpen: isOpen}) => setHomeScreenOpenState(state, isOpen),\n  [TOGGLE_HOME_SCREEN]: state => setHomeScreenOpenState(state, !state.persistedToBrowserStorage.chatState.homeScreenState.isHomeScreenOpen, true),\n  [UPDATE_LAUNCHER_CONFIG]: (state, action) => {\n    const newConfig = merge({}, state.launcher.config, action.launcherConfig);\n    return {\n      ...state,\n      launcher: {\n        ...state.launcher,\n        config: newConfig\n      },\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        launcherState: {\n          ...state.persistedToBrowserStorage.launcherState,\n          desktopLauncherIsExpanded: newConfig.is_on && newConfig.desktop.is_on ? state.persistedToBrowserStorage.launcherState.desktopLauncherIsExpanded : false,\n          mobileLauncherIsExtended: newConfig.is_on && newConfig.mobile.is_on ? state.persistedToBrowserStorage.launcherState.mobileLauncherIsExtended : false\n        }\n      }\n    };\n  },\n  [SET_LAUNCHER_PROPERTY]: (state, action) => ({\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      launcherState: {\n        ...state.persistedToBrowserStorage.launcherState,\n        [action.propertyName]: action.propertyValue\n      }\n    }\n  }),\n  [SET_LAUNCHER_CONFIG_PROPERTY]: (state, action) => {\n    const newState = {\n      ...state,\n      launcher: {\n        ...state.launcher,\n        config: {\n          ...state.launcher.config\n        }\n      }\n    };\n    if (!action.launcherType || action.launcherType === LauncherType.DESKTOP) {\n      newState.launcher.config.desktop = {\n        ...state.launcher.config.desktop,\n        [action.propertyName]: action.propertyValue\n      };\n    }\n    if (!action.launcherType || action.launcherType === LauncherType.MOBILE) {\n      newState.launcher.config.mobile = {\n        ...state.launcher.config.mobile,\n        [action.propertyName]: action.propertyValue\n      };\n    }\n    return newState;\n  },\n  [SET_CHAT_MESSAGES_PROPERTY]: (state, action) => applyBotMessageState(state, {\n    [action.propertyName]: action.propertyValue\n  }),\n  [SET_LAUNCHER_MINIMIZED]: state => ({\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      launcherState: {\n        ...state.persistedToBrowserStorage.launcherState,\n        desktopLauncherIsExpanded: false,\n        desktopLauncherWasMinimized: true\n      }\n    }\n  }),\n  [OPEN_IFRAME_CONTENT]: (state, {messageItem: messageItem}) => ({\n    ...state,\n    iFramePanelState: {\n      ...state.iFramePanelState,\n      messageItem: messageItem,\n      isOpen: true\n    },\n    announceMessage: {\n      messageID: \"iframe_ariaOpenedPanel\"\n    }\n  }),\n  [CLOSE_IFRAME_PANEL]: state => ({\n    ...state,\n    iFramePanelState: {\n      ...state.iFramePanelState,\n      isOpen: false\n    },\n    announceMessage: {\n      messageID: \"iframe_ariaClosedPanel\"\n    }\n  }),\n  [SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN]: (state, action) => ({\n    ...state,\n    viewSourcePanelState: {\n      ...state.viewSourcePanelState,\n      citationItem: action.citationItem,\n      relatedSearchResult: action.relatedSearchResult,\n      isOpen: action.isOpen\n    }\n  }),\n  [SET_CUSTOM_PANEL_OPEN]: (state, action) => ({\n    ...state,\n    customPanelState: {\n      ...state.customPanelState,\n      isOpen: action.isOpen\n    }\n  }),\n  [SET_CUSTOM_PANEL_OPTIONS]: (state, action) => ({\n    ...state,\n    customPanelState: {\n      ...state.customPanelState,\n      options: action.options\n    }\n  }),\n  [SET_TOUR_DATA]: (state, action) => {\n    const newStateWithPersistedTourData = {\n      ...state,\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          persistedTourState: {\n            activeTourID: action.newActiveTourMessageID,\n            activeTourCurrentStepIndex: 0\n          }\n        },\n        launcherState: {\n          ...state.persistedToBrowserStorage.launcherState,\n          activeTour: true\n        }\n      }\n    };\n    return populateTourStepItems(newStateWithPersistedTourData);\n  },\n  [CLEAR_TOUR_DATA]: state => clearTourState(state),\n  [CHANGE_STEP_IN_TOUR]: (state, action) => ({\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        persistedTourState: {\n          ...state.persistedToBrowserStorage.chatState.persistedTourState,\n          activeTourCurrentStepIndex: Math.max(Math.min(action.newStepNumber, state.tourState.activeTourStepItems.length - 1), 0)\n        }\n      }\n    }\n  }),\n  [UPDATE_INPUT_STATE]: (state, action) => {\n    const currentInputState = getInputState(state, action.isInputToAgent);\n    const newInputState = {\n      ...currentInputState,\n      ...action.newState\n    };\n    const newState = applyInputState(state, newInputState, action.isInputToAgent);\n    return newState;\n  },\n  [SET_IS_BROWSER_PAGE_VISIBLE]: (state, action) => {\n    let numUnreadMessages;\n    const isMainWindowOpen = state.persistedToBrowserStorage.launcherState.viewState.mainWindow;\n    if (isMainWindowOpen && action.isVisible) {\n      numUnreadMessages = 0;\n    } else {\n      numUnreadMessages = state.agentState.numUnreadMessages;\n    }\n    return {\n      ...state,\n      isBrowserPageVisible: action.isVisible,\n      agentState: {\n        ...state.agentState,\n        numUnreadMessages: numUnreadMessages\n      }\n    };\n  },\n  [ADD_INPUT_FILE]: (state, {file: file, isInputToAgent: isInputToAgent}) => {\n    const currentInputState = getInputState(state, isInputToAgent);\n    return applyInputState(state, {\n      ...currentInputState,\n      files: [ ...currentInputState.files, file ]\n    }, isInputToAgent);\n  },\n  [REMOVE_INPUT_FILE]: (state, {fileID: fileID, isInputToAgent: isInputToAgent}) => {\n    const currentInputState = getInputState(state, isInputToAgent);\n    const newUploads = [ ...currentInputState.files ];\n    const index = newUploads.findIndex(file => file.id === fileID);\n    if (index !== -1) {\n      newUploads.splice(index, 1);\n    }\n    return applyInputState(state, {\n      ...currentInputState,\n      files: newUploads\n    }, isInputToAgent);\n  },\n  [REMOVE_LOCAL_MESSAGE_ITEM]: (state, {localMessageItemID: localMessageItemID}) => {\n    const newLocalMessageIDs = state.botMessageState.localMessageIDs.filter(id => id !== localMessageItemID);\n    const allMessageItemsByID = {\n      ...state.allMessageItemsByID\n    };\n    if (allMessageItemsByID[localMessageItemID]) {\n      delete allMessageItemsByID[localMessageItemID];\n    }\n    return {\n      ...state,\n      allMessageItemsByID: allMessageItemsByID,\n      botMessageState: {\n        ...state.botMessageState,\n        localMessageIDs: newLocalMessageIDs\n      }\n    };\n  },\n  [ADD_NOTIFICATION]: (state, {notification: notification, notificationID: notificationID}) => ({\n    ...state,\n    notifications: state.notifications.concat({\n      id: notificationID,\n      notification: notification\n    })\n  }),\n  [REMOVE_NOTIFICATIONS]: (state, {groupID: groupID, notificationID: notificationID}) => ({\n    ...state,\n    notifications: state.notifications.filter(notification => {\n      if (notificationID) {\n        return notification.id !== notificationID;\n      }\n      return notification.notification.groupID !== groupID;\n    })\n  }),\n  [REMOVE_ALL_NOTIFICATIONS]: state => ({\n    ...state,\n    notifications: []\n  }),\n  [CLEAR_INPUT_FILES]: (state, {isInputToAgent: isInputToAgent}) => {\n    const currentInputState = getInputState(state, isInputToAgent);\n    return applyInputState(state, {\n      ...currentInputState,\n      files: []\n    }, isInputToAgent);\n  },\n  [FILE_UPLOAD_INPUT_ERROR]: (state, {fileID: fileID, errorMessage: errorMessage, isInputToAgent: isInputToAgent}) => {\n    const currentInputSate = getInputState(state, isInputToAgent);\n    const newUploads = [ ...currentInputSate.files ];\n    const index = newUploads.findIndex(file => file.id === fileID);\n    if (index !== -1) {\n      newUploads[index] = {\n        ...newUploads[index],\n        isError: true,\n        errorMessage: errorMessage,\n        status: FileStatusValue.COMPLETE\n      };\n    }\n    return applyInputState(state, {\n      ...currentInputSate,\n      files: newUploads\n    }, isInputToAgent);\n  },\n  [ADD_NESTED_MESSAGES]: (state, {localMessageItems: localMessageItems}) => {\n    const allMessageItemsByID = {\n      ...state.allMessageItemsByID\n    };\n    localMessageItems.forEach(localMessageItem => {\n      allMessageItemsByID[localMessageItem.ui_state.id] = localMessageItem;\n    });\n    return {\n      ...state,\n      allMessageItemsByID: allMessageItemsByID\n    };\n  },\n  [SET_RESPONSE_PANEL_IS_OPEN]: (state, {isOpen: isOpen}) => ({\n    ...state,\n    responsePanelState: {\n      ...state.responsePanelState,\n      isOpen: isOpen\n    }\n  }),\n  [SET_RESPONSE_PANEL_CONTENT]: (state, {localMessageItem: localMessageItem, isMessageForInput: isMessageForInput}) => ({\n    ...state,\n    responsePanelState: {\n      ...state.responsePanelState,\n      localMessageItem: localMessageItem,\n      isMessageForInput: isMessageForInput\n    }\n  }),\n  [STREAMING_START]: (state, {messageID: messageID}) => {\n    const streamIntoResponse = {\n      id: messageID,\n      output: {\n        generic: []\n      },\n      history: {\n        timestamp: Date.now()\n      }\n    };\n    return applyFullMessage(state, streamIntoResponse);\n  },\n  [STREAMING_MERGE_HISTORY]: (state, {messageID: messageID, history: history}) => {\n    const existingMessage = state.allMessagesByID[messageID];\n    const newMessage = merge({}, existingMessage, {\n      history: history\n    });\n    if (existingMessage) {\n      return {\n        ...state,\n        allMessagesByID: {\n          ...state.allMessagesByID,\n          [messageID]: newMessage\n        }\n      };\n    }\n    return state;\n  },\n  [STREAMING_ADD_CHUNK]: (state, {chunkItem: chunkItem, fullMessageID: fullMessageID, isCompleteItem: isCompleteItem, disableFadeAnimation: disableFadeAnimation}) => {\n    const message = state.allMessagesByID[fullMessageID];\n    const localItemID = streamItemID(fullMessageID, chunkItem);\n    const existingLocalMessageItem = state.allMessageItemsByID[localItemID];\n    let {localMessageIDs: localMessageIDs} = state.botMessageState;\n    let newItem;\n    if (!existingLocalMessageItem) {\n      newItem = outputItemToLocalItem(chunkItem, message, false);\n      newItem.ui_state.needsAnnouncement = false;\n      newItem.ui_state.disableFadeAnimation = disableFadeAnimation;\n      newItem.ui_state.isIntermediateStreaming = true;\n      if (isCompleteItem) {\n        newItem.ui_state.streamingState = {\n          chunks: [],\n          isDone: true\n        };\n      } else {\n        newItem.ui_state.streamingState = {\n          chunks: [ chunkItem ],\n          isDone: false\n        };\n      }\n      localMessageIDs = [ ...localMessageIDs, localItemID ];\n      if (!newItem.item.response_type) {\n        throw new Error(`New chunk item does not have a response_type: ${JSON.stringify(chunkItem)}`);\n      }\n    } else if (isCompleteItem) {\n      newItem = outputItemToLocalItem(chunkItem, message, false);\n      newItem.ui_state.needsAnnouncement = false;\n      newItem.ui_state.disableFadeAnimation = disableFadeAnimation;\n      newItem.ui_state.streamingState = {\n        chunks: [],\n        isDone: true\n      };\n    } else {\n      newItem = {\n        ...existingLocalMessageItem,\n        ui_state: {\n          ...existingLocalMessageItem?.ui_state,\n          streamingState: {\n            ...existingLocalMessageItem?.ui_state.streamingState,\n            chunks: [ ...existingLocalMessageItem?.ui_state.streamingState?.chunks || [], chunkItem ]\n          }\n        }\n      };\n    }\n    return {\n      ...state,\n      allMessageItemsByID: {\n        ...state.allMessageItemsByID,\n        [localItemID]: newItem\n      },\n      botMessageState: {\n        ...state.botMessageState,\n        localMessageIDs: localMessageIDs\n      }\n    };\n  },\n  [UPDATE_CHAT_HEADER_CONFIG]: (state, {chatHeaderConfig: chatHeaderConfig}) => ({\n    ...state,\n    chatHeaderState: {\n      ...state.chatHeaderState,\n      config: {\n        ...state.chatHeaderState.config,\n        ...chatHeaderConfig\n      }\n    }\n  }),\n  [UPDATE_MAX_VISIBLE_HEADER_OBJECTS]: (state, {maxTotal: maxTotal}) => ({\n    ...state,\n    chatHeaderState: {\n      ...state.chatHeaderState,\n      maxVisibleHeaderObjects: maxTotal\n    }\n  }),\n  [SET_STOP_STREAMING_BUTTON_VISIBLE]: (state, {isVisible: isVisible}) => ({\n    ...state,\n    botInputState: {\n      ...state.botInputState,\n      stopStreamingButtonState: {\n        ...state.botInputState.stopStreamingButtonState,\n        isVisible: isVisible\n      }\n    }\n  }),\n  [SET_STOP_STREAMING_BUTTON_DISABLED]: (state, {isDisabled: isDisabled}) => ({\n    ...state,\n    botInputState: {\n      ...state.botInputState,\n      stopStreamingButtonState: {\n        ...state.botInputState.stopStreamingButtonState,\n        isDisabled: isDisabled\n      }\n    }\n  }),\n  [SET_STREAM_ID]: (state, {currentStreamID: currentStreamID}) => ({\n    ...state,\n    botInputState: {\n      ...state.botInputState,\n      stopStreamingButtonState: {\n        ...state.botInputState.stopStreamingButtonState,\n        currentStreamID: currentStreamID\n      }\n    }\n  }),\n  [UPDATE_MAIN_HEADER_AVATAR]: (state, {config: config}) => ({\n    ...state,\n    headerAvatarConfig: config\n  })\n};\n\nfunction applyInputState(state, newInputState, isInputToAgent) {\n  if (isInputToAgent) {\n    return {\n      ...state,\n      agentState: {\n        ...state.agentState,\n        inputState: newInputState\n      }\n    };\n  }\n  return {\n    ...state,\n    botInputState: newInputState\n  };\n}\n\nfunction getInputState(state, isInputToAgent) {\n  return isInputToAgent ? state.agentState.inputState : state.botInputState;\n}\n\nObject.assign(reducers, agentReducers);\n\nexport { reducers };\n","import merge from \"lodash-es/merge.js\";\n\nimport { createStore } from \"redux\";\n\nimport { NODE_ENV } from \"../environmentVariables.js\";\n\nimport { IS_PHONE } from \"../utils/browserUtils.js\";\n\nimport \"../utils/constants.js\";\n\nimport { withoutEmptyStarters } from \"../utils/homeScreenUtils.js\";\n\nimport { getBotName } from \"../utils/miscUtils.js\";\n\nimport { mergeCSSVariables } from \"../utils/styleUtils.js\";\n\nimport { reducers } from \"./reducers.js\";\n\nimport { DEFAULT_THEME_STATE, VIEW_STATE_MAIN_WINDOW_OPEN, VIEW_STATE_LAUNCHER_OPEN, DEFAULT_LAUNCHER, DEFAULT_PERSISTED_TO_BROWSER, DEFAULT_INPUT_STATE, VIEW_STATE_ALL_CLOSED, DEFAULT_TOUR_STATE, DEFAULT_MESSAGE_PANEL_STATE, DEFAULT_CUSTOM_PANEL_STATE, DEFAULT_CITATION_PANEL_STATE, DEFAULT_IFRAME_PANEL_STATE, DEFAULT_AGENT_STATE, DEFAULT_MESSAGE_STATE, DEFAULT_LAYOUT_STATE } from \"./reducerUtils.js\";\n\nimport \"../../../types/instance/apiTypes.js\";\n\nimport enLanguagePack from \"../../languages/en.json.js\";\n\nimport { CornersType } from \"../../../types/config/CornersType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function doCreateStore(config, serviceManager) {\n  let useAITheme;\n  if (config.public.themeConfig?.useAITheme !== undefined) {\n    useAITheme = config.public.themeConfig?.useAITheme;\n  } else {\n    useAITheme = DEFAULT_THEME_STATE.useAITheme;\n  }\n  const themeState = {\n    carbonTheme: config.public.themeConfig?.carbonTheme || DEFAULT_THEME_STATE.carbonTheme,\n    useAITheme: useAITheme,\n    corners: getThemeCornersType(config)\n  };\n  const botName = getBotName(themeState.useAITheme, config);\n  const initialState = {\n    ...DEFAULT_MESSAGE_STATE,\n    notifications: [],\n    botInputState: {\n      ...DEFAULT_INPUT_STATE(),\n      isReadonly: config.public.isReadonly,\n      fieldVisible: !config.public.isReadonly\n    },\n    agentState: {\n      ...DEFAULT_AGENT_STATE\n    },\n    botName: botName,\n    headerDisplayName: null,\n    botAvatarURL: config.public.botAvatarURL || null,\n    headerAvatarConfig: null,\n    chatWidthBreakpoint: null,\n    chatWidth: null,\n    chatHeight: null,\n    cssVariableOverrides: mergeCSSVariables({}, {}, themeState.carbonTheme, themeState.useAITheme),\n    isHydrated: false,\n    languagePack: enLanguagePack,\n    locale: \"en\",\n    config: config,\n    originalConfig: config,\n    suspendScrollDetection: false,\n    homeScreenConfig: withoutEmptyStarters({}),\n    persistedToBrowserStorage: {\n      ...DEFAULT_PERSISTED_TO_BROWSER,\n      chatState: {\n        ...DEFAULT_PERSISTED_TO_BROWSER.chatState,\n        homeScreenState: {\n          ...DEFAULT_PERSISTED_TO_BROWSER.chatState.homeScreenState\n        }\n      }\n    },\n    launcher: merge({}, DEFAULT_LAUNCHER, {\n      config: merge({}, {}, {\n        mobile: {}\n      }, {\n        is_on: config.public.showLauncher\n      })\n    }),\n    iFramePanelState: DEFAULT_IFRAME_PANEL_STATE,\n    viewSourcePanelState: DEFAULT_CITATION_PANEL_STATE,\n    isDestroyed: false,\n    customPanelState: DEFAULT_CUSTOM_PANEL_STATE,\n    viewChanging: false,\n    initialViewChangeComplete: false,\n    targetViewState: config.public.openChatByDefault ? VIEW_STATE_MAIN_WINDOW_OPEN : VIEW_STATE_LAUNCHER_OPEN,\n    responsePanelState: DEFAULT_MESSAGE_PANEL_STATE,\n    customMenuOptions: null,\n    tourState: DEFAULT_TOUR_STATE,\n    isBrowserPageVisible: true,\n    showNonHeaderBackgroundCover: false,\n    theme: themeState,\n    layout: getLayoutState(config),\n    chatHeaderState: {\n      config: null,\n      maxVisibleHeaderObjects: 0\n    }\n  };\n  const sessionStorageLauncherState = serviceManager.userSessionStorageService?.loadLauncherSession();\n  if (sessionStorageLauncherState) {\n    initialState.targetViewState = sessionStorageLauncherState.viewState;\n    sessionStorageLauncherState.viewState = VIEW_STATE_ALL_CLOSED;\n    initialState.persistedToBrowserStorage.launcherState = sessionStorageLauncherState;\n  }\n  const enhancer = config.public.debug || NODE_ENV === \"development\" ? window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__({\n    name: \"CarbonAIChat\",\n    instanceId: `Chat${serviceManager.namespace.suffix}`\n  }) : undefined;\n  return createStore(reducerFunction, initialState, enhancer);\n}\n\nfunction getThemeCornersType(config) {\n  if (getLayoutState(config).showFrame === false || IS_PHONE || config.public.themeConfig?.corners === CornersType.SQUARE) {\n    return CornersType.SQUARE;\n  }\n  return DEFAULT_THEME_STATE.corners;\n}\n\nfunction getLayoutState(config) {\n  if (config.public.themeConfig?.useAITheme) {\n    return {\n      showFrame: config.public.layout?.showFrame ?? true,\n      hasContentMaxWidth: config.public.layout?.hasContentMaxWidth ?? true\n    };\n  }\n  return merge({}, DEFAULT_LAYOUT_STATE, config.public.layout);\n}\n\nfunction reducerFunction(state, action) {\n  return action && reducers[action.type] ? reducers[action.type](state, action) : state;\n}\n\nexport { doCreateStore };\n","import cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport { consoleDebug, consoleWarn } from \"./utils/miscUtils.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const DEFAULT_PUBLIC_CONFIG = {\n  openChatByDefault: false,\n  showLauncher: true,\n  shouldTakeFocusIfOpensAutomatically: true,\n  serviceDesk: {},\n  messaging: {},\n  themeConfig: {\n    useAITheme: true\n  }\n};\n\nasync function instantiateWidget(pagePublicConfig, chatConstructorPromise, render, element) {\n  const config = cloneDeep(pagePublicConfig);\n  if (!config.messaging?.customSendMessage) {\n    throw new Error(`You must set messaging.customSendMessage in your configuration object.`);\n  }\n  if (config?.debug) {\n    consoleDebug(\"[ChatEntry] Called instantiateWidget\", config);\n  }\n  if (document.location.protocol !== \"https:\") {\n    consoleWarn('Your page is not running with \"https\"; your data will not be sent  securely.');\n  }\n  if (document.compatMode !== \"CSS1Compat\") {\n    consoleWarn('Your page is running in quirks mode; you may experience layout issues with the chat. Add \"<!DOCTYPE html>\" to the page to run in standards mode.');\n  }\n  const {onError: onError, ...publicConfig} = config;\n  const Chat = await chatConstructorPromise(publicConfig);\n  const additionalChatParameters = {\n    onError: onError,\n    render: render\n  };\n  return new Chat(publicConfig, element, additionalChatParameters);\n}\n\nexport { DEFAULT_PUBLIC_CONFIG, instantiateWidget };\n","import dayjs from \"dayjs\";\n\nimport LocalizedFormat from \"dayjs/plugin/localizedFormat.js\";\n\nimport isEqual from \"lodash-es/isEqual.js\";\n\nimport merge from \"lodash-es/merge.js\";\n\nimport { createChatInstance } from \"./ChatInstanceImpl.js\";\n\nimport { createServiceManager } from \"./loadServices.js\";\n\nimport actions from \"./store/actions.js\";\n\nimport { VIEW_STATE_ALL_CLOSED } from \"./store/reducerUtils.js\";\n\nimport { loadLanguagePack, loadLocale } from \"./utils/languages.js\";\n\nimport { hasServiceDesk } from \"./utils/messageUtils.js\";\n\nimport { consoleDebug, consoleError } from \"./utils/miscUtils.js\";\n\nimport { DEFAULT_PUBLIC_CONFIG } from \"./chatEntryFunctions.js\";\n\nimport { MainWindowOpenReason, ViewChangeReason } from \"../../types/events/eventBusTypes.js\";\n\nimport { setIntl } from \"./utils/intlUtils.js\";\n\nimport { loadHAA } from \"../dynamic-imports/dynamic-imports.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\ndayjs.extend(LocalizedFormat);\n\nclass Chat {\n  constructor(publicConfigProvided, customHostElement, additionalChatParametersProvided) {\n    if (publicConfigProvided?.debug) {\n      consoleDebug(\"Constructed chat widget\", publicConfigProvided);\n    }\n    const publicConfig = merge({}, DEFAULT_PUBLIC_CONFIG, publicConfigProvided);\n    this.additionalChatParameters = additionalChatParametersProvided || {};\n    this.appConfig = {\n      public: publicConfig\n    };\n    this.customHostElement = customHostElement;\n  }\n  async start() {\n    try {\n      const result = await this.startInternal();\n      return result.instance;\n    } catch (error) {\n      consoleError(\"There was an error starting your chat\", error);\n      return null;\n    }\n  }\n  async startInternal() {\n    const doesHaveServiceDesk = hasServiceDesk(this.appConfig);\n    this.serviceManager = await createServiceManager(this.appConfig, this.additionalChatParameters);\n    const [languagePack, localePack, render, createHumanAgentService] = await Promise.all([ loadLanguagePack(this.serviceManager.store.getState().languagePack), loadLocale(this.serviceManager.store.getState().locale), Promise.resolve(this.additionalChatParameters.render), doesHaveServiceDesk ? loadHAA() : Promise.resolve(null) ]);\n    this.serviceManager.customHostElement = this.customHostElement;\n    if (createHumanAgentService) {\n      this.serviceManager.humanAgentService = createHumanAgentService(this.serviceManager);\n    }\n    setIntl(this.serviceManager, localePack.name, languagePack);\n    dayjs.locale(localePack);\n    const reallyRenderAndReturnInstance = async () => {\n      await render({\n        serviceManager: this.serviceManager\n      });\n      const initialState = this.serviceManager.store.getState();\n      const {wasLoadedFromBrowser: wasLoadedFromBrowser} = initialState.persistedToBrowserStorage.launcherState;\n      const {targetViewState: targetViewState} = initialState;\n      const {openChatByDefault: openChatByDefault} = initialState.config.public;\n      if (targetViewState.mainWindow) {\n        let mainWindowOpenReason = MainWindowOpenReason.SESSION_HISTORY;\n        if (openChatByDefault && !wasLoadedFromBrowser) {\n          mainWindowOpenReason = MainWindowOpenReason.OPEN_BY_DEFAULT;\n        }\n        await this.serviceManager.actions.changeView(targetViewState, {\n          mainWindowOpenReason: mainWindowOpenReason\n        });\n      } else {\n        const viewChangeReason = ViewChangeReason.WEB_CHAT_LOADED;\n        const tryHydrating = targetViewState.tour;\n        const forceViewChange = isEqual(targetViewState, VIEW_STATE_ALL_CLOSED);\n        await this.serviceManager.actions.changeView(targetViewState, {\n          viewChangeReason: viewChangeReason\n        }, tryHydrating, forceViewChange);\n      }\n      this.serviceManager.store.dispatch(actions.setInitialViewChangeComplete(true));\n      return this.serviceManager.instance;\n    };\n    const renderAndReturnInstance = () => {\n      const promise = reallyRenderAndReturnInstance();\n      this.serviceManager.renderPromise = promise;\n      return promise;\n    };\n    this.serviceManager.instance = createChatInstance({\n      serviceManager: this.serviceManager,\n      callRender: renderAndReturnInstance\n    });\n    return {\n      instance: this.serviceManager.instance,\n      serviceManager: this.serviceManager\n    };\n  }\n}\n\nexport { Chat as default };\n","import { ChatActionsImpl } from \"./events/ChatActionsImpl.js\";\n\nimport { EventBus } from \"./events/EventBus.js\";\n\nimport { createCustomPanelManager } from \"./services/CustomPanelManager.js\";\n\nimport { HistoryService } from \"./services/HistoryService.js\";\n\nimport MessageService from \"./services/MessageService.js\";\n\nimport { NamespaceService } from \"./services/NamespaceService.js\";\n\nimport { ServiceManager } from \"./services/ServiceManager.js\";\n\nimport { UserSessionStorageService } from \"./services/UserSessionStorageService.js\";\n\nimport { doCreateStore } from \"./store/doCreateStore.js\";\n\nimport { copyToSessionStorage, createHandleWindowTitle } from \"./store/subscriptions.js\";\n\nimport \"./utils/constants.js\";\n\nimport { setEnableDebugLog, setEnableDebugStackTracesLog } from \"./utils/miscUtils.js\";\n\nimport { setIntl } from \"./utils/intlUtils.js\";\n\nimport { WriteableElementName } from \"../../types/instance/ChatInstance.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ async function createServiceManager(appConfig, additionalChatParameters) {\n  const publicConfig = appConfig.public;\n  const serviceManager = new ServiceManager;\n  serviceManager.additionalChatParameters = additionalChatParameters;\n  serviceManager.namespace = new NamespaceService(publicConfig.namespace);\n  serviceManager.userSessionStorageService = new UserSessionStorageService(serviceManager);\n  serviceManager.actions = new ChatActionsImpl(serviceManager);\n  serviceManager.eventBus = new EventBus;\n  serviceManager.store = doCreateStore(appConfig, serviceManager);\n  serviceManager.historyService = new HistoryService(serviceManager);\n  serviceManager.messageService = new MessageService(serviceManager, publicConfig);\n  serviceManager.store.subscribe(copyToSessionStorage(serviceManager));\n  if (!publicConfig.disableWindowTitleChanges) {\n    serviceManager.store.subscribe(createHandleWindowTitle(serviceManager));\n  }\n  serviceManager.customPanelManager = createCustomPanelManager(serviceManager);\n  setIntl(serviceManager, serviceManager.store.getState().locale, serviceManager.store.getState().languagePack);\n  serviceManager.writeableElements = {\n    [WriteableElementName.AI_TOOLTIP_AFTER_DESCRIPTION_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.WELCOME_NODE_BEFORE_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.HEADER_BOTTOM_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.BEFORE_INPUT_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.HOME_SCREEN_HEADER_BOTTOM_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.HOME_SCREEN_AFTER_STARTERS_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.HOME_SCREEN_BEFORE_INPUT_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.CUSTOM_PANEL_ELEMENT]: document.createElement(\"div\")\n  };\n  if (publicConfig.debug) {\n    setEnableDebugLog(true);\n  }\n  if (publicConfig.debugStackTraces) {\n    setEnableDebugStackTracesLog(true);\n  }\n  return serviceManager;\n}\n\nexport { createServiceManager };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst UNREAD_COUNT_TITLE_TIME = 1e4;\n\nfunction copyToSessionStorage(serviceManager) {\n  let previousPersistedToBrowserStorage = serviceManager.store.getState().persistedToBrowserStorage;\n  return () => {\n    const {persistedToBrowserStorage: persistedToBrowserStorage} = serviceManager.store.getState();\n    const persistChatSession = previousPersistedToBrowserStorage !== persistedToBrowserStorage;\n    if (persistChatSession) {\n      previousPersistedToBrowserStorage = persistedToBrowserStorage;\n      serviceManager.userSessionStorageService.persistChatSession(persistedToBrowserStorage.chatState);\n      serviceManager.userSessionStorageService.persistLauncherSession(persistedToBrowserStorage.launcherState);\n    }\n  };\n}\n\nfunction createHandleWindowTitle(serviceManager) {\n  const {store: store} = serviceManager;\n  let originalTitle;\n  let changeTitleTimer;\n  let previousState = store.getState();\n  return () => {\n    const state = store.getState();\n    const {agentState: agentState} = store.getState();\n    const {numUnreadMessages: numUnreadMessages} = agentState;\n    if (numUnreadMessages !== previousState.agentState.numUnreadMessages) {\n      if (!numUnreadMessages) {\n        clearTimeout(changeTitleTimer);\n        if (originalTitle) {\n          window.document.title = originalTitle;\n          originalTitle = null;\n        }\n      } else {\n        clearTimeout(changeTitleTimer);\n        if (!originalTitle) {\n          originalTitle = window.document.title;\n        }\n        window.document.title = state.languagePack.agent_newMessage;\n        changeTitleTimer = setTimeout(() => {\n          window.document.title = `(${numUnreadMessages}) ${originalTitle}`;\n        }, UNREAD_COUNT_TITLE_TIME);\n      }\n    }\n    previousState = state;\n  };\n}\n\nexport { copyToSessionStorage, createHandleWindowTitle };\n","import { DEFAULT_CUSTOM_PANEL_ID } from \"../utils/constants.js\";\n\nimport { createCustomPanelInstance } from \"./CustomPanelInstance.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function createCustomPanelManager(serviceManger) {\n  const panels = {\n    [DEFAULT_CUSTOM_PANEL_ID]: createCustomPanelInstance(serviceManger)\n  };\n  return Object.freeze({\n    getPanel() {\n      return panels[DEFAULT_CUSTOM_PANEL_ID];\n    }\n  });\n}\n\nexport { createCustomPanelManager };\n","import React, { useRef, useCallback, useEffect } from \"react\";\n\nimport { useIntl } from \"react-intl\";\n\nimport { AriaAnnouncerContext } from \"../../contexts/AriaAnnouncerContext.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport { AriaAnnouncerComponent } from \"./AriaAnnouncerComponent.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function AriaAnnouncerProvider(props) {\n  const intl = useIntl();\n  const {store: store} = useServiceManager();\n  const announcerRef = useRef();\n  const announcerFunction = useCallback(value => {\n    if (!announcerRef.current) {\n      setTimeout(() => announcerRef.current.announceValue(value));\n    } else {\n      announcerRef.current.announceValue(value);\n    }\n  }, []);\n  const previousAnnounceMessageRef = useRef();\n  useEffect(() => {\n    const unsubscribe = store.subscribe(() => {\n      const currentAnnounceMessage = store.getState().announceMessage;\n      if (currentAnnounceMessage !== previousAnnounceMessageRef.current) {\n        announcerFunction(currentAnnounceMessage);\n        previousAnnounceMessageRef.current = currentAnnounceMessage;\n      }\n    });\n    return unsubscribe;\n  }, [ store, announcerFunction ]);\n  return React.createElement(AriaAnnouncerContext.Provider, {\n    value: announcerFunction\n  }, props.children, React.createElement(AriaAnnouncerComponent, {\n    intl: intl,\n    ref: announcerRef\n  }));\n}\n\nexport { AriaAnnouncerProvider };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction getLauncherButtonAriaLabel(languagePack, isLauncherHidden, isTourActive) {\n  if (isTourActive) {\n    return isLauncherHidden ? languagePack.launcher_isTourOpen : languagePack.launcher_isTourClosed;\n  }\n  return isLauncherHidden ? languagePack.launcher_isOpen : languagePack.launcher_isClosed;\n}\n\nexport { getLauncherButtonAriaLabel };\n","import AiLaunch from \"@carbon/icons-react/es/AiLaunch.js\";\n\nimport ArrowUpLeft from \"@carbon/icons-react/es/ArrowUpLeft.js\";\n\nimport ChatLaunch from \"@carbon/icons-react/es/ChatLaunch.js\";\n\nimport { Button } from \"@carbon/react\";\n\nimport cx from \"classnames\";\n\nimport React, { forwardRef, useImperativeHandle } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { doFocusRef } from \"../../utils/domUtils.js\";\n\nimport { getLauncherButtonAriaLabel } from \"./launcherUtils.js\";\n\nimport { ButtonKindEnum } from \"../../../../types/utilities/carbonTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function Launcher(props, ref) {\n  const {onToggleOpen: onToggleOpen, languagePack: languagePack, unreadAgentCount: unreadAgentCount, intl: intl, serviceManager: serviceManager, showUnreadIndicator: showUnreadIndicator, className: className, tabIndex: tabIndex, launcherHidden: launcherHidden, activeTour: activeTour} = props;\n  const launcherAvatarURL = useSelector(state => state.theme.useAITheme ? undefined : state.launcher.config.desktop.avatar_url_override);\n  const useAITheme = useSelector(state => state.theme.useAITheme);\n  const buttonRef = React.createRef();\n  useImperativeHandle(ref, () => ({\n    requestFocus: () => {\n      doFocusRef(buttonRef);\n    }\n  }));\n  let ariaLabel = getLauncherButtonAriaLabel(languagePack, launcherHidden, activeTour);\n  if (unreadAgentCount !== 0) {\n    ariaLabel += `. ${intl.formatMessage({\n      id: \"icon_ariaUnreadMessages\"\n    }, {\n      count: unreadAgentCount\n    })}`;\n  }\n  let launcherAvatar = useAITheme ? React.createElement(AiLaunch, {\n    size: 24,\n    className: \"WACLauncher_svg\"\n  }) : React.createElement(ChatLaunch, {\n    size: 24,\n    className: \"WACLauncher__svg\"\n  });\n  if (launcherAvatarURL) {\n    launcherAvatar = React.createElement(\"img\", {\n      className: \"WACLauncher__Avatar\",\n      src: launcherAvatarURL,\n      alt: \"\",\n      \"aria-hidden\": true\n    });\n  }\n  return React.createElement(\"div\", {\n    className: cx(\"WACLauncher__ButtonContainer\", \"WACLauncher__ButtonContainer--round\", className, {\n      \"WACLauncher__ButtonContainer--hidden\": launcherHidden\n    })\n  }, React.createElement(Button, {\n    \"aria-label\": ariaLabel,\n    className: cx(\"WACLauncher__Button\", {\n      WACLauncher__TourButton: activeTour\n    }),\n    id: `WACLauncher__Button${serviceManager.namespace.suffix}`,\n    kind: ButtonKindEnum.PRIMARY,\n    type: \"button\",\n    onClick: onToggleOpen,\n    ref: buttonRef,\n    tabIndex: tabIndex\n  }, activeTour ? React.createElement(ArrowUpLeft, {\n    size: 24,\n    className: \"WACLauncher__svg\"\n  }) : launcherAvatar, (unreadAgentCount !== 0 || showUnreadIndicator) && React.createElement(\"div\", {\n    className: \"WAC__countIndicator\"\n  }, unreadAgentCount !== 0 ? unreadAgentCount : \"\")));\n}\n\nconst LauncherExport = forwardRef(Launcher);\n\nexport { LauncherExport as Launcher };\n","import Close from \"@carbon/icons-react/es/Close.js\";\n\nimport { Tag } from \"@carbon/react\";\n\nimport cx from \"classnames\";\n\nimport React from \"react\";\n\nimport { Launcher as LauncherExport } from \"./Launcher.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function LauncherComplex(props) {\n  const {serviceManager: serviceManager, languagePack: languagePack, intl: intl, launcherConfig: launcherConfig, launcherComplexRef: launcherComplexRef, launcherRef: launcherRef, onOpen: onOpen, onMinimize: onMinimize, unreadAgentCount: unreadAgentCount, showUnreadIndicator: showUnreadIndicator, desktopLauncherIsExpanded: desktopLauncherIsExpanded, launcherHidden: launcherHidden, activeTour: activeTour, className: className} = props;\n  const {launcher_desktopGreeting: launcher_desktopGreeting, launcher_closeButton: launcher_closeButton, launcher_ariaIsExpanded: launcher_ariaIsExpanded} = languagePack;\n  function getLauncherContent() {\n    if (launcherConfig.desktop.title) {\n      return launcherConfig.desktop.title;\n    }\n    return launcher_desktopGreeting;\n  }\n  return React.createElement(\"div\", {\n    className: cx(\"WACLauncher__ButtonContainer\", \"WACLauncherComplex__Container\", className, {\n      \"WACLauncher__ButtonContainer--hidden\": launcherHidden\n    }),\n    ref: launcherComplexRef\n  }, React.createElement(\"button\", {\n    className: \"WACLauncherComplex__ContentButton\",\n    type: \"button\",\n    onClick: onOpen,\n    disabled: !desktopLauncherIsExpanded\n  }, React.createElement(\"div\", {\n    className: cx(\"WACWidget__textEllipsis\", {\n      WACLauncherComplex__Text: !launcherHidden\n    })\n  }, getLauncherContent())), React.createElement(LauncherExport, {\n    serviceManager: serviceManager,\n    languagePack: languagePack,\n    intl: intl,\n    ref: launcherRef,\n    onToggleOpen: onOpen,\n    className: \"WACLauncherComplex__SmallLauncherContainer\",\n    unreadAgentCount: unreadAgentCount,\n    showUnreadIndicator: showUnreadIndicator,\n    launcherHidden: launcherHidden,\n    activeTour: activeTour\n  }), React.createElement(Tag, {\n    className: \"WACLauncher__CloseButton\",\n    \"aria-label\": launcher_ariaIsExpanded,\n    onClick: onMinimize,\n    disabled: !desktopLauncherIsExpanded\n  }, React.createElement(\"div\", {\n    className: \"WACLauncher__CloseButtonInnerWrapper\"\n  }, React.createElement(Close, {\n    className: \"WACLauncher__CloseButtonIcon\"\n  }), launcher_closeButton)));\n}\n\nexport { LauncherComplex };\n","import React, { useState, useRef, useCallback, useEffect } from \"react\";\n\nimport { useIntl } from \"react-intl\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { useLanguagePack } from \"../../hooks/useLanguagePack.js\";\n\nimport { useOnMount } from \"../../hooks/useOnMount.js\";\n\nimport { usePrevious } from \"../../hooks/usePrevious.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport actions from \"../../store/actions.js\";\n\nimport { BOUNCING_ANIMATION_TIMEOUTS } from \"../../../../types/config/LauncherConfig.js\";\n\nimport { Launcher as LauncherExport } from \"./Launcher.js\";\n\nimport { LauncherComplex } from \"./LauncherComplex.js\";\n\nimport { LauncherType } from \"../../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst TIME_FOR_MINIMIZE_ANIMATION = 400;\n\nconst TIME_FOR_BOUNCE_ANIMATION = 500;\n\nconst LauncherDesktopContainer = props => {\n  const {launcherRef: launcherRef, onDoToggle: onDoToggle, requestFocus: requestFocus, launcherHidden: launcherHidden, activeTour: activeTour} = props;\n  const serviceManager = useServiceManager();\n  const languagePack = useLanguagePack();\n  const intl = useIntl();\n  const browserLauncherState = useSelector(state => state.persistedToBrowserStorage.launcherState);\n  const {desktopLauncherWasMinimized: desktopLauncherWasMinimized, desktopLauncherIsExpanded: desktopLauncherIsExpanded, bounceTurn: bounceTurn, showUnreadIndicator: showUnreadIndicator, viewState: viewState} = browserLauncherState;\n  const launcherState = useSelector(state => state.launcher);\n  const launcherConfig = launcherState.config;\n  const {time_to_expand: time_to_expand, new_expand_time: new_expand_time} = launcherConfig.desktop;\n  const isExpandedLauncherEnabled = launcherConfig.desktop.is_on;\n  const unreadAgentCount = useSelector(state => state.agentState.numUnreadMessages);\n  const [smallLauncherClassName, setSmallLauncherClassName] = useState(\"\");\n  const [complexLauncherClassName, setComplexLauncherClassName] = useState(\"\");\n  const launcherComplexRef = useRef();\n  const launcherHiddenRef = useRef();\n  launcherHiddenRef.current = launcherHidden;\n  const animateOnceVisible = useRef(false);\n  const bounceTurnRef = useRef();\n  bounceTurnRef.current = bounceTurn;\n  const animationStartTimerRef = useRef();\n  const animationFinishedTimerRef = useRef();\n  const firstBounceAnimationStartTimerRef = useRef();\n  const firstBounceAnimationFinishedTimerRef = useRef();\n  const secondBounceAnimationStartTimerRef = useRef();\n  const secondBounceAnimationFinishedTimerRef = useRef();\n  const determineLauncherHeight = useCallback(() => {\n    const expandedLauncherHeight = `${launcherComplexRef.current?.offsetHeight}px`;\n    if (launcherComplexRef.current?.style?.setProperty) {\n      launcherComplexRef.current.style.setProperty(\"--cds-chat-LAUNCHER-desktop-expanded-height\", expandedLauncherHeight);\n    }\n  }, []);\n  const startExpandLauncher = useCallback(() => {\n    if (!launcherHiddenRef.current) {\n      serviceManager.store.dispatch(actions.setLauncherProperty(\"desktopLauncherIsExpanded\", true));\n      determineLauncherHeight();\n      setComplexLauncherClassName(\"WACLauncherComplex__Container--introAnimation\");\n    }\n  }, [ determineLauncherHeight, serviceManager.store ]);\n  const setExpandAnimationTimers = useCallback(() => {\n    animationStartTimerRef.current = setTimeout(() => {\n      startExpandLauncher();\n    }, time_to_expand);\n  }, [ time_to_expand, startExpandLauncher ]);\n  const clearExpandAnimationTimers = useCallback(() => {\n    clearTimeout(animationStartTimerRef.current);\n    clearTimeout(animationFinishedTimerRef.current);\n  }, []);\n  const startBounceAnimation = useCallback(() => {\n    if (!launcherHiddenRef.current) {\n      setSmallLauncherClassName(\"WACLauncher__ButtonContainer--bounceAnimation\");\n    }\n  }, []);\n  const finishBounceAnimation = useCallback(() => {\n    if (!launcherHiddenRef.current) {\n      setSmallLauncherClassName(\"WACLauncher__ButtonContainer--noAnimation\");\n      bounceTurnRef.current++;\n      serviceManager.store.dispatch(actions.setLauncherProperty(\"bounceTurn\", bounceTurnRef.current));\n    }\n  }, [ serviceManager.store ]);\n  const setBounceAnimationTimers = useCallback(() => {\n    if (bounceTurnRef.current === 1) {\n      firstBounceAnimationStartTimerRef.current = setTimeout(() => {\n        startBounceAnimation();\n      }, BOUNCING_ANIMATION_TIMEOUTS[0]);\n      firstBounceAnimationFinishedTimerRef.current = setTimeout(() => {\n        finishBounceAnimation();\n      }, BOUNCING_ANIMATION_TIMEOUTS[0] + TIME_FOR_BOUNCE_ANIMATION);\n      secondBounceAnimationStartTimerRef.current = setTimeout(() => {\n        startBounceAnimation();\n      }, BOUNCING_ANIMATION_TIMEOUTS[0] + BOUNCING_ANIMATION_TIMEOUTS[1]);\n      secondBounceAnimationFinishedTimerRef.current = setTimeout(() => {\n        finishBounceAnimation();\n      }, BOUNCING_ANIMATION_TIMEOUTS[0] + BOUNCING_ANIMATION_TIMEOUTS[1] + TIME_FOR_BOUNCE_ANIMATION);\n    } else if (bounceTurnRef.current === 2) {\n      secondBounceAnimationStartTimerRef.current = setTimeout(() => {\n        startBounceAnimation();\n      }, BOUNCING_ANIMATION_TIMEOUTS[1]);\n      secondBounceAnimationFinishedTimerRef.current = setTimeout(() => {\n        finishBounceAnimation();\n      }, BOUNCING_ANIMATION_TIMEOUTS[1] + TIME_FOR_BOUNCE_ANIMATION);\n    }\n  }, [ finishBounceAnimation, startBounceAnimation ]);\n  const clearBounceAnimationTimers = useCallback(() => {\n    clearTimeout(firstBounceAnimationStartTimerRef.current);\n    clearTimeout(firstBounceAnimationFinishedTimerRef.current);\n    clearTimeout(secondBounceAnimationStartTimerRef.current);\n    clearTimeout(secondBounceAnimationFinishedTimerRef.current);\n  }, []);\n  const setDefaultLauncherState = useCallback(() => {\n    clearExpandAnimationTimers();\n    serviceManager.store.dispatch(actions.setLauncherMinimized());\n    clearBounceAnimationTimers();\n    serviceManager.store.dispatch(actions.setLauncherProperty(\"bounceTurn\", 3));\n    animateOnceVisible.current = false;\n    setSmallLauncherClassName(\"WACLauncher__ButtonContainer--noAnimation\");\n  }, [ clearBounceAnimationTimers, clearExpandAnimationTimers, serviceManager.store ]);\n  useOnMount(() => {\n    if (desktopLauncherIsExpanded) {\n      animateOnceVisible.current = true;\n    } else if (!desktopLauncherWasMinimized && isExpandedLauncherEnabled) {\n      setExpandAnimationTimers();\n      return () => {\n        clearExpandAnimationTimers();\n      };\n    } else if (desktopLauncherWasMinimized && bounceTurn !== 3) {\n      setBounceAnimationTimers();\n      return () => {\n        clearBounceAnimationTimers();\n      };\n    }\n    return undefined;\n  });\n  useEffect(() => {\n    if (viewState.launcher && animateOnceVisible.current) {\n      determineLauncherHeight();\n      setComplexLauncherClassName(\"WACLauncherComplex__Container--simpleAnimation\");\n      animateOnceVisible.current = false;\n    }\n  }, [ determineLauncherHeight, viewState.launcher ]);\n  useEffect(() => {\n    if (viewState.mainWindow || viewState.tour) {\n      setDefaultLauncherState();\n    }\n  }, [ viewState, setDefaultLauncherState ]);\n  useEffect(() => {\n    if (new_expand_time) {\n      clearBounceAnimationTimers();\n      clearExpandAnimationTimers();\n      setExpandAnimationTimers();\n      serviceManager.store.dispatch(actions.setLauncherConfigProperty(\"new_expand_time\", false, LauncherType.DESKTOP));\n    }\n  }, [ animationFinishedTimerRef, animationStartTimerRef, new_expand_time, setExpandAnimationTimers, clearExpandAnimationTimers, clearBounceAnimationTimers, serviceManager.store ]);\n  const prevLauncherTitle = usePrevious(launcherConfig.desktop.title);\n  useEffect(() => {\n    if (prevLauncherTitle !== launcherConfig.desktop.title && (launcherConfig.desktop.title || prevLauncherTitle)) {\n      determineLauncherHeight();\n    }\n  }, [ determineLauncherHeight, launcherConfig, prevLauncherTitle ]);\n  const onMinimize = useCallback(() => {\n    setComplexLauncherClassName(\"WACLauncherComplex__Container--closeAnimation\");\n    setTimeout(() => {\n      setSmallLauncherClassName(\"WACLauncher__ButtonContainer--noAnimation\");\n      serviceManager.store.dispatch(actions.setLauncherMinimized());\n      setTimeout(requestFocus);\n    }, TIME_FOR_MINIMIZE_ANIMATION);\n  }, [ requestFocus, serviceManager.store ]);\n  const onOpen = useCallback(() => {\n    setDefaultLauncherState();\n    onDoToggle();\n  }, [ onDoToggle, setDefaultLauncherState ]);\n  let launcher;\n  if (desktopLauncherIsExpanded) {\n    launcher = React.createElement(LauncherComplex, {\n      serviceManager: serviceManager,\n      languagePack: languagePack,\n      intl: intl,\n      launcherComplexRef: launcherComplexRef,\n      launcherRef: launcherRef,\n      launcherConfig: launcherConfig,\n      onOpen: onOpen,\n      onMinimize: onMinimize,\n      unreadAgentCount: unreadAgentCount,\n      showUnreadIndicator: showUnreadIndicator,\n      desktopLauncherIsExpanded: desktopLauncherIsExpanded,\n      launcherHidden: launcherHidden,\n      activeTour: activeTour,\n      className: complexLauncherClassName\n    });\n  } else {\n    launcher = React.createElement(LauncherExport, {\n      serviceManager: serviceManager,\n      languagePack: languagePack,\n      intl: intl,\n      ref: launcherRef,\n      onToggleOpen: onOpen,\n      unreadAgentCount: unreadAgentCount,\n      showUnreadIndicator: showUnreadIndicator,\n      className: smallLauncherClassName,\n      launcherHidden: launcherHidden,\n      activeTour: activeTour\n    });\n  }\n  return launcher;\n};\n\nexport { LauncherDesktopContainer };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction animateWithClass(element, className, endAnimationNameOrDelay, endAnimationCallback) {\n  if (element) {\n    element.classList.add(className);\n    if (typeof endAnimationNameOrDelay === \"number\") {\n      setTimeout(() => {\n        element.classList.remove(className);\n        if (endAnimationCallback) {\n          endAnimationCallback();\n        }\n      }, endAnimationNameOrDelay);\n    } else {\n      const listener = event => {\n        if (!endAnimationNameOrDelay || event.animationName === endAnimationNameOrDelay) {\n          element.removeEventListener(\"animationend\", listener);\n          element.removeEventListener(\"animationcancel\", listener);\n          element.classList.remove(className);\n          if (endAnimationCallback) {\n            endAnimationCallback();\n          }\n        }\n      };\n      element.addEventListener(\"animationend\", listener);\n      element.addEventListener(\"animationcancel\", listener);\n    }\n  }\n}\n\nfunction setAnimationTimeouts(element, animation, timeouts, options) {\n  const {startingIndex: startingIndex, beforeAll: beforeAll, afterAll: afterAll, beforeEach: beforeEach, afterEach: afterEach} = options;\n  let index = startingIndex || 0;\n  let terminate = false;\n  let timeoutID = null;\n  function playAnimation() {\n    if (beforeAll && index === 0) {\n      beforeAll();\n    }\n    const isComplete = index === timeouts.length;\n    if (!isComplete && !terminate) {\n      timeoutID = setTimeout(setAnimationListener, timeouts[index]);\n    } else if (isComplete && afterAll) {\n      afterAll();\n    }\n  }\n  function replayAnimation() {\n    if (afterEach) {\n      afterEach();\n    }\n    index++;\n    element.removeEventListener(\"animationend\", replayAnimation);\n    element.classList.remove(animation);\n    playAnimation();\n  }\n  function setAnimationListener() {\n    if (beforeEach) {\n      beforeEach();\n    }\n    element.addEventListener(\"animationend\", replayAnimation);\n    element.classList.add(animation);\n  }\n  playAnimation();\n  return () => {\n    terminate = true;\n    clearTimeout(timeoutID);\n    element.classList.remove(animation);\n    element.removeEventListener(\"animationend\", replayAnimation);\n  };\n}\n\nexport { animateWithClass, setAnimationTimeouts };\n","import ArrowUpLeft from \"@carbon/icons-react/es/ArrowUpLeft.js\";\n\nimport ChatLaunch from \"@carbon/icons-react/es/ChatLaunch.js\";\n\nimport { Button } from \"@carbon/react\";\n\nimport cx from \"classnames\";\n\nimport React, { forwardRef, useState, useRef, useImperativeHandle, useEffect } from \"react\";\n\nimport { useIntl } from \"react-intl\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { useAriaAnnouncer } from \"../../hooks/useAriaAnnouncer.js\";\n\nimport { useLanguagePack } from \"../../hooks/useLanguagePack.js\";\n\nimport { usePrevious } from \"../../hooks/usePrevious.js\";\n\nimport { animateWithClass } from \"../../utils/animationUtils.js\";\n\nimport { IS_MOBILE } from \"../../utils/browserUtils.js\";\n\nimport { doFocusRef } from \"../../utils/domUtils.js\";\n\nimport { getLauncherButtonAriaLabel } from \"./launcherUtils.js\";\n\nimport { ButtonKindEnum } from \"../../../../types/utilities/carbonTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const MAX_EXTENDED_LAUNCHER_WIDTH = 400;\n\nfunction LauncherExtended(props, ref) {\n  const {unreadAgentCount: unreadAgentCount, showUnreadIndicator: showUnreadIndicator, serviceManager: serviceManager, launcherConfig: launcherConfig, isExtended: isExtended, playExtendAnimation: playExtendAnimation, onToggleOpen: onToggleOpen, onSwipeRight: onSwipeRight, onReduceEnd: onReduceEnd, className: className, launcherHidden: launcherHidden, activeTour: activeTour} = props;\n  const ariaAnnouncer = useAriaAnnouncer();\n  const languagePack = useLanguagePack();\n  const intl = useIntl();\n  const launcherAvatarURL = useSelector(state => state.theme.useAITheme ? undefined : state.launcher.config.mobile.avatar_url_override);\n  const [animateExtendedState, setAnimateExtendedState] = useState(playExtendAnimation);\n  const [showGreetingMessage, setShowGreetingMessage] = useState(false);\n  const prevIsExtended = usePrevious(isExtended);\n  const buttonRef = useRef();\n  const extendedContainerRef = useRef();\n  const greetingMessageRef = useRef();\n  const textHolderRef = useRef();\n  const touchStartRef = useRef({\n    touchStartX: null,\n    touchStartY: null\n  });\n  const shouldReduceExtendedLauncher = !isExtended && prevIsExtended;\n  const extendWithAnimation = isExtended && animateExtendedState;\n  const extendWithoutAnimation = isExtended && !animateExtendedState;\n  const launcherGreetingMessage = launcherConfig.mobile.title || languagePack.launcher_mobileGreeting;\n  let ariaLabel = getLauncherButtonAriaLabel(languagePack, launcherHidden, activeTour);\n  if (unreadAgentCount !== 0) {\n    ariaLabel += `. ${intl.formatMessage({\n      id: \"icon_ariaUnreadMessages\"\n    }, {\n      count: unreadAgentCount\n    })}`;\n  }\n  let launcherAvatar = React.createElement(ChatLaunch, {\n    size: 24,\n    className: \"WACLauncher__svg\"\n  });\n  if (launcherAvatarURL) {\n    launcherAvatar = React.createElement(\"img\", {\n      className: \"WACLauncher__Avatar\",\n      src: launcherAvatarURL,\n      \"aria-hidden\": true,\n      alt: \"\"\n    });\n  }\n  useImperativeHandle(ref, () => ({\n    requestFocus: () => {\n      doFocusRef(buttonRef);\n    },\n    launcherContainerElement: () => extendedContainerRef.current\n  }));\n  useEffect(() => {\n    const textHolderElement = textHolderRef.current;\n    const greetingMessageElement = greetingMessageRef.current;\n    const extendedContainerElement = extendedContainerRef.current;\n    calculateAndSetMaxExtendedLauncherWidth(textHolderElement, greetingMessageElement, extendedContainerElement);\n  }, [ ariaAnnouncer, extendWithoutAnimation, launcherGreetingMessage ]);\n  useEffect(() => {\n    if (isExtended) {\n      if (animateExtendedState) {\n        doFadeAnimationForElements({\n          fadeInElement: greetingMessageRef.current,\n          fadeInTime: 300\n        }, () => {\n          setAnimateExtendedState(false);\n        });\n      } else {\n        setShowGreetingMessage(true);\n      }\n      const buttonEl = buttonRef.current;\n      const handleTouchMove = event => {\n        checkIfUserSwipedRight(event.touches[0], touchStartRef.current, onSwipeRight);\n      };\n      const handleTouchStart = event => {\n        const {clientX: clientX, clientY: clientY} = event.touches[0];\n        const touchStart = touchStartRef.current;\n        touchStart.touchStartX = clientX;\n        touchStart.touchStartY = clientY;\n        buttonRef.current.addEventListener(\"touchmove\", handleTouchMove);\n      };\n      buttonEl.addEventListener(\"touchstart\", handleTouchStart);\n      return () => {\n        buttonEl.removeEventListener(\"touchmove\", handleTouchMove);\n        buttonEl.removeEventListener(\"touchstart\", handleTouchStart);\n      };\n    } else if (shouldReduceExtendedLauncher) {\n      const reduceAnimationEndListener = () => {\n        onReduceEnd();\n        setAnimateExtendedState(true);\n        extendedContainerRef.current.removeEventListener(\"animationend\", reduceAnimationEndListener);\n      };\n      extendedContainerRef.current.addEventListener(\"animationend\", reduceAnimationEndListener);\n      doFadeAnimationForElements({\n        fadeOutElement: greetingMessageRef.current\n      });\n    }\n    return undefined;\n  }, [ animateExtendedState, ariaAnnouncer, isExtended, launcherGreetingMessage, onReduceEnd, onSwipeRight, shouldReduceExtendedLauncher ]);\n  return React.createElement(\"div\", {\n    className: cx(\"WACLauncher__ButtonContainer WACLauncher__ButtonContainer--round WACLauncherExtended__Container\", className, {\n      \"WACLauncher__ButtonContainer--hidden\": launcherHidden,\n      \"WACLauncherExtended__Button--extended\": extendWithoutAnimation,\n      \"WACLauncherExtended__Button--extendedAnimation\": extendWithAnimation,\n      \"WACLauncherExtended__Button--reducedAnimation\": shouldReduceExtendedLauncher\n    }),\n    ref: extendedContainerRef\n  }, React.createElement(Button, {\n    \"aria-label\": ariaLabel,\n    className: cx(\"WACLauncher__Button\", \"WACLauncherExtended__Button\", {\n      WACLauncher__TourButton: activeTour\n    }),\n    kind: activeTour ? ButtonKindEnum.GHOST : ButtonKindEnum.PRIMARY,\n    type: \"button\",\n    ref: buttonRef,\n    onClick: onToggleOpen\n  }, React.createElement(\"div\", {\n    className: \"WACLauncherExtended__WrapperContainer\"\n  }, React.createElement(\"div\", {\n    className: \"WACLauncherExtended__Wrapper\"\n  }, React.createElement(\"div\", {\n    className: \"WACLauncherExtended__TextHolder\",\n    ref: textHolderRef\n  }, React.createElement(\"div\", {\n    className: cx(\"WACLauncherExtended__Greeting\", {\n      \"WACLauncherExtended__Element--hidden\": !showGreetingMessage\n    }),\n    ref: greetingMessageRef\n  }, React.createElement(\"div\", {\n    className: \"WACLauncherExtended__GreetingText\",\n    \"aria-hidden\": !isExtended\n  }, launcherGreetingMessage))), React.createElement(\"div\", {\n    className: \"WACLauncher__IconHolder\",\n    id: `WACLauncher__Button${serviceManager.namespace.suffix}`\n  }, activeTour ? React.createElement(ArrowUpLeft, {\n    size: 24,\n    className: \"WACLauncher__svg\"\n  }) : launcherAvatar))), (unreadAgentCount !== 0 || showUnreadIndicator) && React.createElement(\"div\", {\n    className: \"WAC__countIndicator\"\n  }, unreadAgentCount !== 0 ? unreadAgentCount : \"\")));\n}\n\nfunction calculateAndSetMaxExtendedLauncherWidth(textHolderEl, greetingMessageEl, extendedContainerEl) {\n  const nonTextSpace = 68;\n  const maxLauncherExtendedWidth = getMaxLauncherExtendedWidth();\n  const maxTextHolderWidth = maxLauncherExtendedWidth - nonTextSpace + 12;\n  textHolderEl.style.setProperty(\"width\", `${maxTextHolderWidth}px`);\n  greetingMessageEl.style.setProperty(\"width\", `${maxTextHolderWidth - 12}px`);\n  greetingMessageEl.style.setProperty(\"display\", \"flex\");\n  const {clientWidth: clientWidth} = greetingMessageEl.querySelector(\".WACLauncherExtended__GreetingText\");\n  let launcherExtendedWidth = clientWidth + nonTextSpace + 1;\n  if (launcherExtendedWidth > MAX_EXTENDED_LAUNCHER_WIDTH) {\n    launcherExtendedWidth = MAX_EXTENDED_LAUNCHER_WIDTH;\n  }\n  greetingMessageEl.removeAttribute(\"style\");\n  textHolderEl.removeAttribute(\"style\");\n  extendedContainerEl.style.setProperty(\"--cds-chat--LAUNCHER-EXTENDED-width\", `${launcherExtendedWidth}px`);\n}\n\nfunction doFadeAnimationForElements({fadeOutElement: fadeOutElement, fadeInElement: fadeInElement, fadeInTime: fadeInTime = 600}, callback) {\n  if (fadeOutElement) {\n    fadeOutElement.classList.remove(\"WACLauncherExtended__Element--hidden\");\n    animateWithClass(fadeOutElement, \"WACLauncherExtended__Element--FadeOut\", 500, () => {\n      fadeOutElement.classList.add(\"WACLauncherExtended__Element--hidden\");\n      fadeOutElement.classList.remove(\"WACLauncherExtended__Element--FadeOut\");\n      if (!fadeInElement && callback) {\n        callback();\n      }\n    });\n  }\n  if (fadeInElement) {\n    setTimeout(() => {\n      fadeInElement.classList.remove(\"WACLauncherExtended__Element--hidden\");\n      animateWithClass(fadeInElement, \"WACLauncherExtended__Element--FadeIn\", 600, () => {\n        fadeInElement.classList.remove(\"WACLauncherExtended__Element--FadeIn\");\n        if (callback) {\n          callback();\n        }\n      });\n    }, fadeInTime);\n  }\n}\n\nfunction checkIfUserSwipedRight(touchList, touchStartCoordinates, callback) {\n  const {touchStartX: touchStartX, touchStartY: touchStartY} = touchStartCoordinates;\n  if (touchStartX === null || touchStartY === null) {\n    return;\n  }\n  const {clientX: touchEndX, clientY: touchEndY} = touchList;\n  const differenceX = touchEndX - touchStartX;\n  const differenceY = touchEndY - touchStartY;\n  if (Math.abs(differenceX) > Math.abs(differenceY)) {\n    if (differenceX > 0) {\n      callback();\n    }\n  }\n  touchStartCoordinates.touchStartX = null;\n  touchStartCoordinates.touchStartY = null;\n}\n\nfunction getMaxLauncherExtendedWidth() {\n  const launcherPosition = IS_MOBILE ? 32 : 64;\n  const {width: width, height: height} = window.screen;\n  const lowestValue = Math.min(height, width);\n  const extendedWidth = lowestValue - launcherPosition;\n  return Math.min(extendedWidth, MAX_EXTENDED_LAUNCHER_WIDTH);\n}\n\nconst LauncherExtendedExport = React.memo(forwardRef(LauncherExtended));\n\nexport { LauncherExtendedExport as LauncherExtended };\n","import cx from \"classnames\";\n\nimport React, { useState, useRef, useCallback, useEffect } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { useOnMount } from \"../../hooks/useOnMount.js\";\n\nimport { usePrevious } from \"../../hooks/usePrevious.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport actions from \"../../store/actions.js\";\n\nimport { BOUNCING_ANIMATION_TIMEOUTS } from \"../../../../types/config/LauncherConfig.js\";\n\nimport { setAnimationTimeouts } from \"../../utils/animationUtils.js\";\n\nimport { LauncherExtended as LauncherExtendedExport } from \"./LauncherExtended.js\";\n\nimport { LauncherType } from \"../../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function LauncherMobileContainer(props) {\n  const {launcherRef: launcherRef, onToggleOpen: onToggleOpen, launcherHidden: launcherHidden, activeTour: activeTour} = props;\n  const serviceManager = useServiceManager();\n  const {config: launcherConfig} = useSelector(state => state.launcher);\n  const unreadAgentCount = useSelector(state => state.agentState.numUnreadMessages);\n  const {mobileLauncherIsExtended: isExtended, mobileLauncherWasReduced: wasReduced, mobileLauncherDisableBounce: disableBounce, bounceTurn: bounceTurn, showUnreadIndicator: showUnreadIndicator, viewState: viewState} = useSelector(state => state.persistedToBrowserStorage.launcherState);\n  const [isStartingBounceAnimation, setIsStartingBounceAnimation] = useState(false);\n  const prevIsExtended = usePrevious(isExtended);\n  const prevWasReduced = usePrevious(wasReduced);\n  const initialBounceTurn = useRef(bounceTurn).current;\n  const previouslyPlayedExtendAnimation = useRef(wasReduced).current;\n  const extendLauncherTimeoutIDRef = useRef(null);\n  const reduceLauncherTimeoutIDRef = useRef(null);\n  const endBounceAnimationRef = useRef(null);\n  const shouldBounceRef = useRef(previouslyPlayedExtendAnimation && !disableBounce);\n  const {time_to_expand: time_to_expand, new_expand_time: new_expand_time, time_to_reduce: time_to_reduce} = launcherConfig.mobile;\n  const isExpandedLauncherEnabled = launcherConfig.mobile.is_on;\n  const playExtendAnimation = prevIsExtended === undefined && !isExtended;\n  const isExtending = prevIsExtended !== undefined && !prevIsExtended && isExtended;\n  const hasReduced = prevWasReduced !== undefined && !prevWasReduced && wasReduced;\n  const disableIntroAnimation = isExtending || hasReduced || isStartingBounceAnimation;\n  const setLauncherStateAsReduced = useCallback(() => {\n    if (!wasReduced) {\n      serviceManager.store.dispatch(actions.setLauncherProperty(\"mobileLauncherWasReduced\", true));\n    }\n  }, [ wasReduced, serviceManager ]);\n  const reduceLauncher = useCallback(() => {\n    clearTimeouts();\n    if (isExtended) {\n      document.removeEventListener(\"scroll\", reduceLauncher);\n      serviceManager.store.dispatch(actions.setLauncherProperty(\"mobileLauncherIsExtended\", false));\n    }\n  }, [ isExtended, serviceManager ]);\n  const setExpandAnimationTimeout = useCallback(() => {\n    extendLauncherTimeoutIDRef.current = setTimeout(() => {\n      if (!isExtended && !isExtending) {\n        serviceManager.store.dispatch(actions.setLauncherProperty(\"mobileLauncherWasReduced\", false));\n        serviceManager.store.dispatch(actions.setLauncherProperty(\"mobileLauncherIsExtended\", true));\n      }\n    }, time_to_expand);\n  }, [ isExtended, isExtending, serviceManager.store, time_to_expand ]);\n  const setDefaultLauncherState = useCallback(() => {\n    const endBounceAnimation = endBounceAnimationRef.current;\n    if (endBounceAnimation) {\n      endBounceAnimation();\n      endBounceAnimationRef.current = null;\n    }\n    serviceManager.store.dispatch(actions.setLauncherProperty(\"mobileLauncherDisableBounce\", true));\n    reduceLauncher();\n    setLauncherStateAsReduced();\n  }, [ reduceLauncher, serviceManager.store, setLauncherStateAsReduced ]);\n  useOnMount(() => {\n    if (!wasReduced && playExtendAnimation && isExpandedLauncherEnabled) {\n      setExpandAnimationTimeout();\n    } else if (shouldBounceRef.current) {\n      const launcherContainerElement = launcherRef?.current?.launcherContainerElement();\n      if (launcherContainerElement) {\n        const startRecurringBounceAnimation = () => {\n          if (shouldBounceRef.current) {\n            let turnCounter = initialBounceTurn;\n            launcherContainerElement.removeEventListener(\"animationend\", startRecurringBounceAnimation);\n            setIsStartingBounceAnimation(true);\n            endBounceAnimationRef.current = setAnimationTimeouts(launcherContainerElement, \"WACLauncher__ButtonContainer--bounceAnimation\", BOUNCING_ANIMATION_TIMEOUTS, {\n              startingIndex: initialBounceTurn - 1,\n              afterEach: () => {\n                turnCounter++;\n                serviceManager.store.dispatch(actions.setLauncherProperty(\"bounceTurn\", turnCounter));\n              },\n              afterAll: () => {\n                serviceManager.store.dispatch(actions.setLauncherProperty(\"mobileLauncherDisableBounce\", true));\n              }\n            });\n          }\n        };\n        launcherContainerElement.addEventListener(\"animationend\", startRecurringBounceAnimation);\n      }\n    }\n  });\n  useEffect(() => {\n    if (viewState.mainWindow || viewState.tour) {\n      setDefaultLauncherState();\n    }\n  }, [ viewState, setDefaultLauncherState ]);\n  useEffect(() => {\n    if (new_expand_time) {\n      if (shouldBounceRef.current) {\n        shouldBounceRef.current = false;\n      }\n      const endBounceAnimation = endBounceAnimationRef.current;\n      if (endBounceAnimation) {\n        endBounceAnimation();\n        endBounceAnimationRef.current = null;\n      }\n      if (extendLauncherTimeoutIDRef.current) {\n        clearTimeout(extendLauncherTimeoutIDRef.current);\n      }\n      setExpandAnimationTimeout();\n      serviceManager.store.dispatch(actions.setLauncherConfigProperty(\"new_expand_time\", false, LauncherType.MOBILE));\n    }\n  }, [ setExpandAnimationTimeout, new_expand_time, serviceManager.store, shouldBounceRef ]);\n  function clearTimeouts() {\n    const extendLauncherTimeoutID = extendLauncherTimeoutIDRef.current;\n    const reduceLauncherTimeoutID = reduceLauncherTimeoutIDRef.current;\n    if (reduceLauncherTimeoutID) {\n      clearTimeout(reduceLauncherTimeoutID);\n      reduceLauncherTimeoutIDRef.current = null;\n    }\n    if (extendLauncherTimeoutID) {\n      clearTimeout(extendLauncherTimeoutID);\n      extendLauncherTimeoutIDRef.current = null;\n    }\n  }\n  const handleToggleOpen = useCallback(() => {\n    setDefaultLauncherState();\n    onToggleOpen();\n  }, [ onToggleOpen, setDefaultLauncherState ]);\n  const handleSwipeRight = useCallback(() => {\n    reduceLauncher();\n  }, [ reduceLauncher ]);\n  useEffect(() => {\n    if (isExtended) {\n      reduceLauncherTimeoutIDRef.current = setTimeout(() => {\n        reduceLauncher();\n      }, time_to_reduce);\n      document.addEventListener(\"scroll\", reduceLauncher);\n    }\n  }, [ isExtended, reduceLauncher, time_to_reduce, serviceManager ]);\n  return React.createElement(LauncherExtendedExport, {\n    className: cx({\n      \"WACLauncher__ButtonContainer--noAnimation\": disableIntroAnimation\n    }),\n    ref: launcherRef,\n    serviceManager: serviceManager,\n    launcherConfig: launcherConfig,\n    showUnreadIndicator: showUnreadIndicator,\n    unreadAgentCount: unreadAgentCount,\n    isExtended: isExtended,\n    playExtendAnimation: playExtendAnimation,\n    onToggleOpen: handleToggleOpen,\n    onSwipeRight: handleSwipeRight,\n    onReduceEnd: setLauncherStateAsReduced,\n    launcherHidden: launcherHidden,\n    activeTour: activeTour\n  });\n}\n\nexport { LauncherMobileContainer };\n","import React, { useRef, useCallback } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { useEffectDidUpdate } from \"../../hooks/useEffectDidUpdate.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport \"../../../../types/state/AppState.js\";\n\nimport { IS_PHONE } from \"../../utils/browserUtils.js\";\n\nimport { LauncherDesktopContainer } from \"./LauncherDesktopContainer.js\";\n\nimport { LauncherMobileContainer } from \"./LauncherMobileContainer.js\";\n\nimport { ViewChangeReason, MainWindowOpenReason } from \"../../../../types/events/eventBusTypes.js\";\n\nimport { ViewType } from \"../../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function LauncherContainer() {\n  const serviceManager = useServiceManager();\n  const launcherRef = useRef();\n  const viewState = useSelector(state => state.persistedToBrowserStorage.launcherState.viewState);\n  const initialViewChangeComplete = useSelector(state => state.initialViewChangeComplete);\n  const launcherHidden = !viewState.launcher;\n  const activeTour = useSelector(state => state.persistedToBrowserStorage.launcherState.activeTour);\n  const requestFocus = useCallback(() => {\n    launcherRef.current?.requestFocus();\n  }, [ launcherRef ]);\n  const onDoToggle = useCallback(() => {\n    if (activeTour) {\n      return serviceManager.actions.changeView(ViewType.TOUR, {\n        viewChangeReason: ViewChangeReason.LAUNCHER_CLICKED\n      });\n    }\n    return serviceManager.actions.changeView(ViewType.MAIN_WINDOW, {\n      mainWindowOpenReason: MainWindowOpenReason.DEFAULT_LAUNCHER\n    });\n  }, [ activeTour, serviceManager.actions ]);\n  useEffectDidUpdate(() => {\n    if (viewState.launcher && !viewState.mainWindow && !viewState.tour && initialViewChangeComplete) {\n      launcherRef.current?.requestFocus();\n    }\n  }, [ viewState ]);\n  let launcherContainer;\n  if (IS_PHONE) {\n    launcherContainer = React.createElement(LauncherMobileContainer, {\n      launcherRef: launcherRef,\n      onToggleOpen: onDoToggle,\n      launcherHidden: launcherHidden,\n      activeTour: activeTour\n    });\n  } else {\n    launcherContainer = React.createElement(LauncherDesktopContainer, {\n      launcherRef: launcherRef,\n      onDoToggle: onDoToggle,\n      requestFocus: requestFocus,\n      launcherHidden: launcherHidden,\n      activeTour: activeTour\n    });\n  }\n  return launcherContainer;\n}\n\nexport { LauncherContainer };\n","import { useRef, useEffect } from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function useEffectDidUpdate(effect, deps) {\n  const hasRunRef = useRef(false);\n  useEffect(() => {\n    if (hasRunRef.current) {\n      return effect();\n    }\n    hasRunRef.current = true;\n    return undefined;\n  }, deps);\n}\n\nexport { useEffectDidUpdate };\n","import { Loading } from \"@carbon/react\";\n\nimport cx from \"classnames\";\n\nimport React, { useContext } from \"react\";\n\nimport { HideComponentContext } from \"../contexts/HideComponentContext.js\";\n\nimport { BotHeader as BotHeaderExport } from \"./header/BotHeader.js\";\n\nimport { HomeScreenHeader as HomeScreenHeaderExport } from \"./homeScreen/HomeScreenHeader.js\";\n\nimport { AnnounceOnMountComponent as AnnounceOnMountComponentExport } from \"./util/AnnounceOnMountComponent.js\";\n\nimport { MountChildrenOnDelay } from \"./util/MountChildrenOnDelay.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function HydrationPanel({onClose: onClose, languagePack: languagePack, isHydrated: isHydrated, headerDisplayName: headerDisplayName, useHomeScreenVersion: useHomeScreenVersion}) {\n  const isHidden = useContext(HideComponentContext);\n  let header;\n  if (useHomeScreenVersion) {\n    header = React.createElement(HomeScreenHeaderExport, {\n      onClose: onClose\n    });\n  } else {\n    header = React.createElement(BotHeaderExport, {\n      onClose: onClose,\n      headerDisplayName: headerDisplayName,\n      onToggleHomeScreen: null,\n      includeWriteableElement: false\n    });\n  }\n  return React.createElement(\"div\", {\n    className: \"WAC WAC__hydratingContainer\"\n  }, header, React.createElement(\"div\", {\n    className: cx(\"WAC__hydrating\", \"WACPanelContent\", {\n      \"WAC__hydrating--homeScreen\": useHomeScreenVersion\n    })\n  }, !isHidden && React.createElement(MountChildrenOnDelay, {\n    delay: 400\n  }, !isHydrated && React.createElement(AnnounceOnMountComponentExport, {\n    announceOnce: languagePack.window_ariaWindowLoading\n  }), React.createElement(Loading, {\n    withOverlay: false,\n    \"aria-label\": languagePack.window_ariaWindowLoading\n  }))));\n}\n\nexport { HydrationPanel };\n","import React, { useEffect, useCallback } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { BusEventType } from \"../../../../types/events/eventBusTypes.js\";\n\nimport { useAriaAnnouncer } from \"../../hooks/useAriaAnnouncer.js\";\n\nimport { useLanguagePack } from \"../../hooks/useLanguagePack.js\";\n\nimport { usePrevious } from \"../../hooks/usePrevious.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport actions from \"../../store/actions.js\";\n\nimport { DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS } from \"../../store/reducerUtils.js\";\n\nimport { AnimationInType, AnimationOutType } from \"../../../../types/utilities/Animation.js\";\n\nimport { consoleError } from \"../../utils/miscUtils.js\";\n\nimport { BasePanelComponent as BasePanelComponentExport } from \"../BasePanelComponent.js\";\n\nimport { OverlayPanel, OverlayPanelName } from \"../OverlayPanel.js\";\n\nimport WriteableElement from \"../WriteableElement.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function CustomPanel(props) {\n  const {useAITheme: useAITheme, onPanelOpenEnd: onPanelOpenEnd, onPanelCloseEnd: onPanelCloseEnd, onPanelOpenStart: onPanelOpenStart, onPanelCloseStart: onPanelCloseStart, onClose: onClose, onCloseAndRestart: onCloseAndRestart, onClickRestart: onClickRestart} = props;\n  const languagePack = useLanguagePack();\n  const {isOpen: isOpen, options: options} = useSelector(state => state.customPanelState);\n  const {title: title, hidePanelHeader: hidePanelHeader, disableDefaultCloseAction: disableDefaultCloseAction, disableAnimation: disableAnimation, onClickBack: onClickBack, onClickClose: onClickClose, onClickCloseAndRestart: onClickCloseAndRestart} = options;\n  const serviceManager = useServiceManager();\n  const ariaAnnouncer = useAriaAnnouncer();\n  const prevIsOpen = usePrevious(isOpen);\n  const openAnimation = disableAnimation ? AnimationInType.NONE : AnimationInType.SLIDE_IN_FROM_BOTTOM;\n  const closeAnimation = disableAnimation ? AnimationOutType.NONE : AnimationOutType.SLIDE_OUT_TO_BOTTOM;\n  useEffect(() => {\n    if (prevIsOpen !== isOpen && isOpen) {\n      if (!hidePanelHeader && title) {\n        ariaAnnouncer(title);\n      }\n    }\n  }, [ ariaAnnouncer, hidePanelHeader, isOpen, prevIsOpen, title ]);\n  const onClickBackLocal = useCallback(() => {\n    serviceManager.store.dispatch(actions.setCustomPanelOpen(false));\n    onClickBack?.();\n  }, [ serviceManager, onClickBack ]);\n  const onClickCloseLocal = useCallback(() => {\n    if (!disableDefaultCloseAction) {\n      checkAllowClose(serviceManager.store.getState().viewChanging);\n      onClose();\n    }\n    onClickClose?.();\n  }, [ disableDefaultCloseAction, onClickClose, onClose, serviceManager ]);\n  const onCloseAndRestartLocal = useCallback(() => {\n    if (!disableDefaultCloseAction) {\n      checkAllowClose(serviceManager.store.getState().viewChanging);\n      onCloseAndRestart();\n    }\n    onClickCloseAndRestart?.();\n  }, [ disableDefaultCloseAction, onClickCloseAndRestart, onCloseAndRestart, serviceManager ]);\n  return React.createElement(OverlayPanel, {\n    className: \"WAC__overlay--covering\",\n    onOpenStart: () => {\n      serviceManager.eventBus.fire({\n        type: BusEventType.CUSTOM_PANEL_PRE_OPEN\n      }, serviceManager.instance);\n      onPanelOpenStart();\n    },\n    onOpenEnd: () => {\n      serviceManager.eventBus.fire({\n        type: BusEventType.CUSTOM_PANEL_OPEN\n      }, serviceManager.instance);\n      onPanelOpenEnd();\n    },\n    onCloseStart: () => {\n      serviceManager.eventBus.fire({\n        type: BusEventType.CUSTOM_PANEL_PRE_CLOSE\n      }, serviceManager.instance);\n      onPanelCloseStart();\n    },\n    onCloseEnd: () => {\n      serviceManager.eventBus.fire({\n        type: BusEventType.CUSTOM_PANEL_CLOSE\n      }, serviceManager.instance);\n      onPanelCloseEnd();\n      serviceManager.store.dispatch(actions.setCustomPanelConfigOptions(DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS));\n    },\n    animationOnOpen: openAnimation,\n    animationOnClose: closeAnimation,\n    shouldOpen: isOpen,\n    serviceManager: serviceManager,\n    overlayPanelName: OverlayPanelName.CUSTOM\n  }, React.createElement(BasePanelComponentExport, {\n    className: \"WACCustomPanel\",\n    eventName: \"Custom panel opened\",\n    eventDescription: \"A user opened a custom panel.\",\n    labelBackButton: languagePack.general_returnToAssistant,\n    isOpen: isOpen,\n    title: title,\n    useAITheme: useAITheme,\n    onClickBack: onClickBackLocal,\n    onClickClose: onClickCloseLocal,\n    onClickCloseAndRestart: onCloseAndRestartLocal,\n    onClickRestart: onClickRestart,\n    hidePanelHeader: hidePanelHeader,\n    hideBackButton: options.hideBackButton,\n    hideCloseButton: options.hideCloseButton,\n    hideCloseAndRestartButton: options.hideCloseAndRestartButton\n  }, React.createElement(WriteableElement, {\n    slotName: \"customPanelElement\",\n    className: \"WACCustomPanel__ContentContainer\"\n  })));\n}\n\nfunction checkAllowClose(viewChanging) {\n  if (viewChanging) {\n    const message = \"You are attempting to close Carbon AI chat from a custom panel while Carbon AI chat is currently running a view\" + \" change event which is not permitted. Please use the disableDefaultCloseAction option to disable\" + \" this behavior for the custom panel and then use onClickClose to resolve your Promise that is handling\" + \" the event; that Promise will allow you to close Carbon AI chat.\";\n    consoleError(message);\n    throw new Error(message);\n  }\n}\n\nconst CustomPanelExport = React.memo(CustomPanel);\n\nexport { CustomPanelExport as CustomPanel };\n","import \"intl-pluralrules\";\n\nimport cx from \"classnames\";\n\nimport FocusTrap from \"focus-trap-react\";\n\nimport React, { Component, Suspense } from \"react\";\n\nimport { connect } from \"react-redux\";\n\nimport { HydrationPanel } from \"../../components/HydrationPanel.js\";\n\nimport { OverlayPanel, OverlayPanelName } from \"../../components/OverlayPanel.js\";\n\nimport { CustomPanel as CustomPanelExport } from \"../../components/panels/CustomPanel.js\";\n\nimport { HideComponent } from \"../../components/util/HideComponent.js\";\n\nimport VisuallyHidden from \"../../components/util/VisuallyHidden.js\";\n\nimport { ModalPortalRootContext } from \"../../contexts/ModalPortalRootContext.js\";\n\nimport actions from \"../../store/actions.js\";\n\nimport { selectIsInputToAgent, selectInputState, selectAgentDisplayState } from \"../../store/selectors.js\";\n\nimport { AnimationOutType, AnimationInType } from \"../../../../types/utilities/Animation.js\";\n\nimport { ChatWidthBreakpoint } from \"../../../../types/state/AppState.js\";\n\nimport { addClassNameToState, removeClassNameFromState } from \"../../../../types/utilities/HasAddRemoveClassName.js\";\n\nimport { IS_IOS, getIPhoneHeightOffset, IS_MOBILE } from \"../../utils/browserUtils.js\";\n\nimport \"../../utils/constants.js\";\n\nimport { doFocusRef, SCROLLBAR_WIDTH } from \"../../utils/domUtils.js\";\n\nimport { arrayLastValue } from \"../../utils/lang/arrayUtils.js\";\n\nimport { createMessageRequestForText, createMessageRequestForChoice } from \"../../utils/messageUtils.js\";\n\nimport { consoleError, createDidCatchErrorData } from \"../../utils/miscUtils.js\";\n\nimport { MessageSendSource, MainWindowCloseReason } from \"../../../../types/events/eventBusTypes.js\";\n\nimport { lazyChat, lazyCatastrophicError, lazyDisclaimer, lazyHomeScreenContainer, lazyIFramePanel, lazyViewSourcePanel, lazyBodyAndFooterPanelComponent } from \"../../../dynamic-imports/dynamic-imports.js\";\n\nimport { ViewType } from \"../../../../types/instance/apiTypes.js\";\n\nimport { CornersType } from \"../../../../types/config/CornersType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const Chat = lazyChat();\n\nconst CatastrophicError = lazyCatastrophicError();\n\nconst Disclaimer = lazyDisclaimer();\n\nconst HomeScreenContainer = lazyHomeScreenContainer();\n\nconst IFramePanel = lazyIFramePanel();\n\nconst ViewSourcePanel = lazyViewSourcePanel();\n\nconst BodyAndFooterPanelComponent = lazyBodyAndFooterPanelComponent();\n\nconst WIDTH_BREAKPOINT_STANDARD = \"WAC--standardWidth\";\n\nconst WIDTH_BREAKPOINT_NARROW = \"WAC--narrowWidth\";\n\nconst WIDTH_BREAKPOINT_WIDE = \"WAC--wideWidth\";\n\nclass MainWindow extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      closing: false,\n      open: this.props.persistedToBrowserStorage.launcherState.viewState.mainWindow,\n      modalPortalHostElement: null,\n      numPanelsOpen: 0,\n      numPanelsAnimating: 0,\n      numPanelsCovering: 0,\n      isHydrationAnimationComplete: this.props.isHydrated,\n      shouldAutoFocus: this.props.config.public.shouldTakeFocusIfOpensAutomatically,\n      extraClassNames: [],\n      areModulesLoaded: false\n    };\n    this.mainWindowRef = React.createRef();\n    this.containerRef = React.createRef();\n    this.botChatRef = React.createRef();\n    this.homeScreenInputRef = React.createRef();\n    this.disclaimerRef = React.createRef();\n    this.brandingRef = React.createRef();\n    this.animationContainerRef = React.createRef();\n    this.iframePanelRef = React.createRef();\n    this.viewSourcePanelRef = React.createRef();\n    this.previousBodyVisibility = undefined;\n    this.previousBodyPosition = undefined;\n    this.onResize = () => {\n      let appChatWidthBreakpoint;\n      const height = this.containerRef?.current?.offsetHeight;\n      const width = this.containerRef?.current?.offsetWidth;\n      if (width >= 672 + 16 + 16) {\n        appChatWidthBreakpoint = ChatWidthBreakpoint.WIDE;\n      } else if (width >= 360) {\n        appChatWidthBreakpoint = ChatWidthBreakpoint.STANDARD;\n      } else {\n        appChatWidthBreakpoint = ChatWidthBreakpoint.NARROW;\n      }\n      this.props.serviceManager.store.dispatch(actions.setAppStateValue(\"chatWidth\", width));\n      this.props.serviceManager.store.dispatch(actions.setAppStateValue(\"chatHeight\", height));\n      this.props.serviceManager.store.dispatch(actions.setAppStateValue(\"chatWidthBreakpoint\", appChatWidthBreakpoint));\n    };\n    this.onVisualViewportResize = () => {\n      this.updateFromVisualViewport();\n    };\n    this.updateFromVisualViewport = () => {\n      const element = this.props.serviceManager.container;\n      const {visualViewport: visualViewport} = window;\n      if (visualViewport) {\n        element.style.setProperty(\"--cds-chat-viewport-height\", `${visualViewport.height}px`);\n        element.style.setProperty(\"--cds-chat-viewport-width\", `${visualViewport.width}px`);\n        element.style.setProperty(\"--cds-chat-viewport-offsetTop\", `${visualViewport.offsetTop}px`);\n        element.style.setProperty(\"--cds-chat-viewport-offsetLeft\", `${visualViewport.offsetLeft}px`);\n      } else {\n        let height = \"100vh\";\n        if (IS_IOS) {\n          const offset = getIPhoneHeightOffset();\n          height = `calc(100vh - ${offset}px)`;\n        }\n        element.style.setProperty(\"--cds-chat-viewport-height\", height);\n        element.style.setProperty(\"--cds-chat-viewport-width\", \"100vw\");\n        element.style.setProperty(\"--cds-chat-viewport-offsetTop\", \"0\");\n        element.style.setProperty(\"--cds-chat-viewport-offsetLeft\", \"0\");\n      }\n    };\n    this.setModalPortalHostElement = ref => {\n      if (this.state.modalPortalHostElement !== ref) {\n        this.setState({\n          modalPortalHostElement: ref\n        });\n      }\n    };\n    this.onSendInput = async (text, source, options) => {\n      const isInputToAgent = selectIsInputToAgent(this.props);\n      const {serviceManager: serviceManager} = this.props;\n      const state = serviceManager.store.getState();\n      const {files: files} = selectInputState(state);\n      if (isInputToAgent) {\n        serviceManager.humanAgentService.sendMessageToAgent(text, files);\n      } else {\n        const messageRequest = createMessageRequestForText(text);\n        serviceManager.actions.sendWithCatch(messageRequest, source, {\n          ...options\n        });\n      }\n      if (files.length) {\n        serviceManager.store.dispatch(actions.clearInputFiles(isInputToAgent));\n      }\n    };\n    this.onSendHomeButtonInput = input => {\n      const messageRequest = createMessageRequestForChoice(input);\n      this.props.serviceManager.actions.sendWithCatch(messageRequest, MessageSendSource.HOME_SCREEN_STARTER);\n    };\n    this.removeChatFromDom = () => {\n      this.containerRef.current.removeEventListener(\"animationend\", this.removeChatFromDom);\n      this.setState({\n        open: false,\n        closing: false\n      });\n    };\n    this.onRestart = async () => {\n      await this.props.serviceManager.actions.restartConversation();\n      this.requestFocus();\n    };\n    this.onClose = async () => this.doClose(false);\n    this.onCloseAndRestart = async () => this.doClose(true);\n    this.onToggleHomeScreen = () => {\n      this.props.serviceManager.store.dispatch(actions.toggleHomeScreen());\n    };\n    this.requestFocus = () => {\n      try {\n        if (this.state.shouldAutoFocus && !IS_MOBILE) {\n          if (this.getShowDisclaimer()) {\n            if (this.disclaimerRef.current) {\n              doFocusRef(this.disclaimerRef);\n            }\n          } else if (this.getShowHomeScreen()) {\n            if (this.homeScreenInputRef.current) {\n              this.homeScreenInputRef.current.takeFocus();\n            }\n          } else if (this.props.iFramePanelState.isOpen) {\n            if (this.iframePanelRef.current) {\n              this.iframePanelRef.current.requestFocus();\n            }\n          } else if (this.botChatRef.current) {\n            this.botChatRef.current.requestInputFocus();\n          }\n        }\n      } catch (error) {\n        consoleError(\"An error occurred in MainWindow.requestFocus\", error);\n      }\n    };\n    this.onUserTyping = isTyping => {\n      if (this.props.serviceManager.store.getState().persistedToBrowserStorage.chatState.agentState.isConnected) {\n        this.props.serviceManager.humanAgentService.userTyping(isTyping);\n      }\n    };\n    this.onAcceptDisclaimer = () => {\n      this.props.serviceManager.store.dispatch(actions.acceptDisclaimer());\n    };\n    this.onPanelOpenStart = coverBackground => {\n      this.setState(prevState => ({\n        numPanelsOpen: prevState.numPanelsOpen + 1,\n        numPanelsAnimating: prevState.numPanelsAnimating + 1,\n        numPanelsCovering: prevState.numPanelsCovering + (coverBackground ? 1 : 0)\n      }), this.requestFocus);\n    };\n    this.onPanelOpenEnd = () => {\n      this.setState(prevState => ({\n        numPanelsAnimating: prevState.numPanelsAnimating - 1\n      }));\n    };\n    this.onPanelCloseStart = () => {\n      this.setState(prevState => ({\n        numPanelsAnimating: prevState.numPanelsAnimating + 1\n      }), this.requestFocus);\n    };\n    this.onPanelCloseEnd = coverBackground => {\n      this.setState(prevState => ({\n        numPanelsOpen: prevState.numPanelsOpen - 1,\n        numPanelsAnimating: prevState.numPanelsAnimating - 1,\n        numPanelsCovering: prevState.numPanelsCovering - (coverBackground ? 1 : 0)\n      }));\n    };\n    this.onHydrationPanelClose = () => {\n      this.setState({\n        isHydrationAnimationComplete: true\n      }, this.requestFocus);\n    };\n  }\n  componentDidMount() {\n    const {persistedToBrowserStorage: persistedToBrowserStorage, config: config, serviceManager: serviceManager, mainWindowRef: mainWindowRef} = this.props;\n    const {viewState: viewState} = persistedToBrowserStorage.launcherState;\n    const {public: publicConfig} = config;\n    serviceManager.mainWindow = this;\n    mainWindowRef.current = this;\n    this.mainWindowObserver = new ResizeObserver(this.onResize);\n    this.mainWindowObserver.observe(this.containerRef.current);\n    if (IS_MOBILE && !publicConfig.disableCustomElementMobileEnhancements) {\n      const {visualViewport: visualViewport} = window;\n      if (visualViewport) {\n        visualViewport.addEventListener(\"resize\", this.onVisualViewportResize);\n        visualViewport.addEventListener(\"scroll\", this.updateFromVisualViewport);\n      }\n      this.updateFromVisualViewport();\n      this.updateBody(false);\n    }\n    this.containerRef.current.style.setProperty(\"--cds-chat-scrollbar-width\", `${SCROLLBAR_WIDTH()}px`);\n    if (viewState.mainWindow) {\n      this.loadPanels();\n    }\n  }\n  componentWillUnmount() {\n    this.mainWindowObserver.unobserve(this.containerRef.current);\n  }\n  destroy() {\n    if (IS_MOBILE && !this.props.config.public.disableCustomElementMobileEnhancements) {\n      const {visualViewport: visualViewport} = window;\n      if (visualViewport) {\n        visualViewport.removeEventListener(\"resize\", this.onVisualViewportResize);\n        visualViewport.removeEventListener(\"scroll\", this.updateFromVisualViewport);\n      }\n    }\n    this.updateBody(true);\n  }\n  componentDidUpdate(oldProps, oldState) {\n    const newProps = this.props;\n    const newState = this.state;\n    const {persistedToBrowserStorage: persistedToBrowserStorage, useCustomHostElement: useCustomHostElement, isDestroyed: isDestroyed} = newProps;\n    const {viewState: viewState} = persistedToBrowserStorage.launcherState;\n    const {open: open} = newState;\n    const prevViewState = oldProps.persistedToBrowserStorage.launcherState.viewState;\n    if (viewState.mainWindow !== prevViewState.mainWindow) {\n      this.updateBody(false);\n      this.updateFromVisualViewport();\n    }\n    if (isDestroyed && !oldProps.isDestroyed) {\n      this.destroy();\n    }\n    if ((oldState.areModulesLoaded !== newState.areModulesLoaded || oldProps.isHydrated !== newProps.isHydrated) && newProps.isHydrated && newState.areModulesLoaded) {\n      this.setState({\n        isHydrationAnimationComplete: true\n      }, () => {\n        requestAnimationFrame(() => {\n          this.requestFocus();\n        });\n      });\n    }\n    if (viewState.mainWindow && (!prevViewState.mainWindow || !open)) {\n      this.setState({\n        open: true\n      }, () => {\n        this.requestFocus();\n      });\n      this.loadPanels();\n    } else if (!viewState.mainWindow && prevViewState.mainWindow && oldState.open && open) {\n      this.setState({\n        closing: true\n      });\n      if (useCustomHostElement) {\n        this.removeChatFromDom();\n      } else {\n        this.containerRef.current.addEventListener(\"animationend\", this.removeChatFromDom);\n        this.requestFocus();\n      }\n    }\n    if (newProps.config.public.shouldTakeFocusIfOpensAutomatically) {\n      if (!oldProps.persistedToBrowserStorage.chatState.hasSentNonWelcomeMessage && newProps.persistedToBrowserStorage.chatState.hasSentNonWelcomeMessage && !this.state.shouldAutoFocus) {\n        this.setState({\n          shouldAutoFocus: true\n        });\n      } else if (oldProps.botMessageState.localMessageIDs.length > newProps.botMessageState.localMessageIDs.length && this.state.shouldAutoFocus) {\n        this.setState({\n          shouldAutoFocus: false\n        });\n      } else if (oldProps.botMessageState.localMessageIDs.length < newProps.botMessageState.localMessageIDs.length && !this.state.shouldAutoFocus) {\n        this.setState({\n          shouldAutoFocus: true\n        });\n      }\n    }\n    const newLastItemID = arrayLastValue(newProps.botMessageState.localMessageIDs);\n    const oldLastItemID = arrayLastValue(oldProps.botMessageState.localMessageIDs);\n    if (newLastItemID !== oldLastItemID && newState.shouldAutoFocus) {\n      const lastMessageItem = newProps.allMessageItemsByID[newLastItemID];\n      const lastMessage = newProps.allMessagesByID[lastMessageItem?.fullMessageID];\n      if (!lastMessage?.history?.from_history) {\n        this.requestFocus();\n      }\n    }\n  }\n  componentDidCatch(error, errorInfo) {\n    this.props.serviceManager.actions.errorOccurred(createDidCatchErrorData(\"MainWindow\", error, errorInfo, true));\n  }\n  loadPanels() {\n    Promise.all([ Chat.preload(), CatastrophicError.preload(), Disclaimer.preload(), HomeScreenContainer.preload(), IFramePanel.preload(), ViewSourcePanel.preload(), BodyAndFooterPanelComponent.preload() ]).then(() => {\n      this.setState({\n        areModulesLoaded: true\n      });\n    });\n  }\n  updateBody(unmounting) {\n    if (IS_IOS && !this.props.config.public.disableCustomElementMobileEnhancements) {\n      if ((window.screen.width <= 500 || window.screen.height <= 500) && this.props.persistedToBrowserStorage.launcherState.viewState.mainWindow && !unmounting) {\n        this.previousBodyVisibility = document.body.style.getPropertyValue(\"visibility\");\n        this.previousBodyPosition = document.body.style.getPropertyValue(\"position\");\n        document.body.style.setProperty(\"visibility\", \"hidden\", \"important\");\n        document.body.style.setProperty(\"position\", \"fixed\", \"important\");\n      } else {\n        document.body.style.setProperty(\"visibility\", this.previousBodyVisibility);\n        document.body.style.setProperty(\"position\", this.previousBodyPosition);\n      }\n    }\n  }\n  async doClose(fromCloseAndRestart) {\n    const {serviceManager: serviceManager} = this.props;\n    const {activeTour: activeTour} = serviceManager.store.getState().persistedToBrowserStorage.launcherState;\n    if (fromCloseAndRestart) {\n      const newViewState = await serviceManager.actions.changeView(ViewType.LAUNCHER, {\n        mainWindowCloseReason: MainWindowCloseReason.MAIN_WINDOW_CLOSED_AND_RESTARTED\n      });\n      if (!newViewState.mainWindow) {\n        await serviceManager.actions.restartConversation();\n      }\n    } else {\n      await serviceManager.actions.changeView(activeTour ? ViewType.TOUR : ViewType.LAUNCHER, {\n        mainWindowCloseReason: MainWindowCloseReason.DEFAULT_MINIMIZE\n      });\n    }\n  }\n  getShowHomeScreen() {\n    return this.props.homeScreenConfig.is_on && this.props.persistedToBrowserStorage.chatState.homeScreenState.isHomeScreenOpen && !this.getShowDisclaimer();\n  }\n  getShowDisclaimer() {\n    return this.props.config.public.disclaimer?.is_on && !this.props.persistedToBrowserStorage.chatState.disclaimersAccepted[window.location.hostname];\n  }\n  doAutoScroll(options) {\n    this.botChatRef?.current?.doAutoScroll(options);\n  }\n  getMessagesScrollBottom() {\n    return this.botChatRef?.current?.getMessagesScrollBottom();\n  }\n  doScrollToMessage(messageID, animate = true) {\n    this.botChatRef.current?.doScrollToMessage(messageID, animate);\n  }\n  getMessageInput() {\n    return this.botChatRef.current?.getMessageInput();\n  }\n  getHomeScreenInput() {\n    return this.homeScreenInputRef.current?.getMessageInput();\n  }\n  addClassName(name) {\n    this.setState(addClassNameToState(name));\n  }\n  removeClassName(name) {\n    this.setState(removeClassNameFromState(name));\n  }\n  renderChat() {\n    const {isHydrated: isHydrated, config: config, chatWidthBreakpoint: chatWidthBreakpoint} = this.props;\n    const {areModulesLoaded: areModulesLoaded} = this.state;\n    const showCovering = this.state.numPanelsCovering > 0 && config.public.layout?.hasContentMaxWidth && chatWidthBreakpoint === ChatWidthBreakpoint.WIDE;\n    return React.createElement(\"div\", {\n      className: \"WACWidget--content\"\n    }, this.renderCustomPanel(), this.renderHydrationPanel(), isHydrated && areModulesLoaded && React.createElement(React.Fragment, null, this.renderDisclaimerPanel(), this.renderResponsePanel(), this.renderHomeScreenPanel(), this.renderIFramePanel(), this.renderViewSourcePanel(), showCovering && React.createElement(\"div\", {\n      className: \"WACBackgroundCover\"\n    }), this.renderBotChat()));\n  }\n  renderBotChat() {\n    const {botName: botName, languagePack: languagePack, config: config, serviceManager: serviceManager, botMessageState: botMessageState, agentState: agentState, allMessageItemsByID: allMessageItemsByID, isHydrated: isHydrated, locale: locale, theme: theme, headerDisplayName: headerDisplayName, headerAvatarConfig: headerAvatar} = this.props;\n    const {numPanelsAnimating: numPanelsAnimating, numPanelsOpen: numPanelsOpen, isHydrationAnimationComplete: isHydrationAnimationComplete} = this.state;\n    const inputState = selectInputState(this.props);\n    const agentDisplayState = selectAgentDisplayState(this.props);\n    const showDisclaimer = this.getShowDisclaimer();\n    let hideBotContainer;\n    if (!isHydrationAnimationComplete) {\n      hideBotContainer = true;\n    } else if (numPanelsAnimating > 0) {\n      hideBotContainer = false;\n    } else if (numPanelsOpen > 0) {\n      hideBotContainer = true;\n    }\n    return React.createElement(HideComponent, {\n      className: \"WACBotContainer\",\n      hidden: hideBotContainer\n    }, React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(Chat, {\n      botName: botName,\n      headerDisplayName: headerDisplayName,\n      headerAvatarConfig: headerAvatar,\n      ref: this.botChatRef,\n      languagePack: languagePack,\n      config: config,\n      serviceManager: serviceManager,\n      onClose: this.onClose,\n      onCloseAndRestart: this.onCloseAndRestart,\n      messageState: botMessageState,\n      onSendInput: text => this.onSendInput(text, MessageSendSource.MESSAGE_INPUT),\n      agentState: agentState,\n      agentDisplayState: agentDisplayState,\n      allMessageItemsByID: allMessageItemsByID,\n      onRestart: this.onRestart,\n      isHydrated: isHydrated,\n      isHydrationAnimationComplete: isHydrationAnimationComplete && !showDisclaimer,\n      inputState: inputState,\n      onToggleHomeScreen: this.onToggleHomeScreen,\n      onUserTyping: this.onUserTyping,\n      locale: locale,\n      useAITheme: theme.useAITheme,\n      carbonTheme: theme.carbonTheme\n    })));\n  }\n  renderInnerHydrationPanel() {\n    const {botMessageState: botMessageState, serviceManager: serviceManager, languagePack: languagePack, headerDisplayName: headerDisplayName, persistedToBrowserStorage: persistedToBrowserStorage, homeScreenConfig: homeScreenConfig} = this.props;\n    const {areModulesLoaded: areModulesLoaded} = this.state;\n    const useHomeScreenVersion = homeScreenConfig.is_on && !persistedToBrowserStorage.launcherState.hasSentNonWelcomeMessage;\n    return React.createElement(HydrationPanel, {\n      headerDisplayName: headerDisplayName,\n      isHydrated: botMessageState.isHydratingCounter === 0 && areModulesLoaded,\n      serviceManager: serviceManager,\n      onClose: this.onClose,\n      languagePack: languagePack,\n      useHomeScreenVersion: useHomeScreenVersion\n    });\n  }\n  renderHydrationPanel() {\n    const {botMessageState: botMessageState, serviceManager: serviceManager, catastrophicErrorType: catastrophicErrorType, persistedToBrowserStorage: persistedToBrowserStorage} = this.props;\n    const {viewState: viewState} = persistedToBrowserStorage.launcherState;\n    const {areModulesLoaded: areModulesLoaded} = this.state;\n    return React.createElement(OverlayPanel, {\n      onOpenStart: () => this.onPanelOpenStart(false),\n      onCloseStart: this.onPanelCloseStart,\n      onOpenEnd: this.onPanelOpenEnd,\n      onCloseEnd: () => {\n        this.onHydrationPanelClose();\n        this.onPanelCloseEnd(false);\n      },\n      animationOnOpen: AnimationInType.NONE,\n      animationOnClose: AnimationOutType.NONE,\n      shouldOpen: (botMessageState.isHydratingCounter > 0 || !areModulesLoaded) && !catastrophicErrorType && viewState.mainWindow,\n      shouldHide: false,\n      serviceManager: serviceManager,\n      overlayPanelName: OverlayPanelName.HYDRATING\n    }, this.renderInnerHydrationPanel());\n  }\n  renderCatastrophicPanel() {\n    const {serviceManager: serviceManager, botName: botName, languagePack: languagePack, headerDisplayName: headerDisplayName} = this.props;\n    return React.createElement(OverlayPanel, {\n      animationOnOpen: AnimationInType.NONE,\n      animationOnClose: AnimationOutType.NONE,\n      shouldOpen: true,\n      serviceManager: serviceManager,\n      overlayPanelName: OverlayPanelName.CATASTROPHIC\n    }, React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(CatastrophicError, {\n      onClose: this.onClose,\n      headerDisplayName: headerDisplayName,\n      serviceManager: serviceManager,\n      languagePack: languagePack,\n      onRestart: this.onRestart,\n      showHeader: true,\n      botName: botName\n    })));\n  }\n  renderDisclaimerPanel() {\n    const {serviceManager: serviceManager, config: config} = this.props;\n    const showDisclaimer = this.getShowDisclaimer();\n    return config.public.disclaimer?.is_on ? React.createElement(OverlayPanel, {\n      onOpenStart: () => this.onPanelOpenStart(false),\n      onCloseStart: this.onPanelCloseStart,\n      onOpenEnd: this.onPanelOpenEnd,\n      onCloseEnd: () => this.onPanelCloseEnd(false),\n      animationOnOpen: AnimationInType.FADE_IN,\n      animationOnClose: AnimationOutType.FADE_OUT,\n      shouldOpen: showDisclaimer,\n      serviceManager: serviceManager,\n      overlayPanelName: OverlayPanelName.DISCLAIMER\n    }, React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(Disclaimer, {\n      onAcceptDisclaimer: this.onAcceptDisclaimer,\n      onClose: this.onClose,\n      disclaimerHTML: config.public.disclaimer?.disclaimerHTML,\n      disclaimerAcceptButtonRef: this.disclaimerRef\n    }))) : null;\n  }\n  renderHomeScreenPanel() {\n    const {isHydrationAnimationComplete: isHydrationAnimationComplete} = this.state;\n    const showHomeScreen = this.getShowHomeScreen();\n    return React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(HomeScreenContainer, {\n      onPanelOpenStart: () => this.onPanelOpenStart(false),\n      onPanelOpenEnd: this.onPanelOpenEnd,\n      onPanelCloseStart: this.onPanelCloseStart,\n      onPanelCloseEnd: () => this.onPanelCloseEnd(false),\n      onClose: this.onClose,\n      onCloseAndRestart: this.onCloseAndRestart,\n      onSendBotInput: text => this.onSendInput(text, MessageSendSource.HOME_SCREEN_INPUT),\n      onSendButtonInput: this.onSendHomeButtonInput,\n      onRestart: this.onRestart,\n      showHomeScreen: showHomeScreen,\n      isHydrationAnimationComplete: isHydrationAnimationComplete,\n      homeScreenInputRef: this.homeScreenInputRef,\n      onToggleHomeScreen: this.onToggleHomeScreen,\n      requestFocus: this.requestFocus\n    }));\n  }\n  renderIFramePanel() {\n    const {serviceManager: serviceManager, iFramePanelState: iFramePanelState} = this.props;\n    return React.createElement(OverlayPanel, {\n      className: \"WAC__overlay--covering\",\n      onOpenStart: () => this.onPanelOpenStart(true),\n      onCloseStart: this.onPanelCloseStart,\n      onOpenEnd: this.onPanelOpenEnd,\n      onCloseEnd: () => this.onPanelCloseEnd(true),\n      animationOnOpen: AnimationInType.SLIDE_IN_FROM_BOTTOM,\n      animationOnClose: AnimationOutType.SLIDE_OUT_TO_BOTTOM,\n      shouldOpen: iFramePanelState.isOpen,\n      serviceManager: serviceManager,\n      overlayPanelName: OverlayPanelName.IFRAME\n    }, React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(IFramePanel, {\n      useAITheme: this.props.theme.useAITheme,\n      ref: this.iframePanelRef,\n      onClickClose: this.onClose,\n      onClickRestart: this.onRestart,\n      onClickCloseAndRestart: this.onCloseAndRestart\n    })));\n  }\n  renderViewSourcePanel() {\n    const {serviceManager: serviceManager, viewSourcePanelState: viewSourcePanelState} = this.props;\n    return React.createElement(OverlayPanel, {\n      className: \"WAC__overlay--covering\",\n      onOpenStart: () => this.onPanelOpenStart(true),\n      onCloseStart: this.onPanelCloseStart,\n      onOpenEnd: this.onPanelOpenEnd,\n      onCloseEnd: () => this.onPanelCloseEnd(true),\n      animationOnOpen: AnimationInType.SLIDE_IN_FROM_BOTTOM,\n      animationOnClose: AnimationOutType.SLIDE_OUT_TO_BOTTOM,\n      shouldOpen: viewSourcePanelState.isOpen,\n      serviceManager: serviceManager,\n      overlayPanelName: OverlayPanelName.CONVERSATIONAL_SEARCH_CITATION\n    }, React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(ViewSourcePanel, {\n      ref: this.viewSourcePanelRef,\n      onClickClose: this.onClose,\n      onClickRestart: this.onRestart,\n      onClickCloseAndRestart: this.onCloseAndRestart\n    })));\n  }\n  renderCustomPanel() {\n    return React.createElement(CustomPanelExport, {\n      useAITheme: this.props.theme.useAITheme,\n      onClose: this.onClose,\n      onClickRestart: this.onRestart,\n      onCloseAndRestart: this.onCloseAndRestart,\n      onPanelOpenStart: () => this.onPanelOpenStart(true),\n      onPanelOpenEnd: this.onPanelOpenEnd,\n      onPanelCloseStart: this.onPanelCloseStart,\n      onPanelCloseEnd: () => this.onPanelCloseEnd(true)\n    });\n  }\n  renderResponsePanel() {\n    if (!this.props.responsePanelState.localMessageItem) {\n      return null;\n    }\n    const {isOpen: isOpen, localMessageItem: localMessageItem, isMessageForInput: isMessageForInput} = this.props.responsePanelState;\n    const panelOptions = (localMessageItem?.item).panel;\n    const eventName = `\"Show panel\" opened`;\n    const eventDescription = \"Panel opened through panel response type\";\n    const overlayPanelName = OverlayPanelName.PANEL_RESPONSE;\n    return React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(BodyAndFooterPanelComponent, {\n      eventName: eventName,\n      eventDescription: eventDescription,\n      overlayPanelName: overlayPanelName,\n      isOpen: isOpen,\n      isMessageForInput: isMessageForInput,\n      localMessageItem: localMessageItem,\n      title: panelOptions?.title,\n      showAnimations: panelOptions?.show_animations,\n      useAITheme: this.props.theme.useAITheme,\n      requestFocus: this.requestFocus,\n      onClose: this.onClose,\n      onClickRestart: this.onRestart,\n      onCloseAndRestart: this.onCloseAndRestart,\n      onClickBack: () => this.props.serviceManager.store.dispatch(actions.setResponsePanelIsOpen(false)),\n      onPanelOpenStart: () => this.onPanelOpenStart(true),\n      onPanelOpenEnd: this.onPanelOpenEnd,\n      onPanelCloseStart: this.onPanelCloseStart,\n      onPanelCloseEnd: () => {\n        this.onPanelCloseEnd(true);\n        this.props.serviceManager.store.dispatch(actions.setResponsePanelContent(null, false));\n      }\n    }));\n  }\n  renderWidget() {\n    const {serviceManager: serviceManager, useCustomHostElement: useCustomHostElement, locale: locale, catastrophicErrorType: catastrophicErrorType, config: config, isHydrated: isHydrated, theme: theme, chatWidthBreakpoint: chatWidthBreakpoint, layout: layout, languagePack: languagePack} = this.props;\n    const {closing: closing, open: open, extraClassNames: extraClassNames} = this.state;\n    const localeClassName = `WACLocale-${locale || \"en\"}`;\n    const showGlass = config.public.enableFocusTrap && open && !config.public.hideCloseButton && !config.public.headerConfig.hideMinimizeButton;\n    const trapActive = Boolean(showGlass && isHydrated);\n    const isWideWidth = chatWidthBreakpoint === ChatWidthBreakpoint.WIDE;\n    return React.createElement(FocusTrap, {\n      active: trapActive\n    }, React.createElement(\"div\", {\n      className: cx(\"WACMainWindow\", \"WACWidget__FocusTrapContainer\", ...extraClassNames),\n      ref: this.mainWindowRef\n    }, showGlass && React.createElement(\"div\", {\n      className: \"WACWidget__FocusTrapGlass\"\n    }), React.createElement(\"div\", {\n      id: `WACWidget${serviceManager.namespace.suffix}`,\n      className: cx(`WACWidget ${localeClassName}`, {\n        \"WACWidget--rounded\": theme.corners === CornersType.ROUND,\n        \"WACWidget--defaultElement\": !useCustomHostElement,\n        \"WACWidget--launched\": !closing,\n        \"WACWidget--closing\": closing,\n        \"WACWidget--closed\": !open,\n        \"WACWidget--maxWidth\": isWideWidth && layout.hasContentMaxWidth,\n        [WIDTH_BREAKPOINT_NARROW]: chatWidthBreakpoint === ChatWidthBreakpoint.NARROW,\n        [WIDTH_BREAKPOINT_STANDARD]: chatWidthBreakpoint === ChatWidthBreakpoint.STANDARD,\n        [WIDTH_BREAKPOINT_WIDE]: isWideWidth\n      }),\n      ref: this.containerRef\n    }, React.createElement(VisuallyHidden, null, React.createElement(\"h1\", null, languagePack.window_title)), catastrophicErrorType && this.renderCatastrophicPanel(), !catastrophicErrorType && React.createElement(\"div\", {\n      ref: this.animationContainerRef,\n      className: \"WACWidget__animationContainer\",\n      onScroll: () => {\n        if (this.animationContainerRef.current.scrollTop !== 0) {\n          this.animationContainerRef.current.scrollTop = 0;\n        }\n      }\n    }, this.renderChat()), React.createElement(\"div\", {\n      className: \"WACMainWindowModalHost\",\n      ref: this.setModalPortalHostElement\n    }))));\n  }\n  render() {\n    return React.createElement(ModalPortalRootContext.Provider, {\n      value: this.state.modalPortalHostElement\n    }, this.renderWidget());\n  }\n}\n\nvar MainWindow$1 = connect(state => state, null, null, {\n  forwardRef: true\n})(MainWindow);\n\nexport { MainWindow$1 as default };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction addClassNameToState(name) {\n  return previousState => {\n    const currentIndex = previousState.extraClassNames.indexOf(name);\n    if (currentIndex === -1) {\n      return {\n        extraClassNames: [ ...previousState.extraClassNames, name ]\n      };\n    }\n    return null;\n  };\n}\n\nfunction removeClassNameFromState(name) {\n  return previousState => ({\n    extraClassNames: previousState.extraClassNames.filter(value => value !== name)\n  });\n}\n\nexport { addClassNameToState, removeClassNameFromState };\n","import \"intl-pluralrules\";\n\nimport cx from \"classnames\";\n\nimport React, { useState, useMemo, useRef, Suspense } from \"react\";\n\nimport { RawIntlProvider, useIntl } from \"react-intl\";\n\nimport { Provider, useSelector, useDispatch } from \"react-redux\";\n\nimport { AriaAnnouncerProvider } from \"../components/aria/AriaAnnouncerProvider.js\";\n\nimport { LauncherContainer } from \"../components/launcher/LauncherContainer.js\";\n\nimport { LanguagePackContext } from \"../contexts/LanguagePackContext.js\";\n\nimport { WindowSizeContext } from \"../contexts/WindowSizeContext.js\";\n\nimport { ServiceManagerContext } from \"../contexts/ServiceManagerContext.js\";\n\nimport { useOnMount } from \"../hooks/useOnMount.js\";\n\nimport actions from \"../store/actions.js\";\n\nimport { IS_PHONE_IN_PORTRAIT_MODE, IS_PHONE } from \"../utils/browserUtils.js\";\n\nimport { consoleDebug, consoleError } from \"../utils/miscUtils.js\";\n\nimport { convertCSSVariablesToString, getThemeClassNames } from \"../utils/styleUtils.js\";\n\nimport MainWindow from \"./main/MainWindow.js\";\n\nimport { lazyTourComponent } from \"../../dynamic-imports/dynamic-imports.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const TourContainerLazy = lazyTourComponent();\n\nfunction App({serviceManager: serviceManager, hostElement: hostElement, applicationStyles: applicationStyles, fontStyles: fontStyles}) {\n  const {store: store} = serviceManager;\n  const {config: config} = store.getState();\n  if (config.public.debug) {\n    consoleDebug(\"[render] Called render\");\n  }\n  const combinedStyles = `${fontStyles ? `${fontStyles} ` : \"\"}${applicationStyles}`;\n  return React.createElement(Provider, {\n    store: store\n  }, React.createElement(AppContainer, {\n    serviceManager: serviceManager,\n    hostElement: hostElement,\n    applicationStyles: combinedStyles\n  }));\n}\n\nfunction AppContainer({serviceManager: serviceManager, hostElement: hostElement, applicationStyles: applicationStyles}) {\n  const languagePack = useSelector(state => state.languagePack);\n  const cssVariableOverrides = useSelector(state => state.cssVariableOverrides);\n  const theme = useSelector(state => state.theme);\n  const config = useSelector(state => state.config);\n  const layout = useSelector(state => state.layout);\n  const {namespace: namespace} = serviceManager;\n  const {originalName: originalName} = namespace;\n  const dispatch = useDispatch();\n  const [windowSize, setWindowSize] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight\n  });\n  const cssVariableOverrideString = useMemo(() => convertCSSVariablesToString(cssVariableOverrides), [ cssVariableOverrides ]);\n  const dir = document.dir || \"auto\";\n  useOnMount(() => {\n    const windowListener = () => {\n      setWindowSize({\n        width: window.innerWidth,\n        height: window.innerHeight\n      });\n    };\n    window.addEventListener(\"resize\", windowListener);\n    const visibilityListener = () => {\n      dispatch(actions.setIsBrowserPageVisible(document.visibilityState === \"visible\"));\n    };\n    document.addEventListener(\"visibilitychange\", visibilityListener);\n    return () => {\n      window.removeEventListener(\"resize\", windowListener);\n      document.removeEventListener(\"visibilitychange\", visibilityListener);\n    };\n  });\n  return React.createElement(\"div\", {\n    className: \"WACContainer\",\n    \"data-namespace\": originalName,\n    ref: node => {\n      if (node && hostElement) {\n        node.style.setProperty(\"height\", \"100%\", \"important\");\n        node.style.setProperty(\"width\", \"100%\", \"important\");\n      }\n    }\n  }, React.createElement(\"div\", {\n    className: \"WACContainer--styles\"\n  }, React.createElement(\"style\", {\n    \"data-base-styles\": \"true\",\n    nonce: config.public.cspNonce\n  }, applicationStyles || `.WACContainer { visibility: hidden; }`), React.createElement(\"style\", {\n    \"data-variables-custom\": \"true\",\n    nonce: config.public.cspNonce\n  }, cssVariableOverrideString)), React.createElement(\"div\", {\n    className: cx(`WACContainer--render`, getThemeClassNames(theme), {\n      \"WACContainer-disableMobileEnhancements\": hostElement && config.public.disableCustomElementMobileEnhancements,\n      \"WAC-isPhone\": IS_PHONE && !config.public.disableCustomElementMobileEnhancements,\n      \"WAC-isPhonePortraitMode\": IS_PHONE_IN_PORTRAIT_MODE && !config.public.disableCustomElementMobileEnhancements,\n      \"WAC--frameless\": !layout?.showFrame\n    }),\n    dir: dir\n  }, React.createElement(WindowSizeContext.Provider, {\n    value: windowSize\n  }, React.createElement(ServiceManagerContext.Provider, {\n    value: serviceManager\n  }, React.createElement(RawIntlProvider, {\n    value: serviceManager.intl\n  }, React.createElement(LanguagePackContext.Provider, {\n    value: languagePack\n  }, React.createElement(AriaAnnouncerProvider, null, React.createElement(MainContainer, {\n    serviceManager: serviceManager,\n    hostElement: hostElement\n  }))))))));\n}\n\nfunction MainContainer(props) {\n  const {hostElement: hostElement, serviceManager: serviceManager} = props;\n  const showLauncher = useSelector(state => state.launcher.config.is_on);\n  const {viewState: viewState} = useSelector(state => state.persistedToBrowserStorage.launcherState);\n  const tourContainerRef = useRef();\n  const mainWindowRef = useRef();\n  const showTour = viewState.tour;\n  const showedTourOnce = useRef(showTour);\n  showedTourOnce.current = showTour || showedTourOnce.current;\n  const intl = useIntl();\n  const namespace = serviceManager.namespace.originalName;\n  const languageKey = namespace ? \"window_ariaChatRegionNamespace\" : \"window_ariaChatRegion\";\n  const regionLabel = intl.formatMessage({\n    id: languageKey\n  }, {\n    namespace: namespace\n  });\n  useOnMount(() => {\n    function requestFocus() {\n      try {\n        const {persistedToBrowserStorage: persistedToBrowserStorage} = serviceManager.store.getState();\n        const {viewState: viewState} = persistedToBrowserStorage.launcherState;\n        if (viewState.tour) {\n          tourContainerRef.current?.requestFocus();\n        } else if (viewState.mainWindow) {\n          mainWindowRef.current?.requestFocus();\n        }\n      } catch (error) {\n        consoleError(\"An error occurred in App.requestFocus\", error);\n      }\n    }\n    serviceManager.appWindow = {\n      requestFocus: requestFocus\n    };\n  });\n  return React.createElement(\"div\", {\n    className: \"WACWidget__regionContainer\",\n    role: \"region\",\n    \"aria-label\": regionLabel\n  }, React.createElement(MainWindow, {\n    mainWindowRef: mainWindowRef,\n    useCustomHostElement: Boolean(hostElement),\n    serviceManager: serviceManager\n  }), showedTourOnce.current && React.createElement(Suspense, {\n    fallback: null\n  }, React.createElement(TourContainerLazy, {\n    ref: tourContainerRef\n  })), showLauncher && React.createElement(LauncherContainer, null));\n}\n\nexport { App as default };\n","import React from \"react\";\n\nimport ReactDOM from \"react-dom\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function UserDefinedResponsePortalsContainer({chatInstance: chatInstance, renderUserDefinedResponse: renderUserDefinedResponse, userDefinedResponseEventsBySlot: userDefinedResponseEventsBySlot}) {\n  return renderUserDefinedResponse ? Object.entries(userDefinedResponseEventsBySlot).map(([slot, slotState]) => {\n    const {element: element} = slotState;\n    if (!element) {\n      return null;\n    }\n    return React.createElement(UserDefinedResponseComponentPortal, {\n      key: slot,\n      hostElement: element\n    }, renderUserDefinedResponse(slotState, chatInstance));\n  }) : null;\n}\n\nfunction UserDefinedResponseComponentPortal({hostElement: hostElement, children: children}) {\n  return ReactDOM.createPortal(children, hostElement);\n}\n\nconst UserDefinedResponsePortalsContainerExport = React.memo(UserDefinedResponsePortalsContainer);\n\nexport { UserDefinedResponsePortalsContainerExport as UserDefinedResponsePortalsContainer };\n","import React from \"react\";\n\nimport ReactDOM from \"react-dom\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function WriteableElementsPortalsContainer({chatInstance: chatInstance, renderResponseMap: renderResponseMap}) {\n  return React.createElement(React.Fragment, null, Object.keys(chatInstance.writeableElements).map(key => {\n    const responseItem = renderResponseMap[key];\n    return responseItem ? React.createElement(WriteableElementsComponentPortal, {\n      key: key,\n      hostElement: chatInstance.writeableElements[key]\n    }, responseItem) : null;\n  }));\n}\n\nfunction WriteableElementsComponentPortal({hostElement: hostElement, children: children}) {\n  return ReactDOM.createPortal(children, hostElement);\n}\n\nconst WriteableElementsPortalsContainerExport = React.memo(WriteableElementsPortalsContainer);\n\nexport { WriteableElementsPortalsContainerExport as WriteableElementsPortalsContainer };\n","import isEqual from \"lodash-es/isEqual.js\";\n\nimport React, { useState, useRef, useEffect } from \"react\";\n\nimport Chat from \"../../shared/Chat.js\";\n\nimport { instantiateWidget } from \"../../shared/chatEntryFunctions.js\";\n\nimport App from \"../../shared/containers/App.js\";\n\nimport { sleep } from \"../../shared/utils/lang/promiseUtils.js\";\n\nimport { UserDefinedResponsePortalsContainer as UserDefinedResponsePortalsContainerExport } from \"./UserDefinedResponsePortalsContainer.js\";\n\nimport { WriteableElementsPortalsContainer as WriteableElementsPortalsContainerExport } from \"./WriteableElementsPortalsContainer.js\";\n\nimport { BusEventType } from \"../../../types/events/eventBusTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function AppContainer({config: config, onBeforeRender: onBeforeRender, onAfterRender: onAfterRender, renderUserDefinedResponse: renderUserDefinedResponse, renderWriteableElements: renderWriteableElements, container: container, setParentInstance: setParentInstance, element: element}) {\n  const [instance, setInstance] = useState(null);\n  const [renderProps, setRenderProps] = useState(null);\n  const [applicationStyles, setApplicationStyles] = useState(null);\n  const setInstances = instance => {\n    setInstance(instance);\n    setParentInstance?.(instance);\n  };\n  const [userDefinedResponseEventsBySlot, setUserDefinedResponseEventsBySlot] = useState({});\n  const managedWebChatRef = useRef(null);\n  const previousConfigRef = useRef(null);\n  useEffect(() => {\n    const previousConfig = previousConfigRef.current;\n    previousConfigRef.current = config;\n    async function render({serviceManager: serviceManager}) {\n      const applicationStyles = await loadStyles();\n      serviceManager.container = container;\n      if (serviceManager.customHostElement) {\n        container.style.setProperty(\"width\", \"100%\", \"important\");\n        container.style.setProperty(\"height\", \"100%\", \"important\");\n      } else {\n        container.style.setProperty(\"width\", \"0\", \"important\");\n        container.style.setProperty(\"height\", \"0\", \"important\");\n      }\n      setApplicationStyles(applicationStyles);\n      setRenderProps({\n        serviceManager: serviceManager\n      });\n      await sleep(0);\n    }\n    if (!isEqual(previousConfig, config)) {\n      const managedWebChat = {\n        instance: null,\n        shouldDestroy: false,\n        config: config\n      };\n      if (config) {\n        loadChat({\n          managedWebChatRef: managedWebChatRef,\n          managedWebChat: managedWebChat,\n          render: render,\n          setInstance: setInstances,\n          onBeforeRender: onBeforeRender,\n          onAfterRender: onAfterRender,\n          setUserDefinedResponseEventsBySlot: setUserDefinedResponseEventsBySlot,\n          element: element\n        });\n      }\n      return () => {\n        destroyWebChat(managedWebChat, setInstances);\n        previousConfigRef.current = null;\n      };\n    }\n    return undefined;\n  }, [ config, container ]);\n  if (renderProps && instance) {\n    return React.createElement(React.Fragment, null, React.createElement(App, {\n      serviceManager: renderProps.serviceManager,\n      hostElement: renderProps.serviceManager.customHostElement,\n      applicationStyles: applicationStyles\n    }), renderUserDefinedResponse && React.createElement(UserDefinedResponsePortalsContainerExport, {\n      chatInstance: instance,\n      renderUserDefinedResponse: renderUserDefinedResponse,\n      userDefinedResponseEventsBySlot: userDefinedResponseEventsBySlot\n    }), renderWriteableElements && React.createElement(WriteableElementsPortalsContainerExport, {\n      chatInstance: instance,\n      renderResponseMap: renderWriteableElements\n    }));\n  }\n  return null;\n}\n\nasync function destroyWebChat(managedWebChat, setInstance) {\n  if (managedWebChat) {\n    if (managedWebChat.instance) {\n      managedWebChat.instance.destroy();\n      await sleep(0);\n    }\n    managedWebChat.shouldDestroy = true;\n    managedWebChat.instance = null;\n  }\n  setInstance(null);\n  await sleep(0);\n}\n\nfunction addUserDefinedResponseHandler(webChatInstance, setUserDefinedResponseEventsBySlot) {\n  function userDefinedResponseHandler(event) {\n    setUserDefinedResponseEventsBySlot(userDefinedEventsBySlot => ({\n      ...userDefinedEventsBySlot,\n      [event.data.slot]: {\n        fullMessage: event.data.fullMessage,\n        messageItem: event.data.message,\n        element: event.data.element\n      }\n    }));\n  }\n  function userDefinedChunkHandler(event) {\n    if (\"complete_item\" in event.data.chunk) {\n      const messageItem = event.data.chunk.complete_item;\n      setUserDefinedResponseEventsBySlot(userDefinedEventsBySlot => ({\n        ...userDefinedEventsBySlot,\n        [event.data.slot]: {\n          messageItem: messageItem,\n          element: event.data.element\n        }\n      }));\n    } else if (\"partial_item\" in event.data.chunk) {\n      const itemChunk = event.data.chunk.partial_item;\n      setUserDefinedResponseEventsBySlot(userDefinedEventsBySlot => ({\n        ...userDefinedEventsBySlot,\n        [event.data.slot]: {\n          partialItems: [ ...userDefinedEventsBySlot[event.data.slot]?.partialItems || [], itemChunk ],\n          element: event.data.element\n        }\n      }));\n    }\n  }\n  function restartHandler() {\n    setUserDefinedResponseEventsBySlot({});\n  }\n  webChatInstance.on({\n    type: BusEventType.CHUNK_USER_DEFINED_RESPONSE,\n    handler: userDefinedChunkHandler\n  });\n  webChatInstance.on({\n    type: BusEventType.USER_DEFINED_RESPONSE,\n    handler: userDefinedResponseHandler\n  });\n  webChatInstance.on({\n    type: BusEventType.RESTART_CONVERSATION,\n    handler: restartHandler\n  });\n}\n\nasync function loadChat({managedWebChatRef: managedWebChatRef, managedWebChat: managedWebChat, render: render, setInstance: setInstance, onBeforeRender: onBeforeRender, onAfterRender: onAfterRender, setUserDefinedResponseEventsBySlot: setUserDefinedResponseEventsBySlot, element: element}) {\n  await destroyWebChat(managedWebChatRef.current, setInstance);\n  managedWebChatRef.current = managedWebChat;\n  if (managedWebChat.shouldDestroy) {\n    await destroyWebChat(managedWebChat, setInstance);\n    return;\n  }\n  const widget = await instantiateWidget(managedWebChat.config, () => Promise.resolve(Chat), Promise.resolve(render), element);\n  const instance = await widget.start();\n  addUserDefinedResponseHandler(instance, setUserDefinedResponseEventsBySlot);\n  onBeforeRender?.(instance);\n  await instance.render();\n  onAfterRender?.(instance);\n  setInstance(instance);\n  managedWebChat.instance = instance;\n  if (managedWebChat.shouldDestroy) {\n    await destroyWebChat(managedWebChat, setInstance);\n  }\n}\n\nconst AppContainerExport = React.memo(AppContainer);\n\nconst loadBaseStyles = async () => {\n  const {default: styles} = await import(\"../../shared/styles/export.scss.js\");\n  return styles;\n};\n\nconst loadCarbon = async () => {\n  const {default: carbon} = await import(\"../../shared/styles/export.carbon.scss.js\");\n  return carbon;\n};\n\nasync function loadStyles() {\n  const [styles, carbonStyles] = await Promise.all([ loadBaseStyles(), loadCarbon() ]);\n  return carbonStyles + styles;\n}\n\nexport { AppContainerExport as AppContainer };\n","import React, { useContext } from \"react\";\n\nimport { AriaAnnouncerContext } from \"../contexts/AriaAnnouncerContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function withAriaAnnouncer(Component) {\n  const Wrapped = React.forwardRef((props, ref) => {\n    const ariaAnnouncer = useContext(AriaAnnouncerContext);\n    return React.createElement(Component, {\n      ...props,\n      ref: ref,\n      ariaAnnouncer: ariaAnnouncer\n    });\n  });\n  Wrapped.displayName = `withAriaAnnouncer(${Component.displayName || Component.name || \"Component\"})`;\n  return Wrapped;\n}\n\nexport { withAriaAnnouncer };\n","import { WA_CONSOLE_PREFIX } from \"./constants.js\";\n\nimport { resolveOrTimeout } from \"./lang/promiseUtils.js\";\n\nimport { OnErrorType } from \"../../../types/config/PublicConfig.js\";\n\nimport { FileStatusValue } from \"../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ let enableDebugLog = false;\n\nlet enableDebugStackTracesLog = false;\n\nfunction debugLog(message, ...args) {\n  if (enableDebugLog) {\n    console.log(`${WA_CONSOLE_PREFIX} ${message}`, ...args);\n  }\n}\n\nfunction debugStackTrace(message, ...args) {\n  if (enableDebugStackTracesLog) {\n    const stack = new Error('This is not an error; it is a stack trace used for debugging purposes. It is enabled by the \"debugStackTraces: true\" configuration option.');\n    debugLog(message, stack, ...args);\n  } else {\n    debugLog(message, ...args);\n  }\n}\n\nfunction consoleError(message, ...args) {\n  console.error(`${WA_CONSOLE_PREFIX} ${message}`, ...args);\n}\n\nfunction consoleLog(message, ...args) {\n  console.log(`${WA_CONSOLE_PREFIX} ${message}`, ...args);\n}\n\nfunction consoleDebug(message, ...args) {\n  console.debug(`${WA_CONSOLE_PREFIX} ${message}`, ...args);\n}\n\nfunction consoleWarn(message, ...args) {\n  console.warn(`${WA_CONSOLE_PREFIX} ${message}`, ...args);\n}\n\nfunction setEnableDebugLog(debug) {\n  enableDebugLog = debug;\n}\n\nfunction setEnableDebugStackTracesLog(debug) {\n  enableDebugStackTracesLog = debug;\n}\n\nfunction isEnableDebugLog() {\n  return enableDebugLog;\n}\n\nasync function safeFetchTextWithTimeout(response) {\n  try {\n    if (response) {\n      return resolveOrTimeout(response.text(), 2e3, \"Getting response text\");\n    }\n  } catch (error) {\n    consoleError(\"Error getting fetch text\", error);\n  }\n  return undefined;\n}\n\nfunction createDidCatchErrorData(component, error, errorInfo, isCatastrophicError) {\n  return {\n    errorType: OnErrorType.RENDER,\n    message: `${component}.componentDidCatch`,\n    otherData: {\n      error: error,\n      errorInfo: errorInfo\n    },\n    catastrophicErrorType: isCatastrophicError\n  };\n}\n\nfunction getResponsiveElementPaddingValue(baseHeight = 180) {\n  return `${100 / (320 / baseHeight)}%`;\n}\n\nfunction isValidForUpload(upload) {\n  return upload.status === FileStatusValue.EDIT && !upload.isError;\n}\n\nfunction callOnError(onError, data) {\n  if (onError) {\n    try {\n      onError(data);\n    } catch (error) {\n      consoleError(\"Error calling onError\", error);\n    }\n  }\n}\n\nfunction getBotName(useAITheme, config) {\n  let botName;\n  if (useAITheme) {\n    botName = \"AI\";\n  } else {\n    botName = config.public.botName || \"watsonx\";\n  }\n  return botName;\n}\n\nexport { callOnError, consoleDebug, consoleError, consoleLog, consoleWarn, createDidCatchErrorData, debugLog, debugStackTrace, getBotName, getResponsiveElementPaddingValue, isEnableDebugLog, isValidForUpload, safeFetchTextWithTimeout, setEnableDebugLog, setEnableDebugStackTracesLog };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar MessageErrorState;\n\n(function(MessageErrorState) {\n  MessageErrorState[MessageErrorState[\"NONE\"] = 1] = \"NONE\";\n  MessageErrorState[MessageErrorState[\"FAILED\"] = 2] = \"FAILED\";\n  MessageErrorState[MessageErrorState[\"RETRYING\"] = 3] = \"RETRYING\";\n  MessageErrorState[MessageErrorState[\"WAITING\"] = 4] = \"WAITING\";\n})(MessageErrorState || (MessageErrorState = {}));\n\nexport { MessageErrorState };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar AnimationInType;\n\n(function(AnimationInType) {\n  AnimationInType[\"NONE\"] = \"none\";\n  AnimationInType[\"FADE_IN\"] = \"fadeIn\";\n  AnimationInType[\"SLIDE_IN_FROM_LEFT\"] = \"slideInFromLeft\";\n  AnimationInType[\"SLIDE_IN_FROM_RIGHT\"] = \"slideInFromRight\";\n  AnimationInType[\"SLIDE_IN_FROM_BOTTOM\"] = \"slideInFromBottom\";\n  AnimationInType[\"BRANDING_SLIDE_IN_FROM_BOTTOM\"] = \"brandingSlideInFromBottom\";\n})(AnimationInType || (AnimationInType = {}));\n\nvar AnimationOutType;\n\n(function(AnimationOutType) {\n  AnimationOutType[\"NONE\"] = \"none\";\n  AnimationOutType[\"FADE_OUT\"] = \"fadeOut\";\n  AnimationOutType[\"SLIDE_OUT_TO_LEFT\"] = \"slideOutToLeft\";\n  AnimationOutType[\"SLIDE_OUT_TO_RIGHT\"] = \"slideOutToRight\";\n  AnimationOutType[\"SLIDE_OUT_TO_TOP\"] = \"slideOutToTop\";\n  AnimationOutType[\"SLIDE_OUT_TO_BOTTOM\"] = \"slideOutToBottom\";\n})(AnimationOutType || (AnimationOutType = {}));\n\nexport { AnimationInType, AnimationOutType };\n","import cx from \"classnames\";\n\nimport React, { PureComponent } from \"react\";\n\nimport { AnimationInType, AnimationOutType } from \"../../../types/utilities/Animation.js\";\n\nimport { conditionalSetTimeout } from \"../utils/browserUtils.js\";\n\nimport { HideComponent } from \"./util/HideComponent.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ var OverlayPanelName;\n\n(function(OverlayPanelName) {\n  OverlayPanelName[\"DISCLAIMER\"] = \"disclaimer\";\n  OverlayPanelName[\"HOME_SCREEN\"] = \"home_screen\";\n  OverlayPanelName[\"AGENT\"] = \"agent\";\n  OverlayPanelName[\"HYDRATING\"] = \"hydrating\";\n  OverlayPanelName[\"CATASTROPHIC\"] = \"catastrophic\";\n  OverlayPanelName[\"BRANDING\"] = \"branding\";\n  OverlayPanelName[\"IFRAME\"] = \"iframe\";\n  OverlayPanelName[\"CONVERSATIONAL_SEARCH_CITATION\"] = \"conversational_search_citation\";\n  OverlayPanelName[\"CUSTOM\"] = \"custom\";\n  OverlayPanelName[\"SHOW_PANEL\"] = \"show_panel\";\n  OverlayPanelName[\"PANEL_RESPONSE\"] = \"panel_response\";\n})(OverlayPanelName || (OverlayPanelName = {}));\n\nconst ANIMATION_DURATION_IN_MS = 240;\n\nclass OverlayPanel extends PureComponent {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      isClosing: false,\n      isOpening: false\n    };\n    this.openPanelTimeout = null;\n    this.closePanelTimeout = null;\n    this.openPanel = () => {\n      const {onOpenEnd: onOpenEnd, onOpenStart: onOpenStart, animationOnOpen: animationOnOpen, animationDurationOpen: animationDurationOpen} = this.props;\n      onOpenStart?.();\n      this.setState({\n        isClosing: false,\n        isOpening: true\n      });\n      const durationInMS = animationOnOpen === AnimationInType.NONE ? 0 : animationDurationOpen || ANIMATION_DURATION_IN_MS;\n      this.openPanelTimeout = conditionalSetTimeout(() => {\n        this.setState({\n          isClosing: false,\n          isOpening: false\n        });\n        onOpenEnd?.();\n      }, durationInMS);\n    };\n    this.closePanel = () => {\n      const {onCloseEnd: onCloseEnd, onCloseStart: onCloseStart, animationOnClose: animationOnClose, animationDurationClose: animationDurationClose} = this.props;\n      onCloseStart?.();\n      this.setState({\n        isClosing: true,\n        isOpening: false\n      });\n      const durationInMS = animationOnClose === AnimationOutType.NONE ? 0 : animationDurationClose || ANIMATION_DURATION_IN_MS;\n      this.closePanelTimeout = conditionalSetTimeout(() => {\n        this.setState({\n          isClosing: false,\n          isOpening: false\n        });\n        onCloseEnd?.();\n      }, durationInMS);\n    };\n  }\n  componentDidMount() {\n    const {shouldOpen: shouldOpen} = this.props;\n    if (shouldOpen) {\n      this.openPanel();\n    }\n  }\n  componentDidUpdate(prevProps) {\n    const {shouldOpen: shouldOpen} = this.props;\n    if (shouldOpen !== prevProps.shouldOpen) {\n      if (shouldOpen) {\n        this.openPanel();\n      } else {\n        this.closePanel();\n      }\n    }\n  }\n  componentWillUnmount() {\n    if (this.openPanelTimeout) {\n      clearTimeout(this.openPanelTimeout);\n    }\n    if (this.closePanelTimeout) {\n      clearTimeout(this.closePanelTimeout);\n    }\n    if (this.props.shouldOpen) {\n      if (this.props.onCloseStart) {\n        this.props.onCloseStart();\n      }\n      if (this.props.onCloseEnd) {\n        this.props.onCloseEnd();\n      }\n    }\n  }\n  render() {\n    const {children: children, className: className, shouldOpen: shouldOpen, animationOnClose: animationOnClose, animationOnOpen: animationOnOpen, overlayPanelName: overlayPanelName} = this.props;\n    const {isClosing: isClosing, isOpening: isOpening} = this.state;\n    return React.createElement(HideComponent, {\n      hidden: !isClosing && !shouldOpen,\n      className: cx(\"WAC__overlay-panelContainer\", `WAC__overlay--${overlayPanelName}`, className, {\n        \"WAC__overlay-panelContainer--animating\": isOpening || isClosing\n      })\n    }, React.createElement(\"div\", {\n      className: cx(\"WAC__overlay-panel\", `WAC__overlay-panel--${overlayPanelName}`, {\n        [`WAC__overlay-panel--closing--${animationOnClose}`]: isClosing,\n        \"WAC__overlay-panel--closed\": !isClosing && !shouldOpen,\n        [`WAC__overlay-panel--opening--${animationOnOpen}`]: isOpening,\n        \"WAC__overlay-panel--open\": !isOpening && shouldOpen\n      })\n    }, children));\n  }\n}\n\nexport { OverlayPanel, OverlayPanelName };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const HideComponentContext = React.createContext(false);\n\nexport { HideComponentContext };\n","var ai_slug_title = \"Powered by IBM watsonx\";\n\nvar ai_slug_description = \"IBM watsonx is powered by the latest AI models to intelligently process conversations and provide help whenever and wherever you may need it.\";\n\nvar components_overflow_ariaLabel = \"Open and close list of options\";\n\nvar components_swiper_currentLabel = \"{currentSlideNumber}/{totalSlideCount}\";\n\nvar errors_communicating = \"{botName} isn't available right now. Problems with a related system are preventing the data from being supplied.\";\n\nvar errors_imageSource = \"Image is not available.\";\n\nvar errors_videoSource = \"Video is not available.\";\n\nvar errors_audioSource = \"Audio is not available.\";\n\nvar errors_iframeSource = \"The web page is not available.\";\n\nvar errors_singleMessage = \"There is an error with the message you just sent, but feel free to ask me something else.\";\n\nvar errors_ariaMessageRetrying = \"We are having some trouble sending your message but are still trying\";\n\nvar errors_ariaMessageFailed = \"Your message failed to be sent\";\n\nvar errors_noAgentsAvailable = \"No agents are available.\";\n\nvar errors_noAgentsJoined = \"No agents accepted the chat\";\n\nvar errors_connectingToAgent = \"I'm sorry. Something went wrong and I cannot connect you to an agent right now.\";\n\nvar errors_busy = \"I'm sorry, but I can't help you right now. I'm answering questions from lots of people at the moment. Please try again later.\";\n\nvar errors_agentAppSessionExpired = \"I'm sorry, but access to the chat history has expired.\";\n\nvar errors_generalContent = \"There was an error displaying this content\";\n\nvar errors_somethingWrong = \"Something went wrong\";\n\nvar input_ariaLabel = \"Message to send\";\n\nvar input_placeholder = \"Type something...\";\n\nvar input_buttonLabel = \"Click to send message\";\n\nvar input_uploadButtonLabel = \"Add files to upload\";\n\nvar window_title = \"Chat window\";\n\nvar window_ariaTourRegion = \"Tour\";\n\nvar window_ariaTourRegionNamespace = \"Tour {namespace}\";\n\nvar window_ariaChatRegion = \"Chat\";\n\nvar window_ariaChatRegionNamespace = \"Chat {namespace}\";\n\nvar window_ariaWindowOpened = \"The chat window has been opened\";\n\nvar window_ariaWindowClosed = \"The chat window has been closed\";\n\nvar window_ariaWindowLoading = \"The chat is loading.\";\n\nvar launcher_isOpen = \"Close the chat window\";\n\nvar launcher_isClosed = \"Open the chat window\";\n\nvar launcher_isTourOpen = \"Close the tour window\";\n\nvar launcher_isTourClosed = \"Open the tour window\";\n\nvar launcher_desktopGreeting = \"Hi! Im a virtual assistant. How can I help you today?\";\n\nvar launcher_mobileGreeting = \"Hi! How can I help you today?\";\n\nvar launcher_ariaIsExpanded = \"Close the chat launcher\";\n\nvar launcher_closeButton = \"Close\";\n\nvar messages_youSaid = \"You said\";\n\nvar messages_botSaid = \"{botName} said\";\n\nvar messages_agentSaid = \"The live agent said\";\n\nvar messages_searchResults = \"Search results\";\n\nvar messages_searchResultsLink = \"Open this search result in a new window\";\n\nvar messages_searchResultsOpenDocument = \"Open document\";\n\nvar messages_searchResultsOpenDocumentWithLabel = 'Open document \"{documentName}\"';\n\nvar messages_searchResultsExpand = \"Expand\";\n\nvar messages_searchResultsCollapse = \"Collapse\";\n\nvar messages_botIsLoading = \"{botName} is loading\";\n\nvar messages_botIsTyping = \"{botName} is typing\";\n\nvar messages_agentIsTyping = \"The live agent is typing\";\n\nvar messages_scrollHandle = \"Chat history begin\";\n\nvar messages_scrollHandleDetailed = \"Chat history begin. Activate to focus the first message then use the arrow, home, and end keys to move between messages. Press escape to exit.\";\n\nvar messages_scrollHandleEnd = \"Chat history end\";\n\nvar messages_scrollHandleEndDetailed = \"Chat history end. Activate to focus the last message then use the arrow, home, and end keys to move between messages. Press escape to exit.\";\n\nvar message_labelBot = \"{actorName} {timestamp}\";\n\nvar message_labelYou = \"You {timestamp}\";\n\nvar notifications_toastClose = \"Close notification\";\n\nvar buttons_restart = \"Restart conversation\";\n\nvar buttons_cancel = \"Cancel\";\n\nvar buttons_retry = \"Retry\";\n\nvar options_select = \"Select an option\";\n\nvar options_ariaOptionsDisabled = \"These options are disabled and cannot be selected\";\n\nvar header_previewLinkTitle = \"Assistant preview\";\n\nvar header_ariaCloseRestart = \"End chat and close the window\";\n\nvar header_ariaBotAvatar = \"{botName} avatar image\";\n\nvar header_overflowMenu_options = \"Options\";\n\nvar homeScreen_returnToAssistant = \"Return to assistant\";\n\nvar homeScreen_returnToHome = \"Return to the home screen\";\n\nvar homeScreen_overflowMenuHomeScreen = \"Home screen\";\n\nvar homeScreen_ariaQuickStartListButton = \"Quick start menu\";\n\nvar homeScreen_ariaQuickStartListOpened = \"The quick start menu has been opened.\";\n\nvar homeScreen_ariaQuickStartListClosed = \"The quick start menu has been closed.\";\n\nvar default_agent_availableMessage = \"Request an agent, and I'll notify you when they're ready. Your wait time may vary based on availability.\";\n\nvar default_agent_unavailableMessage = \"Sorry, no agents are available right now.\";\n\nvar agent_reason_error = \"Hmmm... I'm experiencing some difficulties. I need a human agent to manually continue the chat.\";\n\nvar agent_sdMissingWarning = 'No service desk is configured. Unless you have a custom service desk implemented, users will see an error instead of the message below. See the <a href=\"https://cloud.ibm.com/docs/watson-assistant?topic=watson-assistant-deploy-web-chat-haa\" rel=\"noreferrer noopener\" target=\"_blank\">documentation</a> for more information.';\n\nvar agent_noName = \"Live agent\";\n\nvar agent_chatTitle = \"Live agent support\";\n\nvar agent_startChat = \"Connect to agent\";\n\nvar agent_connecting = \"Request for agent sent...\";\n\nvar agent_agentNoNameTitle = \"Agent\";\n\nvar agent_agentJoinedName = \"{personName} connected.\";\n\nvar agent_agentJoinedNoName = \"A live agent connected.\";\n\nvar agent_youConnectedWarning = \"If you refresh or leave the current page, you'll have to request a new agent.\";\n\nvar agent_connectingMinutes = \"Current wait time is <b>{time, number} {time, plural, one {minute} other {minutes}}</b>.\";\n\nvar agent_connectingQueue = \"You're number <b>{position, number}</b> in line.\";\n\nvar agent_ariaAgentAvatar = \"Live agent avatar image\";\n\nvar agent_ariaGenericAvatar = \"Avatar image\";\n\nvar agent_ariaGenericBotAvatar = \"Avatar image\";\n\nvar agent_youEndedChat = \"You disconnected from the live agent.\";\n\nvar agent_conversationWasEnded = \"You disconnected from the live agent.\";\n\nvar agent_disconnected = \"Something went wrong and your connection to the live agent was lost. Check your internet connection and then try again to connect to an agent.\";\n\nvar agent_reconnected = \"The agent reconnected.\";\n\nvar agent_agentLeftChat = \"{personName} disconnected.\";\n\nvar agent_agentLeftChatNoName = \"The live agent disconnected.\";\n\nvar agent_agentEndedChat = \"{personName} ended the chat.\";\n\nvar agent_agentEndedChatNoName = \"The live agent ended the chat.\";\n\nvar agent_transferring = \"You're being transferred.\";\n\nvar agent_transferringNoName = \"You're being transferred.\";\n\nvar agent_endChat = \"Disconnect from live agent?\";\n\nvar agent_confirmSuspendedEndChatTitle = \"Disconnect from previous agent?\";\n\nvar agent_confirmSuspendedEndChatMessage = \"You are currently connected to an agent. Continuing will disconnect you from the agent and connect you to a new one. Do you want to continue?\";\n\nvar agent_confirmCancelRequestTitle = \"Cancel request?\";\n\nvar agent_confirmCancelRequestMessage = \"If you continue, you'll cancel your request for an agent.\";\n\nvar agent_confirmCancelRequestNo = \"Go back\";\n\nvar agent_confirmCancelRequestYes = \"Cancel request\";\n\nvar agent_confirmEndChat = \"If you disconnect, you'll have to request a new live agent.\";\n\nvar agent_confirmEndChatNo = \"Go back\";\n\nvar agent_confirmEndChatYes = \"Disconnect\";\n\nvar agent_confirmEndSuspendedYes = \"Continue\";\n\nvar agent_botReturned = \"Can I help you with anything else?\";\n\nvar agent_newMessage = \"New message\";\n\nvar agent_cardButtonChatRequested = \"Connecting...\";\n\nvar agent_cardButtonConnected = \"Connected\";\n\nvar agent_cardButtonChatEnded = \"Disconnected\";\n\nvar agent_cardMessageChatEnded = \"You disconnected from the live agent.\";\n\nvar agent_cardMessageConnected = \"You're now connected.\";\n\nvar agent_connectButtonCancel = \"Cancel\";\n\nvar agent_connectedButtonEndChat = \"Disconnect\";\n\nvar agent_connectWaiting = \"Waiting...\";\n\nvar agent_defaultMessageToAgent = \"Begin conversation\";\n\nvar agent_inputPlaceholderConnecting = \"Waiting for agent...\";\n\nvar agent_inputPlaceholderReconnecting = \"Reconnecting to agent...\";\n\nvar agent_sharingStopSharingButton = \"Stop sharing screen\";\n\nvar agent_sharingRequestTitle = \"Screen sharing\";\n\nvar agent_sharingRequestMessage = \"The agent has requested you share your screen. You can stop sharing at any time.\";\n\nvar agent_sharingAcceptButton = \"Share screen\";\n\nvar agent_sharingDeclineButton = \"Decline\";\n\nvar agent_sharingRequested = \"You were requested to share your screen.\";\n\nvar agent_sharingAccepted = \"You shared your screen.\";\n\nvar agent_sharingDeclined = \"You declined to share your screen.\";\n\nvar agent_sharingCancelled = \"The screen sharing request was cancelled.\";\n\nvar agent_sharingEnded = \"You stopped sharing your screen.\";\n\nvar agent_suspendedWarning = \"You are currently connected to an agent.\";\n\nvar icon_ariaUnreadMessages = \"There {count, plural, one {is} other {are}} {count, number} unread {count, plural, one {message} other {messages}}\";\n\nvar showMore = \"See more\";\n\nvar showMoreResults = \"See more\";\n\nvar disclaimer_title = \"Disclaimer\";\n\nvar disclaimer_accept = \"I accept\";\n\nvar general_ariaCloseInformationOverlay = \"Close information panel.\";\n\nvar general_ariaAnnounceOpenedInformationOverlay = \"An information panel has been opened.\";\n\nvar general_ariaAnnounceClosedInformationOverlay = \"An information panel has been closed.\";\n\nvar general_ariaAnnounceEscapeOverlay = \"Press escape or click the close button to close.\";\n\nvar general_returnToAssistant = \"Return to assistant\";\n\nvar conversationalSearch_streamingIncomplete = \"This message was not completed. Please try again.\";\n\nvar conversationalSearch_viewSourceDocument = \"View source\";\n\nvar conversationalSearch_citationsLabel = \"Sources\";\n\nvar conversationalSearch_toggleCitations = \"Open or close the list of sources\";\n\nvar conversationalSearch_responseStopped = \"Response stopped\";\n\nvar launcher_chatNow = \"Chat now\";\n\nvar iframe_ariaSourceLoaded = \"The web page has loaded.\";\n\nvar iframe_ariaImageAltText = \"Preview image for the web page panel.\";\n\nvar iframe_ariaClosePanel = \"Close the web page panel.\";\n\nvar iframe_ariaOpenedPanel = \"Web page panel has opened.\";\n\nvar iframe_ariaClosedPanel = \"Web page panel has closed.\";\n\nvar iframe_ariaClickPreviewCard = \"Click to open the web page panel and visit {source}.\";\n\nvar closeAndRestartModal_title = \"End chat\";\n\nvar closeAndRestartModal_message = \"Are you sure you want to end your chat?\";\n\nvar closeAndRestartModal_confirm = \"Yes\";\n\nvar closeAndRestartModal_cancel = \"No\";\n\nvar datePicker_chooseDate = \"Choose a date ({format})\";\n\nvar datePicker_confirmDate = \"Confirm date\";\n\nvar tour_resumeButton = \"Resume\";\n\nvar tour_restartButton = \"Restart\";\n\nvar tour_startButton = \"Get started\";\n\nvar tour_doneButton = \"Done\";\n\nvar tour_ariaMinimizeButton = \"Hide tour window\";\n\nvar tour_ariaCloseButton = \"Close tour window\";\n\nvar tour_ariaChatButton = \"Open the chat window\";\n\nvar tour_ariaPreviousButton = \"Go to previous step\";\n\nvar tour_ariaNextButton = \"Go to next step\";\n\nvar tour_instructions = \"Use the previous and next buttons to navigate between steps of the tour. Use the {chatButtonText} button to open that chat window.\";\n\nvar tour_errorFetchingStep = \"There was a problem fetching the next step.\";\n\nvar tour_errorTitle = \"Unable to continue\";\n\nvar tour_errorBody = \"The content failed to load. Please try again.\";\n\nvar fileSharing_fileTooLarge = \"The maximum file size allowed is {maxSize}.\";\n\nvar fileSharing_ariaAnnounceSuccess = \"The file was uploaded successfully.\";\n\nvar fileSharing_fileIcon = \"File icon\";\n\nvar fileSharing_removeButtonTitle = \"Remove file\";\n\nvar fileSharing_statusUploading = \"Uploading file\";\n\nvar fileSharing_uploadFailed = \"There was an error uploading the file.\";\n\nvar fileSharing_agentMessageText = \"File upload\";\n\nvar fileSharing_request = \"The agent has requested you upload a file.\";\n\nvar carousel_prevNavButton = \"Go to previous slide.\";\n\nvar carousel_nextNavButton = \"Go to next slide.\";\n\nvar input_completionsTagApp = \"App\";\n\nvar input_completionsTagAssistant = \"Assistant\";\n\nvar table_filterPlaceholder = \"Filter table\";\n\nvar table_previousPage = \"Previous page\";\n\nvar table_nextPage = \"Next page\";\n\nvar table_itemsPerPage = \"Items per page:\";\n\nvar table_paginationSupplementalText = \"of {pagesCount, number} {pagesCount, plural, one {page} other {pages}}\";\n\nvar table_paginationStatus = \"{start, number}{end, number} of {count, number} {count, plural, one {item} other {items}}\";\n\nvar feedback_positiveLabel = \"Good response\";\n\nvar feedback_negativeLabel = \"Bad response\";\n\nvar feedback_defaultTitle = \"Additional feedback\";\n\nvar feedback_defaultPrompt = \"Why did you choose this rating?\";\n\nvar feedback_defaultPlaceholder = \"Add a comment\";\n\nvar feedback_submitLabel = \"Submit\";\n\nvar feedback_cancelLabel = \"Cancel\";\n\nvar input_stopResponse = \"Stop response\";\n\nvar messages_responseStopped = \"Response stopped\";\n\nvar chainOfThought_stepTitle = \"{stepNumber, number}: {stepTitle}\";\n\nvar chainOfThought_inputLabel = \"Input\";\n\nvar chainOfThought_outputLabel = \"Output\";\n\nvar chainOfThought_toolLabel = \"Tool\";\n\nvar chainOfThought_statusSucceededLabel = \"Succeeded\";\n\nvar chainOfThought_statusFailedLabel = \"Failed\";\n\nvar chainOfThought_statusProcessingLabel = \"Processing\";\n\nvar chainOfThought_explainabilityLabel = \"How did I get this answer?\";\n\nvar enLanguagePack = {\n  ai_slug_title: ai_slug_title,\n  ai_slug_description: ai_slug_description,\n  components_overflow_ariaLabel: components_overflow_ariaLabel,\n  components_swiper_currentLabel: components_swiper_currentLabel,\n  errors_communicating: errors_communicating,\n  errors_imageSource: errors_imageSource,\n  errors_videoSource: errors_videoSource,\n  errors_audioSource: errors_audioSource,\n  errors_iframeSource: errors_iframeSource,\n  errors_singleMessage: errors_singleMessage,\n  errors_ariaMessageRetrying: errors_ariaMessageRetrying,\n  errors_ariaMessageFailed: errors_ariaMessageFailed,\n  errors_noAgentsAvailable: errors_noAgentsAvailable,\n  errors_noAgentsJoined: errors_noAgentsJoined,\n  errors_connectingToAgent: errors_connectingToAgent,\n  errors_busy: errors_busy,\n  errors_agentAppSessionExpired: errors_agentAppSessionExpired,\n  errors_generalContent: errors_generalContent,\n  errors_somethingWrong: errors_somethingWrong,\n  input_ariaLabel: input_ariaLabel,\n  input_placeholder: input_placeholder,\n  input_buttonLabel: input_buttonLabel,\n  input_uploadButtonLabel: input_uploadButtonLabel,\n  window_title: window_title,\n  window_ariaTourRegion: window_ariaTourRegion,\n  window_ariaTourRegionNamespace: window_ariaTourRegionNamespace,\n  window_ariaChatRegion: window_ariaChatRegion,\n  window_ariaChatRegionNamespace: window_ariaChatRegionNamespace,\n  window_ariaWindowOpened: window_ariaWindowOpened,\n  window_ariaWindowClosed: window_ariaWindowClosed,\n  window_ariaWindowLoading: window_ariaWindowLoading,\n  launcher_isOpen: launcher_isOpen,\n  launcher_isClosed: launcher_isClosed,\n  launcher_isTourOpen: launcher_isTourOpen,\n  launcher_isTourClosed: launcher_isTourClosed,\n  launcher_desktopGreeting: launcher_desktopGreeting,\n  launcher_mobileGreeting: launcher_mobileGreeting,\n  launcher_ariaIsExpanded: launcher_ariaIsExpanded,\n  launcher_closeButton: launcher_closeButton,\n  messages_youSaid: messages_youSaid,\n  messages_botSaid: messages_botSaid,\n  messages_agentSaid: messages_agentSaid,\n  messages_searchResults: messages_searchResults,\n  messages_searchResultsLink: messages_searchResultsLink,\n  messages_searchResultsOpenDocument: messages_searchResultsOpenDocument,\n  messages_searchResultsOpenDocumentWithLabel: messages_searchResultsOpenDocumentWithLabel,\n  messages_searchResultsExpand: messages_searchResultsExpand,\n  messages_searchResultsCollapse: messages_searchResultsCollapse,\n  messages_botIsLoading: messages_botIsLoading,\n  messages_botIsTyping: messages_botIsTyping,\n  messages_agentIsTyping: messages_agentIsTyping,\n  messages_scrollHandle: messages_scrollHandle,\n  messages_scrollHandleDetailed: messages_scrollHandleDetailed,\n  messages_scrollHandleEnd: messages_scrollHandleEnd,\n  messages_scrollHandleEndDetailed: messages_scrollHandleEndDetailed,\n  message_labelBot: message_labelBot,\n  message_labelYou: message_labelYou,\n  notifications_toastClose: notifications_toastClose,\n  buttons_restart: buttons_restart,\n  buttons_cancel: buttons_cancel,\n  buttons_retry: buttons_retry,\n  options_select: options_select,\n  options_ariaOptionsDisabled: options_ariaOptionsDisabled,\n  header_previewLinkTitle: header_previewLinkTitle,\n  header_ariaCloseRestart: header_ariaCloseRestart,\n  header_ariaBotAvatar: header_ariaBotAvatar,\n  header_overflowMenu_options: header_overflowMenu_options,\n  homeScreen_returnToAssistant: homeScreen_returnToAssistant,\n  homeScreen_returnToHome: homeScreen_returnToHome,\n  homeScreen_overflowMenuHomeScreen: homeScreen_overflowMenuHomeScreen,\n  homeScreen_ariaQuickStartListButton: homeScreen_ariaQuickStartListButton,\n  homeScreen_ariaQuickStartListOpened: homeScreen_ariaQuickStartListOpened,\n  homeScreen_ariaQuickStartListClosed: homeScreen_ariaQuickStartListClosed,\n  default_agent_availableMessage: default_agent_availableMessage,\n  default_agent_unavailableMessage: default_agent_unavailableMessage,\n  agent_reason_error: agent_reason_error,\n  agent_sdMissingWarning: agent_sdMissingWarning,\n  agent_noName: agent_noName,\n  agent_chatTitle: agent_chatTitle,\n  agent_startChat: agent_startChat,\n  agent_connecting: agent_connecting,\n  agent_agentNoNameTitle: agent_agentNoNameTitle,\n  agent_agentJoinedName: agent_agentJoinedName,\n  agent_agentJoinedNoName: agent_agentJoinedNoName,\n  agent_youConnectedWarning: agent_youConnectedWarning,\n  agent_connectingMinutes: agent_connectingMinutes,\n  agent_connectingQueue: agent_connectingQueue,\n  agent_ariaAgentAvatar: agent_ariaAgentAvatar,\n  agent_ariaGenericAvatar: agent_ariaGenericAvatar,\n  agent_ariaGenericBotAvatar: agent_ariaGenericBotAvatar,\n  agent_youEndedChat: agent_youEndedChat,\n  agent_conversationWasEnded: agent_conversationWasEnded,\n  agent_disconnected: agent_disconnected,\n  agent_reconnected: agent_reconnected,\n  agent_agentLeftChat: agent_agentLeftChat,\n  agent_agentLeftChatNoName: agent_agentLeftChatNoName,\n  agent_agentEndedChat: agent_agentEndedChat,\n  agent_agentEndedChatNoName: agent_agentEndedChatNoName,\n  agent_transferring: agent_transferring,\n  agent_transferringNoName: agent_transferringNoName,\n  agent_endChat: agent_endChat,\n  agent_confirmSuspendedEndChatTitle: agent_confirmSuspendedEndChatTitle,\n  agent_confirmSuspendedEndChatMessage: agent_confirmSuspendedEndChatMessage,\n  agent_confirmCancelRequestTitle: agent_confirmCancelRequestTitle,\n  agent_confirmCancelRequestMessage: agent_confirmCancelRequestMessage,\n  agent_confirmCancelRequestNo: agent_confirmCancelRequestNo,\n  agent_confirmCancelRequestYes: agent_confirmCancelRequestYes,\n  agent_confirmEndChat: agent_confirmEndChat,\n  agent_confirmEndChatNo: agent_confirmEndChatNo,\n  agent_confirmEndChatYes: agent_confirmEndChatYes,\n  agent_confirmEndSuspendedYes: agent_confirmEndSuspendedYes,\n  agent_botReturned: agent_botReturned,\n  agent_newMessage: agent_newMessage,\n  agent_cardButtonChatRequested: agent_cardButtonChatRequested,\n  agent_cardButtonConnected: agent_cardButtonConnected,\n  agent_cardButtonChatEnded: agent_cardButtonChatEnded,\n  agent_cardMessageChatEnded: agent_cardMessageChatEnded,\n  agent_cardMessageConnected: agent_cardMessageConnected,\n  agent_connectButtonCancel: agent_connectButtonCancel,\n  agent_connectedButtonEndChat: agent_connectedButtonEndChat,\n  agent_connectWaiting: agent_connectWaiting,\n  agent_defaultMessageToAgent: agent_defaultMessageToAgent,\n  agent_inputPlaceholderConnecting: agent_inputPlaceholderConnecting,\n  agent_inputPlaceholderReconnecting: agent_inputPlaceholderReconnecting,\n  agent_sharingStopSharingButton: agent_sharingStopSharingButton,\n  agent_sharingRequestTitle: agent_sharingRequestTitle,\n  agent_sharingRequestMessage: agent_sharingRequestMessage,\n  agent_sharingAcceptButton: agent_sharingAcceptButton,\n  agent_sharingDeclineButton: agent_sharingDeclineButton,\n  agent_sharingRequested: agent_sharingRequested,\n  agent_sharingAccepted: agent_sharingAccepted,\n  agent_sharingDeclined: agent_sharingDeclined,\n  agent_sharingCancelled: agent_sharingCancelled,\n  agent_sharingEnded: agent_sharingEnded,\n  agent_suspendedWarning: agent_suspendedWarning,\n  icon_ariaUnreadMessages: icon_ariaUnreadMessages,\n  showMore: showMore,\n  showMoreResults: showMoreResults,\n  disclaimer_title: disclaimer_title,\n  disclaimer_accept: disclaimer_accept,\n  general_ariaCloseInformationOverlay: general_ariaCloseInformationOverlay,\n  general_ariaAnnounceOpenedInformationOverlay: general_ariaAnnounceOpenedInformationOverlay,\n  general_ariaAnnounceClosedInformationOverlay: general_ariaAnnounceClosedInformationOverlay,\n  general_ariaAnnounceEscapeOverlay: general_ariaAnnounceEscapeOverlay,\n  general_returnToAssistant: general_returnToAssistant,\n  conversationalSearch_streamingIncomplete: conversationalSearch_streamingIncomplete,\n  conversationalSearch_viewSourceDocument: conversationalSearch_viewSourceDocument,\n  conversationalSearch_citationsLabel: conversationalSearch_citationsLabel,\n  conversationalSearch_toggleCitations: conversationalSearch_toggleCitations,\n  conversationalSearch_responseStopped: conversationalSearch_responseStopped,\n  launcher_chatNow: launcher_chatNow,\n  iframe_ariaSourceLoaded: iframe_ariaSourceLoaded,\n  iframe_ariaImageAltText: iframe_ariaImageAltText,\n  iframe_ariaClosePanel: iframe_ariaClosePanel,\n  iframe_ariaOpenedPanel: iframe_ariaOpenedPanel,\n  iframe_ariaClosedPanel: iframe_ariaClosedPanel,\n  iframe_ariaClickPreviewCard: iframe_ariaClickPreviewCard,\n  closeAndRestartModal_title: closeAndRestartModal_title,\n  closeAndRestartModal_message: closeAndRestartModal_message,\n  closeAndRestartModal_confirm: closeAndRestartModal_confirm,\n  closeAndRestartModal_cancel: closeAndRestartModal_cancel,\n  datePicker_chooseDate: datePicker_chooseDate,\n  datePicker_confirmDate: datePicker_confirmDate,\n  tour_resumeButton: tour_resumeButton,\n  tour_restartButton: tour_restartButton,\n  tour_startButton: tour_startButton,\n  tour_doneButton: tour_doneButton,\n  tour_ariaMinimizeButton: tour_ariaMinimizeButton,\n  tour_ariaCloseButton: tour_ariaCloseButton,\n  tour_ariaChatButton: tour_ariaChatButton,\n  tour_ariaPreviousButton: tour_ariaPreviousButton,\n  tour_ariaNextButton: tour_ariaNextButton,\n  tour_instructions: tour_instructions,\n  tour_errorFetchingStep: tour_errorFetchingStep,\n  tour_errorTitle: tour_errorTitle,\n  tour_errorBody: tour_errorBody,\n  fileSharing_fileTooLarge: fileSharing_fileTooLarge,\n  fileSharing_ariaAnnounceSuccess: fileSharing_ariaAnnounceSuccess,\n  fileSharing_fileIcon: fileSharing_fileIcon,\n  fileSharing_removeButtonTitle: fileSharing_removeButtonTitle,\n  fileSharing_statusUploading: fileSharing_statusUploading,\n  fileSharing_uploadFailed: fileSharing_uploadFailed,\n  fileSharing_agentMessageText: fileSharing_agentMessageText,\n  fileSharing_request: fileSharing_request,\n  carousel_prevNavButton: carousel_prevNavButton,\n  carousel_nextNavButton: carousel_nextNavButton,\n  input_completionsTagApp: input_completionsTagApp,\n  input_completionsTagAssistant: input_completionsTagAssistant,\n  table_filterPlaceholder: table_filterPlaceholder,\n  table_previousPage: table_previousPage,\n  table_nextPage: table_nextPage,\n  table_itemsPerPage: table_itemsPerPage,\n  table_paginationSupplementalText: table_paginationSupplementalText,\n  table_paginationStatus: table_paginationStatus,\n  feedback_positiveLabel: feedback_positiveLabel,\n  feedback_negativeLabel: feedback_negativeLabel,\n  feedback_defaultTitle: feedback_defaultTitle,\n  feedback_defaultPrompt: feedback_defaultPrompt,\n  feedback_defaultPlaceholder: feedback_defaultPlaceholder,\n  feedback_submitLabel: feedback_submitLabel,\n  feedback_cancelLabel: feedback_cancelLabel,\n  input_stopResponse: input_stopResponse,\n  messages_responseStopped: messages_responseStopped,\n  chainOfThought_stepTitle: chainOfThought_stepTitle,\n  chainOfThought_inputLabel: chainOfThought_inputLabel,\n  chainOfThought_outputLabel: chainOfThought_outputLabel,\n  chainOfThought_toolLabel: chainOfThought_toolLabel,\n  chainOfThought_statusSucceededLabel: chainOfThought_statusSucceededLabel,\n  chainOfThought_statusFailedLabel: chainOfThought_statusFailedLabel,\n  chainOfThought_statusProcessingLabel: chainOfThought_statusProcessingLabel,\n  chainOfThought_explainabilityLabel: chainOfThought_explainabilityLabel\n};\n\nexport { agent_agentEndedChat, agent_agentEndedChatNoName, agent_agentJoinedName, agent_agentJoinedNoName, agent_agentLeftChat, agent_agentLeftChatNoName, agent_agentNoNameTitle, agent_ariaAgentAvatar, agent_ariaGenericAvatar, agent_ariaGenericBotAvatar, agent_botReturned, agent_cardButtonChatEnded, agent_cardButtonChatRequested, agent_cardButtonConnected, agent_cardMessageChatEnded, agent_cardMessageConnected, agent_chatTitle, agent_confirmCancelRequestMessage, agent_confirmCancelRequestNo, agent_confirmCancelRequestTitle, agent_confirmCancelRequestYes, agent_confirmEndChat, agent_confirmEndChatNo, agent_confirmEndChatYes, agent_confirmEndSuspendedYes, agent_confirmSuspendedEndChatMessage, agent_confirmSuspendedEndChatTitle, agent_connectButtonCancel, agent_connectWaiting, agent_connectedButtonEndChat, agent_connecting, agent_connectingMinutes, agent_connectingQueue, agent_conversationWasEnded, agent_defaultMessageToAgent, agent_disconnected, agent_endChat, agent_inputPlaceholderConnecting, agent_inputPlaceholderReconnecting, agent_newMessage, agent_noName, agent_reason_error, agent_reconnected, agent_sdMissingWarning, agent_sharingAcceptButton, agent_sharingAccepted, agent_sharingCancelled, agent_sharingDeclineButton, agent_sharingDeclined, agent_sharingEnded, agent_sharingRequestMessage, agent_sharingRequestTitle, agent_sharingRequested, agent_sharingStopSharingButton, agent_startChat, agent_suspendedWarning, agent_transferring, agent_transferringNoName, agent_youConnectedWarning, agent_youEndedChat, ai_slug_description, ai_slug_title, buttons_cancel, buttons_restart, buttons_retry, carousel_nextNavButton, carousel_prevNavButton, chainOfThought_explainabilityLabel, chainOfThought_inputLabel, chainOfThought_outputLabel, chainOfThought_statusFailedLabel, chainOfThought_statusProcessingLabel, chainOfThought_statusSucceededLabel, chainOfThought_stepTitle, chainOfThought_toolLabel, closeAndRestartModal_cancel, closeAndRestartModal_confirm, closeAndRestartModal_message, closeAndRestartModal_title, components_overflow_ariaLabel, components_swiper_currentLabel, conversationalSearch_citationsLabel, conversationalSearch_responseStopped, conversationalSearch_streamingIncomplete, conversationalSearch_toggleCitations, conversationalSearch_viewSourceDocument, datePicker_chooseDate, datePicker_confirmDate, enLanguagePack as default, default_agent_availableMessage, default_agent_unavailableMessage, disclaimer_accept, disclaimer_title, errors_agentAppSessionExpired, errors_ariaMessageFailed, errors_ariaMessageRetrying, errors_audioSource, errors_busy, errors_communicating, errors_connectingToAgent, errors_generalContent, errors_iframeSource, errors_imageSource, errors_noAgentsAvailable, errors_noAgentsJoined, errors_singleMessage, errors_somethingWrong, errors_videoSource, feedback_cancelLabel, feedback_defaultPlaceholder, feedback_defaultPrompt, feedback_defaultTitle, feedback_negativeLabel, feedback_positiveLabel, feedback_submitLabel, fileSharing_agentMessageText, fileSharing_ariaAnnounceSuccess, fileSharing_fileIcon, fileSharing_fileTooLarge, fileSharing_removeButtonTitle, fileSharing_request, fileSharing_statusUploading, fileSharing_uploadFailed, general_ariaAnnounceClosedInformationOverlay, general_ariaAnnounceEscapeOverlay, general_ariaAnnounceOpenedInformationOverlay, general_ariaCloseInformationOverlay, general_returnToAssistant, header_ariaBotAvatar, header_ariaCloseRestart, header_overflowMenu_options, header_previewLinkTitle, homeScreen_ariaQuickStartListButton, homeScreen_ariaQuickStartListClosed, homeScreen_ariaQuickStartListOpened, homeScreen_overflowMenuHomeScreen, homeScreen_returnToAssistant, homeScreen_returnToHome, icon_ariaUnreadMessages, iframe_ariaClickPreviewCard, iframe_ariaClosePanel, iframe_ariaClosedPanel, iframe_ariaImageAltText, iframe_ariaOpenedPanel, iframe_ariaSourceLoaded, input_ariaLabel, input_buttonLabel, input_completionsTagApp, input_completionsTagAssistant, input_placeholder, input_stopResponse, input_uploadButtonLabel, launcher_ariaIsExpanded, launcher_chatNow, launcher_closeButton, launcher_desktopGreeting, launcher_isClosed, launcher_isOpen, launcher_isTourClosed, launcher_isTourOpen, launcher_mobileGreeting, message_labelBot, message_labelYou, messages_agentIsTyping, messages_agentSaid, messages_botIsLoading, messages_botIsTyping, messages_botSaid, messages_responseStopped, messages_scrollHandle, messages_scrollHandleDetailed, messages_scrollHandleEnd, messages_scrollHandleEndDetailed, messages_searchResults, messages_searchResultsCollapse, messages_searchResultsExpand, messages_searchResultsLink, messages_searchResultsOpenDocument, messages_searchResultsOpenDocumentWithLabel, messages_youSaid, notifications_toastClose, options_ariaOptionsDisabled, options_select, showMore, showMoreResults, table_filterPlaceholder, table_itemsPerPage, table_nextPage, table_paginationStatus, table_paginationSupplementalText, table_previousPage, tour_ariaChatButton, tour_ariaCloseButton, tour_ariaMinimizeButton, tour_ariaNextButton, tour_ariaPreviousButton, tour_doneButton, tour_errorBody, tour_errorFetchingStep, tour_errorTitle, tour_instructions, tour_restartButton, tour_resumeButton, tour_startButton, window_ariaChatRegion, window_ariaChatRegionNamespace, window_ariaTourRegion, window_ariaTourRegionNamespace, window_ariaWindowClosed, window_ariaWindowLoading, window_ariaWindowOpened, window_title };\n","import { PureComponent } from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ class MountChildrenOnDelay extends PureComponent {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      showChildren: false\n    };\n  }\n  componentDidMount() {\n    this.onComponentDidMount = setTimeout(() => {\n      this.setState({\n        showChildren: true\n      });\n    }, this.props.delay);\n  }\n  componentWillUnmount() {\n    clearTimeout(this.onComponentDidMount);\n    this.onComponentDidMount = undefined;\n  }\n  render() {\n    if (!this.state.showChildren) {\n      return false;\n    }\n    return this.props.children;\n  }\n}\n\nMountChildrenOnDelay.defaultProps = {\n  delay: 500\n};\n\nexport { MountChildrenOnDelay };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction resolvablePromise() {\n  let resolveFunction;\n  let rejectFunction;\n  const promise = new Promise((resolve, reject) => {\n    resolveFunction = resolve;\n    rejectFunction = reject;\n  });\n  promise.doResolve = resolveValue => {\n    promise.isResolved = true;\n    promise.isComplete = true;\n    resolveFunction(resolveValue);\n  };\n  promise.doReject = rejectValue => {\n    promise.isRejected = true;\n    promise.isComplete = true;\n    rejectFunction(rejectValue);\n  };\n  promise.isResolved = false;\n  promise.isRejected = false;\n  promise.isComplete = false;\n  return promise;\n}\n\nexport { resolvablePromise };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ async function loadHAA() {\n  const {createService: createService} = await import(\"../shared/services/haa/HumanAgentServiceImpl.js\");\n  return createService;\n}\n\nfunction lazyWithPreload(factory) {\n  const Component = React.lazy(factory);\n  Component.preload = factory;\n  return Component;\n}\n\nfunction lazyChat() {\n  return lazyWithPreload(() => import(\"../shared/components/Chat.js\"));\n}\n\nfunction lazyCatastrophicError() {\n  return lazyWithPreload(() => import(\"../shared/components/CatastrophicError.js\").then(mod => ({\n    default: mod.CatastrophicError\n  })));\n}\n\nfunction lazyDisclaimer() {\n  return lazyWithPreload(() => import(\"../shared/components/Disclaimer.js\").then(mod => ({\n    default: mod.Disclaimer\n  })));\n}\n\nfunction lazyHomeScreenContainer() {\n  return lazyWithPreload(() => import(\"../shared/components/homeScreen/HomeScreenContainer.js\").then(mod => ({\n    default: mod.HomeScreenContainer\n  })));\n}\n\nfunction lazyIFramePanel() {\n  return lazyWithPreload(() => import(\"../shared/components/responseTypes/iframe/IFramePanel.js\").then(mod => ({\n    default: mod.IFramePanel\n  })));\n}\n\nfunction lazyViewSourcePanel() {\n  return lazyWithPreload(() => import(\"../shared/components/responseTypes/util/citations/ViewSourcePanel.js\").then(mod => ({\n    default: mod.ViewSourcePanel\n  })));\n}\n\nfunction lazyBodyAndFooterPanelComponent() {\n  return lazyWithPreload(() => import(\"../shared/components/panels/BodyAndFooterPanelComponent.js\").then(mod => ({\n    default: mod.BodyAndFooterPanelComponent\n  })));\n}\n\nfunction lazyTourComponent() {\n  return React.lazy(() => import(\"../shared/components/tour/TourContainer.js\"));\n}\n\nfunction lazyMediaPlayer() {\n  return React.lazy(() => import(\"../shared/components/responseTypes/util/ReactPlayer.js\"));\n}\n\nfunction lazyCarousel() {\n  return React.lazy(() => import(\"../shared/components/responseTypes/carousel/Carousel.js\"));\n}\n\nexport { lazyBodyAndFooterPanelComponent, lazyCarousel, lazyCatastrophicError, lazyChat, lazyDisclaimer, lazyHomeScreenContainer, lazyIFramePanel, lazyMediaPlayer, lazyTourComponent, lazyViewSourcePanel, loadHAA };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const VisuallyHidden = React.forwardRef((props, ref) => React.createElement(\"div\", {\n  ref: ref,\n  ...props,\n  className: `WACVisuallyHidden ${props.className || \"\"}`\n}, props.children));\n\nVisuallyHidden.displayName = \"VisuallyHidden\";\n\nexport { VisuallyHidden as default };\n","import { detect } from \"detect-browser\";\n\nimport memoizeOne from \"memoize-one\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const browser = detect();\n\nconst IS_IPAD = /iPad/.test(window.navigator.platform) || window.navigator.platform === \"MacIntel\" && window.navigator.maxTouchPoints > 1;\n\nconst IS_IOS = browser?.os === \"iOS\";\n\nconst IS_ANDROID = browser?.os === \"Android OS\";\n\nconst IS_MOBILE = IS_IOS || IS_ANDROID || IS_IPAD;\n\nconst IS_PHONE = IS_MOBILE && (window.screen.width < 500 || window.screen.height < 500);\n\nconst IS_PHONE_IN_PORTRAIT_MODE = IS_PHONE && window.screen.width < 500;\n\nconst IOS_HEIGHT_MAP = [ [ 896, 114 ], [ 812, 114 ], [ 736, 75 ], [ 667, 75 ] ];\n\nfunction getIPhoneHeightOffset() {\n  const screenHeight = Math.max(screen.height, screen.width);\n  for (let index = 0; index < IOS_HEIGHT_MAP.length; index++) {\n    const [height, offset] = IOS_HEIGHT_MAP[index];\n    if (screenHeight >= height) {\n      return offset;\n    }\n  }\n  return 75;\n}\n\nfunction isSessionStorageAvailable() {\n  let isAvailable = false;\n  try {\n    window.sessionStorage.setItem(\"web-chat-test-item\", \"true\");\n    window.sessionStorage.getItem(\"web-chat-test-item\");\n    window.sessionStorage.removeItem(\"web-chat-test-item\");\n    isAvailable = true;\n  } catch {}\n  return isAvailable;\n}\n\nconst IS_SESSION_STORAGE = memoizeOne(isSessionStorageAvailable);\n\nfunction getURLHostName(url) {\n  try {\n    return new URL(url).hostname;\n  } catch {\n    return url;\n  }\n}\n\nfunction conditionalSetTimeout(operation, timeout) {\n  if (timeout) {\n    return setTimeout(operation, timeout);\n  }\n  operation();\n  return null;\n}\n\nexport { IS_IOS, IS_MOBILE, IS_PHONE, IS_PHONE_IN_PORTRAIT_MODE, IS_SESSION_STORAGE, conditionalSetTimeout, getIPhoneHeightOffset, getURLHostName };\n","import { useRef, useEffect } from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function usePrevious(value) {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}\n\nexport { usePrevious };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar ChatHeaderObjectType;\n\n(function(ChatHeaderObjectType) {\n  ChatHeaderObjectType[\"LINK\"] = \"link\";\n  ChatHeaderObjectType[\"MENU\"] = \"menu\";\n  ChatHeaderObjectType[\"BUTTON\"] = \"button\";\n  ChatHeaderObjectType[\"RADIO_GROUP\"] = \"radio-group\";\n})(ChatHeaderObjectType || (ChatHeaderObjectType = {}));\n\nexport { ChatHeaderObjectType };\n","import { __decorate } from \"tslib\";\n\nimport { bind } from \"bind-decorator\";\n\nimport { LitElement, unsafeCSS, css } from \"lit\";\n\nimport { property, state } from \"lit/decorators.js\";\n\nimport css_248z from \"./chatHeaderAvatarElement.scss.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ class ChatHeaderAvatarElement extends LitElement {\n  constructor() {\n    super(...arguments);\n    this.isLoaded = false;\n  }\n  _handleOnError() {\n    this.onError?.();\n  }\n}\n\nChatHeaderAvatarElement.styles = css`\n    ${unsafeCSS(css_248z)}\n  `;\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderAvatarElement.prototype, \"url\", void 0);\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderAvatarElement.prototype, \"corners\", void 0);\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderAvatarElement.prototype, \"alt\", void 0);\n\n__decorate([ property({\n  type: Object\n}) ], ChatHeaderAvatarElement.prototype, \"onError\", void 0);\n\n__decorate([ state() ], ChatHeaderAvatarElement.prototype, \"isLoaded\", void 0);\n\n__decorate([ bind ], ChatHeaderAvatarElement.prototype, \"_handleOnError\", null);\n\nexport { ChatHeaderAvatarElement };\n","var css_248z = \".cds--aichat-chat-header-avatar{\\n  display:block;\\n  block-size:20px;\\n  max-block-size:20px;\\n}\\n\\n.cds--aichat-chat-header-avatar--round{\\n  border-radius:10px;\\n}\";\n\nexport { css_248z as default };\n","import { __decorate } from \"tslib\";\n\nimport { carbonElement } from \"../../../decorators/customElement.js\";\n\nimport { chatHeaderAvatarTemplate } from \"./src/chatHeaderAvatar.template.js\";\n\nimport { ChatHeaderAvatarElement } from \"./src/chatHeaderAvatarElement.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const CHAT_HEADER_AVATAR_TAG_NAME = \"cds-aichat-chat-header-avatar\";\n\nlet CDSChatHeaderAvatarElement = class CDSChatHeaderAvatarElement extends ChatHeaderAvatarElement {\n  render() {\n    return chatHeaderAvatarTemplate(this);\n  }\n};\n\nCDSChatHeaderAvatarElement = __decorate([ carbonElement(CHAT_HEADER_AVATAR_TAG_NAME) ], CDSChatHeaderAvatarElement);\n\nexport { CHAT_HEADER_AVATAR_TAG_NAME, CDSChatHeaderAvatarElement as default };\n","import \"@carbon/web-components/es-custom/components/skeleton-icon/index.js\";\n\nimport cx from \"classnames\";\n\nimport { html } from \"lit\";\n\nimport { CSS_CLASS_PREFIX } from \"../../../../settings.js\";\n\nimport { CornersType } from \"../../../../../../types/config/CornersType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function chatHeaderAvatarTemplate(classElement) {\n  const {url: url, corners: corners, alt: alt, onError: onError} = classElement;\n  return html`\n    <img\n      class=\"${cx(`${CSS_CLASS_PREFIX}-chat-header-avatar`, {\n    [`${CSS_CLASS_PREFIX}-chat-header-avatar--round`]: corners === CornersType.ROUND\n  })}\"\n      src=\"${url}\"\n      alt=\"${alt}\"\n      @error=\"${onError}\"\n    />\n  `;\n}\n\nexport { chatHeaderAvatarTemplate };\n","import { createComponent } from \"@lit/react\";\n\nimport React from \"react\";\n\nimport CDSChatHeaderAvatarElement, { CHAT_HEADER_AVATAR_TAG_NAME } from \"../../../web-components/components/chatHeader/chatHeaderAvatar/cds-aichat-chat-header-avatar.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const ChatHeaderAvatar = createComponent({\n  tagName: CHAT_HEADER_AVATAR_TAG_NAME,\n  elementClass: CDSChatHeaderAvatarElement,\n  react: React\n});\n\nexport { ChatHeaderAvatar };\n","import { __decorate } from \"tslib\";\n\nimport { LitElement } from \"lit\";\n\nimport { property } from \"lit/decorators.js\";\n\nimport { carbonElement } from \"../../../decorators/customElement.js\";\n\nimport { WEB_COMPONENT_PREFIX } from \"../../../settings.js\";\n\nimport { chatHeaderLinkTemplate } from \"./src/chatHeaderLinkElement.template.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ let ChatHeaderLinkElement = class ChatHeaderLinkElement extends LitElement {\n  constructor() {\n    super(...arguments);\n    this.isNewTab = true;\n  }\n  render() {\n    return chatHeaderLinkTemplate(this);\n  }\n};\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderLinkElement.prototype, \"url\", void 0);\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderLinkElement.prototype, \"label\", void 0);\n\n__decorate([ property({\n  type: Boolean\n}) ], ChatHeaderLinkElement.prototype, \"isNewTab\", void 0);\n\nChatHeaderLinkElement = __decorate([ carbonElement(`${WEB_COMPONENT_PREFIX}-chat-header-link`) ], ChatHeaderLinkElement);\n\nexport { ChatHeaderLinkElement };\n","import \"@carbon/web-components/es-custom/components/button/index.js\";\n\nimport \"@carbon/web-components/es-custom/components/overflow-menu/index.js\";\n\nimport { html } from \"lit\";\n\nimport { ButtonKindEnum } from \"../../../../../../types/utilities/carbonTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function chatHeaderLinkTemplate(customElementClass) {\n  const {label: label, url: url, isNewTab: isNewTab} = customElementClass;\n  return html`<cds-custom-button\n    class=\"WACChatHeaderLink\"\n    href=\"${url}\"\n    target=\"${isNewTab ? \"_blank\" : \"_self\"}\"\n    kind=\"${ButtonKindEnum.GHOST}\"\n    size=\"md\"\n    >${label}</cds-custom-button\n  >`;\n}\n\nexport { chatHeaderLinkTemplate };\n","import { createComponent } from \"@lit/react\";\n\nimport React from \"react\";\n\nimport { ChatHeaderLinkElement } from \"../../../web-components/components/chatHeader/chatHeaderLink/cds-aichat-chat-header-link.js\";\n\nimport { WEB_COMPONENT_PREFIX } from \"../../../web-components/settings.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const ChatHeaderLink = createComponent({\n  tagName: `${WEB_COMPONENT_PREFIX}-chat-header-link`,\n  elementClass: ChatHeaderLinkElement,\n  react: React\n});\n\nexport { ChatHeaderLink };\n","import { Menu } from \"@carbon/react\";\n\nimport React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function ChatHeaderMenu({id: id, className: className, label: label, isOpen: isOpen, target: target, children: children, menuAlignment: menuAlignment, containerRef: containerRef}) {\n  return React.createElement(Menu, {\n    id: id,\n    className: className,\n    open: isOpen,\n    target: target,\n    label: label,\n    size: \"md\",\n    menuAlignment: menuAlignment,\n    mode: \"full\",\n    legacyAutoalign: false,\n    containerRef: containerRef\n  }, children);\n}\n\nexport { ChatHeaderMenu };\n","import ChevronDown from \"@carbon/icons-react/es/ChevronDown.js\";\n\nimport ChevronUp from \"@carbon/icons-react/es/ChevronUp.js\";\n\nimport { Button } from \"@carbon/react\";\n\nimport { useFloating, useInteractions, useClick, useDismiss } from \"@floating-ui/react\";\n\nimport React, { useState } from \"react\";\n\nimport { useUUID } from \"../../../shared/hooks/useUUID.js\";\n\nimport { ChatHeaderMenu } from \"./ChatHeaderMenu.js\";\n\nimport { ButtonKindEnum, ButtonSizeEnum } from \"../../../../types/utilities/carbonTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function ChatHeaderMenuButton(props) {\n  const [isOpen, setIsOpen] = useState(false);\n  const {refs: menuRefs, context: menuContext} = useFloating({\n    open: isOpen,\n    onOpenChange: setIsOpen\n  });\n  const {getReferenceProps: getMenuReferenceProps, getFloatingProps: getMenuFloatingProps} = useInteractions([ useClick(menuContext), useDismiss(menuContext) ]);\n  const id = useUUID();\n  return React.createElement(\"div\", {\n    ref: menuRefs.setReference,\n    \"aria-owns\": id,\n    ...getMenuReferenceProps()\n  }, React.createElement(Button, {\n    size: ButtonSizeEnum.MEDIUM,\n    kind: ButtonKindEnum.GHOST,\n    onClick: () => setIsOpen(!isOpen),\n    renderIcon: isOpen ? ChevronUp : ChevronDown,\n    onMouseDown: event => event.preventDefault(),\n    \"aria-label\": props.ariaLabel,\n    \"aria-haspopup\": true,\n    \"aria-expanded\": isOpen,\n    \"aria-controls\": id\n  }, props.label), React.createElement(ChatHeaderMenu, {\n    id: id,\n    isOpen: isOpen,\n    target: menuRefs.floating.current,\n    label: props.label,\n    containerRef: props.containerRef,\n    menuAlignment: props.menuAlignment\n  }, props.children), React.createElement(\"div\", {\n    ref: menuRefs.setFloating,\n    className: \"WAChatHeaderMenuButton_HostElement\",\n    ...getMenuFloatingProps()\n  }));\n}\n\nexport { ChatHeaderMenuButton };\n","import { MenuItem } from \"@carbon/react\";\n\nimport React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function ChatHeaderMenuItem({label: label, url: url, isNewTab: isNewTab = true, onClick: onClick, children: children}) {\n  return React.createElement(MenuItem, {\n    label: label,\n    onClick: () => {\n      onClick?.();\n      if (url) {\n        window.open(url, isNewTab ? \"_blank\" : \"_self\");\n      }\n    }\n  }, children);\n}\n\nexport { ChatHeaderMenuItem };\n","import { MenuItemRadioGroup } from \"@carbon/react\";\n\nimport React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function ChatHeaderMenuItemRadioGroup(props) {\n  const {label: label, items: items, defaultSelectedItem: defaultSelectedItem, selectedItem: selectedItem, onChange: onChange} = props;\n  return React.createElement(MenuItemRadioGroup, {\n    label: label,\n    items: items,\n    defaultSelectedItem: defaultSelectedItem,\n    selectedItem: selectedItem,\n    onChange: selectedItem => {\n      if (!selectedItem.preventDefault) {\n        onChange(selectedItem);\n      }\n    },\n    itemToString: menuItem => typeof menuItem === \"string\" ? menuItem : menuItem.label || menuItem.value\n  });\n}\n\nexport { ChatHeaderMenuItemRadioGroup };\n","import { Button } from \"@carbon/react\";\n\nimport { useFloating, useInteractions, useClick, useDismiss } from \"@floating-ui/react\";\n\nimport cx from \"classnames\";\n\nimport React, { useState } from \"react\";\n\nimport { useUUID } from \"../../../shared/hooks/useUUID.js\";\n\nimport { ChatHeaderMenu } from \"./ChatHeaderMenu.js\";\n\nimport { ButtonKindEnum, ButtonSizeEnum } from \"../../../../types/utilities/carbonTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function ChatHeaderOverflowMenu(props) {\n  const [isOpen, setIsOpen] = useState(false);\n  const {refs: menuRefs, context: menuContext} = useFloating({\n    open: isOpen,\n    onOpenChange: isOpen => {\n      setIsOpen(isOpen);\n      if (isOpen) {\n        props.onOpen?.();\n      } else {\n        props.onClose?.();\n      }\n    }\n  });\n  const {getReferenceProps: getMenuReferenceProps, getFloatingProps: getMenuFloatingProps} = useInteractions([ useClick(menuContext), useDismiss(menuContext) ]);\n  const id = useUUID();\n  return React.createElement(\"div\", {\n    ref: menuRefs.setReference,\n    \"aria-owns\": id,\n    ...getMenuReferenceProps()\n  }, React.createElement(Button, {\n    className: cx(\"WACChatHeaderOverflowMenu__Button\", props.className),\n    size: ButtonSizeEnum.MEDIUM,\n    kind: ButtonKindEnum.GHOST,\n    onClick: () => setIsOpen(!isOpen),\n    tooltipPosition: props.tooltipPosition,\n    renderIcon: props.renderIcon,\n    onMouseDown: event => event.preventDefault(),\n    iconDescription: props.iconDescription,\n    hasIconOnly: true,\n    \"aria-label\": props.ariaLabel,\n    \"aria-haspopup\": true,\n    \"aria-expanded\": isOpen,\n    \"aria-controls\": id\n  }), React.createElement(ChatHeaderMenu, {\n    id: id,\n    label: props.ariaLabel,\n    isOpen: isOpen,\n    target: menuRefs.floating.current,\n    containerRef: props.containerRef,\n    menuAlignment: props.menuAlignment\n  }, props.children), React.createElement(\"div\", {\n    ref: menuRefs.setFloating,\n    className: \"WACChatHeaderOverflowMenu__HostElement\",\n    ...getMenuFloatingProps()\n  }));\n}\n\nexport { ChatHeaderOverflowMenu };\n","import { __decorate } from \"tslib\";\n\nimport { LitElement, unsafeCSS, css } from \"lit\";\n\nimport { property } from \"lit/decorators.js\";\n\nimport { carbonElement } from \"../../../decorators/customElement.js\";\n\nimport { WEB_COMPONENT_PREFIX } from \"../../../settings.js\";\n\nimport css_248z from \"./src/chatHeaderTitle.scss.js\";\n\nimport { chatHeaderTitleTemplate } from \"./src/chatHeaderTitle.template.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ let ChatHeaderTitleElement = class ChatHeaderTitleElement extends LitElement {\n  render() {\n    return chatHeaderTitleTemplate(this);\n  }\n};\n\nChatHeaderTitleElement.styles = css`\n    ${unsafeCSS(css_248z)}\n  `;\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderTitleElement.prototype, \"title\", void 0);\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderTitleElement.prototype, \"name\", void 0);\n\nChatHeaderTitleElement = __decorate([ carbonElement(`${WEB_COMPONENT_PREFIX}-chat-header-title`) ], ChatHeaderTitleElement);\n\nexport { ChatHeaderTitleElement };\n","import { html } from \"lit\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function chatHeaderTitleTemplate(customElementClass) {\n  const {title: title, name: name} = customElementClass;\n  return html`<div class=\"WACChatHeaderTitle\">\n    <span className=\"WACChatHeaderTitle__Title\" ?hidden=\"${!title}\"\n      >${title}</span\n    >\n    <span class=\"WACChatHeaderTitle__Name\">${name}</span>\n  </div>`;\n}\n\nexport { chatHeaderTitleTemplate };\n","var css_248z = \"cds-chat-header-title{\\n  text-align:center;\\n}\\n\\n.WACChatHeaderTitle{\\n  overflow:hidden;\\n  font-size:var(--cds-chat-BASE-font-size-med);\\n  font-weight:400;\\n  line-height:var(--cds-chat-BASE-line-height-med);\\n  overflow-wrap:break-word;\\n  text-overflow:ellipsis;\\n  white-space:nowrap;\\n  word-wrap:break-word;\\n}\\n\\n.WACChatHeaderTitle .WACChatHeaderTitle__Title:only-child{\\n  padding-inline-end:0.25rem;\\n}\\n\\n.WACChatHeaderTitle__Name{\\n  font-weight:var(--cds-chat-BASE-weight-semibold);\\n}\";\n\nexport { css_248z as default };\n","import { createComponent } from \"@lit/react\";\n\nimport React from \"react\";\n\nimport { ChatHeaderTitleElement } from \"../../../web-components/components/chatHeader/chatHeaderTitle/cds-aichat-chat-header-title.js\";\n\nimport { WEB_COMPONENT_PREFIX } from \"../../../web-components/settings.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const ChatHeaderTitle = createComponent({\n  tagName: `${WEB_COMPONENT_PREFIX}-chat-header-title`,\n  elementClass: ChatHeaderTitleElement,\n  react: React\n});\n\nexport { ChatHeaderTitle };\n","import \"@carbon/web-components/es-custom/components/ai-label/ai-label-action-button.js\";\n\nimport CDSAILabel from \"@carbon/web-components/es-custom/components/ai-label/ai-label.js\";\n\nimport { createComponent } from \"@lit/react\";\n\nimport React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const AISlug = createComponent({\n  tagName: \"cds-custom-ai-label\",\n  elementClass: CDSAILabel,\n  react: React\n});\n\nexport { AISlug };\n","import \"@carbon/web-components/es-custom/components/slug/index.js\";\n\nimport Close from \"@carbon/icons-react/es/Close.js\";\n\nimport CloseLarge from \"@carbon/icons-react/es/CloseLarge.js\";\n\nimport DownToBottom from \"@carbon/icons-react/es/DownToBottom.js\";\n\nimport Menu from \"@carbon/icons-react/es/Menu.js\";\n\nimport Restart from \"@carbon/icons-react/es/Restart.js\";\n\nimport SidePanelClose from \"@carbon/icons-react/es/SidePanelClose.js\";\n\nimport SubtractLarge from \"@carbon/icons-react/es/SubtractLarge.js\";\n\nimport { MenuItem, Button, MenuItemDivider } from \"@carbon/react\";\n\nimport { AI_LABEL_SIZE } from \"@carbon/web-components/es-custom/components/ai-label/defs.js\";\n\nimport { POPOVER_ALIGNMENT } from \"@carbon/web-components/es-custom/components/popover/defs.js\";\n\nimport cx from \"classnames\";\n\nimport React, { forwardRef, useRef, useState, useContext, useCallback, useImperativeHandle, useEffect, Fragment } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { ChatHeaderObjectType } from \"../../../../types/config/ChatHeaderConfig.js\";\n\nimport { ChatHeaderAvatar } from \"../../../react/components/chatHeader/ChatHeaderAvatar.js\";\n\nimport { ChatHeaderLink } from \"../../../react/components/chatHeader/ChatHeaderLink.js\";\n\nimport { ChatHeaderMenuButton } from \"../../../react/components/chatHeader/ChatHeaderMenuButton.js\";\n\nimport { ChatHeaderMenuItem } from \"../../../react/components/chatHeader/ChatHeaderMenuItem.js\";\n\nimport { ChatHeaderMenuItemRadioGroup } from \"../../../react/components/chatHeader/ChatHeaderMenuItemRadioGroup.js\";\n\nimport { ChatHeaderOverflowMenu } from \"../../../react/components/chatHeader/ChatHeaderOverflowMenu.js\";\n\nimport { ChatHeaderTitle } from \"../../../react/components/chatHeader/ChatHeaderTitle.js\";\n\nimport { HideComponentContext } from \"../../contexts/HideComponentContext.js\";\n\nimport { useLanguagePack } from \"../../hooks/useLanguagePack.js\";\n\nimport { usePrevious } from \"../../hooks/usePrevious.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport actions from \"../../store/actions.js\";\n\nimport { ChatWidthBreakpoint } from \"../../../../types/state/AppState.js\";\n\nimport \"../../utils/constants.js\";\n\nimport { doFocusRef } from \"../../utils/domUtils.js\";\n\nimport { ConfirmModal } from \"../modals/ConfirmModal.js\";\n\nimport WriteableElement from \"../WriteableElement.js\";\n\nimport { AISlug } from \"./AISlug.js\";\n\nimport { ButtonSizeEnum, ButtonKindEnum } from \"../../../../types/utilities/carbonTypes.js\";\n\nimport { MinimizeButtonIconType } from \"../../../../types/config/PublicConfig.js\";\n\nimport { WriteableElementName } from \"../../../../types/instance/ChatInstance.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst HEADER_OBJECTS_GAP_MIN_SIZE = 100;\n\nfunction Header(props, ref) {\n  const {displayName: displayName, backContent: backContent, showRestartButton: showRestartButton, showBackButton: showBackButton, useAITheme: useAITheme, labelBackButton: labelBackButton, onClickClose: onClickClose, onClickRestart: onClickRestart, onCloseAndRestart: onCloseAndRestart, onClickBack: onClickBack, overflowItems: overflowItems, overflowClicked: overflowClicked, backButtonType: backButtonType, showCenter: showCenter, hideCloseButton: hideCloseButton, hideCloseAndRestartButton: hideCloseAndRestartButton, brandColor: brandColor = \"primary\", enableChatHeaderConfig: enableChatHeaderConfig, headerAvatarConfig: headerAvatarConfig} = props;\n  const backButtonRef = useRef();\n  const restartButtonRef = useRef();\n  const closeAndRestartButtonRef = useRef();\n  const closeButtonRef = useRef();\n  const centerObjectsRef = useRef();\n  const centerGapRef = useRef();\n  const overflowRef = useRef();\n  const serviceManager = useServiceManager();\n  const languagePack = useLanguagePack();\n  const publicConfig = useSelector(state => state.config.public);\n  const chatHeaderConfig = useSelector(state => state.chatHeaderState.config);\n  const chatWidthBreakpoint = useSelector(state => state.chatWidthBreakpoint);\n  const maxVisibleHeaderObjects = useSelector(state => state.chatHeaderState.maxVisibleHeaderObjects);\n  const [overflowIsOpen, setOverflowIsOpen] = useState(false);\n  const [confirmModelOpen, setConfirmModelOpen] = useState(false);\n  const [selectedGroupMenuitems, setSelectedGroupMenuItems] = useState({});\n  const [isImageError, setIsImageError] = useState(false);\n  const hasHeaderAvatar = Boolean(headerAvatarConfig) && !isImageError;\n  const isHidden = useContext(HideComponentContext);\n  const prevChatHeaderAvatarURL = usePrevious(headerAvatarConfig?.url);\n  const {headerConfig: headerConfig} = publicConfig;\n  const isWideWidth = chatWidthBreakpoint === ChatWidthBreakpoint.WIDE;\n  const chatHeaderTitle = enableChatHeaderConfig ? chatHeaderConfig?.headerTitle?.title : undefined;\n  const chatHeaderName = enableChatHeaderConfig ? chatHeaderConfig?.headerTitle?.name : undefined;\n  const chatHeaderDisplayName = chatHeaderName || displayName;\n  const closeConfirmModel = useCallback(() => {\n    setConfirmModelOpen(false);\n  }, []);\n  const showCloseAndRestartButton = headerConfig?.showCloseAndRestartButton && !hideCloseAndRestartButton && onCloseAndRestart;\n  const useHideCloseButton = headerConfig?.hideMinimizeButton || hideCloseButton;\n  let closeIcon;\n  let closeReverseIcon = false;\n  let closeIsReversible = true;\n  const minimizeButtonIconType = headerConfig?.minimizeButtonIconType;\n  switch (minimizeButtonIconType) {\n   case MinimizeButtonIconType.CLOSE:\n    closeIcon = React.createElement(CloseLarge, {\n      className: \"WACIcon__Close\",\n      size: 16\n    });\n    break;\n\n   case MinimizeButtonIconType.MINIMIZE:\n    closeIcon = React.createElement(SubtractLarge, {\n      className: \"WACIcon__Subtract\",\n      size: 16\n    });\n    break;\n\n   case MinimizeButtonIconType.SIDE_PANEL_LEFT:\n    closeIsReversible = false;\n    closeIcon = React.createElement(SidePanelClose, {\n      className: \"WACIcon__SidePanelClose\"\n    });\n    break;\n\n   case MinimizeButtonIconType.SIDE_PANEL_RIGHT:\n    closeIsReversible = false;\n    closeReverseIcon = true;\n    closeIcon = React.createElement(SidePanelClose, {\n      className: \"WACIcon__SidePanelClose\"\n    });\n    break;\n\n   default:\n    {\n      closeIcon = React.createElement(SubtractLarge, {\n        className: \"WACIcon__Subtract\",\n        size: 16\n      });\n      break;\n    }\n  }\n  if (showCloseAndRestartButton && showRestartButton) {\n    throw new Error(\"You cannot enable both the restart button and the close-and-restart buttons.\");\n  }\n  const onConfirm = useCallback(() => {\n    setConfirmModelOpen(false);\n    onCloseAndRestart();\n  }, [ onCloseAndRestart ]);\n  useImperativeHandle(ref, () => ({\n    requestFocus: () => {\n      if (closeButtonRef.current) {\n        doFocusRef(closeButtonRef, false, true);\n        return true;\n      }\n      if (backButtonRef.current) {\n        doFocusRef(backButtonRef, false, true);\n        return true;\n      }\n      if (restartButtonRef.current) {\n        doFocusRef(restartButtonRef, false, true);\n        return true;\n      }\n      return false;\n    }\n  }));\n  function getComponentInMenu(item, index, list) {\n    switch (item.type) {\n     case ChatHeaderObjectType.LINK:\n      return React.createElement(ChatHeaderMenuItem, {\n        key: index,\n        label: item.label,\n        url: item.url,\n        isNewTab: item.isNewTab,\n        onClick: () => {\n          doFocusRef(overflowRef);\n        }\n      });\n\n     case ChatHeaderObjectType.BUTTON:\n      return React.createElement(ChatHeaderMenuItem, {\n        key: index,\n        label: item.label,\n        onClick: () => {\n          item.onClick?.();\n          doFocusRef(overflowRef);\n        }\n      });\n\n     case ChatHeaderObjectType.RADIO_GROUP:\n      {\n        const nextObject = list[index + 1];\n        return React.createElement(Fragment, {\n          key: index\n        }, index !== 0 && React.createElement(MenuItemDivider, null), React.createElement(ChatHeaderMenuItemRadioGroup, {\n          label: item.label,\n          items: item.items,\n          defaultSelectedItem: item.defaultSelectedItem,\n          selectedItem: selectedGroupMenuitems[item.label],\n          onChange: selectedItem => {\n            setSelectedGroupMenuItems(prevState => ({\n              ...prevState,\n              [item.label]: selectedItem\n            }));\n            item.onChange?.(selectedItem);\n          }\n        }), Boolean(nextObject) && nextObject.type !== ChatHeaderObjectType.RADIO_GROUP && React.createElement(MenuItemDivider, null));\n      }\n\n     case ChatHeaderObjectType.MENU:\n      return React.createElement(ChatHeaderMenuItem, {\n        key: index,\n        label: item.label\n      }, item.items.filter(menuItem => menuItem.type !== ChatHeaderObjectType.MENU).map(getComponentInMenu));\n\n     default:\n      return null;\n    }\n  }\n  function getComponentInChatHeader(headerObject, index) {\n    switch (headerObject.type) {\n     case ChatHeaderObjectType.LINK:\n      return React.createElement(ChatHeaderLink, {\n        key: index,\n        label: headerObject.label,\n        url: headerObject.url,\n        isNewTab: headerObject.isNewTab\n      });\n\n     case ChatHeaderObjectType.MENU:\n      return React.createElement(ChatHeaderMenuButton, {\n        key: index,\n        label: headerObject.label,\n        menuAlignment: \"bottom-start\"\n      }, headerObject.items.map(getComponentInMenu));\n\n     case ChatHeaderObjectType.BUTTON:\n      return React.createElement(Button, {\n        key: index,\n        kind: ButtonKindEnum.GHOST,\n        size: ButtonSizeEnum.MEDIUM,\n        onClick: headerObject.onClick\n      }, headerObject.label);\n\n     default:\n      return null;\n    }\n  }\n  let leftObjectsLength = 0;\n  let rightObjectsLength = 0;\n  if (enableChatHeaderConfig) {\n    leftObjectsLength = chatHeaderConfig?.left?.length ?? 0;\n    rightObjectsLength = chatHeaderConfig?.right?.length ?? 0;\n  }\n  const isLeftObjectsInOverflow = leftObjectsLength > maxVisibleHeaderObjects;\n  const isRightObjectsInOverflow = rightObjectsLength > maxVisibleHeaderObjects;\n  const hasChatHeaderObjects = leftObjectsLength || rightObjectsLength;\n  const renderChatHeaderObjectsInOverflow = hasChatHeaderObjects && (!isWideWidth || isLeftObjectsInOverflow || isRightObjectsInOverflow);\n  const hasOverflow = Boolean(overflowItems?.length) || renderChatHeaderObjectsInOverflow;\n  const isRTL = document.dir === \"rtl\";\n  let leftChatHeaderComponents = null;\n  let rightChatHeaderComponents = null;\n  let leftChatHeaderMenuComponents = null;\n  let rightChatHeaderMenuComponents = null;\n  if (enableChatHeaderConfig) {\n    leftChatHeaderComponents = chatHeaderConfig?.left?.slice(0, isLeftObjectsInOverflow ? maxVisibleHeaderObjects : undefined).map(getComponentInChatHeader);\n    rightChatHeaderComponents = chatHeaderConfig?.right?.slice(0, isRightObjectsInOverflow ? maxVisibleHeaderObjects : undefined).map(getComponentInChatHeader);\n    leftChatHeaderMenuComponents = isLeftObjectsInOverflow && chatHeaderConfig?.left?.slice(maxVisibleHeaderObjects).map(getComponentInMenu);\n    rightChatHeaderMenuComponents = isRightObjectsInOverflow && chatHeaderConfig?.right?.slice(maxVisibleHeaderObjects).map(getComponentInMenu);\n  }\n  let leftContent;\n  if (hasOverflow) {\n    leftContent = React.createElement(ChatHeaderOverflowMenu, {\n      className: \"WACHeader__OverflowMenu\",\n      renderIcon: overflowIsOpen ? Close : Menu,\n      iconDescription: languagePack.header_overflowMenu_options,\n      ariaLabel: languagePack.components_overflow_ariaLabel,\n      containerRef: overflowRef,\n      tooltipPosition: isRTL ? \"left\" : \"right\",\n      menuAlignment: \"bottom-start\",\n      onOpen: () => {\n        setTimeout(() => {\n          setOverflowIsOpen(true);\n        });\n      },\n      onClose: () => {\n        setOverflowIsOpen(false);\n      }\n    }, overflowItems?.map((item, index) => React.createElement(MenuItem, {\n      key: item,\n      label: item,\n      onClick: () => {\n        doFocusRef(overflowRef);\n        overflowClicked(index);\n      }\n    })), leftChatHeaderMenuComponents, rightChatHeaderMenuComponents);\n  } else if (showBackButton) {\n    leftContent = React.createElement(HeaderButton, {\n      className: \"WACHeader__BackButton\",\n      label: labelBackButton,\n      onClick: onClickBack,\n      buttonRef: backButtonRef,\n      buttonKind: backButtonType,\n      tooltipPosition: isRTL ? \"left\" : \"right\"\n    }, backContent || React.createElement(DownToBottom, null));\n  }\n  useEffect(() => {\n    if (!isWideWidth) {\n      serviceManager.store.dispatch(actions.setMaxVisibleHeaderObjects(0));\n      return undefined;\n    }\n    if (!enableChatHeaderConfig) {\n      return undefined;\n    }\n    const centerResizeObserver = new ResizeObserver(() => {\n      const centerGapElement = centerGapRef.current;\n      if (centerGapElement) {\n        if (centerGapElement.offsetWidth > HEADER_OBJECTS_GAP_MIN_SIZE || centerGapElement.offsetWidth === 0) {\n          let newTotal = Math.floor((centerObjectsRef.current.offsetWidth - HEADER_OBJECTS_GAP_MIN_SIZE) / (HEADER_OBJECTS_GAP_MIN_SIZE * 2));\n          if (newTotal < 0) {\n            newTotal = 0;\n          }\n          setTimeout(() => {\n            serviceManager.store.dispatch(actions.setMaxVisibleHeaderObjects(newTotal));\n          });\n        }\n      }\n    });\n    centerResizeObserver.observe(centerObjectsRef.current);\n    return () => {\n      centerResizeObserver.disconnect();\n    };\n  }, [ isWideWidth, enableChatHeaderConfig, serviceManager ]);\n  useEffect(() => {\n    if (isImageError && prevChatHeaderAvatarURL !== headerAvatarConfig?.url) {\n      setIsImageError(false);\n    }\n  }, [ prevChatHeaderAvatarURL, headerAvatarConfig?.url, isImageError ]);\n  return React.createElement(\"div\", {\n    className: cx(\"WACHeader\", `WAC--${brandColor}Color`, {\n      \"WACHeader--withAvatar\": hasHeaderAvatar\n    })\n  }, React.createElement(\"div\", {\n    className: cx(\"WACHeader--content\", `WAC--${brandColor}Color`),\n    \"data-floating-menu-container\": true\n  }, leftContent && React.createElement(\"div\", {\n    className: \"WACHeader__Buttons WACHeader__LeftButtons\"\n  }, leftContent), showCenter && React.createElement(\"div\", {\n    className: \"WACHeader__CenterContainer\"\n  }, hasHeaderAvatar && React.createElement(ChatHeaderAvatar, {\n    url: headerAvatarConfig.url,\n    corners: headerAvatarConfig.corners,\n    alt: languagePack.header_ariaBotAvatar,\n    onError: () => setIsImageError(true)\n  }), (chatHeaderTitle || chatHeaderDisplayName) && React.createElement(\"div\", {\n    className: \"WACHeader__TitleContainer\"\n  }, React.createElement(ChatHeaderTitle, {\n    title: chatHeaderTitle,\n    name: chatHeaderDisplayName\n  })), isWideWidth && Boolean(leftObjectsLength) && React.createElement(\"div\", {\n    className: \"WACHeader__Separator\"\n  }), React.createElement(\"div\", {\n    ref: centerObjectsRef,\n    className: \"WACHeader__HeaderObjects\"\n  }, isWideWidth && Boolean(leftObjectsLength) && React.createElement(\"div\", {\n    className: \"WACHeader__LeftItems\"\n  }, leftChatHeaderComponents), React.createElement(\"div\", {\n    ref: centerGapRef,\n    className: \"WACHeader__CenterGap\"\n  }), isWideWidth && Boolean(rightObjectsLength) && React.createElement(\"div\", {\n    className: \"WACHeader__RightItems\"\n  }, rightChatHeaderComponents))), React.createElement(\"div\", {\n    className: \"WACHeader__Buttons WACHeader__RightButtons\"\n  }, useAITheme && React.createElement(AISlug, {\n    className: \"WACHeader__Slug\",\n    size: AI_LABEL_SIZE.EXTRA_SMALL,\n    alignment: isRTL ? POPOVER_ALIGNMENT.BOTTOM_LEFT : POPOVER_ALIGNMENT.BOTTOM_RIGHT\n  }, React.createElement(\"div\", {\n    slot: \"body-text\"\n  }, React.createElement(\"h4\", {\n    className: \"WACHeader__Slug-title\"\n  }, languagePack.ai_slug_title), React.createElement(\"div\", {\n    className: \"WACHeader__Slug-description\"\n  }, React.createElement(\"div\", null, languagePack.ai_slug_description), !isHidden && React.createElement(WriteableElement, {\n    slotName: WriteableElementName.AI_TOOLTIP_AFTER_DESCRIPTION_ELEMENT,\n    id: `aiTooltipAfterDescription${serviceManager.namespace.suffix}`\n  })))), showRestartButton && React.createElement(HeaderButton, {\n    className: \"WACHeader__RestartButton\",\n    label: languagePack.buttons_restart,\n    onClick: onClickRestart,\n    buttonRef: restartButtonRef,\n    tooltipPosition: isRTL ? \"right\" : \"left\"\n  }, React.createElement(Restart, null)), !useHideCloseButton && React.createElement(HeaderButton, {\n    className: cx(\"WACHeader__CloseButton\", {\n      WACReverseIcon: closeReverseIcon\n    }),\n    isReversible: closeIsReversible,\n    label: languagePack.launcher_isOpen,\n    onClick: async () => {\n      onClickClose();\n    },\n    buttonRef: closeButtonRef,\n    tooltipPosition: isRTL ? \"right\" : \"left\"\n  }, closeIcon), showCloseAndRestartButton && React.createElement(HeaderButton, {\n    className: \"WACHeader__CloseAndRestartButton\",\n    label: languagePack.header_ariaCloseRestart,\n    onClick: () => setConfirmModelOpen(true),\n    buttonRef: closeAndRestartButtonRef,\n    tooltipPosition: isRTL ? \"right\" : \"left\"\n  }, React.createElement(CloseLarge, {\n    className: \"WACIcon__Close\"\n  }))), confirmModelOpen && React.createElement(ConfirmModal, {\n    title: languagePack.closeAndRestartModal_title,\n    message: languagePack.closeAndRestartModal_message,\n    onConfirm: onConfirm,\n    onCancel: closeConfirmModel,\n    cancelButtonLabel: languagePack.closeAndRestartModal_cancel,\n    confirmButtonLabel: languagePack.closeAndRestartModal_confirm,\n    modalAnnounceMessage: languagePack.closeAndRestartModal_message,\n    serviceManager: serviceManager\n  })));\n}\n\nfunction HeaderButton({onClick: onClick, buttonRef: buttonRef, label: label, className: className, children: children, buttonKind: buttonKind, isReversible: isReversible = true, tooltipPosition: tooltipPosition}) {\n  return React.createElement(Button, {\n    ref: buttonRef,\n    className: cx(className, {\n      WACDirectionHasReversibleSVG: isReversible\n    }),\n    onClick: onClick,\n    hasIconOnly: true,\n    iconDescription: label,\n    size: ButtonSizeEnum.MEDIUM,\n    kind: buttonKind || ButtonKindEnum.GHOST,\n    tooltipPosition: tooltipPosition\n  }, children);\n}\n\nconst HeaderExport = React.memo(forwardRef(Header));\n\nexport { HeaderExport as Header };\n","import React from \"react\";\n\nimport { isElement, isInputNode, isTextAreaNode, isImageNode, isTextNode } from \"../../utils/domUtils.js\";\n\nimport VisuallyHidden from \"../util/VisuallyHidden.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst ANNOUNCE_INPUT_TYPES = new Set([ \"button\", \"date\", \"datetime-local\", \"email\", \"file\", \"month\", \"number\", \"range\", \"reset\", \"search\", \"submit\", \"tel\", \"text\", \"time\", \"url\", \"week\" ]);\n\nconst ANNOUNCE_NODE_EXCLUDE_ATTRIBUTE = \"data-wac-exclude-node-read\";\n\nclass AriaAnnouncerComponent extends React.PureComponent {\n  constructor() {\n    super(...arguments);\n    this.ref1 = React.createRef();\n    this.ref2 = React.createRef();\n    this.useRef1 = true;\n    this.doAnnouncements = () => {\n      const strings = [];\n      this.pendingValues.forEach(elementToAnnounce => {\n        if (typeof elementToAnnounce === \"string\") {\n          strings.push(elementToAnnounce);\n        } else {\n          nodeToText(elementToAnnounce, strings);\n        }\n      });\n      const useElement = this.useRef1 ? this.ref1.current : this.ref2.current;\n      if (useElement) {\n        useElement.innerText = strings.join(\" \");\n        const clearElement = this.useRef1 ? this.ref2.current : this.ref1.current;\n        clearElement.innerHTML = \"\";\n      }\n      this.useRef1 = !this.useRef1;\n      this.pendingValues = null;\n    };\n  }\n  announceValue(value) {\n    if (!value) {\n      return;\n    }\n    if (!this.pendingValues) {\n      this.pendingValues = [];\n      setTimeout(this.doAnnouncements, 250);\n    }\n    if (typeof value === \"string\" || hasNodeType(value)) {\n      this.pendingValues.push(value);\n    } else if (value.messageID) {\n      const formattedMessage = this.props.intl.formatMessage({\n        id: value.messageID\n      }, value.messageValues);\n      this.pendingValues.push(formattedMessage);\n    } else {\n      this.pendingValues.push(value.messageText);\n    }\n  }\n  render() {\n    return React.createElement(VisuallyHidden, {\n      className: \"WACAriaAnnouncer\"\n    }, React.createElement(\"div\", {\n      ref: this.ref1,\n      \"aria-live\": \"polite\"\n    }), React.createElement(\"div\", {\n      ref: this.ref2,\n      \"aria-live\": \"polite\"\n    }));\n  }\n}\n\nfunction nodeToText(node, strings) {\n  if (isElement(node)) {\n    if (window.getComputedStyle(node).display !== \"none\" && node.getAttribute(\"aria-hidden\") !== \"true\" && !node.hasAttribute(ANNOUNCE_NODE_EXCLUDE_ATTRIBUTE)) {\n      trimAndPush(node.getAttribute(\"aria-label\"), strings);\n      if (isInputNode(node) && ANNOUNCE_INPUT_TYPES.has(node.type.toLowerCase())) {\n        if (node.value === \"\") {\n          trimAndPush(node.placeholder, strings);\n        } else {\n          trimAndPush(node.value, strings);\n        }\n      } else if (isTextAreaNode(node)) {\n        if (node.value === \"\") {\n          trimAndPush(node.placeholder, strings);\n        }\n      } else if (isImageNode(node)) {\n        trimAndPush(node.alt, strings);\n      }\n      if (node.shadowRoot) {\n        node.shadowRoot.childNodes?.forEach(childNode => {\n          nodeToText(childNode, strings);\n        });\n      }\n      if (node.childNodes) {\n        node.childNodes.forEach(childNode => {\n          nodeToText(childNode, strings);\n        });\n      }\n    }\n  } else if (isTextNode(node)) {\n    trimAndPush(node.data, strings);\n  }\n}\n\nfunction trimAndPush(value, strings) {\n  if (value) {\n    value = value.trim();\n    if (value) {\n      strings.push(value.replaceAll(\"\\n\", \" \"));\n    }\n  }\n}\n\nfunction hasNodeType(value) {\n  return value.nodeType !== undefined;\n}\n\nexport { AriaAnnouncerComponent, nodeToText };\n","export { FileStatusValue } from \"../../../types/instance/apiTypes.js\";\n\nexport { WriteableElementName } from \"../../../types/instance/ChatInstance.js\";\n\nexport { CornersType } from \"../../../types/config/CornersType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const WA_CONSOLE_PREFIX = \"[Chat]\";\n\nconst RIGHT_TO_LEFT_MARK = String.fromCharCode(8207);\n\nconst ENGLISH_US_DATE_FORMAT = \"mm/dd/yyyy\";\n\nconst RESPONSE_TYPE_TIMEOUT_MS = 2e4;\n\nconst DEFAULT_CUSTOM_PANEL_ID = \"wac-default-panel\";\n\nfunction THROW_ERROR() {\n  throw Error(\"Not implemented.\");\n}\n\nvar BrandColorKind;\n\n(function(BrandColorKind) {\n  BrandColorKind[\"PRIMARY\"] = \"primary\";\n  BrandColorKind[\"ACCENT\"] = \"accent\";\n})(BrandColorKind || (BrandColorKind = {}));\n\nconst AUTO_SCROLL_EXTRA = 28 - 8;\n\nconst LIGHT_THEMES = [ \"white\", \"g10\" ];\n\nlet isJest = false;\n\ntry {\n  if (process?.env.JEST_WORKER_ID) {\n    isJest = true;\n  }\n} catch (error) {}\n\nconst IS_JEST = isJest;\n\nconst AUTO_SCROLL_THROTTLE_TIMEOUT = IS_JEST ? 0 : 100;\n\nexport { AUTO_SCROLL_EXTRA, AUTO_SCROLL_THROTTLE_TIMEOUT, BrandColorKind, DEFAULT_CUSTOM_PANEL_ID, ENGLISH_US_DATE_FORMAT, IS_JEST, LIGHT_THEMES, RESPONSE_TYPE_TIMEOUT_MS, RIGHT_TO_LEFT_MARK, THROW_ERROR, WA_CONSOLE_PREFIX };\n","import React, { forwardRef, useRef, useImperativeHandle, useCallback } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { Header as HeaderExport } from \"../header/Header.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function HomeScreenHeader(props, ref) {\n  const {brandColor: brandColor, onClose: onClose, onRestart: onRestart, onCloseAndRestart: onCloseAndRestart} = props;\n  const showRestartButton = useSelector(state => state.config.public.showRestartButton || state.config.public.headerConfig?.showRestartButton);\n  const showBackButton = useSelector(state => state.persistedToBrowserStorage.chatState.homeScreenState.showBackToBot);\n  const displayName = useSelector(state => state.headerDisplayName);\n  const customMenuOptions = useSelector(state => state.customMenuOptions);\n  const useAITheme = useSelector(state => state.theme.useAITheme);\n  const headerRef = useRef();\n  useImperativeHandle(ref, () => headerRef.current);\n  const hideCloseAndRestartButton = !showBackButton;\n  const overflowClicked = useCallback(index => {\n    const {handler: handler} = customMenuOptions[index];\n    handler();\n  }, [ customMenuOptions ]);\n  const overflowItems = customMenuOptions?.map(option => option.text);\n  return React.createElement(\"div\", {\n    className: \"WACHomeScreenHeader\"\n  }, React.createElement(HeaderExport, {\n    ref: headerRef,\n    displayName: displayName,\n    showCenter: true,\n    showRestartButton: showRestartButton,\n    hideCloseAndRestartButton: hideCloseAndRestartButton,\n    onClickRestart: onRestart,\n    onClickClose: onClose,\n    onCloseAndRestart: onCloseAndRestart,\n    overflowClicked: overflowClicked,\n    overflowItems: overflowItems,\n    useAITheme: useAITheme,\n    brandColor: brandColor\n  }));\n}\n\nconst HomeScreenHeaderExport = React.memo(forwardRef(HomeScreenHeader));\n\nexport { HomeScreenHeaderExport as HomeScreenHeader };\n","import dayjs from \"dayjs\";\n\nimport enLocaleData from \"dayjs/locale/en.js\";\n\nimport IntlMessageFormat from \"intl-messageformat\";\n\nimport React from \"react\";\n\nimport { consoleError } from \"./miscUtils.js\";\n\nimport \"../../../types/instance/apiTypes.js\";\n\nimport enLanguagePack from \"../../languages/en.json.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const locales = {\n  ar: () => import(\"dayjs/locale/ar.js\"),\n  \"ar-dz\": () => import(\"dayjs/locale/ar-dz.js\"),\n  \"ar-kw\": () => import(\"dayjs/locale/ar-kw.js\"),\n  \"ar-ly\": () => import(\"dayjs/locale/ar-ly.js\"),\n  \"ar-ma\": () => import(\"dayjs/locale/ar-ma.js\"),\n  \"ar-sa\": () => import(\"dayjs/locale/ar-sa.js\"),\n  \"ar-tn\": () => import(\"dayjs/locale/ar-tn.js\"),\n  cs: () => import(\"dayjs/locale/cs.js\"),\n  de: () => import(\"dayjs/locale/de.js\"),\n  \"de-at\": () => import(\"dayjs/locale/de-at.js\"),\n  \"de-ch\": () => import(\"dayjs/locale/de-ch.js\"),\n  en: () => import(\"dayjs/locale/en.js\"),\n  \"en-au\": () => import(\"dayjs/locale/en-au.js\"),\n  \"en-ca\": () => import(\"dayjs/locale/en-ca.js\"),\n  \"en-gb\": () => import(\"dayjs/locale/en-gb.js\"),\n  \"en-ie\": () => import(\"dayjs/locale/en-ie.js\"),\n  \"en-il\": () => import(\"dayjs/locale/en-il.js\"),\n  \"en-nz\": () => import(\"dayjs/locale/en-nz.js\"),\n  es: () => import(\"dayjs/locale/es.js\"),\n  \"es-do\": () => import(\"dayjs/locale/es-do.js\"),\n  \"es-us\": () => import(\"dayjs/locale/es-us.js\"),\n  nl: () => import(\"dayjs/locale/nl.js\"),\n  fr: () => import(\"dayjs/locale/fr.js\"),\n  \"fr-ca\": () => import(\"dayjs/locale/fr-ca.js\"),\n  \"fr-ch\": () => import(\"dayjs/locale/fr-ch.js\"),\n  it: () => import(\"dayjs/locale/it.js\"),\n  \"it-ch\": () => import(\"dayjs/locale/it-ch.js\"),\n  ja: () => import(\"dayjs/locale/ja.js\"),\n  ko: () => import(\"dayjs/locale/ko.js\"),\n  pt: () => import(\"dayjs/locale/pt.js\"),\n  \"pt-br\": () => import(\"dayjs/locale/pt-br.js\"),\n  zh: () => import(\"dayjs/locale/zh-cn.js\"),\n  \"zh-cn\": () => import(\"dayjs/locale/zh-cn.js\"),\n  \"zh-tw\": () => import(\"dayjs/locale/zh-tw.js\"),\n  \"zh-mo\": () => import(\"dayjs/locale/zh-tw.js\"),\n  \"zh-hk\": () => import(\"dayjs/locale/zh-tw.js\")\n};\n\nfunction isSupportedLocale(locale, object) {\n  if (!locale) {\n    return null;\n  }\n  locale = locale.toLowerCase().replace(/_/g, \"-\");\n  if (object[locale]) {\n    return locale;\n  }\n  const language = locale.substring(0, 2);\n  if (object[language]) {\n    return language;\n  }\n  return null;\n}\n\nfunction findSupportedKey(requestedLocale, object, objectType) {\n  const requestedSupported = isSupportedLocale(requestedLocale, object);\n  if (requestedSupported) {\n    return requestedSupported;\n  }\n  if (requestedLocale) {\n    const keyList = JSON.stringify(Object.keys(object));\n    consoleError(`The requested locale \"${requestedLocale}\" does not contain a supported ${objectType}. We are defaulting to \"en\". The supported values are ${keyList}.`);\n  }\n  return \"en\";\n}\n\nasync function loadLocale(requestedLocale) {\n  try {\n    const localeKey = findSupportedKey(requestedLocale, locales, \"locale\");\n    const localeModule = await locales[localeKey]();\n    if (localeModule) {\n      return localeModule.default;\n    }\n    consoleError(`The locale data for \"${localeKey}\" did not load. The application will default to \"en\".`);\n  } catch (error) {\n    consoleError(`An error occurred loading the locale data for \"${requestedLocale}\". The application will default to \"en\".`, error);\n  }\n  return enLocaleData;\n}\n\nasync function loadLanguagePack(providedLanguagePack) {\n  if (providedLanguagePack) {\n    return fillWithEnglish(providedLanguagePack);\n  }\n  return enLanguagePack;\n}\n\nfunction fillWithEnglish(languagePack) {\n  return {\n    ...enLanguagePack,\n    ...languagePack\n  };\n}\n\nfunction handleBTag(chunks) {\n  return React.createElement(\"b\", null, chunks);\n}\n\nfunction handleBRTag() {\n  return React.createElement(\"br\", null);\n}\n\nfunction addHTMLSupport(values) {\n  values.b = handleBTag;\n  values.br = handleBRTag;\n  return values;\n}\n\nasync function loadDayjsLocale(locale) {\n  if (!dayjs.Ls[locale]) {\n    const previousLocale = dayjs.locale();\n    const localePack = await loadLocale(locale);\n    dayjs.locale(localePack);\n    dayjs.locale(previousLocale);\n    const isLoaded = Boolean(dayjs.Ls[locale]);\n    if (!isLoaded && locale.length === 2) {\n      throw Error(\"Locale is not recognized.\");\n    } else if (!isLoaded) {\n      return loadDayjsLocale(locale.substring(0, 2));\n    }\n  }\n  return locale;\n}\n\nfunction formatMessage(intl, id, values) {\n  return intl.formatMessage({\n    id: id\n  }, values);\n}\n\nfunction createEnglishFormat(key) {\n  return new IntlMessageFormat(enLanguagePack[key], \"en-US\");\n}\n\nexport { addHTMLSupport, createEnglishFormat, formatMessage, loadDayjsLocale, loadLanguagePack, loadLocale };\n","import { useContext } from \"react\";\n\nimport { LanguagePackContext } from \"../contexts/LanguagePackContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function useLanguagePack() {\n  return useContext(LanguagePackContext);\n}\n\nexport { useLanguagePack };\n","import cx from \"classnames\";\n\nimport React from \"react\";\n\nimport { HideComponentContext } from \"../../contexts/HideComponentContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function HideComponent(props) {\n  const {hidden: hidden, children: children, className: className, ...htmlAttributes} = props;\n  return React.createElement(HideComponentContext.Provider, {\n    value: hidden\n  }, React.createElement(\"div\", {\n    className: cx(className, {\n      WAC__hidden: hidden\n    }),\n    ...htmlAttributes\n  }, children));\n}\n\nexport { HideComponent };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const WindowSizeContext = React.createContext(null);\n\nexport { WindowSizeContext };\n","export { CarbonTheme } from \"../config/PublicConfig.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ var CarbonThemeClassNames;\n\n(function(CarbonThemeClassNames) {\n  CarbonThemeClassNames[\"WHITE\"] = \"cds--white\";\n  CarbonThemeClassNames[\"G10\"] = \"cds--g10\";\n  CarbonThemeClassNames[\"G90\"] = \"cds--g90\";\n  CarbonThemeClassNames[\"G100\"] = \"cds--g100\";\n})(CarbonThemeClassNames || (CarbonThemeClassNames = {}));\n\nvar ButtonKindEnum;\n\n(function(ButtonKindEnum) {\n  ButtonKindEnum[\"PRIMARY\"] = \"primary\";\n  ButtonKindEnum[\"SECONDARY\"] = \"secondary\";\n  ButtonKindEnum[\"DANGER\"] = \"danger\";\n  ButtonKindEnum[\"GHOST\"] = \"ghost\";\n  ButtonKindEnum[\"DANGER_PRIMARY\"] = \"danger--primary\";\n  ButtonKindEnum[\"DANGER_GHOST\"] = \"danger--ghost\";\n  ButtonKindEnum[\"DANGER_TERTIARY\"] = \"danger--tertiary\";\n  ButtonKindEnum[\"TERTIARY\"] = \"tertiary\";\n})(ButtonKindEnum || (ButtonKindEnum = {}));\n\nvar ButtonSizeEnum;\n\n(function(ButtonSizeEnum) {\n  ButtonSizeEnum[\"SMALL\"] = \"sm\";\n  ButtonSizeEnum[\"MEDIUM\"] = \"md\";\n  ButtonSizeEnum[\"LARGE\"] = \"lg\";\n  ButtonSizeEnum[\"XLARGE\"] = \"xl\";\n  ButtonSizeEnum[\"XXLARGE\"] = \"2xl\";\n})(ButtonSizeEnum || (ButtonSizeEnum = {}));\n\nexport { ButtonKindEnum, ButtonSizeEnum, CarbonThemeClassNames };\n","import { useContext } from \"react\";\n\nimport { ServiceManagerContext } from \"../contexts/ServiceManagerContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function useServiceManager() {\n  return useContext(ServiceManagerContext);\n}\n\nexport { useServiceManager };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const ModalPortalRootContext = React.createContext(null);\n\nexport { ModalPortalRootContext };\n","import { v4 } from \"uuid\";\n\nexport { UUIDType } from \"./UUIDType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function uuid(_type) {\n  return v4();\n}\n\nexport { uuid };\n","import React, { useContext, useEffect } from \"react\";\n\nimport { AriaAnnouncerContext } from \"../../contexts/AriaAnnouncerContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function AriaLiveMessage(props) {\n  const ariaAnnouncer = useContext(AriaAnnouncerContext);\n  useEffect(() => {\n    ariaAnnouncer(props.message);\n  }, [ ariaAnnouncer, props.message ]);\n  return React.createElement(\"div\", null);\n}\n\nconst AriaLiveMessageExport = React.memo(AriaLiveMessage);\n\nexport { AriaLiveMessageExport as AriaLiveMessage };\n","import { compute } from \"compute-scroll-into-view\";\n\nimport memoizeOne from \"memoize-one\";\n\nimport { tabbable } from \"tabbable\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const SCROLLBAR_WIDTH = memoizeOne(getScrollbarWidth);\n\nfunction doScrollElementIntoView(element, animate = false, boundary) {\n  if (element) {\n    const actions = compute(element, {\n      boundary: boundary,\n      scrollMode: \"if-needed\",\n      block: \"nearest\",\n      inline: \"nearest\"\n    });\n    actions.forEach(({el: el, top: top, left: left}) => {\n      doScrollElement(el, Math.round(top), Math.round(left), animate);\n    });\n  }\n}\n\nfunction doScrollElement(element, scrollTop, scrollLeft, animate = false) {\n  setTimeout(() => {\n    if (element) {\n      if (animate && element.scroll) {\n        element.scroll({\n          top: scrollTop,\n          left: scrollLeft,\n          behavior: \"smooth\"\n        });\n      } else {\n        element.scrollTop = scrollTop;\n        element.scrollLeft = scrollLeft;\n      }\n    }\n  });\n}\n\nfunction getScrollbarWidth() {\n  const outer = document.createElement(\"div\");\n  outer.style.visibility = \"hidden\";\n  outer.style.overflow = \"scroll\";\n  document.body.appendChild(outer);\n  const inner = document.createElement(\"div\");\n  outer.appendChild(inner);\n  const scrollbarWidth = outer.offsetWidth - inner.offsetWidth;\n  outer.parentNode.removeChild(outer);\n  return scrollbarWidth;\n}\n\nfunction doFocus(element, preventScroll = false) {\n  if (element && document.activeElement !== element && tabbable(element, {\n    getShadowRoot: true\n  })) {\n    element.focus({\n      preventScroll: preventScroll\n    });\n  }\n}\n\nfunction doFocusRef(ref, defer = false, preventScroll = false) {\n  if (ref) {\n    if (defer) {\n      setTimeout(() => {\n        doFocusRef(ref);\n      });\n    } else if (ref.current) {\n      doFocus(ref.current, preventScroll);\n    }\n  }\n}\n\nfunction isElement(node) {\n  return node?.nodeType === 1;\n}\n\nfunction isTextNode(node) {\n  return node?.nodeType === 3;\n}\n\nfunction isInputNode(node) {\n  return node?.tagName === \"INPUT\";\n}\n\nfunction isImageNode(node) {\n  return node?.tagName === \"IMG\";\n}\n\nfunction isTextAreaNode(node) {\n  return node?.tagName === \"TEXTAREA\";\n}\n\nfunction focusOnFirstFocusableItemInArrayOfElements(elements) {\n  for (let index = 0; index < elements.length; index++) {\n    if (focusOnFirstFocusableElement(elements[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction focusOnFirstFocusableElement(parentElement) {\n  const focusableElements = tabbable(parentElement, {\n    getShadowRoot: true\n  });\n  if (focusableElements?.length) {\n    doFocus(focusableElements[0]);\n    return true;\n  }\n  return false;\n}\n\nfunction isEnterKey(event) {\n  if (event.key === \"Enter\" && !hasModifiers(event)) {\n    return !(event.isComposing || event.keyCode === 229);\n  }\n  return false;\n}\n\nfunction hasModifiers(event) {\n  return event.shiftKey || event.altKey || event.metaKey || event.ctrlKey;\n}\n\nfunction getScrollBottom(element) {\n  if (element) {\n    return element.scrollHeight - element.offsetHeight - element.scrollTop;\n  }\n  return 0;\n}\n\nexport { SCROLLBAR_WIDTH, doFocusRef, doScrollElement, doScrollElementIntoView, focusOnFirstFocusableItemInArrayOfElements, getScrollBottom, isElement, isEnterKey, isImageNode, isInputNode, isTextAreaNode, isTextNode };\n","import cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport \"./constants.js\";\n\nimport { findLastWithMap } from \"./lang/arrayUtils.js\";\n\nimport { uuid } from \"./lang/uuid.js\";\n\nimport { MessageResponseTypes, MessageInputType, ButtonItemType, AgentMessageType, InternalMessageRequestType } from \"../../../types/messaging/Messages.js\";\n\nimport { UUIDType } from \"./lang/UUIDType.js\";\n\nimport { FileStatusValue } from \"../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const THREAD_ID_MAIN = \"main\";\n\nfunction isResponse(message) {\n  return message && message.output !== undefined;\n}\n\nfunction isDateResponseType(localMessage) {\n  return localMessage?.item.response_type === MessageResponseTypes.DATE;\n}\n\nfunction addDefaultsToMessage(fullMessage) {\n  if (!fullMessage.id) {\n    fullMessage.id = uuid(UUIDType.MESSAGE);\n  }\n  if (!fullMessage.thread_id) {\n    fullMessage.thread_id = THREAD_ID_MAIN;\n  }\n  if (!fullMessage.history) {\n    fullMessage.history = {};\n  }\n  if (!fullMessage.history.timestamp) {\n    fullMessage.history.timestamp = Date.now();\n  }\n  if (fullMessage.history.from_history === undefined) {\n    fullMessage.history.from_history = false;\n  }\n  return fullMessage;\n}\n\nfunction isRequest(message) {\n  return message?.input !== undefined;\n}\n\nfunction isLiveAgentMessage(message) {\n  return Boolean(message.item.agent_message_type);\n}\n\nfunction hasLiveAgentMessage(message) {\n  return isResponse(message) && Boolean(message.output.generic?.find(item => item?.agent_message_type)) || isRequest(message) && Boolean(message.input.agent_message_type);\n}\n\nfunction isEventRequest(message) {\n  return message?.input?.message_type === MessageInputType.EVENT;\n}\n\nfunction isTextItem(item) {\n  return item && item.response_type === \"text\" && item.text !== undefined;\n}\n\nfunction isTyping(message) {\n  return message.response_type === MessageResponseTypes.PAUSE && message.typing == true;\n}\n\nfunction isPause(message) {\n  return message.response_type === MessageResponseTypes.PAUSE;\n}\n\nfunction isOptionItem(item) {\n  return item?.response_type === MessageResponseTypes.OPTION && item.options !== undefined;\n}\n\nfunction createMessageRequestForChoice(choice, relatedResponseID) {\n  const messageRequest = {\n    id: uuid(UUIDType.MESSAGE),\n    thread_id: THREAD_ID_MAIN,\n    ...cloneDeep(choice.value)\n  };\n  messageRequest.history = {\n    label: choice.label,\n    related_message_id: relatedResponseID\n  };\n  return messageRequest;\n}\n\nfunction createMessageRequestForButtonItemOption(buttonItem, relatedResponseID) {\n  const messageRequest = {\n    id: uuid(UUIDType.MESSAGE),\n    thread_id: THREAD_ID_MAIN,\n    input: null\n  };\n  if (buttonItem.value?.input?.text) {\n    messageRequest.input = cloneDeep(buttonItem.value.input);\n  } else {\n    messageRequest.input = {\n      text: buttonItem.label\n    };\n  }\n  messageRequest.history = {\n    related_message_id: relatedResponseID\n  };\n  return messageRequest;\n}\n\nfunction createWelcomeRequest() {\n  return addDefaultsToMessage({\n    id: uuid(UUIDType.MESSAGE),\n    input: {\n      text: \"\"\n    },\n    history: {\n      silent: true,\n      is_welcome_request: true\n    },\n    thread_id: THREAD_ID_MAIN\n  });\n}\n\nfunction createMessageRequestForText(text) {\n  return addDefaultsToMessage({\n    input: {\n      text: text,\n      message_type: MessageInputType.TEXT\n    }\n  });\n}\n\nfunction createMessageRequestForFileUpload(upload) {\n  return addDefaultsToMessage({\n    id: upload.id,\n    input: {\n      text: upload.file.name,\n      message_type: InternalMessageRequestType.FILE,\n      agent_message_type: AgentMessageType.FROM_USER\n    },\n    history: {\n      file_upload_status: FileStatusValue.UPLOADING\n    }\n  });\n}\n\nfunction createMessageRequestForDate(inputString, userString, relatedResponseID) {\n  const messageRequest = createMessageRequestForText(inputString);\n  messageRequest.history = {\n    label: userString,\n    related_message_id: relatedResponseID\n  };\n  return messageRequest;\n}\n\nfunction createMessageResponseForText(text, threadID = THREAD_ID_MAIN, responseType = MessageResponseTypes.TEXT, context) {\n  const textItem = {\n    response_type: responseType,\n    text: text\n  };\n  const messageResponse = {\n    id: uuid(UUIDType.MESSAGE),\n    thread_id: threadID,\n    output: {\n      generic: [ textItem ]\n    }\n  };\n  return messageResponse;\n}\n\nfunction createMessageResponseForItem(item, context) {\n  const messageResponse = {\n    output: {\n      generic: [ item ]\n    }\n  };\n  return addDefaultsToMessage(messageResponse);\n}\n\nfunction isConnectToAgent(response) {\n  return response?.response_type === MessageResponseTypes.CONNECT_TO_AGENT;\n}\n\nfunction isCardResponseType(response) {\n  return response?.response_type === MessageResponseTypes.CARD;\n}\n\nfunction isCarouselResponseType(response) {\n  return response?.response_type === MessageResponseTypes.CAROUSEL;\n}\n\nfunction isButtonResponseType(response) {\n  return response?.response_type === MessageResponseTypes.BUTTON;\n}\n\nfunction isShowPanelButtonType(response) {\n  return isButtonResponseType(response) && response.button_type === ButtonItemType.SHOW_PANEL;\n}\n\nfunction isResponseWithNestedItems(item) {\n  if (isButtonResponseType(item)) {\n    return hasBodyOrFooter(item.panel);\n  }\n  if (isCardResponseType(item)) {\n    return hasBodyOrFooter(item);\n  }\n  if (isCarouselResponseType(item)) {\n    return item.items !== undefined;\n  }\n  return isGridResponseType(item);\n}\n\nfunction hasBodyOrFooter(item) {\n  return item?.body !== undefined || item?.footer !== undefined;\n}\n\nfunction renderAsUserDefinedMessage(messageItem) {\n  const responseType = messageItem.response_type;\n  switch (responseType) {\n   case MessageResponseTypes.TEXT:\n   case MessageResponseTypes.IMAGE:\n   case MessageResponseTypes.OPTION:\n   case MessageResponseTypes.CONNECT_TO_AGENT:\n   case MessageResponseTypes.IFRAME:\n   case MessageResponseTypes.VIDEO:\n   case MessageResponseTypes.AUDIO:\n   case MessageResponseTypes.DATE:\n   case MessageResponseTypes.CONVERSATIONAL_SEARCH:\n   case MessageResponseTypes.TABLE:\n   case MessageResponseTypes.INLINE_ERROR:\n   case MessageResponseTypes.CARD:\n   case MessageResponseTypes.CAROUSEL:\n   case MessageResponseTypes.BUTTON:\n   case MessageResponseTypes.GRID:\n    return false;\n\n   default:\n    return !renderAsTour(messageItem);\n  }\n}\n\nfunction renderAsTour(messageItem) {\n  return hasTourUserDefinedType(messageItem);\n}\n\nfunction hasTourUserDefinedType(message) {\n  return message?.user_defined?.user_defined_type === \"IBM_BETA_JOURNEYS_TOUR\";\n}\n\nfunction hasServiceDesk(config) {\n  return Boolean(config.public.serviceDeskFactory);\n}\n\nfunction isItemSupportedInResponseBody(item) {\n  switch (item.response_type) {\n   case MessageResponseTypes.IMAGE:\n   case MessageResponseTypes.IFRAME:\n   case MessageResponseTypes.VIDEO:\n   case MessageResponseTypes.AUDIO:\n   case MessageResponseTypes.TEXT:\n   case MessageResponseTypes.USER_DEFINED:\n   case MessageResponseTypes.CARD:\n   case MessageResponseTypes.GRID:\n    return true;\n\n   default:\n    return false;\n  }\n}\n\nfunction isSingleItemCarousel(messageItem) {\n  return isCarouselResponseType(messageItem) && messageItem.items.length === 1;\n}\n\nfunction isGridResponseType(item) {\n  return item?.response_type === MessageResponseTypes.GRID;\n}\n\nfunction getOptionType(preference, totalOptions) {\n  let type = \"button\";\n  if (preference && preference === \"button\") {\n    type = \"button\";\n  } else if (preference && preference === \"dropdown\") {\n    type = \"dropdown\";\n  } else if (totalOptions > 4) {\n    type = \"dropdown\";\n  }\n  return type;\n}\n\nfunction isStreamPartialItem(chunk) {\n  return Boolean(chunk.partial_item);\n}\n\nfunction isStreamCompleteItem(chunk) {\n  return Boolean(chunk.complete_item);\n}\n\nfunction isStreamFinalResponse(chunk) {\n  return Boolean(chunk.final_response);\n}\n\nfunction streamItemID(messageID, item) {\n  const itemID = item?.streaming_metadata?.id;\n  if (!itemID) {\n    return null;\n  }\n  return `${messageID}-${itemID}`;\n}\n\nfunction getMediaDimensions(item) {\n  return item.dimensions;\n}\n\nfunction getLastBotResponseWithContext(state) {\n  const messageIDs = state.botMessageState.messageIDs || [];\n  return findLastWithMap(messageIDs, state.allMessagesByID, message => isResponse(message) && !hasLiveAgentMessage(message) && Boolean(message.context));\n}\n\nexport { THREAD_ID_MAIN, addDefaultsToMessage, createMessageRequestForButtonItemOption, createMessageRequestForChoice, createMessageRequestForDate, createMessageRequestForFileUpload, createMessageRequestForText, createMessageResponseForItem, createMessageResponseForText, createWelcomeRequest, getLastBotResponseWithContext, getMediaDimensions, getOptionType, hasServiceDesk, hasTourUserDefinedType, isButtonResponseType, isCardResponseType, isCarouselResponseType, isConnectToAgent, isDateResponseType, isEventRequest, isGridResponseType, isItemSupportedInResponseBody, isLiveAgentMessage, isOptionItem, isPause, isRequest, isResponse, isResponseWithNestedItems, isShowPanelButtonType, isSingleItemCarousel, isStreamCompleteItem, isStreamFinalResponse, isStreamPartialItem, isTextItem, isTyping, renderAsTour, renderAsUserDefinedMessage, streamItemID };\n","import React, { PureComponent } from \"react\";\n\nimport { withAriaAnnouncer } from \"../../hocs/withAriaAnnouncer.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ class AnnounceOnMountComponent extends PureComponent {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      isMounted: false\n    };\n    this.onceAnnounced = false;\n  }\n  componentDidMount() {\n    this.setState({\n      isMounted: true\n    });\n    if (!this.onceAnnounced) {\n      if (this.props.announceOnce) {\n        setTimeout(() => {\n          this.props.ariaAnnouncer(this.props.announceOnce);\n        });\n      }\n      this.onceAnnounced = true;\n    }\n  }\n  render() {\n    return React.createElement(\"div\", {\n      \"aria-live\": \"polite\"\n    }, this.state.isMounted && this.props.children);\n  }\n}\n\nconst AnnounceOnMountComponentExport = withAriaAnnouncer(AnnounceOnMountComponent);\n\nexport { AnnounceOnMountComponentExport as AnnounceOnMountComponent };\n","export { ViewType } from \"../instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ var ChatWidthBreakpoint;\n\n(function(ChatWidthBreakpoint) {\n  ChatWidthBreakpoint[\"NARROW\"] = \"narrow\";\n  ChatWidthBreakpoint[\"STANDARD\"] = \"standard\";\n  ChatWidthBreakpoint[\"WIDE\"] = \"wide\";\n})(ChatWidthBreakpoint || (ChatWidthBreakpoint = {}));\n\nexport { ChatWidthBreakpoint };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function WriteableElement({slotName: slotName, id: id, className: className}) {\n  return React.createElement(\"div\", {\n    className: className,\n    id: id,\n    \"data-floating-menu-container\": true\n  }, React.createElement(\"slot\", {\n    name: slotName\n  }));\n}\n\nvar WriteableElement$1 = React.memo(WriteableElement);\n\nexport { WriteableElement$1 as default };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const ServiceManagerContext = React.createContext(null);\n\nexport { ServiceManagerContext };\n","import { Component } from \"react\";\n\nimport ReactDOM from \"react-dom\";\n\nimport { ModalPortalRootContext } from \"../contexts/ModalPortalRootContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nclass ModalPortal extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      attachedToHost: null\n    };\n    this.modalElement = document.createElement(\"div\");\n  }\n  componentDidMount() {\n    this.attachIfNeeded();\n  }\n  componentDidUpdate() {\n    this.attachIfNeeded();\n  }\n  componentWillUnmount() {\n    if (this.state.attachedToHost) {\n      this.state.attachedToHost.removeChild(this.modalElement);\n    }\n  }\n  attachIfNeeded() {\n    const hostElement = this.context;\n    if (hostElement && !this.state.attachedToHost) {\n      this.setState({\n        attachedToHost: hostElement\n      });\n      hostElement.appendChild(this.modalElement);\n    }\n  }\n  render() {\n    if (!this.state.attachedToHost) {\n      return null;\n    }\n    return ReactDOM.createPortal(this.props.children, this.modalElement);\n  }\n}\n\nModalPortal.contextType = ModalPortalRootContext;\n\nexport { ModalPortal };\n","import { Button } from \"@carbon/react\";\n\nimport FocusTrap from \"focus-trap-react\";\n\nimport React, { Component } from \"react\";\n\nimport { ModalPortal } from \"../../containers/ModalPortal.js\";\n\nimport { AriaLiveMessage as AriaLiveMessageExport } from \"../aria/AriaLiveMessage.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ class ConfirmModal extends Component {\n  constructor() {\n    super(...arguments);\n    this.onYesClick = () => {\n      this.props.onConfirm();\n    };\n    this.onNoClick = () => {\n      this.props.onCancel();\n    };\n    this.onKeyDown = event => {\n      if (event.key === \"Escape\") {\n        this.props.onCancel();\n      }\n    };\n  }\n  render() {\n    const {title: title, message: message, cancelButtonLabel: cancelButtonLabel, confirmButtonLabel: confirmButtonLabel, modalAnnounceMessage: modalAnnounceMessage, serviceManager: serviceManager} = this.props;\n    return React.createElement(ModalPortal, null, React.createElement(FocusTrap, null, React.createElement(\"div\", {\n      className: \"WACConfirmModal\",\n      role: \"dialog\",\n      \"aria-labelledby\": \"WACConfirmModal__title\",\n      \"aria-describedby\": \"WACConfirmModal__message\"\n    }, React.createElement(\"div\", {\n      className: \"WACConfirmModal__container\"\n    }, React.createElement(AriaLiveMessageExport, {\n      message: modalAnnounceMessage\n    }), React.createElement(\"div\", {\n      className: \"WACConfirmModal__title\",\n      id: `WACConfirmModal__title${serviceManager.namespace.suffix}`\n    }, title), React.createElement(\"div\", {\n      className: \"WACConfirmModal__message\",\n      id: `WACConfirmModal__message${serviceManager.namespace.suffix}`\n    }, message), React.createElement(\"div\", {\n      className: \"WACConfirmModal__buttonContainer\"\n    }, React.createElement(Button, {\n      className: \"WACConfirmModal__NoButton\",\n      kind: \"secondary\",\n      onClick: this.onNoClick,\n      onKeyDown: this.onKeyDown,\n      size: \"md\"\n    }, cancelButtonLabel), React.createElement(Button, {\n      className: \"WACConfirmModal__YesButton\",\n      onClick: this.onYesClick,\n      onKeyDown: this.onKeyDown,\n      size: \"md\"\n    }, confirmButtonLabel))))));\n  }\n}\n\nexport { ConfirmModal };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar CSSVariable;\n\n(function(CSSVariable) {\n  CSSVariable[\"BASE_HEIGHT\"] = \"BASE-height\";\n  CSSVariable[\"BASE_MAX_HEIGHT\"] = \"BASE-max-height\";\n  CSSVariable[\"BASE_WIDTH\"] = \"BASE-width\";\n  CSSVariable[\"BASE_Z_INDEX\"] = \"BASE-z-index\";\n})(CSSVariable || (CSSVariable = {}));\n\nvar WriteableElementName;\n\n(function(WriteableElementName) {\n  WriteableElementName[\"AI_TOOLTIP_AFTER_DESCRIPTION_ELEMENT\"] = \"aiTooltipAfterDescriptionElement\";\n  WriteableElementName[\"WELCOME_NODE_BEFORE_ELEMENT\"] = \"welcomeNodeBeforeElement\";\n  WriteableElementName[\"HEADER_BOTTOM_ELEMENT\"] = \"headerBottomElement\";\n  WriteableElementName[\"BEFORE_INPUT_ELEMENT\"] = \"beforeInputElement\";\n  WriteableElementName[\"HOME_SCREEN_BEFORE_INPUT_ELEMENT\"] = \"homeScreenBeforeInputElement\";\n  WriteableElementName[\"HOME_SCREEN_AFTER_STARTERS_ELEMENT\"] = \"homeScreenAfterStartersElement\";\n  WriteableElementName[\"HOME_SCREEN_HEADER_BOTTOM_ELEMENT\"] = \"homeScreenHeaderBottomElement\";\n  WriteableElementName[\"CUSTOM_PANEL_ELEMENT\"] = \"customPanelElement\";\n})(WriteableElementName || (WriteableElementName = {}));\n\nexport { CSSVariable, WriteableElementName };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst getBotInputState = state => state.botInputState;\n\nconst getAgentInputState = state => state.agentState.inputState;\n\nconst getAgentState = state => state.agentState;\n\nconst getPersistedAgent = state => state.persistedToBrowserStorage.chatState.agentState;\n\nfunction selectAgentDisplayState(state) {\n  const agentState = getAgentState(state);\n  const persisted = getPersistedAgent(state);\n  if (persisted.isSuspended) {\n    return {\n      isConnectingOrConnected: false,\n      disableInput: false,\n      isAgentTyping: false,\n      inputPlaceholderKey: null\n    };\n  }\n  const {isReconnecting: isReconnecting, isConnecting: isConnecting, isAgentTyping: isAgentTyping} = agentState;\n  const {isConnected: isConnected} = persisted;\n  let inputPlaceholderKey;\n  if (isConnecting) {\n    inputPlaceholderKey = \"agent_inputPlaceholderConnecting\";\n  } else if (isReconnecting) {\n    inputPlaceholderKey = \"agent_inputPlaceholderReconnecting\";\n  } else {\n    inputPlaceholderKey = null;\n  }\n  return {\n    isAgentTyping: isAgentTyping,\n    isConnectingOrConnected: isConnecting || isConnected,\n    disableInput: isConnecting || isReconnecting,\n    inputPlaceholderKey: inputPlaceholderKey\n  };\n}\n\nfunction selectIsInputToAgent(state) {\n  return selectAgentDisplayState(state).isConnectingOrConnected;\n}\n\nfunction selectInputState(state) {\n  return selectIsInputToAgent(state) ? getAgentInputState(state) : getBotInputState(state);\n}\n\nexport { selectAgentDisplayState, selectInputState, selectIsInputToAgent };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nasync function sleep(milliseconds) {\n  await new Promise(resolve => {\n    setTimeout(resolve, milliseconds);\n  });\n}\n\nfunction resolveOrTimeout(promise, duration, errorMessage) {\n  const timeout = new Promise((resolve, reject) => {\n    setTimeout(() => {\n      const message = errorMessage || `The operation timed out after ${duration}ms`;\n      reject(message);\n    }, duration);\n  });\n  return Promise.race([ promise, timeout ]);\n}\n\nexport { resolveOrTimeout, sleep };\n","import Home from \"@carbon/icons-react/es/Home.js\";\n\nimport React, { forwardRef, useRef, useCallback, useImperativeHandle } from \"react\";\n\nimport { useSelector, shallowEqual } from \"react-redux\";\n\nimport { useLanguagePack } from \"../../hooks/useLanguagePack.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport { selectAgentDisplayState } from \"../../store/selectors.js\";\n\nimport \"../../utils/constants.js\";\n\nimport WriteableElement from \"../WriteableElement.js\";\n\nimport { Header as HeaderExport } from \"./Header.js\";\n\nimport { WriteableElementName } from \"../../../../types/instance/ChatInstance.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function BotHeader(props, ref) {\n  const {onClose: onClose, onCloseAndRestart: onCloseAndRestart, onRestart: onRestart, onToggleHomeScreen: onToggleHomeScreen, headerDisplayName: headerDisplayName, includeWriteableElement: includeWriteableElement, enableChatHeaderConfig: enableChatHeaderConfig, headerAvatarConfig: headerAvatarConfig} = props;\n  const serviceManager = useServiceManager();\n  const languagePack = useLanguagePack();\n  const homeScreenIsOn = useSelector(state => state.homeScreenConfig.is_on && state.homeScreenConfig.allow_return);\n  const publicConfig = useSelector(state => state.config.public);\n  const customMenuOptions = useSelector(state => state.customMenuOptions);\n  const {isConnectingOrConnected: isConnectingOrConnected} = useSelector(selectAgentDisplayState, shallowEqual);\n  const useAITheme = useSelector(state => state.theme.useAITheme);\n  const maxVisibleHeaderObjects = useSelector(state => state.chatHeaderState.maxVisibleHeaderObjects);\n  const leftObjectsLength = useSelector(state => state.chatHeaderState.config?.left?.length || 0);\n  const rightObjectsLength = useSelector(state => state.chatHeaderState.config?.right?.length || 0);\n  const headerRef = useRef();\n  const isHeaderObjectsInOverflow = leftObjectsLength > maxVisibleHeaderObjects || rightObjectsLength > maxVisibleHeaderObjects;\n  const hasChatHeaderObjects = enableChatHeaderConfig && isHeaderObjectsInOverflow;\n  const showRestartButton = publicConfig.showRestartButton || publicConfig.headerConfig?.showRestartButton;\n  const allowHomeScreen = homeScreenIsOn && !isConnectingOrConnected;\n  const overflowClicked = useCallback(index => {\n    if (index === 0 && allowHomeScreen) {\n      onToggleHomeScreen?.();\n    } else {\n      const {handler: handler} = customMenuOptions[allowHomeScreen ? index - 1 : index];\n      handler();\n    }\n  }, [ customMenuOptions, onToggleHomeScreen, allowHomeScreen ]);\n  let overflowItems = customMenuOptions?.map(option => option.text);\n  if (overflowItems && allowHomeScreen) {\n    overflowItems.splice(0, 0, languagePack.homeScreen_overflowMenuHomeScreen);\n  } else if (!overflowItems && allowHomeScreen && hasChatHeaderObjects) {\n    overflowItems = [ languagePack.homeScreen_overflowMenuHomeScreen ];\n  }\n  useImperativeHandle(ref, () => headerRef.current);\n  return React.createElement(\"div\", {\n    className: \"WACHeader__Container\"\n  }, React.createElement(HeaderExport, {\n    ref: headerRef,\n    showCenter: true,\n    headerAvatarConfig: headerAvatarConfig,\n    displayName: headerDisplayName,\n    showBackButton: Boolean(allowHomeScreen && onToggleHomeScreen),\n    showRestartButton: showRestartButton,\n    useAITheme: useAITheme,\n    backContent: React.createElement(Home, null),\n    labelBackButton: languagePack.homeScreen_returnToHome,\n    onClickRestart: onRestart,\n    onClickClose: onClose,\n    onCloseAndRestart: onCloseAndRestart,\n    onClickBack: onToggleHomeScreen,\n    overflowItems: overflowItems,\n    overflowClicked: overflowClicked,\n    enableChatHeaderConfig: enableChatHeaderConfig\n  }), includeWriteableElement && React.createElement(WriteableElement, {\n    slotName: WriteableElementName.HEADER_BOTTOM_ELEMENT,\n    id: `headerBottomElement${serviceManager.namespace.suffix}`,\n    className: \"WACHeader__HeaderBottomElement\"\n  }));\n}\n\nconst BotHeaderExport = React.memo(forwardRef(BotHeader));\n\nexport { BotHeaderExport as BotHeader };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction deepFreeze(object) {\n  Object.freeze(object);\n  Object.getOwnPropertyNames(object).forEach(prop => {\n    if (Object.prototype.hasOwnProperty.call(object, prop) && object[prop] !== null && (typeof object[prop] === \"object\" || typeof object[prop] === \"function\") && !Object.isFrozen(object[prop])) {\n      deepFreeze(object[prop]);\n    }\n  });\n  return object;\n}\n\nexport { deepFreeze };\n","import { MessageResponseTypes } from \"../../../types/messaging/Messages.js\";\n\nimport { uuid } from \"../utils/lang/uuid.js\";\n\nimport { UUIDType } from \"../utils/lang/UUIDType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function inputItemToLocalItem(message, originalUserText, id = uuid(UUIDType.LOCAL_MESSAGE)) {\n  const localMessage = {\n    item: {\n      response_type: MessageResponseTypes.TEXT,\n      ...message.input\n    },\n    ui_state: {\n      id: id,\n      originalUserText: originalUserText,\n      needsAnnouncement: false\n    },\n    fullMessageID: message.id\n  };\n  return localMessage;\n}\n\nexport { inputItemToLocalItem as default };\n","import { useContext } from \"react\";\n\nimport { AriaAnnouncerContext } from \"../contexts/AriaAnnouncerContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function useAriaAnnouncer() {\n  return useContext(AriaAnnouncerContext);\n}\n\nexport { useAriaAnnouncer };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst HA_SET_AGENT_AVAILABILITY = \"HA_SET_AGENT_AVAILABILITY\";\n\nconst HA_SET_IS_CONNECTING = \"HA_SET_IS_CONNECTING\";\n\nconst HA_SET_IS_RECONNECTING = \"HA_SET_IS_RECONNECTING\";\n\nconst HA_SET_AGENT_JOINED = \"HA_SET_AGENT_JOINED\";\n\nconst HA_SET_AGENT_LEFT_CHAT = \"HA_SET_AGENT_LEFT_CHAT\";\n\nconst HA_END_CHAT = \"HA_END_CHAT\";\n\nconst HA_UPDATE_CAPABILITIES = \"HA_UPDATE_CAPABILITIES\";\n\nconst HA_UPDATE_FILE_UPLOAD_IN_PROGRESS = \"HA_UPDATE_FILE_UPLOAD_IN_PROGRESS\";\n\nconst HA_SET_SHOW_SCREEN_SHARE_REQUEST = \"HA_SET_SHOW_SCREEN_SHARE_REQUEST\";\n\nconst HA_SET_IS_SCREEN_SHARING = \"HA_SET_IS_SCREEN_SHARING\";\n\nconst HA_SET_PERSISTED_STATE = \"HA_SET_PERSISTED_STATE\";\n\nconst HA_UPDATE_IS_SUSPENDED = \"HA_UPDATE_IS_SUSPENDED\";\n\nconst HA_UPDATE_IS_TYPING = \"HA_UPDATE_IS_TYPING\";\n\nfunction setIsConnecting(isConnecting, localMessageID) {\n  return {\n    type: HA_SET_IS_CONNECTING,\n    isConnecting: isConnecting,\n    localMessageID: localMessageID\n  };\n}\n\nfunction setIsReconnecting(isReconnecting) {\n  return {\n    type: HA_SET_IS_RECONNECTING,\n    isReconnecting: isReconnecting\n  };\n}\n\nfunction setAgentLeftChat() {\n  return {\n    type: HA_SET_AGENT_LEFT_CHAT\n  };\n}\n\nfunction endChat() {\n  return {\n    type: HA_END_CHAT\n  };\n}\n\nfunction setAgentAvailability(availability) {\n  return {\n    type: HA_SET_AGENT_AVAILABILITY,\n    availability: availability\n  };\n}\n\nfunction setAgentJoined(agentProfile) {\n  return {\n    type: HA_SET_AGENT_JOINED,\n    agentProfile: agentProfile\n  };\n}\n\nfunction updateCapabilities(capabilities) {\n  return {\n    type: HA_UPDATE_CAPABILITIES,\n    capabilities: capabilities\n  };\n}\n\nfunction updateFilesUploadInProgress(fileUploadInProgress) {\n  return {\n    type: HA_UPDATE_FILE_UPLOAD_IN_PROGRESS,\n    fileUploadInProgress: fileUploadInProgress\n  };\n}\n\nfunction setShowScreenShareRequest(showRequest) {\n  return {\n    type: HA_SET_SHOW_SCREEN_SHARE_REQUEST,\n    showRequest: showRequest\n  };\n}\n\nfunction setIsScreenSharing(isSharing) {\n  return {\n    type: HA_SET_IS_SCREEN_SHARING,\n    isSharing: isSharing\n  };\n}\n\nfunction setPersistedServiceDeskState(state) {\n  return {\n    type: HA_SET_PERSISTED_STATE,\n    state: state\n  };\n}\n\nfunction agentUpdateIsSuspended(isSuspended) {\n  return {\n    type: HA_UPDATE_IS_SUSPENDED,\n    isSuspended: isSuspended\n  };\n}\n\nfunction agentUpdateIsTyping(isTyping) {\n  return {\n    type: HA_UPDATE_IS_TYPING,\n    isTyping: isTyping\n  };\n}\n\nexport { HA_END_CHAT, HA_SET_AGENT_AVAILABILITY, HA_SET_AGENT_JOINED, HA_SET_AGENT_LEFT_CHAT, HA_SET_IS_CONNECTING, HA_SET_IS_RECONNECTING, HA_SET_IS_SCREEN_SHARING, HA_SET_PERSISTED_STATE, HA_SET_SHOW_SCREEN_SHARE_REQUEST, HA_UPDATE_CAPABILITIES, HA_UPDATE_FILE_UPLOAD_IN_PROGRESS, HA_UPDATE_IS_SUSPENDED, HA_UPDATE_IS_TYPING, agentUpdateIsSuspended, agentUpdateIsTyping, endChat, setAgentAvailability, setAgentJoined, setAgentLeftChat, setIsConnecting, setIsReconnecting, setIsScreenSharing, setPersistedServiceDeskState, setShowScreenShareRequest, updateCapabilities, updateFilesUploadInProgress };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const LanguagePackContext = React.createContext(null);\n\nexport { LanguagePackContext };\n"],"names":["useUUID","ref","useRef","undefined","current","uuid","UUIDType","COMPONENT","AriaAnnouncerContext","React","CSS_CLASS_PREFIX","WEB_COMPONENT_PREFIX","asArray","value","Array","isArray","async","asyncForEach","array","callbackFunction","index","length","findLast","predicate","startAt","lastIndex","findLastIndex","findLastWithMap","keys","map","arrayLastValue","outputItemToLocalItem","messageItem","fullMessage","isLatestWelcomeNode","disableFadeAnimation","localMessage","ui_state","id","streamItemID","LOCAL_MESSAGE","needsAnnouncement","history","from_history","item","fullMessageID","isWelcomeResponse","createLocalMessageForInlineError","text","originalMessage","createMessageResponseForItem","createLocalMessageForItem","response_type","MessageResponseTypes","INLINE_ERROR","createLocalMessageItemsForNestedMessageItems","localMessageItem","fromHistory","nestedLocalMessageItems","allowFooter","isGridResponseType","gridLocalMessageItemIDs","rows","row","cells","cell","cellLocalMessageItemIDs","createLocalMessageItemsForNestedType","items","nestedMessageItem","isSupportedMessageItemInBody","isCarouselResponseType","itemsLocalMessageItemIDs","bodyItems","body","panel","bodyLocalMessageItemIDs","isShowPanelButtonType","footerItems","footer","footerLocalMessageItemIDs","rootMessageItem","isButtonResponseType","isSupportedMessageItemInFooter","type","nestedMessageItemIDs","isSupported","forEach","nestedLocalMessageItem","push","isResponseWithNestedItems","consoleError","CARD","isCardResponseType","isItemSupportedInResponseBody","CAROUSEL","BUTTON","button_type","ButtonItemType","SHOW_PANEL","GRID","BasePanelComponent","className","children","isOpen","hidePanelHeader","labelBackButton","title","hideBackButton","useAITheme","onClickCloseAndRestart","onClickRestart","headerProps","showRestartButton","useSelector","state","config","public","headerConfig","headerRef","useImperativeHandle","FocusTrap","active","focusTrapOptions","clickOutsideDeactivates","returnFocusOnDeactivate","IS_MOBILE","preventScroll","HeaderExport","onCloseAndRestart","showBackButton","displayName","showCenter","BasePanelComponentExport","CHANGE_STATE","UPDATE_BOT_NAME","UPDATE_BOT_AVATAR_URL","UPDATE_LAUNCHER_AVATAR_URL","UPDATE_MAIN_HEADER_TITLE","HYDRATE_CHAT","HYDRATE_MESSAGE_HISTORY","ADD_LOCAL_MESSAGE_ITEM","REMOVE_MESSAGES","UPDATE_LOCAL_MESSAGE_ITEM","SET_APP_STATE_VALUE","ADD_IS_TYPING_COUNTER","ADD_IS_LOADING_COUNTER","ADD_IS_HYDRATING_COUNTER","SET_VIEW_STATE","SET_VIEW_CHANGING","SET_INITIAL_VIEW_CHANGE_COMPLETE","UPDATE_CSS_VARIABLES","MESSAGE_SET_OPTION_SELECTED","SET_MESSAGE_UI_PROPERTY","SET_MESSAGE_HISTORY_PROPERTY","MERGE_HISTORY","SET_LAUNCHER_PROPERTY","SET_LAUNCHER_CONFIG_PROPERTY","ANNOUNCE_MESSAGE","SET_CHAT_MESSAGES_PROPERTY","RESTART_CONVERSATION","ACCEPTED_DISCLAIMER","ADD_MESSAGE","UPDATE_HOME_SCREEN_CONFIG","UPDATE_HAS_SENT_NON_WELCOME_MESSAGE","UPDATE_PERSISTED_CHAT_STATE","SET_TOUR_DATA","CLEAR_TOUR_DATA","CHANGE_STEP_IN_TOUR","SET_HOME_SCREEN_IS_OPEN","UPDATE_LAUNCHER_CONFIG","UPDATE_MESSAGE","SET_LAUNCHER_MINIMIZED","CLOSE_IFRAME_PANEL","OPEN_IFRAME_CONTENT","SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN","SET_CUSTOM_PANEL_OPTIONS","SET_CUSTOM_PANEL_OPEN","TOGGLE_HOME_SCREEN","UPDATE_INPUT_STATE","SET_IS_BROWSER_PAGE_VISIBLE","ADD_INPUT_FILE","CLEAR_INPUT_FILES","REMOVE_INPUT_FILE","REMOVE_LOCAL_MESSAGE_ITEM","FILE_UPLOAD_INPUT_ERROR","ADD_NESTED_MESSAGES","SET_RESPONSE_PANEL_IS_OPEN","SET_RESPONSE_PANEL_CONTENT","STREAMING_ADD_CHUNK","STREAMING_START","STREAMING_MERGE_HISTORY","ADD_NOTIFICATION","REMOVE_ALL_NOTIFICATIONS","REMOVE_NOTIFICATIONS","UPDATE_CHAT_HEADER_CONFIG","UPDATE_MAX_VISIBLE_HEADER_OBJECTS","SET_STOP_STREAMING_BUTTON_VISIBLE","SET_STOP_STREAMING_BUTTON_DISABLED","SET_STREAM_ID","UPDATE_MAIN_HEADER_AVATAR","actions","changeState","partialState","chatWasHydrated","hydrateMessageHistory","messageHistory","removeMessages","messageIDs","restartConversation","addLocalMessageItem","message","addMessage","addAfterID","updateLocalMessageItem","updateMessage","messageSetOptionSelected","messageID","sentMessage","updatePersistedChatState","chatState","setTourData","newActiveTourMessageID","clearTourData","changeStepInTour","newStepNumber","updateHasSentNonWelcomeMessage","hasSentNonWelcomeMessage","setAppStateValue","key","addIsTypingCounter","addToIsTyping","addIsLoadingCounter","addToIsLoading","addIsHydratingCounter","addToIsHydrating","updateBotName","name","updateMainHeaderTitle","updateBotAvatarURL","url","updateCSSVariables","variables","publicVars","whiteLabelVariables","updateHomeScreenConfig","homeScreenConfig","setViewState","viewState","setViewChanging","viewChanging","setInitialViewChangeComplete","changeComplete","setMessageUIProperty","localMessageID","propertyName","propertyValue","setLauncherProperty","setLauncherConfigProperty","launcherType","setMessageHistoryProperty","mergeMessageHistory","setMessageErrorState","errorState","setMessageWasAnnounced","announceMessage","setChatMessagesStateProperty","addNotification","notification","notificationID","removeNotifications","groupID","removeAllNotifications","acceptDisclaimer","setHomeScreenIsOpen","updateLauncherConfig","launcherConfig","setLauncherMinimized","closeIFramePanel","setIFrameContent","setViewSourcePanelIsOpen","citationItem","relatedSearchResult","setCustomPanelConfigOptions","options","setCustomPanelOpen","toggleHomeScreen","updateInputState","newState","isInputToAgent","setIsBrowserPageVisible","isVisible","addInputFile","file","removeFileUpload","fileID","removeLocalMessageItem","localMessageItemID","fileUploadInputError","errorMessage","clearInputFiles","addNestedMessages","localMessageItems","setResponsePanelIsOpen","setResponsePanelContent","isMessageForInput","streamingStart","streamingMergeHistory","streamingAddChunk","chunkItem","isCompleteItem","updateChatHeaderConfig","chatHeaderConfig","setMaxVisibleHeaderObjects","maxTotal","setStopStreamingButtonVisible","setStopStreamingButtonDisabled","isDisabled","setStreamID","currentStreamID","updateMainHeaderAvatar","withoutEmptyStarters","newConfig","starters","buttons","allow_return","filter","button","Boolean","label","trim","is_on","setIntl","serviceManager","locale","messages","intl","createIntl","store","dispatch","createWriteableElementsProxy","elementSet","Set","handler","get","target","element","has","add","Proxy","writeableElements","VERSION","NotificationType","BOUNCING_ANIMATION_TIMEOUTS","DEFAULT_LAUNCHER","mobile","time_to_expand","new_expand_time","time_to_reduce","notification_type","TEXT_NOTIFICATION","desktop","deepFreeze","DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS","disableAnimation","DEFAULT_CUSTOM_PANEL_STATE","panelID","DEFAULT_CUSTOM_PANEL_ID","DEFAULT_IFRAME_PANEL_STATE","DEFAULT_CITATION_PANEL_STATE","DEFAULT_TOUR_STATE","activeTourStepItems","DEFAULT_MESSAGE_PANEL_STATE","VIEW_STATE_ALL_CLOSED","launcher","mainWindow","tour","VIEW_STATE_LAUNCHER_OPEN","VIEW_STATE_MAIN_WINDOW_OPEN","DEFAULT_PERSISTED_TO_BROWSER","version","disclaimersAccepted","homeScreenState","isHomeScreenOpen","showBackToBot","persistedTourState","activeTourID","activeTourCurrentStepIndex","agentState","isConnected","isSuspended","agentProfiles","launcherState","wasLoadedFromBrowser","activeTour","showUnreadIndicator","mobileLauncherIsExtended","mobileLauncherWasReduced","mobileLauncherDisableBounce","desktopLauncherIsExpanded","desktopLauncherWasMinimized","bounceTurn","DEFAULT_CHAT_MESSAGES_STATE","localMessageIDs","isTypingCounter","isLoadingCounter","isHydratingCounter","isScrollAnchored","DEFAULT_MESSAGE_STATE","allMessageItemsByID","allMessagesByID","botMessageState","DEFAULT_AGENT_STATE","isConnecting","isReconnecting","numUnreadMessages","fileUploadInProgress","showScreenShareRequest","isScreenSharing","isAgentTyping","inputState","fieldVisible","isReadonly","files","allowFileUploads","allowMultipleFileUploads","allowedFileUploadTypes","stopStreamingButtonState","DEFAULT_THEME_STATE","carbonTheme","CarbonTheme","G10","corners","CornersType","ROUND","DEFAULT_LAYOUT_STATE","showFrame","hasContentMaxWidth","applyBotMessageState","setHomeScreenOpenState","persistedToBrowserStorage","applyLocalMessageUIState","oldMessage","applyFullMessage","MIN_CONTRAST","hexCodeToRGB","color","red","substring","blue","green","parseInt","calculateContrast","color1","color2","rgb1","rgb2","luminance1","calculateRelativeLuminance","luminance2","contrast","r8","g8","b8","rRGB","gRGB","bRGB","whiteOrBlackText","background","gray100","white","adjustLightness","token","shift","original","Color","hsl","object","l","round","hex","toLowerCase","CSS_VAR_PREFIX","HEXADECIMAL_REGEX","INTERNAL_OVERRIDES_LIGHT_THEME_MAP","INTERNAL_OVERRIDES_DARK_THEME_MAP","ACCENT_COLOR_MAPS","blue20","blue60","blue60Hover","blue80","g10","g90","g100","fillValues","styles","propertyNames","mergeCSSVariables","internalOverrides","internalOverridesMap","WHITE","includes","G90","G100","createInternalCSSOverridesMap","result","Object","entries","startsWith","match","console","warn","WA_CONSOLE_PREFIX","remoteVars","cssOverrides","primaryColor","secondaryColor","accentColor","useAccentColor","tryFocusColor","useFocusColor","colorMap","accentBlue20","accentBlue60Hover","accentBlue80","accentColorRGB","toString","accentColorBW","gray80","gray10","remoteStylesToCSSVars","getThemeClassNames","themeState","themeClassnames","CarbonThemeClassNames","validateViewState","appState","VALID_PUBLIC_VARS_IN_AI_THEME_SET","values","CSSVariable","UPDATE_CSS_VARS_AI_THEME_WARNING_MESSAGE","join","ChatActionsImpl","constructor","this","hydrating","restarting","alreadyHydrated","chunkQueue","hydrateChat","alternateWelcomeRequest","alternateWelcomeRequestSource","alternateOptions","fireReady","hydrationPromise","doHydrateChat","fire","BusEventType","CHAT_READY","debugLog","historyService","loadHistory","humanAgentService","initialize","getState","createElementsForUserDefinedResponses","latestPanelLocalMessageItem","openResponsePanel","messaging","skipWelcome","send","createWelcomeRequest","MessageSendSource","WELCOME_REQUEST","returnBeforeStreaming","lastMessageID","lastMessage","lastOriginalMessage","isLiveAgentMessage","isRequest","messageService","resendMessage","allowReconnect","serviceDesk","handleHydration","getPublicWebChatState","isConnectedWithHumanAgent","isWebChatOpen","isConnectingWithHumanAgent","isDebugEnabled","isEnableDebugLog","hasUserSentMessage","isTourActive","sendWithCatch","source","ignoreHydration","error","messageRequest","createMessageRequestForText","responsePanelState","doSend","addDefaultsToMessage","originalUserText","input","silent","inputItemToLocalItem","setValueSelectedForMessageID","cloneDeep","receive","requestMessage","requestOptions","restartCount","initialRestartCount","MESSAGE","preReceiveEvent","PRE_RECEIVE","data","languagePack","isResponse","processMessageResponse","catch","inlineError","createMessageResponseForText","errors_singleMessage","thread_id","RECEIVE","insertHistory","scrollBottom","getMessagesScrollBottom","notes","currentAppStateMessages","newAppStateMessages","merge","doAutoScroll","scrollToBottom","receiveChunk","chunk","chunkPromise","resolvablePromise","processChunkQueue","isStreamCompleteItem","isPartialItem","isStreamPartialItem","isStopGeneratingVisible","botInputState","partial_item","streaming_metadata","cancellable","response_id","complete_item","partial_response","Error","handleUserDefinedResponseItemsChunk","isStreamFinalResponse","final_response","doResolve","getOrCreateUserDefinedElement","messageItemID","userDefinedItem","userDefinedElementRegistry","document","createElement","slotName","setAttribute","set","handleUserDefinedResponseItems","renderAsUserDefinedMessage","user_defined","userDefinedResponseEvent","USER_DEFINED_RESPONSE","slot","fullWidth","createElementForNestedUserDefinedResponse","nestedLocalMessage","itemID","CHUNK_USER_DEFINED_RESPONSE","output","generic","request_id","previousItemID","pause","isPause","agent","isConnectToAgent","hasTourUserDefinedType","skipTourCard","skip_card","startTourReason","TourStartReason","START_TOUR_METHOD","SKIP_CARD","mainWindowCloseReason","MainWindowCloseReason","CALLED_START_TOUR","TOUR_SKIP_CARD","startTour","viewChangeReason","ViewChangeReason","hasServiceDesk","errorOccurred","errorType","OnErrorType","INTEGRATION_ERROR","agentAvailability","checkAreAnyAgentsOnline","shouldAutoRequestAgent","skipConnectAgentCard","AgentsOnlineStatus","ONLINE","startChat","showIsTyping","isTyping","sleep","time","insertLocalMessageResponse","updateLanguagePack","changes","removeNotification","theme","usePublicVars","variable","consoleWarn","allVariables","changeView","newView","reason","tryHydrating","forceViewChange","newViewState","constructViewState","isEqual","fireViewChangeEventsAndChangeView","isHydrated","oldViewState","preViewChangeEvent","VIEW_PRE_CHANGE","cancelViewChange","viewChangeEvent","VIEW_CHANGE","changeViewReason","ViewType","TOUR","TOUR_START","TOUR_STEP","step","tourState","endTour","LAUNCHER","goToSpecificTourStep","stepId","newStepIndex","findIndex","stepItem","step_id","changeStepOptions","nextStep","previousStep","actualNewStepIndex","catastrophicErrorType","callOnError","additionalChatParameters","onError","skipHydration","endAgentConversation","fireEvents","PRE_RESTART_CONVERSATION","currentState","endChat","MAIN_WINDOW","mainWindowOpenReason","MainWindowOpenReason","CALLED_RESTART_CONVERSATION","instance","updateAssistantInputFieldVisibility","cancelAllMessageRequests","destroySession","keepOpenState","originalViewState","newPersistedToBrowserStorage","userSessionStorageService","clearLauncherSession","clearChatSession","agentEndConversation","endedByUser","agentUpdateIsSuspended","HANDLER_NOT_FUNCTION","EventBus","handlersByType","Map","eventsTypesRunning","eventsRunningCount","busEvent","logEvent","JSON","stringify","handlersForType","handlersCopy","slice","Promise","delete","waitForEmptyPromise","fireSync","waitForEmpty","on","handlers","debugStackTrace","off","indexOf","removed","splice","once","onceHandler","event","logListeners","listeners","group","listener","consoleLog","groupEnd","clear","eventCopy","createCustomPanelInstance","customPanelInstance","open","close","freeze","HistoryService","useHistory","publicConfig","resultData","customLoadHistory","historyNotes","allLocalMessagesByID","loadingState","allMessages","threadMessagesByThreadID","responsesByRequestID","relatedMessageByID","localMessagesByOriginalMessageID","lastThreadID","loadedHistory","latestTransferToAgentResponse","note","historyItem","isEventRequest","timestamp","Date","getTime","THREAD_ID_MAIN","file_upload_status","FileStatusValue","UPLOADING","COMPLETE","error_state","MessageErrorState","FAILED","related_message_id","beginEvent","HISTORY_BEGIN","eventBus","HISTORY_END","notesToMessages","getResponseItems","thread","addMessageToThread","createLocalMessages","localMessagesByFullMessageID","toChatMessageState","createChatStates","mainThreadMessages","welcomeRequest","is_welcome_request","welcomeResponse","markIsLatestWelcomeNode","isOptionItem","relatedRequest","optionSelected","isDateResponseType","markSelectedOptions","notesToLoadedHistory","SESSION_HISTORY","MessageLoadingManager","start","onExceededMaxSilentLoading","onEnd","onTimeout","msMaxSilentLoading","msMaxAttempt","hasExceededMaxSilentLoading","onSilentLoading","setTimeout","onMaxAttempt","end","clearTimeout","MS_BETWEEN_RETRIES","RetryType","MessageService","pendingLocale","localeIsExplicit","messageLoadingManager","queue","waiting","timeoutOverride","messageTimeoutSecs","timeoutMS","processSuccess","received","isProcessed","isWelcomeNode","NONE","message_type","MessageInputType","EVENT","now","trackData","lastRequestTime","timeLastRequest","totalRequestTime","timeFirstRequest","sendMessagePromise","moveToNextQueueItem","addErrorMessage","HYDRATE_RESEND","skipQueue","sendToAssistantAndUpdateErrorState","sendToAssistant","SILENT","VISIBLE","RETRYING","waitingMessage","WAITING","processError","pendingRequest","resultText","allowRetry","tryCount","isWelcome","msSinceStarted","isInAttemptWindow","numErrors","retryDelay","MESSAGE_COMMUNICATION","otherData","rejectFinalErrorOnMessage","doReject","customSendMessage","controller","AbortController","sendMessageController","signal","runQueueIfReady","clearCurrentQueueItem","getLastBotResponseWithContext","LOADING_INDICATOR_TIMER","messageLoadingIndicatorTimeoutSecs","didExceedMaxLoading","cancelMessageRequestByID","PRE_SEND","SEND","addToMessageQueue","newPendingMessage","messageToUpdate","announceMessageID","TEXT","logError","lastResponse","abort","safeFetchTextWithTimeout","NamespaceService","namespace","originalName","attributeSafe","suffix","computedName","computeNamespaceName","getSuffix","ServiceManager","innerStorage","storage","getItem","setItem","removeItem","IS_SESSION_STORAGE","window","sessionStorage","storage$1","UserSessionStorageService","prefix","loadChatSession","chatSessionString","getChatSessionKey","chatSession","parse","loadLauncherSession","launcherSessionString","getLauncherSessionKey","launcherSession","persistChatSession","session","persistLauncherSession","replaceCurrentArrayValue","currentValue","newValue","agentReducers","HA_SET_IS_CONNECTING","action","activeLocalMessageID","HA_SET_IS_RECONNECTING","HA_SET_AGENT_AVAILABILITY","availability","HA_SET_SHOW_SCREEN_SHARE_REQUEST","showRequest","HA_SET_AGENT_JOINED","agentProfile","HA_SET_PERSISTED_STATE","serviceDeskState","HA_UPDATE_IS_SUSPENDED","HA_UPDATE_IS_TYPING","HA_SET_AGENT_LEFT_CHAT","HA_UPDATE_CAPABILITIES","newInputState","capabilities","HA_SET_IS_SCREEN_SHARING","isSharing","HA_UPDATE_FILE_UPLOAD_IN_PROGRESS","HA_END_CHAT","populateTourStepItems","tourMessageItem","find","steps","clearTourState","EXCLUDE_AGENT_UNREAD","AgentMessageType","USER_ENDED_CHAT","CHAT_WAS_ENDED","RELOAD_WARNING","reducers","iFramePanelState","viewSourcePanelState","customPanelState","isSilent","currentIndex","existingID","newLocalMessageIDs","insertAtIndex","afterIDIndex","isBotMessage","agent_message_type","isMainWindowOpen","isBrowserPageVisible","idsSet","newAllMessages","newAllMessageItems","newMessageIDs","newMessageItemsIDs","itemIDsInNewMessage","newAllMessageItemsByID","existingItemIDs","firstFoundIndex","isItemInMessage","itemIDsToInsert","newMessagesByID","Math","max","previousState","handleViewStateChange","initialViewChangeComplete","botName","headerDisplayName","botAvatarURL","avatar_url_override","cssVariableOverrides","newHomeScreenConfig","mergeWith","location","hostname","LauncherType","DESKTOP","MOBILE","min","applyInputState","getInputState","currentInputState","newUploads","notifications","concat","currentInputSate","isError","status","existingMessage","newMessage","localItemID","existingLocalMessageItem","newItem","streamingState","chunks","isDone","isIntermediateStreaming","chatHeaderState","maxVisibleHeaderObjects","headerAvatarConfig","assign","getThemeCornersType","getLayoutState","IS_PHONE","themeConfig","SQUARE","layout","reducerFunction","DEFAULT_PUBLIC_CONFIG","openChatByDefault","showLauncher","shouldTakeFocusIfOpensAutomatically","dayjs","LocalizedFormat","Chat","publicConfigProvided","customHostElement","additionalChatParametersProvided","debug","consoleDebug","appConfig","startInternal","doesHaveServiceDesk","getBotName","initialState","chatWidthBreakpoint","chatWidth","chatHeight","enLanguagePack","originalConfig","suspendScrollDetection","isDestroyed","targetViewState","customMenuOptions","showNonHeaderBackgroundCover","sessionStorageLauncherState","enhancer","__REDUX_DEVTOOLS_EXTENSION__","instanceId","createStore","doCreateStore","subscribe","previousPersistedToBrowserStorage","copyToSessionStorage","disableWindowTitleChanges","originalTitle","changeTitleTimer","agent_newMessage","createHandleWindowTitle","customPanelManager","serviceManger","panels","getPanel","createCustomPanelManager","WriteableElementName","AI_TOOLTIP_AFTER_DESCRIPTION_ELEMENT","WELCOME_NODE_BEFORE_ELEMENT","HEADER_BOTTOM_ELEMENT","BEFORE_INPUT_ELEMENT","HOME_SCREEN_HEADER_BOTTOM_ELEMENT","HOME_SCREEN_AFTER_STARTERS_ELEMENT","HOME_SCREEN_BEFORE_INPUT_ELEMENT","CUSTOM_PANEL_ELEMENT","setEnableDebugLog","debugStackTraces","setEnableDebugStackTracesLog","createServiceManager","localePack","render","createHumanAgentService","all","loadLanguagePack","loadLocale","resolve","loadHAA","reallyRenderAndReturnInstance","OPEN_BY_DEFAULT","WEB_CHAT_LOADED","callRender","wasRendered","newPack","updateLocale","newLocale","localePromise","languagePackPromise","then","selectInputState","INSTANCE_SEND","destroy","container","remove","updateInputIsDisabled","updateBotUnreadIndicatorVisibility","issueWithNewView","viewTypeValues","CALLED_CHANGE_VIEW","homeScreenConfigClone","scrollToMessage","animate","doScrollToMessage","customPanels","updateCustomMenuOptions","updateIsTypingCounter","direction","updateIsLoadingCounter","updateIsChatLoadingCounter","updateHeaderConfig","configCopy","elements","getMainWindow","addClassName","removeClassName","getMessageInput","getHTMLElement","setValue","setEnableEnterKey","addChangeListener","removeChangeListener","getHomeScreenInput","tours","CALLED_END_TOUR","goToNextStep","goToStep","addMessageChunk","clearConversation","requestFocus","appWindow","endConversation","updateIsSuspended","createChatInstance","renderAndReturnInstance","promise","renderPromise","AriaAnnouncerProvider","props","useIntl","useServiceManager","announcerRef","announcerFunction","useCallback","announceValue","previousAnnounceMessageRef","useEffect","currentAnnounceMessage","Provider","AriaAnnouncerComponent","getLauncherButtonAriaLabel","isLauncherHidden","launcher_isTourOpen","launcher_isTourClosed","launcher_isOpen","launcher_isClosed","Launcher","onToggleOpen","unreadAgentCount","tabIndex","launcherHidden","launcherAvatarURL","buttonRef","doFocusRef","ariaLabel","formatMessage","count","launcherAvatar","AiLaunch","size","ChatLaunch","src","alt","cx","Button","WACLauncher__TourButton","kind","ButtonKindEnum","PRIMARY","onClick","ArrowUpLeft","LauncherExport","forwardRef","LauncherComplex","launcherComplexRef","launcherRef","onOpen","onMinimize","launcher_desktopGreeting","launcher_closeButton","launcher_ariaIsExpanded","disabled","WACLauncherComplex__Text","Tag","Close","LauncherDesktopContainer","onDoToggle","useLanguagePack","browserLauncherState","isExpandedLauncherEnabled","smallLauncherClassName","setSmallLauncherClassName","useState","complexLauncherClassName","setComplexLauncherClassName","launcherHiddenRef","animateOnceVisible","bounceTurnRef","animationStartTimerRef","animationFinishedTimerRef","firstBounceAnimationStartTimerRef","firstBounceAnimationFinishedTimerRef","secondBounceAnimationStartTimerRef","secondBounceAnimationFinishedTimerRef","determineLauncherHeight","expandedLauncherHeight","offsetHeight","style","setProperty","startExpandLauncher","setExpandAnimationTimers","clearExpandAnimationTimers","startBounceAnimation","finishBounceAnimation","setBounceAnimationTimers","clearBounceAnimationTimers","setDefaultLauncherState","useOnMount","prevLauncherTitle","usePrevious","animateWithClass","endAnimationNameOrDelay","endAnimationCallback","classList","animationName","removeEventListener","addEventListener","LauncherExtended","isExtended","playExtendAnimation","onSwipeRight","onReduceEnd","ariaAnnouncer","useAriaAnnouncer","animateExtendedState","setAnimateExtendedState","showGreetingMessage","setShowGreetingMessage","prevIsExtended","extendedContainerRef","greetingMessageRef","textHolderRef","touchStartRef","touchStartX","touchStartY","shouldReduceExtendedLauncher","extendWithAnimation","extendWithoutAnimation","launcherGreetingMessage","launcher_mobileGreeting","launcherContainerElement","textHolderEl","greetingMessageEl","extendedContainerEl","maxTextHolderWidth","launcherPosition","width","height","screen","extendedWidth","getMaxLauncherExtendedWidth","clientWidth","querySelector","launcherExtendedWidth","removeAttribute","calculateAndSetMaxExtendedLauncherWidth","doFadeAnimationForElements","fadeInElement","fadeInTime","buttonEl","handleTouchMove","touchList","touchStartCoordinates","callback","clientX","touchEndX","clientY","touchEndY","differenceX","differenceY","abs","checkIfUserSwipedRight","touches","handleTouchStart","touchStart","reduceAnimationEndListener","fadeOutElement","GHOST","LauncherExtendedExport","LauncherMobileContainer","wasReduced","disableBounce","isStartingBounceAnimation","setIsStartingBounceAnimation","prevWasReduced","initialBounceTurn","previouslyPlayedExtendAnimation","extendLauncherTimeoutIDRef","reduceLauncherTimeoutIDRef","endBounceAnimationRef","shouldBounceRef","isExtending","disableIntroAnimation","setLauncherStateAsReduced","reduceLauncher","extendLauncherTimeoutID","reduceLauncherTimeoutID","clearTimeouts","setExpandAnimationTimeout","endBounceAnimation","startRecurringBounceAnimation","turnCounter","animation","timeouts","startingIndex","beforeAll","afterAll","beforeEach","afterEach","terminate","timeoutID","playAnimation","isComplete","setAnimationListener","replayAnimation","setAnimationTimeouts","handleToggleOpen","handleSwipeRight","LauncherContainer","LAUNCHER_CLICKED","launcherContainer","effect","deps","hasRunRef","useEffectDidUpdate","HydrationPanel","onClose","useHomeScreenVersion","isHidden","useContext","HideComponentContext","header","HomeScreenHeaderExport","BotHeaderExport","onToggleHomeScreen","includeWriteableElement","MountChildrenOnDelay","delay","AnnounceOnMountComponentExport","announceOnce","window_ariaWindowLoading","Loading","withOverlay","CustomPanel","onPanelOpenEnd","onPanelCloseEnd","onPanelOpenStart","onPanelCloseStart","disableDefaultCloseAction","onClickBack","onClickClose","prevIsOpen","openAnimation","AnimationInType","SLIDE_IN_FROM_BOTTOM","closeAnimation","AnimationOutType","SLIDE_OUT_TO_BOTTOM","onClickBackLocal","onClickCloseLocal","checkAllowClose","onCloseAndRestartLocal","OverlayPanel","onOpenStart","CUSTOM_PANEL_PRE_OPEN","onOpenEnd","CUSTOM_PANEL_OPEN","onCloseStart","CUSTOM_PANEL_PRE_CLOSE","onCloseEnd","CUSTOM_PANEL_CLOSE","animationOnOpen","animationOnClose","shouldOpen","overlayPanelName","OverlayPanelName","CUSTOM","eventName","eventDescription","general_returnToAssistant","hideCloseButton","hideCloseAndRestartButton","WriteableElement","CustomPanelExport","lazyChat","CatastrophicError","lazyCatastrophicError","Disclaimer","lazyDisclaimer","HomeScreenContainer","lazyHomeScreenContainer","IFramePanel","lazyIFramePanel","ViewSourcePanel","lazyViewSourcePanel","BodyAndFooterPanelComponent","lazyBodyAndFooterPanelComponent","WIDTH_BREAKPOINT_STANDARD","WIDTH_BREAKPOINT_NARROW","WIDTH_BREAKPOINT_WIDE","MainWindow","Component","super","arguments","closing","modalPortalHostElement","numPanelsOpen","numPanelsAnimating","numPanelsCovering","isHydrationAnimationComplete","shouldAutoFocus","extraClassNames","areModulesLoaded","mainWindowRef","containerRef","botChatRef","homeScreenInputRef","disclaimerRef","brandingRef","animationContainerRef","iframePanelRef","viewSourcePanelRef","previousBodyVisibility","previousBodyPosition","onResize","appChatWidthBreakpoint","offsetWidth","ChatWidthBreakpoint","WIDE","STANDARD","NARROW","onVisualViewportResize","updateFromVisualViewport","visualViewport","offsetTop","offsetLeft","IS_IOS","getIPhoneHeightOffset","setModalPortalHostElement","setState","onSendInput","selectIsInputToAgent","sendMessageToAgent","onSendHomeButtonInput","createMessageRequestForChoice","HOME_SCREEN_STARTER","removeChatFromDom","onRestart","doClose","getShowDisclaimer","getShowHomeScreen","takeFocus","requestInputFocus","onUserTyping","userTyping","onAcceptDisclaimer","coverBackground","prevState","onHydrationPanelClose","componentDidMount","mainWindowObserver","ResizeObserver","observe","disableCustomElementMobileEnhancements","updateBody","SCROLLBAR_WIDTH","loadPanels","componentWillUnmount","unobserve","componentDidUpdate","oldProps","oldState","newProps","useCustomHostElement","prevViewState","requestAnimationFrame","newLastItemID","lastMessageItem","componentDidCatch","errorInfo","createDidCatchErrorData","preload","unmounting","getPropertyValue","fromCloseAndRestart","MAIN_WINDOW_CLOSED_AND_RESTARTED","DEFAULT_MINIMIZE","disclaimer","addClassNameToState","removeClassNameFromState","renderChat","showCovering","renderCustomPanel","renderHydrationPanel","renderDisclaimerPanel","renderResponsePanel","renderHomeScreenPanel","renderIFramePanel","renderViewSourcePanel","renderBotChat","headerAvatar","agentDisplayState","selectAgentDisplayState","showDisclaimer","hideBotContainer","HideComponent","hidden","Suspense","fallback","messageState","MESSAGE_INPUT","renderInnerHydrationPanel","shouldHide","HYDRATING","renderCatastrophicPanel","CATASTROPHIC","showHeader","FADE_IN","FADE_OUT","DISCLAIMER","disclaimerHTML","disclaimerAcceptButtonRef","showHomeScreen","onSendBotInput","HOME_SCREEN_INPUT","onSendButtonInput","IFRAME","CONVERSATIONAL_SEARCH_CITATION","panelOptions","PANEL_RESPONSE","showAnimations","show_animations","renderWidget","localeClassName","showGlass","enableFocusTrap","hideMinimizeButton","trapActive","isWideWidth","VisuallyHidden","window_title","onScroll","scrollTop","ModalPortalRootContext","MainWindow$1","connect","TourContainerLazy","lazyTourComponent","App","hostElement","applicationStyles","fontStyles","combinedStyles","AppContainer","useDispatch","windowSize","setWindowSize","innerWidth","innerHeight","cssVariableOverrideString","useMemo","cssVariables","cssVariablesString","allValues","replace","convertCSSVariablesToString","dir","windowListener","visibilityListener","visibilityState","node","nonce","cspNonce","IS_PHONE_IN_PORTRAIT_MODE","WindowSizeContext","ServiceManagerContext","RawIntlProvider","LanguagePackContext","MainContainer","tourContainerRef","showTour","showedTourOnce","languageKey","regionLabel","role","UserDefinedResponsePortalsContainer","chatInstance","renderUserDefinedResponse","userDefinedResponseEventsBySlot","slotState","UserDefinedResponseComponentPortal","ReactDOM","UserDefinedResponsePortalsContainerExport","WriteableElementsPortalsContainer","renderResponseMap","responseItem","WriteableElementsComponentPortal","WriteableElementsPortalsContainerExport","onBeforeRender","onAfterRender","renderWriteableElements","setParentInstance","setInstance","renderProps","setRenderProps","setApplicationStyles","setInstances","setUserDefinedResponseEventsBySlot","managedWebChatRef","previousConfigRef","previousConfig","managedWebChat","shouldDestroy","destroyWebChat","widget","pagePublicConfig","chatConstructorPromise","protocol","compatMode","instantiateWidget","webChatInstance","userDefinedEventsBySlot","itemChunk","partialItems","addUserDefinedResponseHandler","loadChat","carbonStyles","loadBaseStyles","loadCarbon","loadStyles","AppContainerExport","default","carbon","withAriaAnnouncer","Wrapped","enableDebugLog","enableDebugStackTracesLog","args","log","response","resolveOrTimeout","component","isCatastrophicError","RENDER","getResponsiveElementPaddingValue","baseHeight","isValidForUpload","upload","EDIT","PureComponent","isClosing","isOpening","openPanelTimeout","closePanelTimeout","openPanel","animationDurationOpen","durationInMS","conditionalSetTimeout","closePanel","animationDurationClose","prevProps","ai_slug_title","ai_slug_description","components_overflow_ariaLabel","components_swiper_currentLabel","errors_communicating","errors_imageSource","errors_videoSource","errors_audioSource","errors_iframeSource","errors_ariaMessageRetrying","errors_ariaMessageFailed","errors_noAgentsAvailable","errors_noAgentsJoined","errors_connectingToAgent","errors_busy","errors_agentAppSessionExpired","errors_generalContent","errors_somethingWrong","input_ariaLabel","input_placeholder","input_buttonLabel","input_uploadButtonLabel","window_ariaTourRegion","window_ariaTourRegionNamespace","window_ariaChatRegion","window_ariaChatRegionNamespace","window_ariaWindowOpened","window_ariaWindowClosed","messages_youSaid","messages_botSaid","messages_agentSaid","messages_searchResults","messages_searchResultsLink","messages_searchResultsOpenDocument","messages_searchResultsOpenDocumentWithLabel","messages_searchResultsExpand","messages_searchResultsCollapse","messages_botIsLoading","messages_botIsTyping","messages_agentIsTyping","messages_scrollHandle","messages_scrollHandleDetailed","messages_scrollHandleEnd","messages_scrollHandleEndDetailed","message_labelBot","message_labelYou","notifications_toastClose","buttons_restart","buttons_cancel","buttons_retry","options_select","options_ariaOptionsDisabled","header_previewLinkTitle","header_ariaCloseRestart","header_ariaBotAvatar","header_overflowMenu_options","homeScreen_returnToAssistant","homeScreen_returnToHome","homeScreen_overflowMenuHomeScreen","homeScreen_ariaQuickStartListButton","homeScreen_ariaQuickStartListOpened","homeScreen_ariaQuickStartListClosed","default_agent_availableMessage","default_agent_unavailableMessage","agent_reason_error","agent_sdMissingWarning","agent_noName","agent_chatTitle","agent_startChat","agent_connecting","agent_agentNoNameTitle","agent_agentJoinedName","agent_agentJoinedNoName","agent_youConnectedWarning","agent_connectingMinutes","agent_connectingQueue","agent_ariaAgentAvatar","agent_ariaGenericAvatar","agent_ariaGenericBotAvatar","agent_youEndedChat","agent_conversationWasEnded","agent_disconnected","agent_reconnected","agent_agentLeftChat","agent_agentLeftChatNoName","agent_agentEndedChat","agent_agentEndedChatNoName","agent_transferring","agent_transferringNoName","agent_endChat","agent_confirmSuspendedEndChatTitle","agent_confirmSuspendedEndChatMessage","agent_confirmCancelRequestTitle","agent_confirmCancelRequestMessage","agent_confirmCancelRequestNo","agent_confirmCancelRequestYes","agent_confirmEndChat","agent_confirmEndChatNo","agent_confirmEndChatYes","agent_confirmEndSuspendedYes","agent_botReturned","agent_cardButtonChatRequested","agent_cardButtonConnected","agent_cardButtonChatEnded","agent_cardMessageChatEnded","agent_cardMessageConnected","agent_connectButtonCancel","agent_connectedButtonEndChat","agent_connectWaiting","agent_defaultMessageToAgent","agent_inputPlaceholderConnecting","agent_inputPlaceholderReconnecting","agent_sharingStopSharingButton","agent_sharingRequestTitle","agent_sharingRequestMessage","agent_sharingAcceptButton","agent_sharingDeclineButton","agent_sharingRequested","agent_sharingAccepted","agent_sharingDeclined","agent_sharingCancelled","agent_sharingEnded","agent_suspendedWarning","icon_ariaUnreadMessages","showMore","showMoreResults","disclaimer_title","disclaimer_accept","general_ariaCloseInformationOverlay","general_ariaAnnounceOpenedInformationOverlay","general_ariaAnnounceClosedInformationOverlay","general_ariaAnnounceEscapeOverlay","conversationalSearch_streamingIncomplete","conversationalSearch_viewSourceDocument","conversationalSearch_citationsLabel","conversationalSearch_toggleCitations","conversationalSearch_responseStopped","launcher_chatNow","iframe_ariaSourceLoaded","iframe_ariaImageAltText","iframe_ariaClosePanel","iframe_ariaOpenedPanel","iframe_ariaClosedPanel","iframe_ariaClickPreviewCard","closeAndRestartModal_title","closeAndRestartModal_message","closeAndRestartModal_confirm","closeAndRestartModal_cancel","datePicker_chooseDate","datePicker_confirmDate","tour_resumeButton","tour_restartButton","tour_startButton","tour_doneButton","tour_ariaMinimizeButton","tour_ariaCloseButton","tour_ariaChatButton","tour_ariaPreviousButton","tour_ariaNextButton","tour_instructions","tour_errorFetchingStep","tour_errorTitle","tour_errorBody","fileSharing_fileTooLarge","fileSharing_ariaAnnounceSuccess","fileSharing_fileIcon","fileSharing_removeButtonTitle","fileSharing_statusUploading","fileSharing_uploadFailed","fileSharing_agentMessageText","fileSharing_request","carousel_prevNavButton","carousel_nextNavButton","input_completionsTagApp","input_completionsTagAssistant","table_filterPlaceholder","table_previousPage","table_nextPage","table_itemsPerPage","table_paginationSupplementalText","table_paginationStatus","feedback_positiveLabel","feedback_negativeLabel","feedback_defaultTitle","feedback_defaultPrompt","feedback_defaultPlaceholder","feedback_submitLabel","feedback_cancelLabel","input_stopResponse","messages_responseStopped","chainOfThought_stepTitle","chainOfThought_inputLabel","chainOfThought_outputLabel","chainOfThought_toolLabel","chainOfThought_statusSucceededLabel","chainOfThought_statusFailedLabel","chainOfThought_statusProcessingLabel","chainOfThought_explainabilityLabel","showChildren","onComponentDidMount","defaultProps","resolveFunction","rejectFunction","reject","resolveValue","isResolved","rejectValue","isRejected","createService","lazyWithPreload","factory","mod","lazyMediaPlayer","lazyCarousel","browser","detect","IS_IPAD","test","navigator","platform","maxTouchPoints","os","IOS_HEIGHT_MAP","screenHeight","offset","memoizeOne","isAvailable","getURLHostName","URL","operation","timeout","ChatHeaderObjectType","ChatHeaderAvatarElement","LitElement","isLoaded","_handleOnError","css","unsafeCSS","__decorate","property","String","prototype","bind","CHAT_HEADER_AVATAR_TAG_NAME","CDSChatHeaderAvatarElement","classElement","html","chatHeaderAvatarTemplate","carbonElement","ChatHeaderAvatar","createComponent","tagName","elementClass","react","ChatHeaderLinkElement","isNewTab","customElementClass","chatHeaderLinkTemplate","ChatHeaderLink","ChatHeaderMenu","menuAlignment","Menu","mode","legacyAutoalign","ChatHeaderMenuButton","setIsOpen","refs","menuRefs","context","menuContext","useFloating","onOpenChange","getReferenceProps","getMenuReferenceProps","getFloatingProps","getMenuFloatingProps","useInteractions","useClick","useDismiss","setReference","ButtonSizeEnum","MEDIUM","renderIcon","ChevronUp","ChevronDown","onMouseDown","preventDefault","floating","setFloating","ChatHeaderMenuItem","MenuItem","ChatHeaderMenuItemRadioGroup","defaultSelectedItem","selectedItem","onChange","MenuItemRadioGroup","itemToString","menuItem","ChatHeaderOverflowMenu","tooltipPosition","iconDescription","hasIconOnly","ChatHeaderTitleElement","chatHeaderTitleTemplate","ChatHeaderTitle","AISlug","CDSAILabel","Header","backContent","overflowItems","overflowClicked","backButtonType","brandColor","enableChatHeaderConfig","backButtonRef","restartButtonRef","closeAndRestartButtonRef","closeButtonRef","centerObjectsRef","centerGapRef","overflowRef","overflowIsOpen","setOverflowIsOpen","confirmModelOpen","setConfirmModelOpen","selectedGroupMenuitems","setSelectedGroupMenuItems","isImageError","setIsImageError","hasHeaderAvatar","prevChatHeaderAvatarURL","chatHeaderTitle","headerTitle","chatHeaderDisplayName","closeConfirmModel","showCloseAndRestartButton","useHideCloseButton","closeIcon","closeReverseIcon","closeIsReversible","minimizeButtonIconType","MinimizeButtonIconType","CLOSE","CloseLarge","MINIMIZE","SubtractLarge","SIDE_PANEL_LEFT","SidePanelClose","SIDE_PANEL_RIGHT","onConfirm","getComponentInMenu","list","LINK","RADIO_GROUP","nextObject","Fragment","MenuItemDivider","MENU","getComponentInChatHeader","headerObject","leftObjectsLength","rightObjectsLength","left","right","isLeftObjectsInOverflow","isRightObjectsInOverflow","renderChatHeaderObjectsInOverflow","hasOverflow","isRTL","leftContent","leftChatHeaderComponents","rightChatHeaderComponents","leftChatHeaderMenuComponents","rightChatHeaderMenuComponents","HeaderButton","buttonKind","DownToBottom","centerResizeObserver","centerGapElement","newTotal","floor","disconnect","AI_LABEL_SIZE","EXTRA_SMALL","alignment","POPOVER_ALIGNMENT","BOTTOM_LEFT","BOTTOM_RIGHT","Restart","WACReverseIcon","isReversible","ConfirmModal","onCancel","cancelButtonLabel","confirmButtonLabel","modalAnnounceMessage","WACDirectionHasReversibleSVG","ANNOUNCE_INPUT_TYPES","ANNOUNCE_NODE_EXCLUDE_ATTRIBUTE","ref1","ref2","useRef1","doAnnouncements","strings","pendingValues","elementToAnnounce","nodeToText","useElement","innerText","innerHTML","nodeType","hasNodeType","formattedMessage","messageValues","messageText","isElement","getComputedStyle","display","getAttribute","hasAttribute","trimAndPush","isInputNode","placeholder","isTextAreaNode","isImageNode","shadowRoot","childNodes","childNode","isTextNode","replaceAll","RIGHT_TO_LEFT_MARK","fromCharCode","ENGLISH_US_DATE_FORMAT","RESPONSE_TYPE_TIMEOUT_MS","THROW_ERROR","BrandColorKind","AUTO_SCROLL_EXTRA","LIGHT_THEMES","isJest","process","env","JEST_WORKER_ID","AUTO_SCROLL_THROTTLE_TIMEOUT","HomeScreenHeader","option","locales","ar","ar-dz","ar-kw","ar-ly","ar-ma","ar-sa","ar-tn","cs","de","de-at","de-ch","en","en-au","en-ca","en-gb","en-ie","en-il","en-nz","es","es-do","es-us","nl","fr","fr-ca","fr-ch","it","it-ch","ja","ko","pt","pt-br","zh","zh-cn","zh-tw","zh-mo","zh-hk","requestedLocale","localeKey","requestedSupported","language","isSupportedLocale","keyList","findSupportedKey","localeModule","enLocaleData","providedLanguagePack","handleBTag","handleBRTag","addHTMLSupport","b","br","loadDayjsLocale","previousLocale","createEnglishFormat","IntlMessageFormat","htmlAttributes","WAC__hidden","_type","v4","AriaLiveMessage","AriaLiveMessageExport","outer","visibility","overflow","appendChild","inner","scrollbarWidth","parentNode","removeChild","doScrollElementIntoView","boundary","compute","scrollMode","block","inline","el","top","doScrollElement","scrollLeft","scroll","behavior","doFocus","activeElement","tabbable","getShadowRoot","focus","defer","focusOnFirstFocusableItemInArrayOfElements","focusOnFirstFocusableElement","parentElement","focusableElements","isEnterKey","shiftKey","altKey","metaKey","ctrlKey","hasModifiers","isComposing","keyCode","getScrollBottom","scrollHeight","DATE","isTextItem","PAUSE","typing","OPTION","choice","relatedResponseID","createMessageRequestForButtonItemOption","buttonItem","createMessageRequestForFileUpload","InternalMessageRequestType","FILE","FROM_USER","createMessageRequestForDate","inputString","userString","threadID","responseType","textItem","CONNECT_TO_AGENT","hasBodyOrFooter","IMAGE","VIDEO","AUDIO","CONVERSATIONAL_SEARCH","TABLE","renderAsTour","user_defined_type","serviceDeskFactory","USER_DEFINED","isSingleItemCarousel","getOptionType","preference","totalOptions","getMediaDimensions","dimensions","hasLiveAgentMessage","AnnounceOnMountComponent","isMounted","onceAnnounced","WriteableElement$1","ModalPortal","attachedToHost","modalElement","attachIfNeeded","contextType","onYesClick","onNoClick","onKeyDown","getBotInputState","getAgentInputState","getAgentState","getPersistedAgent","persisted","isConnectingOrConnected","disableInput","inputPlaceholderKey","milliseconds","duration","race","BotHeader","homeScreenIsOn","shallowEqual","hasChatHeaderObjects","allowHomeScreen","Home","getOwnPropertyNames","prop","hasOwnProperty","call","isFrozen","setIsConnecting","setIsReconnecting","setAgentLeftChat","setAgentAvailability","setAgentJoined","updateCapabilities","updateFilesUploadInProgress","setShowScreenShareRequest","setIsScreenSharing","setPersistedServiceDeskState","agentUpdateIsTyping"],"sourceRoot":""}