{"version":3,"file":"893.bundle.js","mappings":"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","sources":["webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat.stringUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat.RichText.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat.htmlUtils.js"],"sourcesContent":["import { b as consoleError } from \"./chat.miscUtils.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function isEmptyString(value) {\n  return !value || value === \"null\";\n}\n\nfunction isJsonString(data) {\n  try {\n    JSON.parse(data);\n  } catch (e) {\n    return false;\n  }\n  return true;\n}\n\nfunction parseUnknownDataToMarkdown(data) {\n  let content;\n  if (data) {\n    try {\n      if (typeof data === \"object\") {\n        content = `\\`\\`\\`\\n${JSON.stringify(data, null, 2)}\\n\\`\\`\\`\\n`;\n      } else if (typeof data === \"string\") {\n        if (isJsonString(data)) {\n          content = `\\`\\`\\`\\n${JSON.stringify(JSON.parse(data), null, 2)}\\n\\`\\`\\`\\n`;\n        } else {\n          content = data;\n        }\n      } else {\n        content = String(data);\n      }\n      return content;\n    } catch (e) {\n      consoleError(\"Cannot parse step content\", e);\n    }\n  }\n  return undefined;\n}\n\nfunction convertToEmptyStringIfStringifiedNull(str) {\n  return str === \"null\" ? null : str;\n}\n\nfunction convertPossibleStringifiedArrayToFirstString(str) {\n  if (typeof str === \"string\" && str.startsWith('[\"') && str.endsWith('\"]')) {\n    try {\n      [str] = JSON.parse(str);\n    } catch (error) {}\n  }\n  return str;\n}\n\nexport { convertToEmptyStringIfStringifiedNull as a, convertPossibleStringifiedArrayToFirstString as c, isEmptyString as i, parseUnknownDataToMarkdown as p };\n","import React, { useMemo } from \"react\";\n\nimport { useIntl } from \"react-intl\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { createComponent } from \"@lit/react\";\n\nimport { __decorate } from \"tslib\";\n\nimport { LitElement, html, unsafeCSS, css } from \"lit\";\n\nimport { c as carbonElement } from \"./chat.customElement.js\";\n\nimport { property, state } from \"lit/decorators.js\";\n\nimport throttle from \"lodash-es/throttle.js\";\n\nimport DOMPurify from \"dompurify\";\n\nimport { repeat } from \"lit/directives/repeat.js\";\n\nimport { unsafeHTML } from \"lit/directives/unsafe-html.js\";\n\nimport \"@carbon/web-components/es-custom/components/list/index.js\";\n\nimport { r as removeHTML, u as useShouldSanitizeHTML } from \"./chat.htmlUtils.js\";\n\nimport { u as useLanguagePack } from \"./chat.AppState.js\";\n\nimport { b as CarbonTheme } from \"./chat.dynamic-imports.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ let worker = null;\n\nconst requests = new Map;\n\nlet requestId = 0;\n\nasync function getMarkdownWorker(options) {\n  const {markdown: markdown, lastTree: lastTree, enableWorkers: enableWorkers = false, debug: debug = false} = options;\n  const shouldUseWorker = enableWorkers && typeof window !== \"undefined\" && typeof Worker !== \"undefined\";\n  if (shouldUseWorker) {\n    if (!worker) {\n      worker = tryCreateWorker(debug);\n      if (worker) {\n        worker.onmessage = event => {\n          const [id, tree, error] = event.data;\n          const resolver = requests.get(id);\n          if (resolver) {\n            requests.delete(id);\n            if (error) {\n              if (debug) {\n                console.log(\"Worker processing error:\", error);\n              }\n              resolver(null);\n            } else {\n              resolver(tree);\n            }\n          }\n        };\n        worker.onerror = error => {\n          if (debug) {\n            console.log(\"Worker error, falling back to main thread:\", error);\n          }\n          worker = null;\n        };\n      }\n    }\n    if (worker) {\n      return new Promise(resolve => {\n        const id = requestId++;\n        requests.set(id, async result => {\n          if (result === null) {\n            if (debug) {\n              console.log(\"Worker processing failed, falling back to main thread\");\n            }\n            try {\n              const fallbackResult = await processInMainThread(markdown, lastTree);\n              resolve(fallbackResult);\n            } catch (error) {\n              if (debug) {\n                console.error(\"Main thread fallback also failed:\", error);\n              }\n              resolve(lastTree || {\n                key: \"error\",\n                token: {\n                  type: \"error\",\n                  tag: \"\",\n                  nesting: 0,\n                  level: 0,\n                  content: \"\",\n                  attrs: null,\n                  children: null,\n                  markup: \"\",\n                  block: true,\n                  hidden: false,\n                  map: null,\n                  info: \"\",\n                  meta: null\n                },\n                children: []\n              });\n            }\n          } else {\n            resolve(result);\n          }\n        });\n        worker?.postMessage({\n          id: id,\n          markdown: markdown,\n          lastTree: lastTree\n        });\n      });\n    }\n  }\n  return processInMainThread(markdown, lastTree);\n}\n\nasync function processInMainThread(markdown, lastTree) {\n  const [{buildTokenTree: buildTokenTree, diffTokenTree: diffTokenTree}, {parseMarkdown: parseMarkdown}] = await Promise.all([ import(\"./chat.tokenTree.js\"), import(\"./chat.markdown.js\") ]);\n  const tokens = parseMarkdown(markdown);\n  const tree = buildTokenTree(tokens);\n  return diffTokenTree(lastTree, tree);\n}\n\nfunction tryCreateWorker(debug = false) {\n  try {\n    const workerUrl = new URL(\"./markdownWorker.js\", import.meta.url);\n    const fileWorker = new Worker(workerUrl, {\n      type: \"module\"\n    });\n    if (debug) {\n      console.log(\"Using external file worker for markdown processing\");\n    }\n    return fileWorker;\n  } catch (error) {\n    if (debug) {\n      console.log(\"External file worker failed:\", error);\n    }\n  }\n  if (debug) {\n    console.log(\"Worker failed to load, will use main thread\");\n  }\n  return null;\n}\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ class MarkdownTextElement extends LitElement {\n  constructor() {\n    super(...arguments);\n    this.sanitizeHTML = false;\n    this.streaming = false;\n    this.dark = false;\n    this.enableWorkers = false;\n    this.debug = false;\n    this.fullText = \"\";\n    this.tokenTree = {\n      key: \"root\",\n      token: {\n        type: \"root\",\n        tag: \"\",\n        nesting: 0,\n        level: 0,\n        content: \"\",\n        attrs: null,\n        children: null,\n        markup: \"\",\n        block: true,\n        hidden: false,\n        map: null,\n        info: \"\",\n        meta: null\n      },\n      children: []\n    };\n    this.scheduleTokenParse = throttle(async () => {\n      this.tokenTree = await getMarkdownWorker({\n        markdown: this.fullText,\n        lastTree: this.tokenTree,\n        enableWorkers: this.enableWorkers,\n        debug: this.debug\n      });\n    }, 100);\n  }\n  set markdown(newMarkdown) {\n    if (newMarkdown !== this.fullText) {\n      this.fullText = newMarkdown;\n    }\n  }\n  get markdown() {\n    return this.fullText;\n  }\n  updated(changedProperties) {\n    super.updated(changedProperties);\n    if (changedProperties.has(\"markdown\")) {\n      this.scheduleTokenParse();\n    }\n  }\n}\n\n__decorate([ property({\n  type: String\n}) ], MarkdownTextElement.prototype, \"markdown\", null);\n\n__decorate([ property({\n  type: Boolean\n}) ], MarkdownTextElement.prototype, \"sanitizeHTML\", void 0);\n\n__decorate([ property({\n  type: Boolean\n}) ], MarkdownTextElement.prototype, \"streaming\", void 0);\n\n__decorate([ property({\n  type: Object\n}) ], MarkdownTextElement.prototype, \"localization\", void 0);\n\n__decorate([ property({\n  type: Boolean\n}) ], MarkdownTextElement.prototype, \"dark\", void 0);\n\n__decorate([ property({\n  type: Boolean\n}) ], MarkdownTextElement.prototype, \"enableWorkers\", void 0);\n\n__decorate([ property({\n  type: Boolean\n}) ], MarkdownTextElement.prototype, \"debug\", void 0);\n\n__decorate([ state() ], MarkdownTextElement.prototype, \"tokenTree\", void 0);\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const EMPTY_HEADERS = [];\n\nconst EMPTY_TABLE_ROWS = [];\n\nconst DEFAULT_PAGINATION_SUPPLEMENTAL_TEXT = ({count: count}) => `${count} items`;\n\nconst DEFAULT_PAGINATION_STATUS_TEXT = ({start: start, end: end, count: count}) => `${start}â€“${end} of ${count} items`;\n\nconst EMPTY_ATTRS = {};\n\nfunction extractTableData(tableNode) {\n  const headers = [];\n  const rows = [];\n  for (const child of tableNode.children) {\n    if (child.token.tag === \"thead\") {\n      for (const theadChild of child.children) {\n        if (theadChild.token.tag === \"tr\") {\n          for (const thChild of theadChild.children) {\n            if (thChild.token.tag === \"th\") {\n              const headerText = extractTextContent(thChild);\n              headers.push(headerText);\n            }\n          }\n        }\n      }\n    } else if (child.token.tag === \"tbody\") {\n      for (const tbodyChild of child.children) {\n        if (tbodyChild.token.tag === \"tr\") {\n          const row = [];\n          for (const tdChild of tbodyChild.children) {\n            if (tdChild.token.tag === \"td\") {\n              const cellText = extractTextContent(tdChild);\n              row.push(cellText);\n            }\n          }\n          rows.push(row);\n        }\n      }\n    }\n  }\n  return {\n    headers: headers,\n    rows: rows\n  };\n}\n\nfunction extractTextContent(node) {\n  if (node.token.type === \"text\") {\n    return node.token.content;\n  }\n  if (node.token.type === \"code_inline\") {\n    return node.token.content;\n  }\n  let text = \"\";\n  for (const child of node.children) {\n    text += extractTextContent(child);\n  }\n  return text;\n}\n\nfunction renderTokenTree(node, options) {\n  const {token: token, children: children} = node;\n  const {sanitize: sanitize, context: context, dark: dark} = options;\n  if (token.type === \"html_block\" || token.type === \"html_inline\") {\n    const raw = token.content;\n    return html`${unsafeHTML(sanitize ? DOMPurify.sanitize(raw, {\n      CUSTOM_ELEMENT_HANDLING: {\n        tagNameCheck: () => true,\n        attributeNameCheck: () => true,\n        allowCustomizedBuiltInElements: true\n      }\n    }) : raw)}`;\n  }\n  if (token.type === \"text\") {\n    return html`${token.content}`;\n  }\n  if (token.type === \"code_inline\") {\n    return html`<code>${token.content}</code>`;\n  }\n  if (token.type === \"fence\") {\n    import(\"./chat.cds-aichat-code.js\");\n    const language = token.info?.trim() ?? \"\";\n    return html`<cds-aichat-code\n      .language=${language}\n      .content=${token.content}\n      .dark=${dark}\n    ></cds-aichat-code>`;\n  }\n  if (token.type === \"table_open\") {\n    import(\"./chat.cds-aichat-table.js\");\n  }\n  const tag = token.tag;\n  const rawAttrs = (token.attrs || []).reduce((acc, [key, value]) => {\n    acc[key] = value;\n    return acc;\n  }, {});\n  const attrs = sanitize ? Object.fromEntries(Object.entries(rawAttrs).filter(([key, value]) => {\n    const fragment = DOMPurify.sanitize(`<a ${key}=\"${value}\">`, {\n      RETURN_DOM: true\n    });\n    const element = fragment.firstChild;\n    return element?.getAttribute(key) !== null;\n  })) : rawAttrs;\n  let childContext = context;\n  if (tag === \"thead\") {\n    childContext = {\n      ...context,\n      isInThead: true\n    };\n  }\n  let content;\n  if (children.length === 1 && children[0].token.type === \"text\") {\n    content = html`${children[0].token.content}`;\n  } else {\n    content = html`${repeat(children, (c, index) => {\n      const stableKey = `${index}:${c.token.type}:${c.token.tag}`;\n      if (c.token.type?.includes(\"table\")) {\n        return `table-${stableKey}`;\n      }\n      return `stable-${stableKey}`;\n    }, (c, index) => renderTokenTree(c, {\n      ...options,\n      context: {\n        ...childContext,\n        parentChildren: children,\n        currentIndex: index\n      }\n    }))}`;\n  }\n  if (!tag) {\n    return content;\n  }\n  return renderWithStaticTag(tag, token, content, attrs, options, childContext, node);\n}\n\nfunction renderWithStaticTag(tag, token, content, attrs, options, _context, node) {\n  if (token.type === \"root\") {\n    return content;\n  }\n  switch (tag) {\n   case \"p\":\n    return html`<p ...=${attrs}>${content}</p>`;\n\n   case \"ul\":\n    {\n      const nested = token.level > 1;\n      return html`<cds-custom-unordered-list ?nested=${nested} ...=${attrs}>\n        ${content}\n      </cds-custom-unordered-list>`;\n    }\n\n   case \"ol\":\n    {\n      const nested = token.level > 1;\n      return html`<cds-custom-ordered-list ?nested=${nested} ...=${attrs}>\n        ${content}\n      </cds-custom-ordered-list>`;\n    }\n\n   case \"li\":\n    return html`<cds-custom-list-item ...=${attrs}\n        >${content}</cds-custom-list-item\n      >`;\n\n   case \"h1\":\n    return html`<h1 ...=${attrs}>${content}</h1>`;\n\n   case \"h2\":\n    return html`<h2 ...=${attrs}>${content}</h2>`;\n\n   case \"h3\":\n    return html`<h3 ...=${attrs}>${content}</h3>`;\n\n   case \"h4\":\n    return html`<h4 ...=${attrs}>${content}</h4>`;\n\n   case \"h5\":\n    return html`<h5 ...=${attrs}>${content}</h5>`;\n\n   case \"h6\":\n    return html`<h6 ...=${attrs}>${content}</h6>`;\n\n   case \"blockquote\":\n    import(\"@carbon/web-components/es-custom/components/stack/index.js\");\n    return html`<blockquote ...=${attrs}>${content}</blockquote>`;\n\n   case \"pre\":\n    return html`<pre ...=${attrs}>${content}</pre>`;\n\n   case \"code\":\n    return html`<code ...=${attrs}>${content}</code>`;\n\n   case \"strong\":\n    return html`<strong ...=${attrs}>${content}</strong>`;\n\n   case \"em\":\n    return html`<em ...=${attrs}>${content}</em>`;\n\n   case \"del\":\n    return html`<del ...=${attrs}>${content}</del>`;\n\n   case \"sub\":\n    return html`<sub ...=${attrs}>${content}</del>`;\n\n   case \"sup\":\n    return html`<sup ...=${attrs}>${content}</del>`;\n\n   case \"a\":\n    if (!attrs.target) {\n      attrs.target = \"_blank\";\n    }\n    return html`<a ...=${attrs}>${content}</a>`;\n\n   case \"span\":\n    return html`<span ...=${attrs}>${content}</span>`;\n\n   case \"i\":\n    return html`<i ...=${attrs}>${content}</i>`;\n\n   case \"b\":\n    return html`<b ...=${attrs}>${content}</b>`;\n\n   case \"small\":\n    return html`<small ...=${attrs}>${content}</small>`;\n\n   case \"mark\":\n    return html`<mark ...=${attrs}>${content}</mark>`;\n\n   case \"ins\":\n    return html`<ins ...=${attrs}>${content}</ins>`;\n\n   case \"s\":\n    return html`<s ...=${attrs}>${content}</s>`;\n\n   case \"kbd\":\n    return html`<kbd ...=${attrs}>${content}</kbd>`;\n\n   case \"var\":\n    return html`<var ...=${attrs}>${content}</var>`;\n\n   case \"samp\":\n    return html`<samp ...=${attrs}>${content}</samp>`;\n\n   case \"cite\":\n    return html`<cite ...=${attrs}>${content}</cite>`;\n\n   case \"abbr\":\n    return html`<abbr ...=${attrs}>${content}</abbr>`;\n\n   case \"dfn\":\n    return html`<dfn ...=${attrs}>${content}</dfn>`;\n\n   case \"time\":\n    return html`<time ...=${attrs}>${content}</time>`;\n\n   case \"q\":\n    return html`<q ...=${attrs}>${content}</q>`;\n\n   case \"table\":\n    {\n      if (!node) {\n        return html`<div>Error: Missing table data</div>`;\n      }\n      const {streaming: streaming, context: parentContext, localization: localization} = options;\n      let isLoading = false;\n      if (streaming && parentContext?.parentChildren && parentContext?.currentIndex !== undefined) {\n        const {parentChildren: parentChildren, currentIndex: currentIndex} = parentContext;\n        const hasNodesAfterTable = currentIndex < parentChildren.length - 1;\n        isLoading = !hasNodesAfterTable;\n      }\n      let headers;\n      let tableRows;\n      if (!isLoading) {\n        const extractedData = extractTableData(node);\n        headers = extractedData.headers;\n        tableRows = extractedData.rows.map(row => ({\n          cells: row\n        }));\n      } else {\n        headers = EMPTY_HEADERS;\n        tableRows = EMPTY_TABLE_ROWS;\n      }\n      const tableAttrs = isLoading ? EMPTY_ATTRS : attrs;\n      const tableLocalization = localization?.table;\n      return html`<div class=\"cds-aichat-table-holder\">\n        <cds-aichat-table\n          .headers=${headers}\n          .rows=${tableRows}\n          .loading=${isLoading}\n          .filterPlaceholderText=${tableLocalization?.filterPlaceholderText || \"Filter table...\"}\n          .previousPageText=${tableLocalization?.previousPageText || \"Previous page\"}\n          .nextPageText=${tableLocalization?.nextPageText || \"Next page\"}\n          .itemsPerPageText=${tableLocalization?.itemsPerPageText || \"Items per page:\"}\n          .locale=${tableLocalization?.locale || \"en\"}\n          .getPaginationSupplementalText=${tableLocalization?.getPaginationSupplementalText || DEFAULT_PAGINATION_SUPPLEMENTAL_TEXT}\n          .getPaginationStatusText=${tableLocalization?.getPaginationStatusText || DEFAULT_PAGINATION_STATUS_TEXT}\n          .dark=${options.dark}\n          ...=${tableAttrs}\n        ></cds-aichat-table>\n      </div>`;\n    }\n\n   default:\n    return html`<div ...=${attrs}>${content}</div>`;\n  }\n}\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function markdownTextTemplate(customElementClass) {\n  const {tokenTree: tokenTree, sanitizeHTML: sanitizeHTML, streaming: streaming, localization: localization, dark: dark} = customElementClass;\n  return html`<div class=\"cds-aichat-markdown-stack\">\n    ${renderTokenTree(tokenTree, {\n    sanitize: sanitizeHTML,\n    streaming: streaming,\n    context: {\n      parentChildren: [ tokenTree ],\n      currentIndex: 0\n    },\n    localization: localization,\n    dark: dark\n  })}\n  </div>`;\n}\n\nvar css_248z = \"html,\\nbody,\\ndiv,\\nspan,\\napplet,\\nobject,\\niframe,\\nh1,\\nh2,\\nh3,\\nh4,\\nh5,\\nh6,\\np,\\nblockquote,\\npre,\\na,\\nabbr,\\nacronym,\\naddress,\\nbig,\\ncite,\\ncode,\\ndel,\\ndfn,\\nem,\\nimg,\\nins,\\nkbd,\\nq,\\ns,\\nsamp,\\nsmall,\\nstrike,\\nstrong,\\nsub,\\nsup,\\ntt,\\nvar,\\nb,\\nu,\\ni,\\ncenter,\\ndl,\\ndt,\\ndd,\\nol,\\nul,\\nli,\\nfieldset,\\nform,\\nlabel,\\nlegend,\\ntable,\\ncaption,\\ntbody,\\ntfoot,\\nthead,\\ntr,\\nth,\\ntd,\\narticle,\\naside,\\ncanvas,\\ndetails,\\nembed,\\nfigure,\\nfigcaption,\\nfooter,\\nheader,\\nhgroup,\\nmenu,\\nnav,\\noutput,\\nruby,\\nsection,\\nsummary,\\ntime,\\nmark,\\naudio,\\nvideo{\\n  padding:0;\\n  border:0;\\n  margin:0;\\n  font:inherit;\\n  font-feature-settings:\\\"liga\\\" 1;\\n  font-size:100%;\\n  vertical-align:baseline;\\n}\\n\\nbutton,\\nselect,\\ninput,\\ntextarea{\\n  border-radius:0;\\n  font-family:inherit;\\n}\\narticle,\\naside,\\ndetails,\\nfigcaption,\\nfigure,\\nfooter,\\nheader,\\nhgroup,\\nmenu,\\nnav,\\nsection{\\n  display:block;\\n}\\n\\nbody{\\n  background-color:var(--cds-background, #ffffff);\\n  color:var(--cds-text-primary, #161616);\\n  line-height:1;\\n}\\n\\nol,\\nul{\\n  list-style:none;\\n}\\n\\nblockquote,\\nq{\\n  quotes:none;\\n}\\n\\nblockquote::before,\\nblockquote::after,\\nq::before,\\nq::after{\\n  content:none;\\n}\\n\\ntable{\\n  border-collapse:collapse;\\n  border-spacing:0;\\n}\\n\\nhtml{\\n  box-sizing:border-box;\\n}\\n\\n*,\\n*::before,\\n*::after{\\n  box-sizing:inherit;\\n}\\n\\nhtml{\\n  font-size:100%;\\n}\\n\\nbody{\\n  font-weight:400;\\n  font-family:'IBM Plex Sans', system-ui, -apple-system, BlinkMacSystemFont, '.SFNSText-Regular', sans-serif;\\n  -moz-osx-font-smoothing:grayscale;\\n  -webkit-font-smoothing:antialiased;\\n  text-rendering:optimizeLegibility;\\n}\\n\\ncode{\\n  font-family:'IBM Plex Mono', system-ui, -apple-system, BlinkMacSystemFont, '.SFNSText-Regular', monospace;\\n}\\n\\nstrong{\\n  font-weight:600;\\n}\\n\\n@media screen and (-ms-high-contrast: active){\\n  svg{\\n    fill:ButtonText;\\n  }\\n}\\nh1{\\n  font-size:var(--cds-heading-06-font-size, 2.625rem);\\n  font-weight:var(--cds-heading-06-font-weight, 300);\\n  line-height:var(--cds-heading-06-line-height, 1.199);\\n  letter-spacing:var(--cds-heading-06-letter-spacing, 0);\\n}\\n\\nh2{\\n  font-size:var(--cds-heading-05-font-size, 2rem);\\n  font-weight:var(--cds-heading-05-font-weight, 400);\\n  line-height:var(--cds-heading-05-line-height, 1.25);\\n  letter-spacing:var(--cds-heading-05-letter-spacing, 0);\\n}\\n\\nh3{\\n  font-size:var(--cds-heading-04-font-size, 1.75rem);\\n  font-weight:var(--cds-heading-04-font-weight, 400);\\n  line-height:var(--cds-heading-04-line-height, 1.28572);\\n  letter-spacing:var(--cds-heading-04-letter-spacing, 0);\\n}\\n\\nh4{\\n  font-size:var(--cds-heading-03-font-size, 1.25rem);\\n  font-weight:var(--cds-heading-03-font-weight, 400);\\n  line-height:var(--cds-heading-03-line-height, 1.4);\\n  letter-spacing:var(--cds-heading-03-letter-spacing, 0);\\n}\\n\\nh5{\\n  font-size:var(--cds-heading-02-font-size, 1rem);\\n  font-weight:var(--cds-heading-02-font-weight, 600);\\n  line-height:var(--cds-heading-02-line-height, 1.5);\\n  letter-spacing:var(--cds-heading-02-letter-spacing, 0);\\n}\\n\\nh6{\\n  font-size:var(--cds-heading-01-font-size, 0.875rem);\\n  font-weight:var(--cds-heading-01-font-weight, 600);\\n  line-height:var(--cds-heading-01-line-height, 1.42857);\\n  letter-spacing:var(--cds-heading-01-letter-spacing, 0.16px);\\n}\\n\\np{\\n  font-size:var(--cds-body-02-font-size, 1rem);\\n  font-weight:var(--cds-body-02-font-weight, 400);\\n  line-height:var(--cds-body-02-line-height, 1.5);\\n  letter-spacing:var(--cds-body-02-letter-spacing, 0);\\n}\\n\\na{\\n  color:var(--cds-link-primary, #0062fe);\\n}\\n\\nem{\\n  font-style:italic;\\n}\\n\\n.cds--link{\\n  box-sizing:border-box;\\n  padding:0;\\n  border:0;\\n  margin:0;\\n  font-family:inherit;\\n  font-size:100%;\\n  vertical-align:baseline;\\n  font-size:var(--cds-body-compact-01-font-size, 0.875rem);\\n  font-weight:var(--cds-body-compact-01-font-weight, 400);\\n  line-height:var(--cds-body-compact-01-line-height, 1.28572);\\n  letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);\\n  display:inline-flex;\\n  color:var(--cds-link-text-color, var(--cds-link-primary, #0f62fe));\\n  outline:none;\\n  text-decoration:none;\\n  transition:color 70ms cubic-bezier(0.2, 0, 0.38, 0.9);\\n}\\n.cds--link *,\\n.cds--link *::before,\\n.cds--link *::after{\\n  box-sizing:inherit;\\n}\\n.cds--link:hover{\\n  color:var(--cds-link-hover-text-color, var(--cds-link-primary-hover, #0043ce));\\n  text-decoration:underline;\\n}\\n.cds--link:active, .cds--link:active:visited, .cds--link:active:visited:hover{\\n  outline:1px solid var(--cds-focus, #0f62fe);\\n  color:var(--cds-link-text-color, var(--cds-link-primary, #0f62fe));\\n  outline-color:var(--cds-link-focus-text-color, var(--cds-focus, #0f62fe));\\n  text-decoration:underline;\\n}\\n@media screen and (prefers-contrast){\\n  .cds--link:active, .cds--link:active:visited, .cds--link:active:visited:hover{\\n    outline-style:dotted;\\n  }\\n}\\n.cds--link:focus{\\n  outline:1px solid var(--cds-focus, #0f62fe);\\n  outline-color:var(--cds-link-focus-text-color, var(--cds-focus, #0f62fe));\\n  text-decoration:underline;\\n}\\n@media screen and (prefers-contrast){\\n  .cds--link:focus{\\n    outline-style:dotted;\\n  }\\n}\\n.cds--link:visited{\\n  color:var(--cds-link-text-color, var(--cds-link-primary, #0f62fe));\\n}\\n.cds--link:visited:hover{\\n  color:var(--cds-link-hover-text-color, var(--cds-link-primary-hover, #0043ce));\\n}\\n\\n.cds--link--disabled,\\n.cds--link--disabled:hover{\\n  box-sizing:border-box;\\n  padding:0;\\n  border:0;\\n  margin:0;\\n  font-family:inherit;\\n  font-size:100%;\\n  vertical-align:baseline;\\n  font-size:var(--cds-body-compact-01-font-size, 0.875rem);\\n  font-weight:var(--cds-body-compact-01-font-weight, 400);\\n  line-height:var(--cds-body-compact-01-line-height, 1.28572);\\n  letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);\\n  color:var(--cds-text-disabled, rgba(22, 22, 22, 0.25));\\n  cursor:not-allowed;\\n  font-weight:400;\\n  text-decoration:none;\\n}\\n.cds--link--disabled *,\\n.cds--link--disabled *::before,\\n.cds--link--disabled *::after,\\n.cds--link--disabled:hover *,\\n.cds--link--disabled:hover *::before,\\n.cds--link--disabled:hover *::after{\\n  box-sizing:inherit;\\n}\\n\\n.cds--link.cds--link--visited:visited{\\n  color:var(--cds-link-visited-text-color, var(--cds-link-visited, #8a3ffc));\\n}\\n\\n.cds--link.cds--link--visited:visited:hover{\\n  color:var(--cds-link-hover-text-color, var(--cds-link-primary-hover, #0043ce));\\n}\\n\\n.cds--link.cds--link--inline{\\n  display:inline;\\n  text-decoration:underline;\\n}\\n\\n.cds--link--disabled.cds--link--inline{\\n  text-decoration:underline;\\n}\\n\\n.cds--link--sm,\\n.cds--link--sm.cds--link--disabled:hover{\\n  font-size:var(--cds-helper-text-01-font-size, 0.75rem);\\n  line-height:var(--cds-helper-text-01-line-height, 1.33333);\\n  letter-spacing:var(--cds-helper-text-01-letter-spacing, 0.32px);\\n}\\n\\n.cds--link--lg,\\n.cds--link--lg.cds--link--disabled:hover{\\n  font-size:var(--cds-body-compact-02-font-size, 1rem);\\n  font-weight:var(--cds-body-compact-02-font-weight, 400);\\n  line-height:var(--cds-body-compact-02-line-height, 1.375);\\n  letter-spacing:var(--cds-body-compact-02-letter-spacing, 0);\\n}\\n\\n.cds--link__icon{\\n  display:inline-flex;\\n  align-self:center;\\n  margin-inline-start:0.5rem;\\n}\\n\\n:host{\\n  display:block;\\n  container-type:inline-size;\\n  max-inline-size:100%;\\n}\\n:host h1{\\n  font-size:var(--cds-heading-06-font-size, 2.625rem);\\n  font-weight:var(--cds-heading-06-font-weight, 300);\\n  line-height:var(--cds-heading-06-line-height, 1.199);\\n  letter-spacing:var(--cds-heading-06-letter-spacing, 0);\\n}\\n:host h2{\\n  font-size:var(--cds-heading-05-font-size, 2rem);\\n  font-weight:var(--cds-heading-05-font-weight, 400);\\n  line-height:var(--cds-heading-05-line-height, 1.25);\\n  letter-spacing:var(--cds-heading-05-letter-spacing, 0);\\n}\\n:host h3{\\n  font-size:var(--cds-heading-04-font-size, 1.75rem);\\n  font-weight:var(--cds-heading-04-font-weight, 400);\\n  line-height:var(--cds-heading-04-line-height, 1.28572);\\n  letter-spacing:var(--cds-heading-04-letter-spacing, 0);\\n}\\n:host h4{\\n  font-size:var(--cds-heading-03-font-size, 1.25rem);\\n  font-weight:var(--cds-heading-03-font-weight, 400);\\n  line-height:var(--cds-heading-03-line-height, 1.4);\\n  letter-spacing:var(--cds-heading-03-letter-spacing, 0);\\n}\\n:host h5{\\n  font-size:var(--cds-heading-02-font-size, 1rem);\\n  font-weight:var(--cds-heading-02-font-weight, 600);\\n  line-height:var(--cds-heading-02-line-height, 1.5);\\n  letter-spacing:var(--cds-heading-02-letter-spacing, 0);\\n}\\n:host h6{\\n  font-size:var(--cds-heading-01-font-size, 0.875rem);\\n  font-weight:var(--cds-heading-01-font-weight, 600);\\n  line-height:var(--cds-heading-01-line-height, 1.42857);\\n  letter-spacing:var(--cds-heading-01-letter-spacing, 0.16px);\\n}\\n:host p{\\n  font-size:var(--cds-body-02-font-size, 1rem);\\n  font-weight:var(--cds-body-02-font-weight, 400);\\n  line-height:var(--cds-body-02-line-height, 1.5);\\n  letter-spacing:var(--cds-body-02-letter-spacing, 0);\\n}\\n:host a{\\n  color:var(--cds-link-primary, #0062fe);\\n}\\n:host em{\\n  font-style:italic;\\n}\\n:host .WACConversationalSearchText--hasCitation{\\n  border-radius:4px;\\n  background-color:var(--cds-highlight, #d0e2ff);\\n}\\n:host .cds-aichat-markdown-stack{\\n  display:block;\\n  max-inline-size:100%;\\n}\\n:host .cds-aichat-markdown-stack > *:not(:first-child){\\n  margin-block-start:1rem;\\n}\\n:host .cds-aichat-markdown-stack > h1 + *:not(:first-child),\\n:host .cds-aichat-markdown-stack > h2 + *:not(:first-child),\\n:host .cds-aichat-markdown-stack > h3 + *:not(:first-child),\\n:host .cds-aichat-markdown-stack > h4 + *:not(:first-child),\\n:host .cds-aichat-markdown-stack > h5 + *:not(:first-child),\\n:host .cds-aichat-markdown-stack > h6 + *:not(:first-child){\\n  margin-block-start:0.25rem;\\n}\\n:host p{\\n  font-size:var(--cds-body-01-font-size, 0.875rem);\\n  font-weight:var(--cds-body-01-font-weight, 400);\\n  line-height:var(--cds-body-01-line-height, 1.42857);\\n  letter-spacing:var(--cds-body-01-letter-spacing, 0.16px);\\n}\\n:host blockquote{\\n  border-inline-start:2px solid var(--cds-border-subtle-00, #e0e0e0);\\n  padding-inline-start:0.5rem;\\n}\\n:host blockquote > *:not(:first-child){\\n  margin-block-start:1rem;\\n}\\n:host blockquote > h1 + *:not(:first-child),\\n:host blockquote > h2 + *:not(:first-child),\\n:host blockquote > h3 + *:not(:first-child),\\n:host blockquote > h4 + *:not(:first-child),\\n:host blockquote > h5 + *:not(:first-child),\\n:host blockquote > h6 + *:not(:first-child){\\n  margin-block-start:0.5rem;\\n}\\n:host pre{\\n  font-family:var(--cds-code-02-font-family, 'IBM Plex Mono', system-ui, -apple-system, BlinkMacSystemFont, '.SFNSText-Regular', monospace);\\n  font-size:var(--cds-code-02-font-size, 0.875rem);\\n  font-weight:var(--cds-code-02-font-weight, 400);\\n  line-height:var(--cds-code-02-line-height, 1.42857);\\n  letter-spacing:var(--cds-code-02-letter-spacing, 0.32px);\\n  overflow:auto hidden;\\n  padding:1rem;\\n  border:solid 1px var(--cds-chat-bubble-border, #e0e0e0);\\n  background-color:var(--cds-layer-02, #ffffff);\\n  white-space:pre-wrap;\\n}\\n:host img{\\n  max-inline-size:100%;\\n}\\n:host h1{\\n  font-size:var(--cds-heading-04-font-size, 1.75rem);\\n  font-weight:var(--cds-heading-04-font-weight, 400);\\n  line-height:var(--cds-heading-04-line-height, 1.28572);\\n  letter-spacing:var(--cds-heading-04-letter-spacing, 0);\\n}\\n:host h2{\\n  font-size:var(--cds-heading-03-font-size, 1.25rem);\\n  font-weight:var(--cds-heading-03-font-weight, 400);\\n  line-height:var(--cds-heading-03-line-height, 1.4);\\n  letter-spacing:var(--cds-heading-03-letter-spacing, 0);\\n}\\n:host h3{\\n  font-size:var(--cds-heading-02-font-size, 1rem);\\n  font-weight:var(--cds-heading-02-font-weight, 600);\\n  line-height:var(--cds-heading-02-line-height, 1.5);\\n  letter-spacing:var(--cds-heading-02-letter-spacing, 0);\\n}\\n:host h4{\\n  font-size:var(--cds-heading-01-font-size, 0.875rem);\\n  font-weight:var(--cds-heading-01-font-weight, 600);\\n  line-height:var(--cds-heading-01-line-height, 1.42857);\\n  letter-spacing:var(--cds-heading-01-letter-spacing, 0.16px);\\n}\\n:host h5{\\n  font-size:var(--cds-heading-01-font-size, 0.875rem);\\n  font-weight:var(--cds-heading-01-font-weight, 600);\\n  line-height:var(--cds-heading-01-line-height, 1.42857);\\n  letter-spacing:var(--cds-heading-01-letter-spacing, 0.16px);\\n}\\n:host h6{\\n  font-size:var(--cds-heading-01-font-size, 0.875rem);\\n  font-weight:var(--cds-heading-01-font-weight, 600);\\n  line-height:var(--cds-heading-01-line-height, 1.42857);\\n  letter-spacing:var(--cds-heading-01-letter-spacing, 0.16px);\\n}\\n:host cds-custom-ordered-list:not([nested]) cds-custom-list-item{\\n  margin-inline-start:1.5rem;\\n}\\n@container (max-width: 703px){\\n  :host .cds--link:not(:has(.cds--link__icon)){\\n    display:inline;\\n  }\\n}\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ let CDSChatMarkdownTextElement = class CDSChatMarkdownTextElement extends MarkdownTextElement {\n  render() {\n    return markdownTextTemplate(this);\n  }\n};\n\nCDSChatMarkdownTextElement.styles = css`\n    ${unsafeCSS(css_248z)}\n  `;\n\nCDSChatMarkdownTextElement = __decorate([ carbonElement(\"cds-aichat-markdown-text\") ], CDSChatMarkdownTextElement);\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const MarkdownText = createComponent({\n  tagName: \"cds-aichat-markdown-text\",\n  elementClass: CDSChatMarkdownTextElement,\n  react: React\n});\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function RichText(props) {\n  const {text: text, shouldRemoveHTMLBeforeMarkdownConversion: shouldRemoveHTMLBeforeMarkdownConversion, overrideSanitize: overrideSanitize, streaming: streaming} = props;\n  const preformattedText = shouldRemoveHTMLBeforeMarkdownConversion ? removeHTML(text) : text;\n  let doSanitize = useShouldSanitizeHTML();\n  if (overrideSanitize !== undefined) {\n    doSanitize = overrideSanitize;\n  }\n  const languagePack = useLanguagePack();\n  const intl = useIntl();\n  const locale = useSelector(state => state.locale);\n  const config = useSelector(state => state.config.public);\n  const {carbonTheme: carbonTheme} = config.themeConfig;\n  const isDarkTheme = carbonTheme === CarbonTheme.G90 || carbonTheme === CarbonTheme.G100;\n  const localization = useMemo(() => {\n    const getTablePaginationSupplementalText = ({count: count}) => intl.formatMessage({\n      id: \"table_paginationSupplementalText\"\n    }, {\n      pagesCount: count\n    });\n    const getTablePaginationStatusText = ({start: start, end: end, count: count}) => intl.formatMessage({\n      id: \"table_paginationStatus\"\n    }, {\n      start: start,\n      end: end,\n      count: count\n    });\n    return {\n      table: {\n        filterPlaceholderText: languagePack.table_filterPlaceholder,\n        previousPageText: languagePack.table_previousPage,\n        nextPageText: languagePack.table_nextPage,\n        itemsPerPageText: languagePack.table_itemsPerPage,\n        locale: locale,\n        getPaginationSupplementalText: getTablePaginationSupplementalText,\n        getPaginationStatusText: getTablePaginationStatusText\n      }\n    };\n  }, [ languagePack.table_filterPlaceholder, languagePack.table_previousPage, languagePack.table_nextPage, languagePack.table_itemsPerPage, locale, intl ]);\n  return React.createElement(MarkdownText, {\n    markdown: preformattedText,\n    sanitizeHTML: doSanitize,\n    streaming: streaming,\n    localization: localization,\n    debug: config.debug,\n    enableWorkers: config.enableWorkers,\n    dark: isDarkTheme\n  });\n}\n\nconst RichTextExport = React.memo(RichText, (prevProps, nextProps) => {\n  const textEqual = prevProps.text === nextProps.text;\n  const htmlConversionEqual = prevProps.shouldRemoveHTMLBeforeMarkdownConversion === nextProps.shouldRemoveHTMLBeforeMarkdownConversion;\n  const sanitizeEqual = prevProps.overrideSanitize === nextProps.overrideSanitize;\n  if (textEqual && htmlConversionEqual && sanitizeEqual) {\n    return true;\n  }\n  const streamingEqual = prevProps.streaming === nextProps.streaming;\n  return textEqual && htmlConversionEqual && sanitizeEqual && streamingEqual;\n});\n\nexport { RichTextExport as R, getMarkdownWorker as g, renderTokenTree as r };\n","import { useSelector } from \"react-redux\";\n\nimport DOMPurify from \"dompurify\";\n\nimport { i as isEmptyString } from \"./chat.stringUtils.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function useShouldSanitizeHTML() {\n  const config = useSelector(state => state.config.public);\n  return Boolean(config.shouldSanitizeHTML);\n}\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function isValidURL(string) {\n  if (isEmptyString(string)) {\n    return false;\n  }\n  return string.includes(\"http://\") || string.includes(\"https://\");\n}\n\nfunction sanitizeHTML(content) {\n  return DOMPurify.sanitize(content, {\n    ADD_ATTR: [ \"target\" ]\n  });\n}\n\nfunction removeHTML(content) {\n  return DOMPurify.sanitize(content, {\n    ALLOWED_TAGS: []\n  });\n}\n\nexport { isValidURL as i, removeHTML as r, sanitizeHTML as s, useShouldSanitizeHTML as u };\n"],"names":["isEmptyString","value","parseUnknownDataToMarkdown","data","content","JSON","stringify","parse","e","isJsonString","String","consoleError","convertToEmptyStringIfStringifiedNull","str","convertPossibleStringifiedArrayToFirstString","startsWith","endsWith","error","worker","requests","Map","requestId","async","getMarkdownWorker","options","markdown","lastTree","enableWorkers","debug","window","Worker","workerUrl","URL","fileWorker","type","console","log","tryCreateWorker","onmessage","event","id","tree","resolver","get","delete","onerror","Promise","resolve","set","result","fallbackResult","processInMainThread","key","token","tag","nesting","level","attrs","children","markup","block","hidden","map","info","meta","postMessage","buildTokenTree","diffTokenTree","parseMarkdown","all","MarkdownTextElement","LitElement","constructor","super","arguments","this","sanitizeHTML","streaming","dark","fullText","tokenTree","scheduleTokenParse","throttle","newMarkdown","updated","changedProperties","has","__decorate","property","prototype","Boolean","Object","state","EMPTY_HEADERS","EMPTY_TABLE_ROWS","DEFAULT_PAGINATION_SUPPLEMENTAL_TEXT","count","DEFAULT_PAGINATION_STATUS_TEXT","start","end","EMPTY_ATTRS","extractTextContent","node","text","child","renderTokenTree","sanitize","context","raw","html","unsafeHTML","DOMPurify","CUSTOM_ELEMENT_HANDLING","tagNameCheck","attributeNameCheck","allowCustomizedBuiltInElements","language","trim","rawAttrs","reduce","acc","fromEntries","entries","filter","element","RETURN_DOM","firstChild","getAttribute","childContext","isInThead","length","repeat","c","index","stableKey","includes","parentChildren","currentIndex","_context","nested","target","parentContext","localization","headers","tableRows","isLoading","undefined","extractedData","tableNode","rows","theadChild","thChild","headerText","push","tbodyChild","row","tdChild","cellText","extractTableData","cells","tableAttrs","tableLocalization","table","filterPlaceholderText","previousPageText","nextPageText","itemsPerPageText","locale","getPaginationSupplementalText","getPaginationStatusText","renderWithStaticTag","CDSChatMarkdownTextElement","render","customElementClass","markdownTextTemplate","styles","css","unsafeCSS","carbonElement","MarkdownText","createComponent","tagName","elementClass","react","React","RichText","props","shouldRemoveHTMLBeforeMarkdownConversion","overrideSanitize","preformattedText","removeHTML","doSanitize","useShouldSanitizeHTML","languagePack","useLanguagePack","intl","useIntl","useSelector","config","public","carbonTheme","themeConfig","isDarkTheme","CarbonTheme","G90","G100","useMemo","table_filterPlaceholder","table_previousPage","table_nextPage","table_itemsPerPage","getTablePaginationSupplementalText","formatMessage","pagesCount","getTablePaginationStatusText","RichTextExport","prevProps","nextProps","textEqual","htmlConversionEqual","sanitizeEqual","streamingEqual","shouldSanitizeHTML","isValidURL","string","ADD_ATTR","ALLOWED_TAGS"],"sourceRoot":""}