{"version":3,"file":"7035.bundle.js","mappings":"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","sources":["webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hooks/useUUID.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/carbon/Loading.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/contexts/AriaAnnouncerContext.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/settings.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/lang/UUIDType.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/lang/arrayUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/schema/outputItemToLocalItem.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/BasePanelComponent.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/actions.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hocs/withAriaAnnouncer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/PageObjectId.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/messaging/LocalMessageItem.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/carbonIcon.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/utilities/Animation.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/OverlayPanel.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/contexts/HideComponentContext.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/languages/en.json.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/util/MountChildrenOnDelay.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/resolvablePromise.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/dynamic-imports/dynamic-imports.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/util/VisuallyHidden.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/browserUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hooks/usePrevious.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/config/ChatHeaderConfig.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderAvatar/src/chatHeaderAvatarElement.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderAvatar/src/chatHeaderAvatarElement.scss.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderAvatar/cds-aichat-chat-header-avatar.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderAvatar/src/chatHeaderAvatar.template.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderAvatar.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderLink/cds-aichat-chat-header-link.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderLink/src/chatHeaderLinkElement.template.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderLink.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderMenu.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderMenuButton.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderMenuItem.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderMenuItemRadioGroup.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderOverflowMenu.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderTitle/cds-aichat-chat-header-title.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderTitle/src/chatHeaderTitle.template.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderTitle/src/chatHeaderTitle.scss.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderTitle.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/header/AISlug.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/header/Header.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/aria/AriaAnnouncerComponent.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/homeScreen/HomeScreenHeader.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/languages.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hooks/useLanguagePack.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/util/HideComponent.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/contexts/WindowSizeContext.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/utilities/carbonTypes.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hooks/useServiceManager.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/contexts/ModalPortalRootContext.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/lang/uuid.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/aria/AriaLiveMessage.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/homeScreenUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/intlUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/ChatInstanceImpl.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/environmentVariables.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/config/LauncherConfig.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/reducerUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/colors.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/styleUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/viewStateUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/events/ChatActionsImpl.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/events/EventBus.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/CustomPanelInstance.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/HistoryService.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/schema/historyToMessages.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/messageServiceUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/MessageService.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/NamespaceService.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/ServiceManager.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/mockStorage.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/UserSessionStorageService.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/customizers.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/agentReducers.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/tourReducerUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/reducers.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/doCreateStore.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/chatEntryFunctions.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/Chat.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/loadServices.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/subscriptions.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/CustomPanelManager.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/aria/AriaAnnouncerProvider.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/launcherUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/Launcher.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/carbon/Tag.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/LauncherComplex.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/LauncherDesktopContainer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/animationUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/LauncherExtended.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/LauncherMobileContainer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/LauncherContainer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hooks/useEffectDidUpdate.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/HydrationPanel.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/panels/CustomPanel.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/containers/main/MainWindow.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/utilities/HasAddRemoveClassName.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/containers/App.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/UserDefinedResponsePortalsContainer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/WriteableElementsPortalsContainer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/AppContainer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/domUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/messageUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/util/AnnounceOnMountComponent.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/state/AppState.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/WriteableElement.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/contexts/ServiceManagerContext.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/containers/ModalPortal.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/modals/ConfirmModal.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/instance/ChatInstance.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/selectors.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/header/BotHeader.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/lang/objectUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/schema/inputItemToLocalItem.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hooks/useAriaAnnouncer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/agentActions.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/contexts/LanguagePackContext.js"],"sourcesContent":["import { useRef } from \"react\";\n\nimport { uuid } from \"../utils/lang/uuid.js\";\n\nimport { UUIDType } from \"../utils/lang/UUIDType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function useUUID() {\n  const ref = useRef();\n  if (ref.current === undefined) {\n    ref.current = uuid(UUIDType.COMPONENT);\n  }\n  return ref.current;\n}\n\nexport { useUUID };\n","import { createComponent } from \"@lit/react\";\n\nimport React from \"react\";\n\nimport \"@carbon/web-components/es-custom/components/loading/loading-icon.js\";\n\nimport CarbonLoadingElement from \"@carbon/web-components/es-custom/components/loading/loading.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const Loading = createComponent({\n  tagName: \"cds-custom-loading\",\n  elementClass: CarbonLoadingElement,\n  react: React\n});\n\nexport { Loading as default };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const AriaAnnouncerContext = React.createContext(null);\n\nexport { AriaAnnouncerContext };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst CSS_CLASS_PREFIX = \"cds--aichat\";\n\nconst WEB_COMPONENT_PREFIX = \"cds-aichat\";\n\nexport { CSS_CLASS_PREFIX, WEB_COMPONENT_PREFIX };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar UUIDType;\n\n(function(UUIDType) {\n  UUIDType[UUIDType[\"MISCELLANEOUS\"] = 1] = \"MISCELLANEOUS\";\n  UUIDType[UUIDType[\"LOCAL_MESSAGE\"] = 2] = \"LOCAL_MESSAGE\";\n  UUIDType[UUIDType[\"MESSAGE\"] = 3] = \"MESSAGE\";\n  UUIDType[UUIDType[\"COMPONENT\"] = 4] = \"COMPONENT\";\n  UUIDType[UUIDType[\"USER\"] = 6] = \"USER\";\n  UUIDType[UUIDType[\"DEVICE_ID\"] = 8] = \"DEVICE_ID\";\n  UUIDType[UUIDType[\"FILE\"] = 9] = \"FILE\";\n})(UUIDType || (UUIDType = {}));\n\nexport { UUIDType };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction asArray(value) {\n  return Array.isArray(value) ? value : [ value ];\n}\n\nasync function asyncForEach(array, callbackFunction) {\n  for (let index = 0; index < array.length; index++) {\n    const value = array[index];\n    await callbackFunction(value, index, array);\n  }\n}\n\nfunction findLast(array, predicate, startAt) {\n  const lastIndex = findLastIndex(array, predicate);\n  return lastIndex === -1 ? undefined : array[lastIndex];\n}\n\nfunction findLastIndex(array, predicate, startAt) {\n  if (array) {\n    const startingIndex = array.length - 1;\n    for (let index = startingIndex; index >= 0; index--) {\n      const value = array[index];\n      if (predicate(value, index, array)) {\n        return index;\n      }\n    }\n  }\n  return -1;\n}\n\nfunction findLastWithMap(keys, map, predicate) {\n  for (let index = keys.length - 1; index >= 0; index--) {\n    const key = keys[index];\n    const value = map[key];\n    if (predicate(value, index, keys)) {\n      return value;\n    }\n  }\n  return undefined;\n}\n\nfunction arrayLastValue(array) {\n  return array && array.length ? array[array.length - 1] : null;\n}\n\nexport { arrayLastValue, asArray, asyncForEach, findLast, findLastWithMap };\n","import { MessageResponseTypes, ButtonItemType } from \"../../../types/messaging/Messages.js\";\n\nimport { uuid } from \"../utils/lang/uuid.js\";\n\nimport { streamItemID, isGridResponseType, isCarouselResponseType, isShowPanelButtonType, isResponseWithNestedItems, isItemSupportedInResponseBody, isCardResponseType, isButtonResponseType, createMessageResponseForItem } from \"../utils/messageUtils.js\";\n\nimport { consoleError } from \"../utils/miscUtils.js\";\n\nimport { UUIDType } from \"../utils/lang/UUIDType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function outputItemToLocalItem(messageItem, fullMessage, isLatestWelcomeNode = false, disableFadeAnimation = false) {\n  const id = streamItemID(fullMessage.id, messageItem) || uuid(UUIDType.LOCAL_MESSAGE);\n  const localMessage = {\n    ui_state: {\n      id: id,\n      needsAnnouncement: !fullMessage.history.from_history,\n      disableFadeAnimation: disableFadeAnimation\n    },\n    item: messageItem,\n    fullMessageID: fullMessage.id\n  };\n  if (isLatestWelcomeNode) {\n    localMessage.ui_state.isWelcomeResponse = true;\n  }\n  return localMessage;\n}\n\nfunction createLocalMessageForInlineError(text) {\n  const messageItem = {\n    response_type: MessageResponseTypes.INLINE_ERROR,\n    text: text\n  };\n  return createLocalMessageForItem(messageItem);\n}\n\nfunction createLocalMessageForItem(messageItem) {\n  const originalMessage = createMessageResponseForItem(messageItem);\n  const localMessage = outputItemToLocalItem(messageItem, originalMessage);\n  return {\n    originalMessage: originalMessage,\n    localMessage: localMessage\n  };\n}\n\nfunction createLocalMessageItemsForNestedMessageItems(localMessageItem, originalMessage, fromHistory, nestedLocalMessageItems, allowFooter) {\n  const {item: item} = localMessageItem;\n  if (isGridResponseType(item)) {\n    localMessageItem.ui_state.gridLocalMessageItemIDs = item.rows.map(row => row.cells.map(cell => {\n      const cellLocalMessageItemIDs = [];\n      createLocalMessageItemsForNestedType(\"items\", localMessageItem, cell.items, cellLocalMessageItemIDs, originalMessage, fromHistory, nestedLocalMessageItems, nestedMessageItem => isSupportedMessageItemInBody(localMessageItem.item, nestedMessageItem), false);\n      return cellLocalMessageItemIDs;\n    }));\n  } else if (isCarouselResponseType(item)) {\n    localMessageItem.ui_state.itemsLocalMessageItemIDs = [];\n    createLocalMessageItemsForNestedType(\"items\", localMessageItem, item.items, localMessageItem.ui_state.itemsLocalMessageItemIDs, originalMessage, fromHistory, nestedLocalMessageItems, nestedMessageItem => isSupportedMessageItemInBody(item, nestedMessageItem), allowFooter);\n  } else {\n    const bodyItems = item.body || item.panel?.body;\n    if (bodyItems) {\n      localMessageItem.ui_state.bodyLocalMessageItemIDs = [];\n      createLocalMessageItemsForNestedType(\"body\", localMessageItem, bodyItems, localMessageItem.ui_state.bodyLocalMessageItemIDs, originalMessage, fromHistory, nestedLocalMessageItems, nestedMessageItem => isSupportedMessageItemInBody(item, nestedMessageItem), !isShowPanelButtonType(item));\n    }\n    if (!allowFooter) {\n      return;\n    }\n    const footerItems = item.footer || item.panel?.footer;\n    if (footerItems) {\n      localMessageItem.ui_state.footerLocalMessageItemIDs = [];\n      createLocalMessageItemsForNestedType(\"footer\", localMessageItem, footerItems, localMessageItem.ui_state.footerLocalMessageItemIDs, originalMessage, fromHistory, nestedLocalMessageItems, nestedMessageItem => isSupportedMessageItemInFooter(item, nestedMessageItem), !isShowPanelButtonType(item));\n    }\n  }\n}\n\nfunction createLocalMessageItemsForNestedType(type, localMessageItem, items, nestedMessageItemIDs, originalMessage, fromHistory, nestedLocalMessageItems, isSupported, allowFooter) {\n  items.forEach(nestedMessageItem => {\n    if (isSupported(nestedMessageItem)) {\n      const nestedLocalMessageItem = outputItemToLocalItem(nestedMessageItem, originalMessage, false, true);\n      nestedMessageItemIDs.push(nestedLocalMessageItem.ui_state.id);\n      nestedLocalMessageItems.push(nestedLocalMessageItem);\n      if (isResponseWithNestedItems(nestedLocalMessageItem.item)) {\n        createLocalMessageItemsForNestedMessageItems(nestedLocalMessageItem, originalMessage, fromHistory, nestedLocalMessageItems, allowFooter);\n      }\n    } else {\n      consoleError(`The \"${localMessageItem.item.response_type}\" response type does not support \"${nestedMessageItem.response_type}\" in \"${type}\" array.`);\n    }\n  });\n}\n\nfunction isSupportedMessageItemInBody(rootMessageItem, nestedMessageItem) {\n  switch (rootMessageItem.response_type) {\n   case MessageResponseTypes.CARD:\n    return !isCardResponseType(nestedMessageItem) && isItemSupportedInResponseBody(nestedMessageItem);\n\n   case MessageResponseTypes.CAROUSEL:\n    return isCardResponseType(nestedMessageItem);\n\n   case MessageResponseTypes.BUTTON:\n    return rootMessageItem.button_type === ButtonItemType.SHOW_PANEL && isItemSupportedInResponseBody(nestedMessageItem);\n\n   case MessageResponseTypes.GRID:\n    return !isCardResponseType(nestedMessageItem) && isItemSupportedInResponseBody(nestedMessageItem);\n\n   default:\n    return false;\n  }\n}\n\nfunction isSupportedMessageItemInFooter(rootMessageItem, nestedMessageItem) {\n  if (isButtonResponseType(nestedMessageItem)) {\n    if (isShowPanelButtonType(rootMessageItem)) {\n      return !isShowPanelButtonType(nestedMessageItem);\n    }\n    return true;\n  }\n  return false;\n}\n\nexport { createLocalMessageForInlineError, createLocalMessageItemsForNestedMessageItems, outputItemToLocalItem };\n","import FocusTrap from \"focus-trap-react\";\n\nimport React, { useRef, useImperativeHandle } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { IS_MOBILE } from \"../utils/browserUtils.js\";\n\nimport { Header as HeaderExport } from \"./header/Header.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function BasePanelComponent({className: className, children: children, isOpen: isOpen, hidePanelHeader: hidePanelHeader, labelBackButton: labelBackButton, title: title, hideBackButton: hideBackButton, useAITheme: useAITheme, onClickCloseAndRestart: onClickCloseAndRestart, onClickRestart: onClickRestart, testIdPrefix: testIdPrefix, ...headerProps}, ref) {\n  const showRestartButton = useSelector(state => state.config.public.headerConfig?.showRestartButton);\n  const headerRef = useRef();\n  useImperativeHandle(ref, () => headerRef.current);\n  return React.createElement(FocusTrap, {\n    active: isOpen,\n    focusTrapOptions: {\n      clickOutsideDeactivates: true,\n      returnFocusOnDeactivate: !IS_MOBILE,\n      preventScroll: true\n    }\n  }, React.createElement(\"div\", {\n    className: className\n  }, !hidePanelHeader && React.createElement(HeaderExport, {\n    ...headerProps,\n    ref: headerRef,\n    showRestartButton: showRestartButton,\n    onClickRestart: onClickRestart,\n    onCloseAndRestart: onClickCloseAndRestart,\n    showBackButton: !hideBackButton,\n    labelBackButton: labelBackButton,\n    displayName: title,\n    useAITheme: useAITheme,\n    testIdPrefix: testIdPrefix,\n    showCenter: true\n  }), React.createElement(\"div\", {\n    className: \"WACPanelContent\"\n  }, children)));\n}\n\nconst BasePanelComponentExport = React.memo(React.forwardRef(BasePanelComponent));\n\nexport { BasePanelComponentExport as BasePanelComponent };\n","import { uuid } from \"../utils/lang/uuid.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const CHANGE_STATE = \"CHANGE_STATE\";\n\nconst UPDATE_BOT_NAME = \"UPDATE_BOT_NAME\";\n\nconst UPDATE_BOT_AVATAR_URL = \"UPDATE_BOT_AVATAR_URL\";\n\nconst UPDATE_LAUNCHER_AVATAR_URL = \"UPDATE_LAUNCHER_AVATAR_URL\";\n\nconst UPDATE_MAIN_HEADER_TITLE = \"UPDATE_MAIN_HEADER_TITLE\";\n\nconst HYDRATE_CHAT = \"HYDRATE_CHAT\";\n\nconst HYDRATE_MESSAGE_HISTORY = \"HYDRATE_MESSAGE_HISTORY\";\n\nconst ADD_LOCAL_MESSAGE_ITEM = \"ADD_LOCAL_MESSAGE_ITEM\";\n\nconst REMOVE_MESSAGES = \"REMOVE_MESSAGES\";\n\nconst UPDATE_LOCAL_MESSAGE_ITEM = \"UPDATE_LOCAL_MESSAGE_ITEM\";\n\nconst SET_APP_STATE_VALUE = \"SET_APP_STATE_VALUE\";\n\nconst ADD_IS_TYPING_COUNTER = \"ADD_IS_TYPING_COUNTER\";\n\nconst ADD_IS_LOADING_COUNTER = \"ADD_IS_LOADING_COUNTER\";\n\nconst ADD_IS_HYDRATING_COUNTER = \"ADD_IS_HYDRATING_COUNTER\";\n\nconst SET_VIEW_STATE = \"SET_VIEW_STATE\";\n\nconst SET_VIEW_CHANGING = \"SET_VIEW_CHANGING\";\n\nconst SET_INITIAL_VIEW_CHANGE_COMPLETE = \"SET_INITIAL_VIEW_CHANGE_COMPLETE\";\n\nconst UPDATE_CSS_VARIABLES = \"UPDATE_CSS_VARIABLES\";\n\nconst MESSAGE_SET_OPTION_SELECTED = \"MESSAGE_SET_OPTION_SELECTED\";\n\nconst SET_MESSAGE_UI_PROPERTY = \"SET_MESSAGE_UI_PROPERTY\";\n\nconst SET_MESSAGE_HISTORY_PROPERTY = \"SET_MESSAGE_HISTORY_PROPERTY\";\n\nconst MERGE_HISTORY = \"MERGE_HISTORY\";\n\nconst SET_LAUNCHER_PROPERTY = \"SET_LAUNCHER_PROPERTY\";\n\nconst SET_LAUNCHER_CONFIG_PROPERTY = \"SET_LAUNCHER_CONFIG_PROPERTY\";\n\nconst ANNOUNCE_MESSAGE = \"ANNOUNCE_MESSAGE\";\n\nconst SET_CHAT_MESSAGES_PROPERTY = \"SET_CHAT_MESSAGES_PROPERTY\";\n\nconst RESTART_CONVERSATION = \"RESTART_CONVERSATION\";\n\nconst ACCEPTED_DISCLAIMER = \"ACCEPTED_DISCLAIMER\";\n\nconst ADD_MESSAGE = \"ADD_MESSAGE\";\n\nconst UPDATE_HOME_SCREEN_CONFIG = \"UPDATE_HOME_SCREEN_CONFIG\";\n\nconst UPDATE_HAS_SENT_NON_WELCOME_MESSAGE = \"UPDATE_HAS_SENT_NON_WELCOME_MESSAGE\";\n\nconst UPDATE_PERSISTED_CHAT_STATE = \"UPDATE_PERSISTED_CHAT_STATE\";\n\nconst SET_TOUR_DATA = \"SET_TOUR_DATA\";\n\nconst CLEAR_TOUR_DATA = \"CLEAR_TOUR_DATA\";\n\nconst CHANGE_STEP_IN_TOUR = \"CHANGE_STEP_IN_TOUR\";\n\nconst SET_HOME_SCREEN_IS_OPEN = \"SET_HOME_SCREEN_IS_OPEN\";\n\nconst UPDATE_LAUNCHER_CONFIG = \"UPDATE_LAUNCHER_CONFIG\";\n\nconst UPDATE_MESSAGE = \"UPDATE_MESSAGE\";\n\nconst SET_LAUNCHER_MINIMIZED = \"SET_LAUNCHER_MINIMIZED\";\n\nconst CLOSE_IFRAME_PANEL = \"CLOSE_IFRAME_PANEL\";\n\nconst OPEN_IFRAME_CONTENT = \"OPEN_IFRAME_CONTENT\";\n\nconst SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN = \"SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN\";\n\nconst SET_CUSTOM_PANEL_OPTIONS = \"SET_CUSTOM_PANEL_OPTIONS\";\n\nconst SET_CUSTOM_PANEL_OPEN = \"SET_CUSTOM_PANEL_OPEN\";\n\nconst TOGGLE_HOME_SCREEN = \"GO_BACK_TO_HOME\";\n\nconst UPDATE_INPUT_STATE = \"UPDATE_INPUT_STATE\";\n\nconst SET_IS_BROWSER_PAGE_VISIBLE = \"SET_IS_PAGE_VISIBLE\";\n\nconst ADD_INPUT_FILE = \"ADD_INPUT_FILE\";\n\nconst CLEAR_INPUT_FILES = \"CLEAR_INPUT_FILES\";\n\nconst REMOVE_INPUT_FILE = \"REMOVE_INPUT_FILE\";\n\nconst REMOVE_LOCAL_MESSAGE_ITEM = \"REMOVE_LOCAL_MESSAGE_ITEM\";\n\nconst FILE_UPLOAD_INPUT_ERROR = \"FILE_UPLOAD_INPUT_ERROR\";\n\nconst ADD_NESTED_MESSAGES = \"ADD_NESTED_MESSAGES\";\n\nconst SET_RESPONSE_PANEL_IS_OPEN = \"SET_RESPONSE_PANEL_IS_OPEN\";\n\nconst SET_RESPONSE_PANEL_CONTENT = \"SET_PANEL_RESPONSE_CONTENT\";\n\nconst STREAMING_ADD_CHUNK = \"STREAMING_ADD_CHUNK\";\n\nconst STREAMING_START = \"STREAMING_START\";\n\nconst STREAMING_MERGE_HISTORY = \"STREAMING_MERGE_HISTORY\";\n\nconst ADD_NOTIFICATION = \"ADD_NOTIFICATION\";\n\nconst REMOVE_ALL_NOTIFICATIONS = \"REMOVE_ALL_NOTIFICATIONS\";\n\nconst REMOVE_NOTIFICATIONS = \"REMOVE_NOTIFICATIONS\";\n\nconst UPDATE_CHAT_HEADER_CONFIG = \"UPDATE_CHAT_HEADER_CONFIG\";\n\nconst UPDATE_MAX_VISIBLE_HEADER_OBJECTS = \"UPDATE_MAX_VISIBLE_HEADER_OBJECTS\";\n\nconst SET_STOP_STREAMING_BUTTON_VISIBLE = \"SET_STOP_STREAMING_BUTTON_VISIBLE\";\n\nconst SET_STOP_STREAMING_BUTTON_DISABLED = \"SET_STOP_STREAMING_BUTTON_DISABLED\";\n\nconst SET_STREAM_ID = \"SET_STREAM_ID\";\n\nconst UPDATE_MAIN_HEADER_AVATAR = \"UPDATE_MAIN_HEADER_AVATAR\";\n\nconst actions = {\n  changeState(partialState) {\n    return {\n      type: CHANGE_STATE,\n      partialState: partialState\n    };\n  },\n  chatWasHydrated() {\n    return {\n      type: HYDRATE_CHAT\n    };\n  },\n  hydrateMessageHistory(messageHistory) {\n    return {\n      type: HYDRATE_MESSAGE_HISTORY,\n      messageHistory: messageHistory\n    };\n  },\n  removeMessages(messageIDs) {\n    return {\n      type: REMOVE_MESSAGES,\n      messageIDs: messageIDs\n    };\n  },\n  restartConversation() {\n    return {\n      type: RESTART_CONVERSATION\n    };\n  },\n  addLocalMessageItem(messageItem, message, addMessage, addAfterID) {\n    return {\n      type: ADD_LOCAL_MESSAGE_ITEM,\n      messageItem: messageItem,\n      message: message,\n      addMessage: addMessage,\n      addAfterID: addAfterID\n    };\n  },\n  addMessage(message) {\n    return {\n      type: ADD_MESSAGE,\n      message: message\n    };\n  },\n  updateLocalMessageItem(messageItem) {\n    return {\n      type: UPDATE_LOCAL_MESSAGE_ITEM,\n      messageItem: messageItem\n    };\n  },\n  updateMessage(message) {\n    return {\n      type: UPDATE_MESSAGE,\n      message: message\n    };\n  },\n  messageSetOptionSelected(messageID, sentMessage) {\n    return {\n      type: MESSAGE_SET_OPTION_SELECTED,\n      messageID: messageID,\n      sentMessage: sentMessage\n    };\n  },\n  updatePersistedChatState(chatState) {\n    return {\n      type: UPDATE_PERSISTED_CHAT_STATE,\n      chatState: chatState\n    };\n  },\n  setTourData(newActiveTourMessageID) {\n    return {\n      type: SET_TOUR_DATA,\n      newActiveTourMessageID: newActiveTourMessageID\n    };\n  },\n  clearTourData() {\n    return {\n      type: CLEAR_TOUR_DATA\n    };\n  },\n  changeStepInTour(newStepNumber) {\n    return {\n      type: CHANGE_STEP_IN_TOUR,\n      newStepNumber: newStepNumber\n    };\n  },\n  updateHasSentNonWelcomeMessage(hasSentNonWelcomeMessage) {\n    return {\n      type: UPDATE_HAS_SENT_NON_WELCOME_MESSAGE,\n      hasSentNonWelcomeMessage: hasSentNonWelcomeMessage\n    };\n  },\n  setAppStateValue(key, value) {\n    return {\n      type: SET_APP_STATE_VALUE,\n      key: key,\n      value: value\n    };\n  },\n  addIsTypingCounter(addToIsTyping) {\n    return {\n      type: ADD_IS_TYPING_COUNTER,\n      addToIsTyping: addToIsTyping\n    };\n  },\n  addIsLoadingCounter(addToIsLoading) {\n    return {\n      type: ADD_IS_LOADING_COUNTER,\n      addToIsLoading: addToIsLoading\n    };\n  },\n  addIsHydratingCounter(addToIsHydrating) {\n    return {\n      type: ADD_IS_HYDRATING_COUNTER,\n      addToIsHydrating: addToIsHydrating\n    };\n  },\n  updateBotName(name) {\n    return {\n      type: UPDATE_BOT_NAME,\n      name: name\n    };\n  },\n  updateMainHeaderTitle(title) {\n    return {\n      type: UPDATE_MAIN_HEADER_TITLE,\n      title: title\n    };\n  },\n  updateBotAvatarURL(url) {\n    return {\n      type: UPDATE_BOT_AVATAR_URL,\n      url: url\n    };\n  },\n  updateCSSVariables(variables, publicVars, whiteLabelVariables) {\n    return {\n      type: UPDATE_CSS_VARIABLES,\n      variables: variables,\n      publicVars: publicVars,\n      whiteLabelVariables: whiteLabelVariables\n    };\n  },\n  updateHomeScreenConfig(homeScreenConfig) {\n    return {\n      type: UPDATE_HOME_SCREEN_CONFIG,\n      homeScreenConfig: homeScreenConfig\n    };\n  },\n  setViewState(viewState) {\n    return {\n      type: SET_VIEW_STATE,\n      viewState: viewState\n    };\n  },\n  setViewChanging(viewChanging) {\n    return {\n      type: SET_VIEW_CHANGING,\n      viewChanging: viewChanging\n    };\n  },\n  setInitialViewChangeComplete(changeComplete) {\n    return {\n      type: SET_INITIAL_VIEW_CHANGE_COMPLETE,\n      changeComplete: changeComplete\n    };\n  },\n  setMessageUIProperty(localMessageID, propertyName, propertyValue) {\n    return {\n      type: SET_MESSAGE_UI_PROPERTY,\n      localMessageID: localMessageID,\n      propertyName: propertyName,\n      propertyValue: propertyValue\n    };\n  },\n  setLauncherProperty(propertyName, propertyValue) {\n    return {\n      type: SET_LAUNCHER_PROPERTY,\n      propertyName: propertyName,\n      propertyValue: propertyValue\n    };\n  },\n  setLauncherConfigProperty(propertyName, propertyValue, launcherType) {\n    return {\n      type: SET_LAUNCHER_CONFIG_PROPERTY,\n      propertyName: propertyName,\n      propertyValue: propertyValue,\n      launcherType: launcherType\n    };\n  },\n  setMessageHistoryProperty(messageID, propertyName, propertyValue) {\n    return {\n      type: SET_MESSAGE_HISTORY_PROPERTY,\n      messageID: messageID,\n      propertyName: propertyName,\n      propertyValue: propertyValue\n    };\n  },\n  mergeMessageHistory(messageID, history) {\n    return {\n      type: MERGE_HISTORY,\n      messageID: messageID,\n      history: history\n    };\n  },\n  setMessageErrorState(messageID, errorState) {\n    return actions.setMessageHistoryProperty(messageID, \"error_state\", errorState);\n  },\n  setMessageWasAnnounced(messageID) {\n    return actions.setMessageUIProperty(messageID, \"needsAnnouncement\", false);\n  },\n  announceMessage(message) {\n    return {\n      type: ANNOUNCE_MESSAGE,\n      message: message\n    };\n  },\n  setChatMessagesStateProperty(propertyName, propertyValue) {\n    return {\n      type: SET_CHAT_MESSAGES_PROPERTY,\n      propertyName: propertyName,\n      propertyValue: propertyValue\n    };\n  },\n  addNotification(notification) {\n    const notificationID = uuid();\n    return {\n      type: ADD_NOTIFICATION,\n      notificationID: notificationID,\n      notification: notification\n    };\n  },\n  removeNotifications({groupID: groupID, notificationID: notificationID}) {\n    return {\n      type: REMOVE_NOTIFICATIONS,\n      groupID: groupID,\n      notificationID: notificationID\n    };\n  },\n  removeAllNotifications() {\n    return {\n      type: REMOVE_ALL_NOTIFICATIONS\n    };\n  },\n  acceptDisclaimer() {\n    return {\n      type: ACCEPTED_DISCLAIMER\n    };\n  },\n  setHomeScreenIsOpen(isOpen) {\n    return {\n      type: SET_HOME_SCREEN_IS_OPEN,\n      isOpen: isOpen\n    };\n  },\n  updateLauncherConfig(launcherConfig) {\n    return {\n      type: UPDATE_LAUNCHER_CONFIG,\n      launcherConfig: launcherConfig\n    };\n  },\n  setLauncherMinimized() {\n    return {\n      type: SET_LAUNCHER_MINIMIZED\n    };\n  },\n  closeIFramePanel() {\n    return {\n      type: CLOSE_IFRAME_PANEL\n    };\n  },\n  setIFrameContent(messageItem) {\n    return {\n      type: OPEN_IFRAME_CONTENT,\n      messageItem: messageItem\n    };\n  },\n  setViewSourcePanelIsOpen(isOpen, citationItem, relatedSearchResult) {\n    return {\n      type: SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN,\n      isOpen: isOpen,\n      citationItem: citationItem,\n      relatedSearchResult: relatedSearchResult\n    };\n  },\n  setCustomPanelConfigOptions(options) {\n    return {\n      type: SET_CUSTOM_PANEL_OPTIONS,\n      options: options\n    };\n  },\n  setCustomPanelOpen(isOpen) {\n    return {\n      type: SET_CUSTOM_PANEL_OPEN,\n      isOpen: isOpen\n    };\n  },\n  toggleHomeScreen() {\n    return {\n      type: TOGGLE_HOME_SCREEN\n    };\n  },\n  updateInputState(newState, isInputToAgent) {\n    return {\n      type: UPDATE_INPUT_STATE,\n      newState: newState,\n      isInputToAgent: isInputToAgent\n    };\n  },\n  setIsBrowserPageVisible(isVisible) {\n    return {\n      type: SET_IS_BROWSER_PAGE_VISIBLE,\n      isVisible: isVisible\n    };\n  },\n  addInputFile(file, isInputToAgent) {\n    return {\n      type: ADD_INPUT_FILE,\n      file: file,\n      isInputToAgent: isInputToAgent\n    };\n  },\n  removeFileUpload(fileID, isInputToAgent) {\n    return {\n      type: REMOVE_INPUT_FILE,\n      fileID: fileID,\n      isInputToAgent: isInputToAgent\n    };\n  },\n  removeLocalMessageItem(localMessageItemID) {\n    return {\n      type: REMOVE_LOCAL_MESSAGE_ITEM,\n      localMessageItemID: localMessageItemID\n    };\n  },\n  fileUploadInputError(fileID, errorMessage, isInputToAgent) {\n    return {\n      type: FILE_UPLOAD_INPUT_ERROR,\n      fileID: fileID,\n      errorMessage: errorMessage,\n      isInputToAgent: isInputToAgent\n    };\n  },\n  clearInputFiles(isInputToAgent) {\n    return {\n      type: CLEAR_INPUT_FILES,\n      isInputToAgent: isInputToAgent\n    };\n  },\n  addNestedMessages(localMessageItems) {\n    return {\n      type: ADD_NESTED_MESSAGES,\n      localMessageItems: localMessageItems\n    };\n  },\n  setResponsePanelIsOpen(isOpen) {\n    return {\n      type: SET_RESPONSE_PANEL_IS_OPEN,\n      isOpen: isOpen\n    };\n  },\n  setResponsePanelContent(localMessageItem, isMessageForInput = false) {\n    return {\n      type: SET_RESPONSE_PANEL_CONTENT,\n      localMessageItem: localMessageItem,\n      isMessageForInput: isMessageForInput\n    };\n  },\n  streamingStart(messageID) {\n    return {\n      type: STREAMING_START,\n      messageID: messageID\n    };\n  },\n  streamingMergeHistory(messageID, history) {\n    return {\n      type: STREAMING_MERGE_HISTORY,\n      messageID: messageID,\n      history: history\n    };\n  },\n  streamingAddChunk(fullMessageID, chunkItem, isCompleteItem, disableFadeAnimation) {\n    return {\n      type: STREAMING_ADD_CHUNK,\n      fullMessageID: fullMessageID,\n      chunkItem: chunkItem,\n      isCompleteItem: isCompleteItem,\n      disableFadeAnimation: disableFadeAnimation\n    };\n  },\n  updateChatHeaderConfig(chatHeaderConfig) {\n    return {\n      type: UPDATE_CHAT_HEADER_CONFIG,\n      chatHeaderConfig: chatHeaderConfig\n    };\n  },\n  setMaxVisibleHeaderObjects(maxTotal) {\n    return {\n      type: UPDATE_MAX_VISIBLE_HEADER_OBJECTS,\n      maxTotal: maxTotal\n    };\n  },\n  setStopStreamingButtonVisible(isVisible) {\n    return {\n      type: SET_STOP_STREAMING_BUTTON_VISIBLE,\n      isVisible: isVisible\n    };\n  },\n  setStopStreamingButtonDisabled(isDisabled) {\n    return {\n      type: SET_STOP_STREAMING_BUTTON_DISABLED,\n      isDisabled: isDisabled\n    };\n  },\n  setStreamID(currentStreamID) {\n    return {\n      type: SET_STREAM_ID,\n      currentStreamID: currentStreamID\n    };\n  },\n  updateMainHeaderAvatar(config) {\n    return {\n      type: UPDATE_MAIN_HEADER_AVATAR,\n      config: config\n    };\n  }\n};\n\nexport { ACCEPTED_DISCLAIMER, ADD_INPUT_FILE, ADD_IS_HYDRATING_COUNTER, ADD_IS_LOADING_COUNTER, ADD_IS_TYPING_COUNTER, ADD_LOCAL_MESSAGE_ITEM, ADD_MESSAGE, ADD_NESTED_MESSAGES, ADD_NOTIFICATION, ANNOUNCE_MESSAGE, CHANGE_STATE, CHANGE_STEP_IN_TOUR, CLEAR_INPUT_FILES, CLEAR_TOUR_DATA, CLOSE_IFRAME_PANEL, FILE_UPLOAD_INPUT_ERROR, HYDRATE_CHAT, HYDRATE_MESSAGE_HISTORY, MERGE_HISTORY, MESSAGE_SET_OPTION_SELECTED, OPEN_IFRAME_CONTENT, REMOVE_ALL_NOTIFICATIONS, REMOVE_INPUT_FILE, REMOVE_LOCAL_MESSAGE_ITEM, REMOVE_MESSAGES, REMOVE_NOTIFICATIONS, RESTART_CONVERSATION, SET_APP_STATE_VALUE, SET_CHAT_MESSAGES_PROPERTY, SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN, SET_CUSTOM_PANEL_OPEN, SET_CUSTOM_PANEL_OPTIONS, SET_HOME_SCREEN_IS_OPEN, SET_INITIAL_VIEW_CHANGE_COMPLETE, SET_IS_BROWSER_PAGE_VISIBLE, SET_LAUNCHER_CONFIG_PROPERTY, SET_LAUNCHER_MINIMIZED, SET_LAUNCHER_PROPERTY, SET_MESSAGE_HISTORY_PROPERTY, SET_MESSAGE_UI_PROPERTY, SET_RESPONSE_PANEL_CONTENT, SET_RESPONSE_PANEL_IS_OPEN, SET_STOP_STREAMING_BUTTON_DISABLED, SET_STOP_STREAMING_BUTTON_VISIBLE, SET_STREAM_ID, SET_TOUR_DATA, SET_VIEW_CHANGING, SET_VIEW_STATE, STREAMING_ADD_CHUNK, STREAMING_MERGE_HISTORY, STREAMING_START, TOGGLE_HOME_SCREEN, UPDATE_BOT_AVATAR_URL, UPDATE_BOT_NAME, UPDATE_CHAT_HEADER_CONFIG, UPDATE_CSS_VARIABLES, UPDATE_HAS_SENT_NON_WELCOME_MESSAGE, UPDATE_HOME_SCREEN_CONFIG, UPDATE_INPUT_STATE, UPDATE_LAUNCHER_AVATAR_URL, UPDATE_LAUNCHER_CONFIG, UPDATE_LOCAL_MESSAGE_ITEM, UPDATE_MAIN_HEADER_AVATAR, UPDATE_MAIN_HEADER_TITLE, UPDATE_MAX_VISIBLE_HEADER_OBJECTS, UPDATE_MESSAGE, UPDATE_PERSISTED_CHAT_STATE, actions as default };\n","import React, { useContext } from \"react\";\n\nimport { AriaAnnouncerContext } from \"../contexts/AriaAnnouncerContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function withAriaAnnouncer(Component) {\n  const Wrapped = React.forwardRef((props, ref) => {\n    const ariaAnnouncer = useContext(AriaAnnouncerContext);\n    return React.createElement(Component, {\n      ...props,\n      ref: ref,\n      ariaAnnouncer: ariaAnnouncer\n    });\n  });\n  Wrapped.displayName = `withAriaAnnouncer(${Component.displayName || Component.name || \"Component\"})`;\n  return Wrapped;\n}\n\nexport { withAriaAnnouncer };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar PageObjectId;\n\n(function(PageObjectId) {\n  PageObjectId[\"CLOSE_CHAT\"] = \"close_chat\";\n  PageObjectId[\"LAUNCHER\"] = \"launcher_open_chat\";\n  PageObjectId[\"INPUT\"] = \"input_field\";\n  PageObjectId[\"INPUT_SEND\"] = \"input_send\";\n})(PageObjectId || (PageObjectId = {}));\n\nfunction makeTestId(id, panel) {\n  if (panel) {\n    return `${panel}-${id}`;\n  }\n  return id;\n}\n\nexport { PageObjectId, makeTestId };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar MessageErrorState;\n\n(function(MessageErrorState) {\n  MessageErrorState[MessageErrorState[\"NONE\"] = 1] = \"NONE\";\n  MessageErrorState[MessageErrorState[\"FAILED\"] = 2] = \"FAILED\";\n  MessageErrorState[MessageErrorState[\"RETRYING\"] = 3] = \"RETRYING\";\n  MessageErrorState[MessageErrorState[\"WAITING\"] = 4] = \"WAITING\";\n})(MessageErrorState || (MessageErrorState = {}));\n\nexport { MessageErrorState };\n","import { createElement } from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function carbonIconToReact(icon) {\n  return function IconComponent(props = {}) {\n    return createElement(\"svg\", {\n      ...icon.attrs,\n      width: icon.attrs.width || 16,\n      height: icon.attrs.height || 16,\n      fill: icon.attrs.fill || \"currentColor\",\n      ...props\n    }, icon.content.map((child, i) => createElement(child.elem, {\n      key: i,\n      ...child.attrs\n    })));\n  };\n}\n\nexport { carbonIconToReact };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar AnimationInType;\n\n(function(AnimationInType) {\n  AnimationInType[\"NONE\"] = \"none\";\n  AnimationInType[\"FADE_IN\"] = \"fadeIn\";\n  AnimationInType[\"SLIDE_IN_FROM_LEFT\"] = \"slideInFromLeft\";\n  AnimationInType[\"SLIDE_IN_FROM_RIGHT\"] = \"slideInFromRight\";\n  AnimationInType[\"SLIDE_IN_FROM_BOTTOM\"] = \"slideInFromBottom\";\n  AnimationInType[\"BRANDING_SLIDE_IN_FROM_BOTTOM\"] = \"brandingSlideInFromBottom\";\n})(AnimationInType || (AnimationInType = {}));\n\nvar AnimationOutType;\n\n(function(AnimationOutType) {\n  AnimationOutType[\"NONE\"] = \"none\";\n  AnimationOutType[\"FADE_OUT\"] = \"fadeOut\";\n  AnimationOutType[\"SLIDE_OUT_TO_LEFT\"] = \"slideOutToLeft\";\n  AnimationOutType[\"SLIDE_OUT_TO_RIGHT\"] = \"slideOutToRight\";\n  AnimationOutType[\"SLIDE_OUT_TO_TOP\"] = \"slideOutToTop\";\n  AnimationOutType[\"SLIDE_OUT_TO_BOTTOM\"] = \"slideOutToBottom\";\n})(AnimationOutType || (AnimationOutType = {}));\n\nexport { AnimationInType, AnimationOutType };\n","import cx from \"classnames\";\n\nimport React, { PureComponent } from \"react\";\n\nimport { AnimationInType, AnimationOutType } from \"../../../types/utilities/Animation.js\";\n\nimport { conditionalSetTimeout } from \"../utils/browserUtils.js\";\n\nimport { HideComponent } from \"./util/HideComponent.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ var OverlayPanelName;\n\n(function(OverlayPanelName) {\n  OverlayPanelName[\"MAIN\"] = \"main\";\n  OverlayPanelName[\"DISCLAIMER\"] = \"disclaimer\";\n  OverlayPanelName[\"HOME_SCREEN\"] = \"home_screen\";\n  OverlayPanelName[\"HYDRATING\"] = \"hydrating\";\n  OverlayPanelName[\"CATASTROPHIC\"] = \"catastrophic\";\n  OverlayPanelName[\"IFRAME\"] = \"iframe\";\n  OverlayPanelName[\"CONVERSATIONAL_SEARCH_CITATION\"] = \"conversational_search_citation\";\n  OverlayPanelName[\"CUSTOM\"] = \"custom\";\n  OverlayPanelName[\"SHOW_PANEL\"] = \"show_panel\";\n  OverlayPanelName[\"PANEL_RESPONSE\"] = \"panel_response\";\n})(OverlayPanelName || (OverlayPanelName = {}));\n\nconst ANIMATION_DURATION_IN_MS = 240;\n\nclass OverlayPanel extends PureComponent {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      isClosing: false,\n      isOpening: false\n    };\n    this.openPanelTimeout = null;\n    this.closePanelTimeout = null;\n    this.openPanel = () => {\n      const {onOpenEnd: onOpenEnd, onOpenStart: onOpenStart, animationOnOpen: animationOnOpen, animationDurationOpen: animationDurationOpen} = this.props;\n      onOpenStart?.();\n      this.setState({\n        isClosing: false,\n        isOpening: true\n      });\n      const durationInMS = animationOnOpen === AnimationInType.NONE ? 0 : animationDurationOpen || ANIMATION_DURATION_IN_MS;\n      this.openPanelTimeout = conditionalSetTimeout(() => {\n        this.setState({\n          isClosing: false,\n          isOpening: false\n        });\n        onOpenEnd?.();\n      }, durationInMS);\n    };\n    this.closePanel = () => {\n      const {onCloseEnd: onCloseEnd, onCloseStart: onCloseStart, animationOnClose: animationOnClose, animationDurationClose: animationDurationClose} = this.props;\n      onCloseStart?.();\n      this.setState({\n        isClosing: true,\n        isOpening: false\n      });\n      const durationInMS = animationOnClose === AnimationOutType.NONE ? 0 : animationDurationClose || ANIMATION_DURATION_IN_MS;\n      this.closePanelTimeout = conditionalSetTimeout(() => {\n        this.setState({\n          isClosing: false,\n          isOpening: false\n        });\n        onCloseEnd?.();\n      }, durationInMS);\n    };\n  }\n  componentDidMount() {\n    const {shouldOpen: shouldOpen} = this.props;\n    if (shouldOpen) {\n      this.openPanel();\n    }\n  }\n  componentDidUpdate(prevProps) {\n    const {shouldOpen: shouldOpen} = this.props;\n    if (shouldOpen !== prevProps.shouldOpen) {\n      if (shouldOpen) {\n        this.openPanel();\n      } else {\n        this.closePanel();\n      }\n    }\n  }\n  componentWillUnmount() {\n    if (this.openPanelTimeout) {\n      clearTimeout(this.openPanelTimeout);\n    }\n    if (this.closePanelTimeout) {\n      clearTimeout(this.closePanelTimeout);\n    }\n    if (this.props.shouldOpen) {\n      if (this.props.onCloseStart) {\n        this.props.onCloseStart();\n      }\n      if (this.props.onCloseEnd) {\n        this.props.onCloseEnd();\n      }\n    }\n  }\n  render() {\n    const {children: children, className: className, shouldOpen: shouldOpen, animationOnClose: animationOnClose, animationOnOpen: animationOnOpen, overlayPanelName: overlayPanelName} = this.props;\n    const {isClosing: isClosing, isOpening: isOpening} = this.state;\n    return React.createElement(HideComponent, {\n      hidden: !isClosing && !shouldOpen,\n      className: cx(\"WAC__overlay-panelContainer\", `WAC__overlay--${overlayPanelName}`, className, {\n        \"WAC__overlay-panelContainer--animating\": isOpening || isClosing\n      })\n    }, React.createElement(\"div\", {\n      className: cx(\"WAC__overlay-panel\", `WAC__overlay-panel--${overlayPanelName}`, {\n        [`WAC__overlay-panel--closing--${animationOnClose}`]: isClosing,\n        \"WAC__overlay-panel--closed\": !isClosing && !shouldOpen,\n        [`WAC__overlay-panel--opening--${animationOnOpen}`]: isOpening,\n        \"WAC__overlay-panel--open\": !isOpening && shouldOpen\n      })\n    }, children));\n  }\n}\n\nexport { OverlayPanel, OverlayPanelName };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const HideComponentContext = React.createContext(false);\n\nexport { HideComponentContext };\n","var ai_slug_title = \"Powered by IBM watsonx\";\n\nvar ai_slug_description = \"IBM watsonx is powered by the latest AI models to intelligently process conversations and provide help whenever and wherever you may need it.\";\n\nvar components_overflow_ariaLabel = \"Open and close list of options\";\n\nvar components_swiper_currentLabel = \"{currentSlideNumber}/{totalSlideCount}\";\n\nvar errors_communicating = \"{botName} isn't available right now. Problems with a related system are preventing the data from being supplied.\";\n\nvar errors_imageSource = \"Image is not available.\";\n\nvar errors_videoSource = \"Video is not available.\";\n\nvar errors_audioSource = \"Audio is not available.\";\n\nvar errors_iframeSource = \"The web page is not available.\";\n\nvar errors_singleMessage = \"There is an error with the message you just sent, but feel free to ask me something else.\";\n\nvar errors_ariaMessageRetrying = \"We are having some trouble sending your message but are still trying\";\n\nvar errors_ariaMessageFailed = \"Your message failed to be sent\";\n\nvar errors_noAgentsAvailable = \"No agents are available.\";\n\nvar errors_noAgentsJoined = \"No agents accepted the chat\";\n\nvar errors_connectingToAgent = \"I'm sorry. Something went wrong and I cannot connect you to an agent right now.\";\n\nvar errors_busy = \"I'm sorry, but I can't help you right now. I'm answering questions from lots of people at the moment. Please try again later.\";\n\nvar errors_agentAppSessionExpired = \"I'm sorry, but access to the chat history has expired.\";\n\nvar errors_generalContent = \"There was an error displaying this content\";\n\nvar errors_somethingWrong = \"Something went wrong\";\n\nvar input_ariaLabel = \"Message to send\";\n\nvar input_placeholder = \"Type something...\";\n\nvar input_buttonLabel = \"Click to send message\";\n\nvar input_uploadButtonLabel = \"Add files to upload\";\n\nvar window_title = \"Chat window\";\n\nvar window_ariaTourRegion = \"Tour\";\n\nvar window_ariaTourRegionNamespace = \"Tour {namespace}\";\n\nvar window_ariaChatRegion = \"Chat\";\n\nvar window_ariaChatRegionNamespace = \"Chat {namespace}\";\n\nvar window_ariaWindowOpened = \"The chat window has been opened\";\n\nvar window_ariaWindowClosed = \"The chat window has been closed\";\n\nvar window_ariaWindowLoading = \"The chat is loading.\";\n\nvar launcher_isOpen = \"Close the chat window\";\n\nvar launcher_isClosed = \"Open the chat window\";\n\nvar launcher_isTourOpen = \"Close the tour window\";\n\nvar launcher_isTourClosed = \"Open the tour window\";\n\nvar launcher_desktopGreeting = \"Hi! Im a virtual assistant. How can I help you today?\";\n\nvar launcher_mobileGreeting = \"Hi! How can I help you today?\";\n\nvar launcher_ariaIsExpanded = \"Close the chat launcher\";\n\nvar launcher_closeButton = \"Close\";\n\nvar messages_youSaid = \"You said\";\n\nvar messages_botSaid = \"{botName} said\";\n\nvar messages_agentSaid = \"The live agent said\";\n\nvar messages_searchResults = \"Search results\";\n\nvar messages_searchResultsLink = \"Open this search result in a new window\";\n\nvar messages_searchResultsOpenDocument = \"Open document\";\n\nvar messages_searchResultsOpenDocumentWithLabel = 'Open document \"{documentName}\"';\n\nvar messages_searchResultsExpand = \"Expand\";\n\nvar messages_searchResultsCollapse = \"Collapse\";\n\nvar messages_botIsLoading = \"{botName} is loading\";\n\nvar messages_botIsTyping = \"{botName} is typing\";\n\nvar messages_agentIsTyping = \"The live agent is typing\";\n\nvar messages_scrollHandle = \"Chat history begin\";\n\nvar messages_scrollHandleDetailed = \"Chat history begin. Activate to focus the first message then use the arrow, home, and end keys to move between messages. Press escape to exit.\";\n\nvar messages_scrollHandleEnd = \"Chat history end\";\n\nvar messages_scrollHandleEndDetailed = \"Chat history end. Activate to focus the last message then use the arrow, home, and end keys to move between messages. Press escape to exit.\";\n\nvar message_labelBot = \"{actorName} {timestamp}\";\n\nvar message_labelYou = \"You {timestamp}\";\n\nvar notifications_toastClose = \"Close notification\";\n\nvar buttons_restart = \"Restart conversation\";\n\nvar buttons_cancel = \"Cancel\";\n\nvar buttons_retry = \"Retry\";\n\nvar options_select = \"Select an option\";\n\nvar options_ariaOptionsDisabled = \"These options are disabled and cannot be selected\";\n\nvar header_previewLinkTitle = \"Assistant preview\";\n\nvar header_ariaCloseRestart = \"End chat and close the window\";\n\nvar header_ariaBotAvatar = \"{botName} avatar image\";\n\nvar header_overflowMenu_options = \"Options\";\n\nvar homeScreen_returnToAssistant = \"Return to assistant\";\n\nvar homeScreen_returnToHome = \"Return to the home screen\";\n\nvar homeScreen_overflowMenuHomeScreen = \"Home screen\";\n\nvar homeScreen_ariaQuickStartListButton = \"Quick start menu\";\n\nvar homeScreen_ariaQuickStartListOpened = \"The quick start menu has been opened.\";\n\nvar homeScreen_ariaQuickStartListClosed = \"The quick start menu has been closed.\";\n\nvar default_agent_availableMessage = \"Request an agent, and I'll notify you when they're ready. Your wait time may vary based on availability.\";\n\nvar default_agent_unavailableMessage = \"Sorry, no agents are available right now.\";\n\nvar agent_reason_error = \"Hmmm... I'm experiencing some difficulties. I need a human agent to manually continue the chat.\";\n\nvar agent_sdMissingWarning = 'No service desk is configured. Unless you have a custom service desk implemented, users will see an error instead of the message below. See the <a href=\"https://cloud.ibm.com/docs/watson-assistant?topic=watson-assistant-deploy-web-chat-haa\" rel=\"noreferrer noopener\" target=\"_blank\">documentation</a> for more information.';\n\nvar agent_noName = \"Live agent\";\n\nvar agent_chatTitle = \"Live agent support\";\n\nvar agent_startChat = \"Connect to agent\";\n\nvar agent_connecting = \"Request for agent sent...\";\n\nvar agent_agentNoNameTitle = \"Agent\";\n\nvar agent_agentJoinedName = \"{personName} connected.\";\n\nvar agent_agentJoinedNoName = \"A live agent connected.\";\n\nvar agent_youConnectedWarning = \"If you refresh or leave the current page, you'll have to request a new agent.\";\n\nvar agent_connectingMinutes = \"Current wait time is <b>{time, number} {time, plural, one {minute} other {minutes}}</b>.\";\n\nvar agent_connectingQueue = \"You're number <b>{position, number}</b> in line.\";\n\nvar agent_ariaAgentAvatar = \"Live agent avatar image\";\n\nvar agent_ariaGenericAvatar = \"Avatar image\";\n\nvar agent_ariaGenericBotAvatar = \"Avatar image\";\n\nvar agent_youEndedChat = \"You disconnected from the live agent.\";\n\nvar agent_conversationWasEnded = \"You disconnected from the live agent.\";\n\nvar agent_disconnected = \"Something went wrong and your connection to the live agent was lost. Check your internet connection and then try again to connect to an agent.\";\n\nvar agent_reconnected = \"The agent reconnected.\";\n\nvar agent_agentLeftChat = \"{personName} disconnected.\";\n\nvar agent_agentLeftChatNoName = \"The live agent disconnected.\";\n\nvar agent_agentEndedChat = \"{personName} ended the chat.\";\n\nvar agent_agentEndedChatNoName = \"The live agent ended the chat.\";\n\nvar agent_transferring = \"You're being transferred.\";\n\nvar agent_transferringNoName = \"You're being transferred.\";\n\nvar agent_endChat = \"Disconnect from live agent?\";\n\nvar agent_confirmSuspendedEndChatTitle = \"Disconnect from previous agent?\";\n\nvar agent_confirmSuspendedEndChatMessage = \"You are currently connected to an agent. Continuing will disconnect you from the agent and connect you to a new one. Do you want to continue?\";\n\nvar agent_confirmCancelRequestTitle = \"Cancel request?\";\n\nvar agent_confirmCancelRequestMessage = \"If you continue, you'll cancel your request for an agent.\";\n\nvar agent_confirmCancelRequestNo = \"Go back\";\n\nvar agent_confirmCancelRequestYes = \"Cancel request\";\n\nvar agent_confirmEndChat = \"If you disconnect, you'll have to request a new live agent.\";\n\nvar agent_confirmEndChatNo = \"Go back\";\n\nvar agent_confirmEndChatYes = \"Disconnect\";\n\nvar agent_confirmEndSuspendedYes = \"Continue\";\n\nvar agent_botReturned = \"Can I help you with anything else?\";\n\nvar agent_newMessage = \"New message\";\n\nvar agent_cardButtonChatRequested = \"Connecting...\";\n\nvar agent_cardButtonConnected = \"Connected\";\n\nvar agent_cardButtonChatEnded = \"Disconnected\";\n\nvar agent_cardMessageChatEnded = \"You disconnected from the live agent.\";\n\nvar agent_cardMessageConnected = \"You're now connected.\";\n\nvar agent_connectButtonCancel = \"Cancel\";\n\nvar agent_connectedButtonEndChat = \"Disconnect\";\n\nvar agent_connectWaiting = \"Waiting...\";\n\nvar agent_defaultMessageToAgent = \"Begin conversation\";\n\nvar agent_inputPlaceholderConnecting = \"Waiting for agent...\";\n\nvar agent_inputPlaceholderReconnecting = \"Reconnecting to agent...\";\n\nvar agent_sharingStopSharingButton = \"Stop sharing screen\";\n\nvar agent_sharingRequestTitle = \"Screen sharing\";\n\nvar agent_sharingRequestMessage = \"The agent has requested you share your screen. You can stop sharing at any time.\";\n\nvar agent_sharingAcceptButton = \"Share screen\";\n\nvar agent_sharingDeclineButton = \"Decline\";\n\nvar agent_sharingRequested = \"You were requested to share your screen.\";\n\nvar agent_sharingAccepted = \"You shared your screen.\";\n\nvar agent_sharingDeclined = \"You declined to share your screen.\";\n\nvar agent_sharingCancelled = \"The screen sharing request was cancelled.\";\n\nvar agent_sharingEnded = \"You stopped sharing your screen.\";\n\nvar agent_suspendedWarning = \"You are currently connected to an agent.\";\n\nvar icon_ariaUnreadMessages = \"There {count, plural, one {is} other {are}} {count, number} unread {count, plural, one {message} other {messages}}\";\n\nvar showMore = \"See more\";\n\nvar showMoreResults = \"See more\";\n\nvar disclaimer_title = \"Disclaimer\";\n\nvar disclaimer_accept = \"I accept\";\n\nvar general_ariaCloseInformationOverlay = \"Close information panel.\";\n\nvar general_ariaAnnounceOpenedInformationOverlay = \"An information panel has been opened.\";\n\nvar general_ariaAnnounceClosedInformationOverlay = \"An information panel has been closed.\";\n\nvar general_ariaAnnounceEscapeOverlay = \"Press escape or click the close button to close.\";\n\nvar general_returnToAssistant = \"Return to assistant\";\n\nvar conversationalSearch_streamingIncomplete = \"This message was not completed. Please try again.\";\n\nvar conversationalSearch_viewSourceDocument = \"View source\";\n\nvar conversationalSearch_citationsLabel = \"Sources\";\n\nvar conversationalSearch_toggleCitations = \"Open or close the list of sources\";\n\nvar conversationalSearch_responseStopped = \"Response stopped\";\n\nvar launcher_chatNow = \"Chat now\";\n\nvar iframe_ariaSourceLoaded = \"The web page has loaded.\";\n\nvar iframe_ariaImageAltText = \"Preview image for the web page panel.\";\n\nvar iframe_ariaClosePanel = \"Close the web page panel.\";\n\nvar iframe_ariaOpenedPanel = \"Web page panel has opened.\";\n\nvar iframe_ariaClosedPanel = \"Web page panel has closed.\";\n\nvar iframe_ariaClickPreviewCard = \"Click to open the web page panel and visit {source}.\";\n\nvar closeAndRestartModal_title = \"End chat\";\n\nvar closeAndRestartModal_message = \"Are you sure you want to end your chat?\";\n\nvar closeAndRestartModal_confirm = \"Yes\";\n\nvar closeAndRestartModal_cancel = \"No\";\n\nvar datePicker_chooseDate = \"Choose a date ({format})\";\n\nvar datePicker_confirmDate = \"Confirm date\";\n\nvar tour_resumeButton = \"Resume\";\n\nvar tour_restartButton = \"Restart\";\n\nvar tour_startButton = \"Get started\";\n\nvar tour_doneButton = \"Done\";\n\nvar tour_ariaMinimizeButton = \"Hide tour window\";\n\nvar tour_ariaCloseButton = \"Close tour window\";\n\nvar tour_ariaChatButton = \"Open the chat window\";\n\nvar tour_ariaPreviousButton = \"Go to previous step\";\n\nvar tour_ariaNextButton = \"Go to next step\";\n\nvar tour_instructions = \"Use the previous and next buttons to navigate between steps of the tour. Use the {chatButtonText} button to open that chat window.\";\n\nvar tour_errorFetchingStep = \"There was a problem fetching the next step.\";\n\nvar tour_errorTitle = \"Unable to continue\";\n\nvar tour_errorBody = \"The content failed to load. Please try again.\";\n\nvar fileSharing_fileTooLarge = \"The maximum file size allowed is {maxSize}.\";\n\nvar fileSharing_ariaAnnounceSuccess = \"The file was uploaded successfully.\";\n\nvar fileSharing_fileIcon = \"File icon\";\n\nvar fileSharing_removeButtonTitle = \"Remove file\";\n\nvar fileSharing_statusUploading = \"Uploading file\";\n\nvar fileSharing_uploadFailed = \"There was an error uploading the file.\";\n\nvar fileSharing_agentMessageText = \"File upload\";\n\nvar fileSharing_request = \"The agent has requested you upload a file.\";\n\nvar carousel_prevNavButton = \"Go to previous slide.\";\n\nvar carousel_nextNavButton = \"Go to next slide.\";\n\nvar input_completionsTagApp = \"App\";\n\nvar input_completionsTagAssistant = \"Assistant\";\n\nvar table_filterPlaceholder = \"Filter table\";\n\nvar table_previousPage = \"Previous page\";\n\nvar table_nextPage = \"Next page\";\n\nvar table_itemsPerPage = \"Items per page:\";\n\nvar table_paginationSupplementalText = \"of {pagesCount, number} {pagesCount, plural, one {page} other {pages}}\";\n\nvar table_paginationStatus = \"{start, number}{end, number} of {count, number} {count, plural, one {item} other {items}}\";\n\nvar feedback_positiveLabel = \"Good response\";\n\nvar feedback_negativeLabel = \"Bad response\";\n\nvar feedback_defaultTitle = \"Additional feedback\";\n\nvar feedback_defaultPrompt = \"Why did you choose this rating?\";\n\nvar feedback_defaultPlaceholder = \"Add a comment\";\n\nvar feedback_submitLabel = \"Submit\";\n\nvar feedback_cancelLabel = \"Cancel\";\n\nvar input_stopResponse = \"Stop response\";\n\nvar messages_responseStopped = \"Response stopped\";\n\nvar chainOfThought_stepTitle = \"{stepNumber, number}: {stepTitle}\";\n\nvar chainOfThought_inputLabel = \"Input\";\n\nvar chainOfThought_outputLabel = \"Output\";\n\nvar chainOfThought_toolLabel = \"Tool\";\n\nvar chainOfThought_statusSucceededLabel = \"Succeeded\";\n\nvar chainOfThought_statusFailedLabel = \"Failed\";\n\nvar chainOfThought_statusProcessingLabel = \"Processing\";\n\nvar chainOfThought_explainabilityLabel = \"How did I get this answer?\";\n\nvar enLanguagePack = {\n  ai_slug_title: ai_slug_title,\n  ai_slug_description: ai_slug_description,\n  components_overflow_ariaLabel: components_overflow_ariaLabel,\n  components_swiper_currentLabel: components_swiper_currentLabel,\n  errors_communicating: errors_communicating,\n  errors_imageSource: errors_imageSource,\n  errors_videoSource: errors_videoSource,\n  errors_audioSource: errors_audioSource,\n  errors_iframeSource: errors_iframeSource,\n  errors_singleMessage: errors_singleMessage,\n  errors_ariaMessageRetrying: errors_ariaMessageRetrying,\n  errors_ariaMessageFailed: errors_ariaMessageFailed,\n  errors_noAgentsAvailable: errors_noAgentsAvailable,\n  errors_noAgentsJoined: errors_noAgentsJoined,\n  errors_connectingToAgent: errors_connectingToAgent,\n  errors_busy: errors_busy,\n  errors_agentAppSessionExpired: errors_agentAppSessionExpired,\n  errors_generalContent: errors_generalContent,\n  errors_somethingWrong: errors_somethingWrong,\n  input_ariaLabel: input_ariaLabel,\n  input_placeholder: input_placeholder,\n  input_buttonLabel: input_buttonLabel,\n  input_uploadButtonLabel: input_uploadButtonLabel,\n  window_title: window_title,\n  window_ariaTourRegion: window_ariaTourRegion,\n  window_ariaTourRegionNamespace: window_ariaTourRegionNamespace,\n  window_ariaChatRegion: window_ariaChatRegion,\n  window_ariaChatRegionNamespace: window_ariaChatRegionNamespace,\n  window_ariaWindowOpened: window_ariaWindowOpened,\n  window_ariaWindowClosed: window_ariaWindowClosed,\n  window_ariaWindowLoading: window_ariaWindowLoading,\n  launcher_isOpen: launcher_isOpen,\n  launcher_isClosed: launcher_isClosed,\n  launcher_isTourOpen: launcher_isTourOpen,\n  launcher_isTourClosed: launcher_isTourClosed,\n  launcher_desktopGreeting: launcher_desktopGreeting,\n  launcher_mobileGreeting: launcher_mobileGreeting,\n  launcher_ariaIsExpanded: launcher_ariaIsExpanded,\n  launcher_closeButton: launcher_closeButton,\n  messages_youSaid: messages_youSaid,\n  messages_botSaid: messages_botSaid,\n  messages_agentSaid: messages_agentSaid,\n  messages_searchResults: messages_searchResults,\n  messages_searchResultsLink: messages_searchResultsLink,\n  messages_searchResultsOpenDocument: messages_searchResultsOpenDocument,\n  messages_searchResultsOpenDocumentWithLabel: messages_searchResultsOpenDocumentWithLabel,\n  messages_searchResultsExpand: messages_searchResultsExpand,\n  messages_searchResultsCollapse: messages_searchResultsCollapse,\n  messages_botIsLoading: messages_botIsLoading,\n  messages_botIsTyping: messages_botIsTyping,\n  messages_agentIsTyping: messages_agentIsTyping,\n  messages_scrollHandle: messages_scrollHandle,\n  messages_scrollHandleDetailed: messages_scrollHandleDetailed,\n  messages_scrollHandleEnd: messages_scrollHandleEnd,\n  messages_scrollHandleEndDetailed: messages_scrollHandleEndDetailed,\n  message_labelBot: message_labelBot,\n  message_labelYou: message_labelYou,\n  notifications_toastClose: notifications_toastClose,\n  buttons_restart: buttons_restart,\n  buttons_cancel: buttons_cancel,\n  buttons_retry: buttons_retry,\n  options_select: options_select,\n  options_ariaOptionsDisabled: options_ariaOptionsDisabled,\n  header_previewLinkTitle: header_previewLinkTitle,\n  header_ariaCloseRestart: header_ariaCloseRestart,\n  header_ariaBotAvatar: header_ariaBotAvatar,\n  header_overflowMenu_options: header_overflowMenu_options,\n  homeScreen_returnToAssistant: homeScreen_returnToAssistant,\n  homeScreen_returnToHome: homeScreen_returnToHome,\n  homeScreen_overflowMenuHomeScreen: homeScreen_overflowMenuHomeScreen,\n  homeScreen_ariaQuickStartListButton: homeScreen_ariaQuickStartListButton,\n  homeScreen_ariaQuickStartListOpened: homeScreen_ariaQuickStartListOpened,\n  homeScreen_ariaQuickStartListClosed: homeScreen_ariaQuickStartListClosed,\n  default_agent_availableMessage: default_agent_availableMessage,\n  default_agent_unavailableMessage: default_agent_unavailableMessage,\n  agent_reason_error: agent_reason_error,\n  agent_sdMissingWarning: agent_sdMissingWarning,\n  agent_noName: agent_noName,\n  agent_chatTitle: agent_chatTitle,\n  agent_startChat: agent_startChat,\n  agent_connecting: agent_connecting,\n  agent_agentNoNameTitle: agent_agentNoNameTitle,\n  agent_agentJoinedName: agent_agentJoinedName,\n  agent_agentJoinedNoName: agent_agentJoinedNoName,\n  agent_youConnectedWarning: agent_youConnectedWarning,\n  agent_connectingMinutes: agent_connectingMinutes,\n  agent_connectingQueue: agent_connectingQueue,\n  agent_ariaAgentAvatar: agent_ariaAgentAvatar,\n  agent_ariaGenericAvatar: agent_ariaGenericAvatar,\n  agent_ariaGenericBotAvatar: agent_ariaGenericBotAvatar,\n  agent_youEndedChat: agent_youEndedChat,\n  agent_conversationWasEnded: agent_conversationWasEnded,\n  agent_disconnected: agent_disconnected,\n  agent_reconnected: agent_reconnected,\n  agent_agentLeftChat: agent_agentLeftChat,\n  agent_agentLeftChatNoName: agent_agentLeftChatNoName,\n  agent_agentEndedChat: agent_agentEndedChat,\n  agent_agentEndedChatNoName: agent_agentEndedChatNoName,\n  agent_transferring: agent_transferring,\n  agent_transferringNoName: agent_transferringNoName,\n  agent_endChat: agent_endChat,\n  agent_confirmSuspendedEndChatTitle: agent_confirmSuspendedEndChatTitle,\n  agent_confirmSuspendedEndChatMessage: agent_confirmSuspendedEndChatMessage,\n  agent_confirmCancelRequestTitle: agent_confirmCancelRequestTitle,\n  agent_confirmCancelRequestMessage: agent_confirmCancelRequestMessage,\n  agent_confirmCancelRequestNo: agent_confirmCancelRequestNo,\n  agent_confirmCancelRequestYes: agent_confirmCancelRequestYes,\n  agent_confirmEndChat: agent_confirmEndChat,\n  agent_confirmEndChatNo: agent_confirmEndChatNo,\n  agent_confirmEndChatYes: agent_confirmEndChatYes,\n  agent_confirmEndSuspendedYes: agent_confirmEndSuspendedYes,\n  agent_botReturned: agent_botReturned,\n  agent_newMessage: agent_newMessage,\n  agent_cardButtonChatRequested: agent_cardButtonChatRequested,\n  agent_cardButtonConnected: agent_cardButtonConnected,\n  agent_cardButtonChatEnded: agent_cardButtonChatEnded,\n  agent_cardMessageChatEnded: agent_cardMessageChatEnded,\n  agent_cardMessageConnected: agent_cardMessageConnected,\n  agent_connectButtonCancel: agent_connectButtonCancel,\n  agent_connectedButtonEndChat: agent_connectedButtonEndChat,\n  agent_connectWaiting: agent_connectWaiting,\n  agent_defaultMessageToAgent: agent_defaultMessageToAgent,\n  agent_inputPlaceholderConnecting: agent_inputPlaceholderConnecting,\n  agent_inputPlaceholderReconnecting: agent_inputPlaceholderReconnecting,\n  agent_sharingStopSharingButton: agent_sharingStopSharingButton,\n  agent_sharingRequestTitle: agent_sharingRequestTitle,\n  agent_sharingRequestMessage: agent_sharingRequestMessage,\n  agent_sharingAcceptButton: agent_sharingAcceptButton,\n  agent_sharingDeclineButton: agent_sharingDeclineButton,\n  agent_sharingRequested: agent_sharingRequested,\n  agent_sharingAccepted: agent_sharingAccepted,\n  agent_sharingDeclined: agent_sharingDeclined,\n  agent_sharingCancelled: agent_sharingCancelled,\n  agent_sharingEnded: agent_sharingEnded,\n  agent_suspendedWarning: agent_suspendedWarning,\n  icon_ariaUnreadMessages: icon_ariaUnreadMessages,\n  showMore: showMore,\n  showMoreResults: showMoreResults,\n  disclaimer_title: disclaimer_title,\n  disclaimer_accept: disclaimer_accept,\n  general_ariaCloseInformationOverlay: general_ariaCloseInformationOverlay,\n  general_ariaAnnounceOpenedInformationOverlay: general_ariaAnnounceOpenedInformationOverlay,\n  general_ariaAnnounceClosedInformationOverlay: general_ariaAnnounceClosedInformationOverlay,\n  general_ariaAnnounceEscapeOverlay: general_ariaAnnounceEscapeOverlay,\n  general_returnToAssistant: general_returnToAssistant,\n  conversationalSearch_streamingIncomplete: conversationalSearch_streamingIncomplete,\n  conversationalSearch_viewSourceDocument: conversationalSearch_viewSourceDocument,\n  conversationalSearch_citationsLabel: conversationalSearch_citationsLabel,\n  conversationalSearch_toggleCitations: conversationalSearch_toggleCitations,\n  conversationalSearch_responseStopped: conversationalSearch_responseStopped,\n  launcher_chatNow: launcher_chatNow,\n  iframe_ariaSourceLoaded: iframe_ariaSourceLoaded,\n  iframe_ariaImageAltText: iframe_ariaImageAltText,\n  iframe_ariaClosePanel: iframe_ariaClosePanel,\n  iframe_ariaOpenedPanel: iframe_ariaOpenedPanel,\n  iframe_ariaClosedPanel: iframe_ariaClosedPanel,\n  iframe_ariaClickPreviewCard: iframe_ariaClickPreviewCard,\n  closeAndRestartModal_title: closeAndRestartModal_title,\n  closeAndRestartModal_message: closeAndRestartModal_message,\n  closeAndRestartModal_confirm: closeAndRestartModal_confirm,\n  closeAndRestartModal_cancel: closeAndRestartModal_cancel,\n  datePicker_chooseDate: datePicker_chooseDate,\n  datePicker_confirmDate: datePicker_confirmDate,\n  tour_resumeButton: tour_resumeButton,\n  tour_restartButton: tour_restartButton,\n  tour_startButton: tour_startButton,\n  tour_doneButton: tour_doneButton,\n  tour_ariaMinimizeButton: tour_ariaMinimizeButton,\n  tour_ariaCloseButton: tour_ariaCloseButton,\n  tour_ariaChatButton: tour_ariaChatButton,\n  tour_ariaPreviousButton: tour_ariaPreviousButton,\n  tour_ariaNextButton: tour_ariaNextButton,\n  tour_instructions: tour_instructions,\n  tour_errorFetchingStep: tour_errorFetchingStep,\n  tour_errorTitle: tour_errorTitle,\n  tour_errorBody: tour_errorBody,\n  fileSharing_fileTooLarge: fileSharing_fileTooLarge,\n  fileSharing_ariaAnnounceSuccess: fileSharing_ariaAnnounceSuccess,\n  fileSharing_fileIcon: fileSharing_fileIcon,\n  fileSharing_removeButtonTitle: fileSharing_removeButtonTitle,\n  fileSharing_statusUploading: fileSharing_statusUploading,\n  fileSharing_uploadFailed: fileSharing_uploadFailed,\n  fileSharing_agentMessageText: fileSharing_agentMessageText,\n  fileSharing_request: fileSharing_request,\n  carousel_prevNavButton: carousel_prevNavButton,\n  carousel_nextNavButton: carousel_nextNavButton,\n  input_completionsTagApp: input_completionsTagApp,\n  input_completionsTagAssistant: input_completionsTagAssistant,\n  table_filterPlaceholder: table_filterPlaceholder,\n  table_previousPage: table_previousPage,\n  table_nextPage: table_nextPage,\n  table_itemsPerPage: table_itemsPerPage,\n  table_paginationSupplementalText: table_paginationSupplementalText,\n  table_paginationStatus: table_paginationStatus,\n  feedback_positiveLabel: feedback_positiveLabel,\n  feedback_negativeLabel: feedback_negativeLabel,\n  feedback_defaultTitle: feedback_defaultTitle,\n  feedback_defaultPrompt: feedback_defaultPrompt,\n  feedback_defaultPlaceholder: feedback_defaultPlaceholder,\n  feedback_submitLabel: feedback_submitLabel,\n  feedback_cancelLabel: feedback_cancelLabel,\n  input_stopResponse: input_stopResponse,\n  messages_responseStopped: messages_responseStopped,\n  chainOfThought_stepTitle: chainOfThought_stepTitle,\n  chainOfThought_inputLabel: chainOfThought_inputLabel,\n  chainOfThought_outputLabel: chainOfThought_outputLabel,\n  chainOfThought_toolLabel: chainOfThought_toolLabel,\n  chainOfThought_statusSucceededLabel: chainOfThought_statusSucceededLabel,\n  chainOfThought_statusFailedLabel: chainOfThought_statusFailedLabel,\n  chainOfThought_statusProcessingLabel: chainOfThought_statusProcessingLabel,\n  chainOfThought_explainabilityLabel: chainOfThought_explainabilityLabel\n};\n\nexport { agent_agentEndedChat, agent_agentEndedChatNoName, agent_agentJoinedName, agent_agentJoinedNoName, agent_agentLeftChat, agent_agentLeftChatNoName, agent_agentNoNameTitle, agent_ariaAgentAvatar, agent_ariaGenericAvatar, agent_ariaGenericBotAvatar, agent_botReturned, agent_cardButtonChatEnded, agent_cardButtonChatRequested, agent_cardButtonConnected, agent_cardMessageChatEnded, agent_cardMessageConnected, agent_chatTitle, agent_confirmCancelRequestMessage, agent_confirmCancelRequestNo, agent_confirmCancelRequestTitle, agent_confirmCancelRequestYes, agent_confirmEndChat, agent_confirmEndChatNo, agent_confirmEndChatYes, agent_confirmEndSuspendedYes, agent_confirmSuspendedEndChatMessage, agent_confirmSuspendedEndChatTitle, agent_connectButtonCancel, agent_connectWaiting, agent_connectedButtonEndChat, agent_connecting, agent_connectingMinutes, agent_connectingQueue, agent_conversationWasEnded, agent_defaultMessageToAgent, agent_disconnected, agent_endChat, agent_inputPlaceholderConnecting, agent_inputPlaceholderReconnecting, agent_newMessage, agent_noName, agent_reason_error, agent_reconnected, agent_sdMissingWarning, agent_sharingAcceptButton, agent_sharingAccepted, agent_sharingCancelled, agent_sharingDeclineButton, agent_sharingDeclined, agent_sharingEnded, agent_sharingRequestMessage, agent_sharingRequestTitle, agent_sharingRequested, agent_sharingStopSharingButton, agent_startChat, agent_suspendedWarning, agent_transferring, agent_transferringNoName, agent_youConnectedWarning, agent_youEndedChat, ai_slug_description, ai_slug_title, buttons_cancel, buttons_restart, buttons_retry, carousel_nextNavButton, carousel_prevNavButton, chainOfThought_explainabilityLabel, chainOfThought_inputLabel, chainOfThought_outputLabel, chainOfThought_statusFailedLabel, chainOfThought_statusProcessingLabel, chainOfThought_statusSucceededLabel, chainOfThought_stepTitle, chainOfThought_toolLabel, closeAndRestartModal_cancel, closeAndRestartModal_confirm, closeAndRestartModal_message, closeAndRestartModal_title, components_overflow_ariaLabel, components_swiper_currentLabel, conversationalSearch_citationsLabel, conversationalSearch_responseStopped, conversationalSearch_streamingIncomplete, conversationalSearch_toggleCitations, conversationalSearch_viewSourceDocument, datePicker_chooseDate, datePicker_confirmDate, enLanguagePack as default, default_agent_availableMessage, default_agent_unavailableMessage, disclaimer_accept, disclaimer_title, errors_agentAppSessionExpired, errors_ariaMessageFailed, errors_ariaMessageRetrying, errors_audioSource, errors_busy, errors_communicating, errors_connectingToAgent, errors_generalContent, errors_iframeSource, errors_imageSource, errors_noAgentsAvailable, errors_noAgentsJoined, errors_singleMessage, errors_somethingWrong, errors_videoSource, feedback_cancelLabel, feedback_defaultPlaceholder, feedback_defaultPrompt, feedback_defaultTitle, feedback_negativeLabel, feedback_positiveLabel, feedback_submitLabel, fileSharing_agentMessageText, fileSharing_ariaAnnounceSuccess, fileSharing_fileIcon, fileSharing_fileTooLarge, fileSharing_removeButtonTitle, fileSharing_request, fileSharing_statusUploading, fileSharing_uploadFailed, general_ariaAnnounceClosedInformationOverlay, general_ariaAnnounceEscapeOverlay, general_ariaAnnounceOpenedInformationOverlay, general_ariaCloseInformationOverlay, general_returnToAssistant, header_ariaBotAvatar, header_ariaCloseRestart, header_overflowMenu_options, header_previewLinkTitle, homeScreen_ariaQuickStartListButton, homeScreen_ariaQuickStartListClosed, homeScreen_ariaQuickStartListOpened, homeScreen_overflowMenuHomeScreen, homeScreen_returnToAssistant, homeScreen_returnToHome, icon_ariaUnreadMessages, iframe_ariaClickPreviewCard, iframe_ariaClosePanel, iframe_ariaClosedPanel, iframe_ariaImageAltText, iframe_ariaOpenedPanel, iframe_ariaSourceLoaded, input_ariaLabel, input_buttonLabel, input_completionsTagApp, input_completionsTagAssistant, input_placeholder, input_stopResponse, input_uploadButtonLabel, launcher_ariaIsExpanded, launcher_chatNow, launcher_closeButton, launcher_desktopGreeting, launcher_isClosed, launcher_isOpen, launcher_isTourClosed, launcher_isTourOpen, launcher_mobileGreeting, message_labelBot, message_labelYou, messages_agentIsTyping, messages_agentSaid, messages_botIsLoading, messages_botIsTyping, messages_botSaid, messages_responseStopped, messages_scrollHandle, messages_scrollHandleDetailed, messages_scrollHandleEnd, messages_scrollHandleEndDetailed, messages_searchResults, messages_searchResultsCollapse, messages_searchResultsExpand, messages_searchResultsLink, messages_searchResultsOpenDocument, messages_searchResultsOpenDocumentWithLabel, messages_youSaid, notifications_toastClose, options_ariaOptionsDisabled, options_select, showMore, showMoreResults, table_filterPlaceholder, table_itemsPerPage, table_nextPage, table_paginationStatus, table_paginationSupplementalText, table_previousPage, tour_ariaChatButton, tour_ariaCloseButton, tour_ariaMinimizeButton, tour_ariaNextButton, tour_ariaPreviousButton, tour_doneButton, tour_errorBody, tour_errorFetchingStep, tour_errorTitle, tour_instructions, tour_restartButton, tour_resumeButton, tour_startButton, window_ariaChatRegion, window_ariaChatRegionNamespace, window_ariaTourRegion, window_ariaTourRegionNamespace, window_ariaWindowClosed, window_ariaWindowLoading, window_ariaWindowOpened, window_title };\n","import { PureComponent } from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ class MountChildrenOnDelay extends PureComponent {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      showChildren: false\n    };\n  }\n  componentDidMount() {\n    this.onComponentDidMount = setTimeout(() => {\n      this.setState({\n        showChildren: true\n      });\n    }, this.props.delay);\n  }\n  componentWillUnmount() {\n    clearTimeout(this.onComponentDidMount);\n    this.onComponentDidMount = undefined;\n  }\n  render() {\n    if (!this.state.showChildren) {\n      return false;\n    }\n    return this.props.children;\n  }\n}\n\nMountChildrenOnDelay.defaultProps = {\n  delay: 500\n};\n\nexport { MountChildrenOnDelay };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction resolvablePromise() {\n  let resolveFunction;\n  let rejectFunction;\n  const promise = new Promise((resolve, reject) => {\n    resolveFunction = resolve;\n    rejectFunction = reject;\n  });\n  promise.doResolve = resolveValue => {\n    promise.isResolved = true;\n    promise.isComplete = true;\n    resolveFunction(resolveValue);\n  };\n  promise.doReject = rejectValue => {\n    promise.isRejected = true;\n    promise.isComplete = true;\n    rejectFunction(rejectValue);\n  };\n  promise.isResolved = false;\n  promise.isRejected = false;\n  promise.isComplete = false;\n  return promise;\n}\n\nexport { resolvablePromise };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ async function loadHAA() {\n  const {createService: createService} = await import(\"../shared/services/haa/HumanAgentServiceImpl.js\");\n  return createService;\n}\n\nfunction lazyWithPreload(factory) {\n  const Component = React.lazy(factory);\n  Component.preload = factory;\n  return Component;\n}\n\nfunction lazyChat() {\n  return lazyWithPreload(() => import(\"../shared/components/Chat.js\"));\n}\n\nfunction lazyCatastrophicError() {\n  return lazyWithPreload(() => import(\"../shared/components/CatastrophicError.js\").then(mod => ({\n    default: mod.CatastrophicError\n  })));\n}\n\nfunction lazyDisclaimer() {\n  return lazyWithPreload(() => import(\"../shared/components/Disclaimer.js\").then(mod => ({\n    default: mod.Disclaimer\n  })));\n}\n\nfunction lazyHomeScreenContainer() {\n  return lazyWithPreload(() => import(\"../shared/components/homeScreen/HomeScreenContainer.js\").then(mod => ({\n    default: mod.HomeScreenContainer\n  })));\n}\n\nfunction lazyIFramePanel() {\n  return lazyWithPreload(() => import(\"../shared/components/responseTypes/iframe/IFramePanel.js\").then(mod => ({\n    default: mod.IFramePanel\n  })));\n}\n\nfunction lazyViewSourcePanel() {\n  return lazyWithPreload(() => import(\"../shared/components/responseTypes/util/citations/ViewSourcePanel.js\").then(mod => ({\n    default: mod.ViewSourcePanel\n  })));\n}\n\nfunction lazyBodyAndFooterPanelComponent() {\n  return lazyWithPreload(() => import(\"../shared/components/panels/BodyAndFooterPanelComponent.js\").then(mod => ({\n    default: mod.BodyAndFooterPanelComponent\n  })));\n}\n\nfunction lazyTourComponent() {\n  return React.lazy(() => import(\"../shared/components/tour/TourContainer.js\"));\n}\n\nfunction lazyMediaPlayer() {\n  return React.lazy(() => import(\"react-player/lazy/index.js\").then(mod => {\n    let exported = mod.default ?? mod;\n    if (exported && typeof exported === \"object\" && \"default\" in exported) {\n      exported = exported.default;\n    }\n    return {\n      default: exported\n    };\n  }));\n}\n\nfunction lazyCarousel() {\n  return React.lazy(() => import(\"../shared/components/responseTypes/carousel/Carousel.js\"));\n}\n\nexport { lazyBodyAndFooterPanelComponent, lazyCarousel, lazyCatastrophicError, lazyChat, lazyDisclaimer, lazyHomeScreenContainer, lazyIFramePanel, lazyMediaPlayer, lazyTourComponent, lazyViewSourcePanel, loadHAA };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const VisuallyHidden = React.forwardRef((props, ref) => React.createElement(\"div\", {\n  ref: ref,\n  ...props,\n  className: `WACVisuallyHidden ${props.className || \"\"}`\n}, props.children));\n\nVisuallyHidden.displayName = \"VisuallyHidden\";\n\nexport { VisuallyHidden as default };\n","import { detect } from \"detect-browser\";\n\nimport memoizeOne from \"memoize-one\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const isClient = typeof window !== \"undefined\" && typeof navigator !== \"undefined\";\n\nconst browser = isClient ? detect() : undefined;\n\nlet screenWidth = 0;\n\nlet screenHeight = 0;\n\nif (isClient) {\n  screenWidth = window.screen.width;\n  screenHeight = window.screen.height;\n}\n\nconst IS_IOS = browser?.os === \"iOS\";\n\nconst IS_ANDROID = browser?.os === \"Android OS\";\n\nconst IS_MOBILE = IS_IOS || IS_ANDROID;\n\nconst IS_PHONE = IS_MOBILE && (screenWidth < 500 || screenHeight < 500);\n\nconst IS_PHONE_IN_PORTRAIT_MODE = IS_PHONE && screenWidth < 500;\n\nfunction isSessionStorageAvailable() {\n  if (!isClient || !window.sessionStorage) {\n    return false;\n  }\n  try {\n    window.sessionStorage.setItem(\"web-chat-test-item\", \"true\");\n    window.sessionStorage.getItem(\"web-chat-test-item\");\n    window.sessionStorage.removeItem(\"web-chat-test-item\");\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nconst IS_SESSION_STORAGE = memoizeOne(isSessionStorageAvailable);\n\nfunction getURLHostName(url) {\n  try {\n    return new URL(url).hostname;\n  } catch {\n    return url;\n  }\n}\n\nfunction conditionalSetTimeout(operation, timeout) {\n  if (timeout) {\n    return setTimeout(operation, timeout);\n  }\n  operation();\n  return null;\n}\n\nexport { IS_IOS, IS_MOBILE, IS_PHONE, IS_PHONE_IN_PORTRAIT_MODE, IS_SESSION_STORAGE, conditionalSetTimeout, getURLHostName };\n","import { useRef, useEffect } from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function usePrevious(value) {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}\n\nexport { usePrevious };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar ChatHeaderObjectType;\n\n(function(ChatHeaderObjectType) {\n  ChatHeaderObjectType[\"LINK\"] = \"link\";\n  ChatHeaderObjectType[\"MENU\"] = \"menu\";\n  ChatHeaderObjectType[\"BUTTON\"] = \"button\";\n  ChatHeaderObjectType[\"RADIO_GROUP\"] = \"radio-group\";\n})(ChatHeaderObjectType || (ChatHeaderObjectType = {}));\n\nexport { ChatHeaderObjectType };\n","import { __decorate } from \"tslib\";\n\nimport { bind } from \"bind-decorator\";\n\nimport { LitElement, unsafeCSS, css } from \"lit\";\n\nimport { property, state } from \"lit/decorators.js\";\n\nimport css_248z from \"./chatHeaderAvatarElement.scss.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ class ChatHeaderAvatarElement extends LitElement {\n  constructor() {\n    super(...arguments);\n    this.isLoaded = false;\n  }\n  _handleOnError() {\n    this.onError?.();\n  }\n}\n\nChatHeaderAvatarElement.styles = css`\n    ${unsafeCSS(css_248z)}\n  `;\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderAvatarElement.prototype, \"url\", void 0);\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderAvatarElement.prototype, \"corners\", void 0);\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderAvatarElement.prototype, \"alt\", void 0);\n\n__decorate([ property({\n  type: Object\n}) ], ChatHeaderAvatarElement.prototype, \"onError\", void 0);\n\n__decorate([ state() ], ChatHeaderAvatarElement.prototype, \"isLoaded\", void 0);\n\n__decorate([ bind ], ChatHeaderAvatarElement.prototype, \"_handleOnError\", null);\n\nexport { ChatHeaderAvatarElement };\n","var css_248z = \".cds--aichat-chat-header-avatar{\\n  display:block;\\n  block-size:20px;\\n  max-block-size:20px;\\n}\\n\\n.cds--aichat-chat-header-avatar--round{\\n  border-radius:10px;\\n}\";\n\nexport { css_248z as default };\n","import { __decorate } from \"tslib\";\n\nimport { carbonElement } from \"../../../decorators/customElement.js\";\n\nimport { chatHeaderAvatarTemplate } from \"./src/chatHeaderAvatar.template.js\";\n\nimport { ChatHeaderAvatarElement } from \"./src/chatHeaderAvatarElement.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const CHAT_HEADER_AVATAR_TAG_NAME = \"cds-aichat-chat-header-avatar\";\n\nlet CDSChatHeaderAvatarElement = class CDSChatHeaderAvatarElement extends ChatHeaderAvatarElement {\n  render() {\n    return chatHeaderAvatarTemplate(this);\n  }\n};\n\nCDSChatHeaderAvatarElement = __decorate([ carbonElement(CHAT_HEADER_AVATAR_TAG_NAME) ], CDSChatHeaderAvatarElement);\n\nexport { CHAT_HEADER_AVATAR_TAG_NAME, CDSChatHeaderAvatarElement as default };\n","import \"@carbon/web-components/es-custom/components/skeleton-icon/index.js\";\n\nimport cx from \"classnames\";\n\nimport { html } from \"lit\";\n\nimport { CSS_CLASS_PREFIX } from \"../../../../settings.js\";\n\nimport { CornersType } from \"../../../../../../types/config/CornersType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function chatHeaderAvatarTemplate(classElement) {\n  const {url: url, corners: corners, alt: alt, onError: onError} = classElement;\n  return html`\n    <img\n      class=\"${cx(`${CSS_CLASS_PREFIX}-chat-header-avatar`, {\n    [`${CSS_CLASS_PREFIX}-chat-header-avatar--round`]: corners === CornersType.ROUND\n  })}\"\n      src=\"${url}\"\n      alt=\"${alt}\"\n      @error=\"${onError}\"\n    />\n  `;\n}\n\nexport { chatHeaderAvatarTemplate };\n","import { createComponent } from \"@lit/react\";\n\nimport React from \"react\";\n\nimport CDSChatHeaderAvatarElement, { CHAT_HEADER_AVATAR_TAG_NAME } from \"../../../web-components/components/chatHeader/chatHeaderAvatar/cds-aichat-chat-header-avatar.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const ChatHeaderAvatar = createComponent({\n  tagName: CHAT_HEADER_AVATAR_TAG_NAME,\n  elementClass: CDSChatHeaderAvatarElement,\n  react: React\n});\n\nexport { ChatHeaderAvatar };\n","import { __decorate } from \"tslib\";\n\nimport { LitElement } from \"lit\";\n\nimport { property } from \"lit/decorators.js\";\n\nimport { carbonElement } from \"../../../decorators/customElement.js\";\n\nimport { WEB_COMPONENT_PREFIX } from \"../../../settings.js\";\n\nimport { chatHeaderLinkTemplate } from \"./src/chatHeaderLinkElement.template.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ let ChatHeaderLinkElement = class ChatHeaderLinkElement extends LitElement {\n  constructor() {\n    super(...arguments);\n    this.isNewTab = true;\n  }\n  render() {\n    return chatHeaderLinkTemplate(this);\n  }\n};\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderLinkElement.prototype, \"url\", void 0);\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderLinkElement.prototype, \"label\", void 0);\n\n__decorate([ property({\n  type: Boolean\n}) ], ChatHeaderLinkElement.prototype, \"isNewTab\", void 0);\n\nChatHeaderLinkElement = __decorate([ carbonElement(`${WEB_COMPONENT_PREFIX}-chat-header-link`) ], ChatHeaderLinkElement);\n\nexport { ChatHeaderLinkElement };\n","import \"@carbon/web-components/es-custom/components/button/index.js\";\n\nimport \"@carbon/web-components/es-custom/components/overflow-menu/index.js\";\n\nimport { html } from \"lit\";\n\nimport { ButtonKindEnum } from \"../../../../../../types/utilities/carbonTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function chatHeaderLinkTemplate(customElementClass) {\n  const {label: label, url: url, isNewTab: isNewTab} = customElementClass;\n  return html`<cds-custom-button\n    class=\"WACChatHeaderLink\"\n    href=\"${url}\"\n    target=\"${isNewTab ? \"_blank\" : \"_self\"}\"\n    kind=\"${ButtonKindEnum.GHOST}\"\n    size=\"md\"\n    >${label}</cds-custom-button\n  >`;\n}\n\nexport { chatHeaderLinkTemplate };\n","import { createComponent } from \"@lit/react\";\n\nimport React from \"react\";\n\nimport { ChatHeaderLinkElement } from \"../../../web-components/components/chatHeader/chatHeaderLink/cds-aichat-chat-header-link.js\";\n\nimport { WEB_COMPONENT_PREFIX } from \"../../../web-components/settings.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const ChatHeaderLink = createComponent({\n  tagName: `${WEB_COMPONENT_PREFIX}-chat-header-link`,\n  elementClass: ChatHeaderLinkElement,\n  react: React\n});\n\nexport { ChatHeaderLink };\n","import { Menu } from \"@carbon/react\";\n\nimport React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function ChatHeaderMenu({id: id, className: className, label: label, isOpen: isOpen, target: target, children: children, menuAlignment: menuAlignment, containerRef: containerRef}) {\n  return React.createElement(Menu, {\n    id: id,\n    className: className,\n    open: isOpen,\n    target: target,\n    label: label,\n    size: \"md\",\n    menuAlignment: menuAlignment,\n    mode: \"full\",\n    legacyAutoalign: false,\n    containerRef: containerRef\n  }, children);\n}\n\nexport { ChatHeaderMenu };\n","import ChevronDown from \"@carbon/icons-react/es/ChevronDown.js\";\n\nimport ChevronUp from \"@carbon/icons-react/es/ChevronUp.js\";\n\nimport { Button } from \"@carbon/react\";\n\nimport { useFloating, useInteractions, useClick, useDismiss } from \"@floating-ui/react\";\n\nimport React, { useState } from \"react\";\n\nimport { useUUID } from \"../../../shared/hooks/useUUID.js\";\n\nimport { ChatHeaderMenu } from \"./ChatHeaderMenu.js\";\n\nimport { ButtonKindEnum, ButtonSizeEnum } from \"../../../../types/utilities/carbonTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function ChatHeaderMenuButton(props) {\n  const [isOpen, setIsOpen] = useState(false);\n  const {refs: menuRefs, context: menuContext} = useFloating({\n    open: isOpen,\n    onOpenChange: setIsOpen\n  });\n  const {getReferenceProps: getMenuReferenceProps, getFloatingProps: getMenuFloatingProps} = useInteractions([ useClick(menuContext), useDismiss(menuContext) ]);\n  const id = useUUID();\n  return React.createElement(\"div\", {\n    ref: menuRefs.setReference,\n    \"aria-owns\": id,\n    ...getMenuReferenceProps()\n  }, React.createElement(Button, {\n    size: ButtonSizeEnum.MEDIUM,\n    kind: ButtonKindEnum.GHOST,\n    onClick: () => setIsOpen(!isOpen),\n    renderIcon: isOpen ? ChevronUp : ChevronDown,\n    onMouseDown: event => event.preventDefault(),\n    \"aria-label\": props.ariaLabel,\n    \"aria-haspopup\": true,\n    \"aria-expanded\": isOpen,\n    \"aria-controls\": id\n  }, props.label), React.createElement(ChatHeaderMenu, {\n    id: id,\n    isOpen: isOpen,\n    target: menuRefs.floating.current,\n    label: props.label,\n    containerRef: props.containerRef,\n    menuAlignment: props.menuAlignment\n  }, props.children), React.createElement(\"div\", {\n    ref: menuRefs.setFloating,\n    className: \"WAChatHeaderMenuButton_HostElement\",\n    ...getMenuFloatingProps()\n  }));\n}\n\nexport { ChatHeaderMenuButton };\n","import { MenuItem } from \"@carbon/react\";\n\nimport React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function ChatHeaderMenuItem({label: label, url: url, isNewTab: isNewTab = true, onClick: onClick, children: children}) {\n  return React.createElement(MenuItem, {\n    label: label,\n    onClick: () => {\n      onClick?.();\n      if (url) {\n        window.open(url, isNewTab ? \"_blank\" : \"_self\");\n      }\n    }\n  }, children);\n}\n\nexport { ChatHeaderMenuItem };\n","import { MenuItemRadioGroup } from \"@carbon/react\";\n\nimport React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function ChatHeaderMenuItemRadioGroup(props) {\n  const {label: label, items: items, defaultSelectedItem: defaultSelectedItem, selectedItem: selectedItem, onChange: onChange} = props;\n  return React.createElement(MenuItemRadioGroup, {\n    label: label,\n    items: items,\n    defaultSelectedItem: defaultSelectedItem,\n    selectedItem: selectedItem,\n    onChange: selectedItem => {\n      if (!selectedItem.preventDefault) {\n        onChange(selectedItem);\n      }\n    },\n    itemToString: menuItem => typeof menuItem === \"string\" ? menuItem : menuItem.label || menuItem.value\n  });\n}\n\nexport { ChatHeaderMenuItemRadioGroup };\n","import { Button } from \"@carbon/react\";\n\nimport { useFloating, useInteractions, useClick, useDismiss } from \"@floating-ui/react\";\n\nimport cx from \"classnames\";\n\nimport React, { useState } from \"react\";\n\nimport { useUUID } from \"../../../shared/hooks/useUUID.js\";\n\nimport { ChatHeaderMenu } from \"./ChatHeaderMenu.js\";\n\nimport { ButtonKindEnum, ButtonSizeEnum } from \"../../../../types/utilities/carbonTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function ChatHeaderOverflowMenu(props) {\n  const [isOpen, setIsOpen] = useState(false);\n  const {refs: menuRefs, context: menuContext} = useFloating({\n    open: isOpen,\n    onOpenChange: isOpen => {\n      setIsOpen(isOpen);\n      if (isOpen) {\n        props.onOpen?.();\n      } else {\n        props.onClose?.();\n      }\n    }\n  });\n  const {getReferenceProps: getMenuReferenceProps, getFloatingProps: getMenuFloatingProps} = useInteractions([ useClick(menuContext), useDismiss(menuContext) ]);\n  const id = useUUID();\n  return React.createElement(\"div\", {\n    ref: menuRefs.setReference,\n    \"aria-owns\": id,\n    ...getMenuReferenceProps()\n  }, React.createElement(Button, {\n    className: cx(\"WACChatHeaderOverflowMenu__Button\", props.className),\n    size: ButtonSizeEnum.MEDIUM,\n    kind: ButtonKindEnum.GHOST,\n    onClick: () => setIsOpen(!isOpen),\n    tooltipPosition: props.tooltipPosition,\n    renderIcon: props.renderIcon,\n    onMouseDown: event => event.preventDefault(),\n    iconDescription: props.iconDescription,\n    hasIconOnly: true,\n    \"aria-label\": props.ariaLabel,\n    \"aria-haspopup\": true,\n    \"aria-expanded\": isOpen,\n    \"aria-controls\": id\n  }), React.createElement(ChatHeaderMenu, {\n    id: id,\n    label: props.ariaLabel,\n    isOpen: isOpen,\n    target: menuRefs.floating.current,\n    containerRef: props.containerRef,\n    menuAlignment: props.menuAlignment\n  }, props.children), React.createElement(\"div\", {\n    ref: menuRefs.setFloating,\n    className: \"WACChatHeaderOverflowMenu__HostElement\",\n    ...getMenuFloatingProps()\n  }));\n}\n\nexport { ChatHeaderOverflowMenu };\n","import { __decorate } from \"tslib\";\n\nimport { LitElement, unsafeCSS, css } from \"lit\";\n\nimport { property } from \"lit/decorators.js\";\n\nimport { carbonElement } from \"../../../decorators/customElement.js\";\n\nimport { WEB_COMPONENT_PREFIX } from \"../../../settings.js\";\n\nimport css_248z from \"./src/chatHeaderTitle.scss.js\";\n\nimport { chatHeaderTitleTemplate } from \"./src/chatHeaderTitle.template.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ let ChatHeaderTitleElement = class ChatHeaderTitleElement extends LitElement {\n  render() {\n    return chatHeaderTitleTemplate(this);\n  }\n};\n\nChatHeaderTitleElement.styles = css`\n    ${unsafeCSS(css_248z)}\n  `;\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderTitleElement.prototype, \"title\", void 0);\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderTitleElement.prototype, \"name\", void 0);\n\nChatHeaderTitleElement = __decorate([ carbonElement(`${WEB_COMPONENT_PREFIX}-chat-header-title`) ], ChatHeaderTitleElement);\n\nexport { ChatHeaderTitleElement };\n","import { html } from \"lit\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function chatHeaderTitleTemplate(customElementClass) {\n  const {title: title, name: name} = customElementClass;\n  return html`<div class=\"WACChatHeaderTitle\">\n    <span className=\"WACChatHeaderTitle__Title\" ?hidden=\"${!title}\"\n      >${title}</span\n    >\n    <span class=\"WACChatHeaderTitle__Name\">${name}</span>\n  </div>`;\n}\n\nexport { chatHeaderTitleTemplate };\n","var css_248z = \"cds-chat-header-title{\\n  text-align:center;\\n}\\n\\n.WACChatHeaderTitle{\\n  overflow:hidden;\\n  font-size:var(--cds-chat-BASE-font-size-med);\\n  font-weight:400;\\n  line-height:var(--cds-chat-BASE-line-height-med);\\n  overflow-wrap:break-word;\\n  text-overflow:ellipsis;\\n  white-space:nowrap;\\n  word-wrap:break-word;\\n}\\n\\n.WACChatHeaderTitle .WACChatHeaderTitle__Title:only-child{\\n  padding-inline-end:0.25rem;\\n}\\n\\n.WACChatHeaderTitle__Name{\\n  font-weight:var(--cds-chat-BASE-weight-semibold);\\n}\";\n\nexport { css_248z as default };\n","import { createComponent } from \"@lit/react\";\n\nimport React from \"react\";\n\nimport { ChatHeaderTitleElement } from \"../../../web-components/components/chatHeader/chatHeaderTitle/cds-aichat-chat-header-title.js\";\n\nimport { WEB_COMPONENT_PREFIX } from \"../../../web-components/settings.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const ChatHeaderTitle = createComponent({\n  tagName: `${WEB_COMPONENT_PREFIX}-chat-header-title`,\n  elementClass: ChatHeaderTitleElement,\n  react: React\n});\n\nexport { ChatHeaderTitle };\n","import \"@carbon/web-components/es-custom/components/ai-label/ai-label-action-button.js\";\n\nimport CDSAILabel from \"@carbon/web-components/es-custom/components/ai-label/ai-label.js\";\n\nimport { createComponent } from \"@lit/react\";\n\nimport React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const AISlug = createComponent({\n  tagName: \"cds-custom-ai-label\",\n  elementClass: CDSAILabel,\n  react: React\n});\n\nexport { AISlug };\n","import \"@carbon/web-components/es-custom/components/slug/index.js\";\n\nimport Close from \"@carbon/icons-react/es/Close.js\";\n\nimport CloseLarge from \"@carbon/icons-react/es/CloseLarge.js\";\n\nimport DownToBottom from \"@carbon/icons-react/es/DownToBottom.js\";\n\nimport Menu from \"@carbon/icons-react/es/Menu.js\";\n\nimport Restart from \"@carbon/icons-react/es/Restart.js\";\n\nimport SidePanelClose from \"@carbon/icons-react/es/SidePanelClose.js\";\n\nimport SubtractLarge from \"@carbon/icons-react/es/SubtractLarge.js\";\n\nimport { MenuItem, Button, MenuItemDivider } from \"@carbon/react\";\n\nimport { AI_LABEL_SIZE } from \"@carbon/web-components/es-custom/components/ai-label/defs.js\";\n\nimport { POPOVER_ALIGNMENT } from \"@carbon/web-components/es-custom/components/popover/defs.js\";\n\nimport cx from \"classnames\";\n\nimport React, { forwardRef, useRef, useState, useContext, useCallback, useImperativeHandle, useEffect, Fragment } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { ChatHeaderObjectType } from \"../../../../types/config/ChatHeaderConfig.js\";\n\nimport { ChatHeaderAvatar } from \"../../../react/components/chatHeader/ChatHeaderAvatar.js\";\n\nimport { ChatHeaderLink } from \"../../../react/components/chatHeader/ChatHeaderLink.js\";\n\nimport { ChatHeaderMenuButton } from \"../../../react/components/chatHeader/ChatHeaderMenuButton.js\";\n\nimport { ChatHeaderMenuItem } from \"../../../react/components/chatHeader/ChatHeaderMenuItem.js\";\n\nimport { ChatHeaderMenuItemRadioGroup } from \"../../../react/components/chatHeader/ChatHeaderMenuItemRadioGroup.js\";\n\nimport { ChatHeaderOverflowMenu } from \"../../../react/components/chatHeader/ChatHeaderOverflowMenu.js\";\n\nimport { ChatHeaderTitle } from \"../../../react/components/chatHeader/ChatHeaderTitle.js\";\n\nimport { HideComponentContext } from \"../../contexts/HideComponentContext.js\";\n\nimport { useLanguagePack } from \"../../hooks/useLanguagePack.js\";\n\nimport { usePrevious } from \"../../hooks/usePrevious.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport actions from \"../../store/actions.js\";\n\nimport { ChatWidthBreakpoint } from \"../../../../types/state/AppState.js\";\n\nimport \"../../utils/constants.js\";\n\nimport { doFocusRef } from \"../../utils/domUtils.js\";\n\nimport { ConfirmModal } from \"../modals/ConfirmModal.js\";\n\nimport WriteableElement from \"../WriteableElement.js\";\n\nimport { AISlug } from \"./AISlug.js\";\n\nimport { ButtonSizeEnum, ButtonKindEnum } from \"../../../../types/utilities/carbonTypes.js\";\n\nimport { MinimizeButtonIconType } from \"../../../../types/config/PublicConfig.js\";\n\nimport { makeTestId, PageObjectId } from \"../../utils/PageObjectId.js\";\n\nimport { WriteableElementName } from \"../../../../types/instance/ChatInstance.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst HEADER_OBJECTS_GAP_MIN_SIZE = 100;\n\nfunction Header(props, ref) {\n  const {displayName: displayName, backContent: backContent, showRestartButton: showRestartButton, showBackButton: showBackButton, useAITheme: useAITheme, labelBackButton: labelBackButton, onClickClose: onClickClose, onClickRestart: onClickRestart, onCloseAndRestart: onCloseAndRestart, onClickBack: onClickBack, overflowItems: overflowItems, overflowClicked: overflowClicked, backButtonType: backButtonType, showCenter: showCenter, hideCloseButton: hideCloseButton, hideCloseAndRestartButton: hideCloseAndRestartButton, brandColor: brandColor = \"primary\", enableChatHeaderConfig: enableChatHeaderConfig, headerAvatarConfig: headerAvatarConfig, testIdPrefix: testIdPrefix} = props;\n  const backButtonRef = useRef();\n  const restartButtonRef = useRef();\n  const closeAndRestartButtonRef = useRef();\n  const closeButtonRef = useRef();\n  const centerObjectsRef = useRef();\n  const centerGapRef = useRef();\n  const overflowRef = useRef();\n  const serviceManager = useServiceManager();\n  const languagePack = useLanguagePack();\n  const publicConfig = useSelector(state => state.config.public);\n  const chatHeaderConfig = useSelector(state => state.chatHeaderState.config);\n  const chatWidthBreakpoint = useSelector(state => state.chatWidthBreakpoint);\n  const maxVisibleHeaderObjects = useSelector(state => state.chatHeaderState.maxVisibleHeaderObjects);\n  const [overflowIsOpen, setOverflowIsOpen] = useState(false);\n  const [confirmModelOpen, setConfirmModelOpen] = useState(false);\n  const [selectedGroupMenuitems, setSelectedGroupMenuItems] = useState({});\n  const [isImageError, setIsImageError] = useState(false);\n  const hasHeaderAvatar = Boolean(headerAvatarConfig) && !isImageError;\n  const isHidden = useContext(HideComponentContext);\n  const prevChatHeaderAvatarURL = usePrevious(headerAvatarConfig?.url);\n  const {headerConfig: headerConfig} = publicConfig;\n  const isWideWidth = chatWidthBreakpoint === ChatWidthBreakpoint.WIDE;\n  const chatHeaderTitle = enableChatHeaderConfig ? chatHeaderConfig?.headerTitle?.title : undefined;\n  const chatHeaderName = enableChatHeaderConfig ? chatHeaderConfig?.headerTitle?.name : undefined;\n  const chatHeaderDisplayName = chatHeaderName || displayName;\n  const closeConfirmModel = useCallback(() => {\n    setConfirmModelOpen(false);\n  }, []);\n  const showCloseAndRestartButton = headerConfig?.showCloseAndRestartButton && !hideCloseAndRestartButton && onCloseAndRestart;\n  const useHideCloseButton = headerConfig?.hideMinimizeButton || hideCloseButton;\n  let closeIcon;\n  let closeReverseIcon = false;\n  let closeIsReversible = true;\n  const minimizeButtonIconType = headerConfig?.minimizeButtonIconType;\n  switch (minimizeButtonIconType) {\n   case MinimizeButtonIconType.CLOSE:\n    closeIcon = React.createElement(CloseLarge, {\n      className: \"WACIcon__Close\",\n      size: 16\n    });\n    break;\n\n   case MinimizeButtonIconType.MINIMIZE:\n    closeIcon = React.createElement(SubtractLarge, {\n      className: \"WACIcon__Subtract\",\n      size: 16\n    });\n    break;\n\n   case MinimizeButtonIconType.SIDE_PANEL_LEFT:\n    closeIsReversible = false;\n    closeIcon = React.createElement(SidePanelClose, {\n      className: \"WACIcon__SidePanelClose\"\n    });\n    break;\n\n   case MinimizeButtonIconType.SIDE_PANEL_RIGHT:\n    closeIsReversible = false;\n    closeReverseIcon = true;\n    closeIcon = React.createElement(SidePanelClose, {\n      className: \"WACIcon__SidePanelClose\"\n    });\n    break;\n\n   default:\n    {\n      closeIcon = React.createElement(SubtractLarge, {\n        className: \"WACIcon__Subtract\",\n        size: 16\n      });\n      break;\n    }\n  }\n  if (showCloseAndRestartButton && showRestartButton) {\n    throw new Error(\"You cannot enable both the restart button and the close-and-restart buttons.\");\n  }\n  const onConfirm = useCallback(() => {\n    setConfirmModelOpen(false);\n    onCloseAndRestart();\n  }, [ onCloseAndRestart ]);\n  useImperativeHandle(ref, () => ({\n    requestFocus: () => {\n      if (closeButtonRef.current) {\n        doFocusRef(closeButtonRef, false, true);\n        return true;\n      }\n      if (backButtonRef.current) {\n        doFocusRef(backButtonRef, false, true);\n        return true;\n      }\n      if (restartButtonRef.current) {\n        doFocusRef(restartButtonRef, false, true);\n        return true;\n      }\n      return false;\n    }\n  }));\n  function getComponentInMenu(item, index, list) {\n    switch (item.type) {\n     case ChatHeaderObjectType.LINK:\n      return React.createElement(ChatHeaderMenuItem, {\n        key: index,\n        label: item.label,\n        url: item.url,\n        isNewTab: item.isNewTab,\n        onClick: () => {\n          doFocusRef(overflowRef);\n        }\n      });\n\n     case ChatHeaderObjectType.BUTTON:\n      return React.createElement(ChatHeaderMenuItem, {\n        key: index,\n        label: item.label,\n        onClick: () => {\n          item.onClick?.();\n          doFocusRef(overflowRef);\n        }\n      });\n\n     case ChatHeaderObjectType.RADIO_GROUP:\n      {\n        const nextObject = list[index + 1];\n        return React.createElement(Fragment, {\n          key: index\n        }, index !== 0 && React.createElement(MenuItemDivider, null), React.createElement(ChatHeaderMenuItemRadioGroup, {\n          label: item.label,\n          items: item.items,\n          defaultSelectedItem: item.defaultSelectedItem,\n          selectedItem: selectedGroupMenuitems[item.label],\n          onChange: selectedItem => {\n            setSelectedGroupMenuItems(prevState => ({\n              ...prevState,\n              [item.label]: selectedItem\n            }));\n            item.onChange?.(selectedItem);\n          }\n        }), Boolean(nextObject) && nextObject.type !== ChatHeaderObjectType.RADIO_GROUP && React.createElement(MenuItemDivider, null));\n      }\n\n     case ChatHeaderObjectType.MENU:\n      return React.createElement(ChatHeaderMenuItem, {\n        key: index,\n        label: item.label\n      }, item.items.filter(menuItem => menuItem.type !== ChatHeaderObjectType.MENU).map(getComponentInMenu));\n\n     default:\n      return null;\n    }\n  }\n  function getComponentInChatHeader(headerObject, index) {\n    switch (headerObject.type) {\n     case ChatHeaderObjectType.LINK:\n      return React.createElement(ChatHeaderLink, {\n        key: index,\n        label: headerObject.label,\n        url: headerObject.url,\n        isNewTab: headerObject.isNewTab\n      });\n\n     case ChatHeaderObjectType.MENU:\n      return React.createElement(ChatHeaderMenuButton, {\n        key: index,\n        label: headerObject.label,\n        menuAlignment: \"bottom-start\"\n      }, headerObject.items.map(getComponentInMenu));\n\n     case ChatHeaderObjectType.BUTTON:\n      return React.createElement(Button, {\n        key: index,\n        kind: ButtonKindEnum.GHOST,\n        size: ButtonSizeEnum.MEDIUM,\n        onClick: headerObject.onClick\n      }, headerObject.label);\n\n     default:\n      return null;\n    }\n  }\n  let leftObjectsLength = 0;\n  let rightObjectsLength = 0;\n  if (enableChatHeaderConfig) {\n    leftObjectsLength = chatHeaderConfig?.left?.length ?? 0;\n    rightObjectsLength = chatHeaderConfig?.right?.length ?? 0;\n  }\n  const isLeftObjectsInOverflow = leftObjectsLength > maxVisibleHeaderObjects;\n  const isRightObjectsInOverflow = rightObjectsLength > maxVisibleHeaderObjects;\n  const hasChatHeaderObjects = leftObjectsLength || rightObjectsLength;\n  const renderChatHeaderObjectsInOverflow = hasChatHeaderObjects && (!isWideWidth || isLeftObjectsInOverflow || isRightObjectsInOverflow);\n  const hasOverflow = Boolean(overflowItems?.length) || renderChatHeaderObjectsInOverflow;\n  const isRTL = document.dir === \"rtl\";\n  let leftChatHeaderComponents = null;\n  let rightChatHeaderComponents = null;\n  let leftChatHeaderMenuComponents = null;\n  let rightChatHeaderMenuComponents = null;\n  if (enableChatHeaderConfig) {\n    leftChatHeaderComponents = chatHeaderConfig?.left?.slice(0, isLeftObjectsInOverflow ? maxVisibleHeaderObjects : undefined).map(getComponentInChatHeader);\n    rightChatHeaderComponents = chatHeaderConfig?.right?.slice(0, isRightObjectsInOverflow ? maxVisibleHeaderObjects : undefined).map(getComponentInChatHeader);\n    leftChatHeaderMenuComponents = isLeftObjectsInOverflow && chatHeaderConfig?.left?.slice(maxVisibleHeaderObjects).map(getComponentInMenu);\n    rightChatHeaderMenuComponents = isRightObjectsInOverflow && chatHeaderConfig?.right?.slice(maxVisibleHeaderObjects).map(getComponentInMenu);\n  }\n  let leftContent;\n  if (hasOverflow) {\n    leftContent = React.createElement(ChatHeaderOverflowMenu, {\n      className: \"WACHeader__OverflowMenu\",\n      renderIcon: overflowIsOpen ? Close : Menu,\n      iconDescription: languagePack.header_overflowMenu_options,\n      ariaLabel: languagePack.components_overflow_ariaLabel,\n      containerRef: overflowRef,\n      tooltipPosition: isRTL ? \"left\" : \"right\",\n      menuAlignment: \"bottom-start\",\n      onOpen: () => {\n        setTimeout(() => {\n          setOverflowIsOpen(true);\n        });\n      },\n      onClose: () => {\n        setOverflowIsOpen(false);\n      }\n    }, overflowItems?.map((item, index) => React.createElement(MenuItem, {\n      key: item,\n      label: item,\n      onClick: () => {\n        doFocusRef(overflowRef);\n        overflowClicked(index);\n      }\n    })), leftChatHeaderMenuComponents, rightChatHeaderMenuComponents);\n  } else if (showBackButton) {\n    leftContent = React.createElement(HeaderButton, {\n      className: \"WACHeader__BackButton\",\n      label: labelBackButton,\n      onClick: onClickBack,\n      buttonRef: backButtonRef,\n      buttonKind: backButtonType,\n      tooltipPosition: isRTL ? \"left\" : \"right\"\n    }, backContent || React.createElement(DownToBottom, null));\n  }\n  useEffect(() => {\n    if (!isWideWidth) {\n      serviceManager.store.dispatch(actions.setMaxVisibleHeaderObjects(0));\n      return undefined;\n    }\n    if (!enableChatHeaderConfig) {\n      return undefined;\n    }\n    const centerResizeObserver = new ResizeObserver(() => {\n      const centerGapElement = centerGapRef.current;\n      if (centerGapElement) {\n        if (centerGapElement.offsetWidth > HEADER_OBJECTS_GAP_MIN_SIZE || centerGapElement.offsetWidth === 0) {\n          let newTotal = Math.floor((centerObjectsRef.current.offsetWidth - HEADER_OBJECTS_GAP_MIN_SIZE) / (HEADER_OBJECTS_GAP_MIN_SIZE * 2));\n          if (newTotal < 0) {\n            newTotal = 0;\n          }\n          setTimeout(() => {\n            serviceManager.store.dispatch(actions.setMaxVisibleHeaderObjects(newTotal));\n          });\n        }\n      }\n    });\n    centerResizeObserver.observe(centerObjectsRef.current);\n    return () => {\n      centerResizeObserver.disconnect();\n    };\n  }, [ isWideWidth, enableChatHeaderConfig, serviceManager ]);\n  useEffect(() => {\n    if (isImageError && prevChatHeaderAvatarURL !== headerAvatarConfig?.url) {\n      setIsImageError(false);\n    }\n  }, [ prevChatHeaderAvatarURL, headerAvatarConfig?.url, isImageError ]);\n  return React.createElement(\"div\", {\n    className: cx(\"WACHeader\", `WAC--${brandColor}Color`, {\n      \"WACHeader--withAvatar\": hasHeaderAvatar\n    })\n  }, React.createElement(\"div\", {\n    className: cx(\"WACHeader--content\", `WAC--${brandColor}Color`),\n    \"data-floating-menu-container\": true\n  }, leftContent && React.createElement(\"div\", {\n    className: \"WACHeader__Buttons WACHeader__LeftButtons\"\n  }, leftContent), showCenter && React.createElement(\"div\", {\n    className: \"WACHeader__CenterContainer\"\n  }, hasHeaderAvatar && React.createElement(ChatHeaderAvatar, {\n    url: headerAvatarConfig.url,\n    corners: headerAvatarConfig.corners,\n    alt: languagePack.header_ariaBotAvatar,\n    onError: () => setIsImageError(true)\n  }), (chatHeaderTitle || chatHeaderDisplayName) && React.createElement(\"div\", {\n    className: \"WACHeader__TitleContainer\"\n  }, React.createElement(ChatHeaderTitle, {\n    title: chatHeaderTitle,\n    name: chatHeaderDisplayName\n  })), isWideWidth && Boolean(leftObjectsLength) && React.createElement(\"div\", {\n    className: \"WACHeader__Separator\"\n  }), React.createElement(\"div\", {\n    ref: centerObjectsRef,\n    className: \"WACHeader__HeaderObjects\"\n  }, isWideWidth && Boolean(leftObjectsLength) && React.createElement(\"div\", {\n    className: \"WACHeader__LeftItems\"\n  }, leftChatHeaderComponents), React.createElement(\"div\", {\n    ref: centerGapRef,\n    className: \"WACHeader__CenterGap\"\n  }), isWideWidth && Boolean(rightObjectsLength) && React.createElement(\"div\", {\n    className: \"WACHeader__RightItems\"\n  }, rightChatHeaderComponents))), React.createElement(\"div\", {\n    className: \"WACHeader__Buttons WACHeader__RightButtons\"\n  }, useAITheme && React.createElement(AISlug, {\n    className: \"WACHeader__Slug\",\n    size: AI_LABEL_SIZE.EXTRA_SMALL,\n    alignment: isRTL ? POPOVER_ALIGNMENT.BOTTOM_LEFT : POPOVER_ALIGNMENT.BOTTOM_RIGHT\n  }, React.createElement(\"div\", {\n    slot: \"body-text\"\n  }, React.createElement(\"h4\", {\n    className: \"WACHeader__Slug-title\"\n  }, languagePack.ai_slug_title), React.createElement(\"div\", {\n    className: \"WACHeader__Slug-description\"\n  }, React.createElement(\"div\", null, languagePack.ai_slug_description), !isHidden && React.createElement(WriteableElement, {\n    slotName: WriteableElementName.AI_TOOLTIP_AFTER_DESCRIPTION_ELEMENT,\n    id: `aiTooltipAfterDescription${serviceManager.namespace.suffix}`\n  })))), showRestartButton && React.createElement(HeaderButton, {\n    className: \"WACHeader__RestartButton\",\n    label: languagePack.buttons_restart,\n    onClick: onClickRestart,\n    buttonRef: restartButtonRef,\n    tooltipPosition: isRTL ? \"right\" : \"left\"\n  }, React.createElement(Restart, null)), !useHideCloseButton && React.createElement(HeaderButton, {\n    className: cx(\"WACHeader__CloseButton\", {\n      WACReverseIcon: closeReverseIcon\n    }),\n    isReversible: closeIsReversible,\n    label: languagePack.launcher_isOpen,\n    onClick: async () => {\n      onClickClose();\n    },\n    buttonRef: closeButtonRef,\n    tooltipPosition: isRTL ? \"right\" : \"left\",\n    testId: makeTestId(PageObjectId.CLOSE_CHAT, testIdPrefix)\n  }, closeIcon), showCloseAndRestartButton && React.createElement(HeaderButton, {\n    className: \"WACHeader__CloseAndRestartButton\",\n    label: languagePack.header_ariaCloseRestart,\n    onClick: () => setConfirmModelOpen(true),\n    buttonRef: closeAndRestartButtonRef,\n    tooltipPosition: isRTL ? \"right\" : \"left\"\n  }, React.createElement(CloseLarge, {\n    className: \"WACIcon__Close\"\n  }))), confirmModelOpen && React.createElement(ConfirmModal, {\n    title: languagePack.closeAndRestartModal_title,\n    message: languagePack.closeAndRestartModal_message,\n    onConfirm: onConfirm,\n    onCancel: closeConfirmModel,\n    cancelButtonLabel: languagePack.closeAndRestartModal_cancel,\n    confirmButtonLabel: languagePack.closeAndRestartModal_confirm,\n    modalAnnounceMessage: languagePack.closeAndRestartModal_message,\n    serviceManager: serviceManager\n  })));\n}\n\nfunction HeaderButton({onClick: onClick, buttonRef: buttonRef, label: label, className: className, children: children, buttonKind: buttonKind, isReversible: isReversible = true, tooltipPosition: tooltipPosition, testId: testId}) {\n  return React.createElement(Button, {\n    ref: buttonRef,\n    className: cx(className, {\n      WACDirectionHasReversibleSVG: isReversible\n    }),\n    onClick: onClick,\n    hasIconOnly: true,\n    iconDescription: label,\n    size: ButtonSizeEnum.MEDIUM,\n    kind: buttonKind || ButtonKindEnum.GHOST,\n    tooltipPosition: tooltipPosition,\n    \"data-testid\": testId\n  }, children);\n}\n\nconst HeaderExport = React.memo(forwardRef(Header));\n\nexport { HeaderExport as Header };\n","import React from \"react\";\n\nimport { isElement, isInputNode, isTextAreaNode, isImageNode, isTextNode } from \"../../utils/domUtils.js\";\n\nimport VisuallyHidden from \"../util/VisuallyHidden.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst ANNOUNCE_INPUT_TYPES = new Set([ \"button\", \"date\", \"datetime-local\", \"email\", \"file\", \"month\", \"number\", \"range\", \"reset\", \"search\", \"submit\", \"tel\", \"text\", \"time\", \"url\", \"week\" ]);\n\nconst ANNOUNCE_NODE_EXCLUDE_ATTRIBUTE = \"data-wac-exclude-node-read\";\n\nclass AriaAnnouncerComponent extends React.PureComponent {\n  constructor() {\n    super(...arguments);\n    this.ref1 = React.createRef();\n    this.ref2 = React.createRef();\n    this.useRef1 = true;\n    this.doAnnouncements = () => {\n      const strings = [];\n      this.pendingValues.forEach(elementToAnnounce => {\n        if (typeof elementToAnnounce === \"string\") {\n          strings.push(elementToAnnounce);\n        } else {\n          nodeToText(elementToAnnounce, strings);\n        }\n      });\n      const useElement = this.useRef1 ? this.ref1.current : this.ref2.current;\n      if (useElement) {\n        useElement.innerText = strings.join(\" \");\n        const clearElement = this.useRef1 ? this.ref2.current : this.ref1.current;\n        clearElement.innerHTML = \"\";\n      }\n      this.useRef1 = !this.useRef1;\n      this.pendingValues = null;\n    };\n  }\n  announceValue(value) {\n    if (!value) {\n      return;\n    }\n    if (!this.pendingValues) {\n      this.pendingValues = [];\n      setTimeout(this.doAnnouncements, 250);\n    }\n    if (typeof value === \"string\" || hasNodeType(value)) {\n      this.pendingValues.push(value);\n    } else if (value.messageID) {\n      const formattedMessage = this.props.intl.formatMessage({\n        id: value.messageID\n      }, value.messageValues);\n      this.pendingValues.push(formattedMessage);\n    } else {\n      this.pendingValues.push(value.messageText);\n    }\n  }\n  render() {\n    return React.createElement(VisuallyHidden, {\n      className: \"WACAriaAnnouncer\"\n    }, React.createElement(\"div\", {\n      ref: this.ref1,\n      \"aria-live\": \"polite\"\n    }), React.createElement(\"div\", {\n      ref: this.ref2,\n      \"aria-live\": \"polite\"\n    }));\n  }\n}\n\nfunction nodeToText(node, strings) {\n  if (isElement(node)) {\n    if (window.getComputedStyle(node).display !== \"none\" && node.getAttribute(\"aria-hidden\") !== \"true\" && !node.hasAttribute(ANNOUNCE_NODE_EXCLUDE_ATTRIBUTE)) {\n      trimAndPush(node.getAttribute(\"aria-label\"), strings);\n      if (isInputNode(node) && ANNOUNCE_INPUT_TYPES.has(node.type.toLowerCase())) {\n        if (node.value === \"\") {\n          trimAndPush(node.placeholder, strings);\n        } else {\n          trimAndPush(node.value, strings);\n        }\n      } else if (isTextAreaNode(node)) {\n        if (node.value === \"\") {\n          trimAndPush(node.placeholder, strings);\n        }\n      } else if (isImageNode(node)) {\n        trimAndPush(node.alt, strings);\n      }\n      if (node.shadowRoot) {\n        node.shadowRoot.childNodes?.forEach(childNode => {\n          nodeToText(childNode, strings);\n        });\n      }\n      if (node.childNodes) {\n        node.childNodes.forEach(childNode => {\n          nodeToText(childNode, strings);\n        });\n      }\n    }\n  } else if (isTextNode(node)) {\n    trimAndPush(node.data, strings);\n  }\n}\n\nfunction trimAndPush(value, strings) {\n  if (value) {\n    value = value.trim();\n    if (value) {\n      strings.push(value.replaceAll(\"\\n\", \" \"));\n    }\n  }\n}\n\nfunction hasNodeType(value) {\n  return value.nodeType !== undefined;\n}\n\nexport { AriaAnnouncerComponent, nodeToText };\n","import React, { forwardRef, useRef, useImperativeHandle, useCallback } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { Header as HeaderExport } from \"../header/Header.js\";\n\nimport { OverlayPanelName } from \"../OverlayPanel.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function HomeScreenHeader(props, ref) {\n  const {brandColor: brandColor, onClose: onClose, onRestart: onRestart, onCloseAndRestart: onCloseAndRestart} = props;\n  const showRestartButton = useSelector(state => state.config.public.showRestartButton || state.config.public.headerConfig?.showRestartButton);\n  const showBackButton = useSelector(state => state.persistedToBrowserStorage.chatState.homeScreenState.showBackToBot);\n  const displayName = useSelector(state => state.headerDisplayName);\n  const customMenuOptions = useSelector(state => state.customMenuOptions);\n  const useAITheme = useSelector(state => state.theme.useAITheme);\n  const headerRef = useRef();\n  useImperativeHandle(ref, () => headerRef.current);\n  const hideCloseAndRestartButton = !showBackButton;\n  const overflowClicked = useCallback(index => {\n    const {handler: handler} = customMenuOptions[index];\n    handler();\n  }, [ customMenuOptions ]);\n  const overflowItems = customMenuOptions?.map(option => option.text);\n  return React.createElement(\"div\", {\n    className: \"WACHomeScreenHeader\"\n  }, React.createElement(HeaderExport, {\n    ref: headerRef,\n    displayName: displayName,\n    showCenter: true,\n    showRestartButton: showRestartButton,\n    hideCloseAndRestartButton: hideCloseAndRestartButton,\n    onClickRestart: onRestart,\n    onClickClose: onClose,\n    onCloseAndRestart: onCloseAndRestart,\n    overflowClicked: overflowClicked,\n    overflowItems: overflowItems,\n    useAITheme: useAITheme,\n    brandColor: brandColor,\n    testIdPrefix: OverlayPanelName.HOME_SCREEN\n  }));\n}\n\nconst HomeScreenHeaderExport = React.memo(forwardRef(HomeScreenHeader));\n\nexport { HomeScreenHeaderExport as HomeScreenHeader };\n","import dayjs from \"dayjs\";\n\nimport enLocaleData from \"dayjs/locale/en.js\";\n\nimport IntlMessageFormat from \"intl-messageformat\";\n\nimport React from \"react\";\n\nimport { consoleError } from \"./miscUtils.js\";\n\nimport \"../../../types/instance/apiTypes.js\";\n\nimport enLanguagePack from \"../../languages/en.json.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const locales = {\n  ar: () => import(\"dayjs/locale/ar.js\"),\n  \"ar-dz\": () => import(\"dayjs/locale/ar-dz.js\"),\n  \"ar-kw\": () => import(\"dayjs/locale/ar-kw.js\"),\n  \"ar-ly\": () => import(\"dayjs/locale/ar-ly.js\"),\n  \"ar-ma\": () => import(\"dayjs/locale/ar-ma.js\"),\n  \"ar-sa\": () => import(\"dayjs/locale/ar-sa.js\"),\n  \"ar-tn\": () => import(\"dayjs/locale/ar-tn.js\"),\n  cs: () => import(\"dayjs/locale/cs.js\"),\n  de: () => import(\"dayjs/locale/de.js\"),\n  \"de-at\": () => import(\"dayjs/locale/de-at.js\"),\n  \"de-ch\": () => import(\"dayjs/locale/de-ch.js\"),\n  en: () => import(\"dayjs/locale/en.js\"),\n  \"en-au\": () => import(\"dayjs/locale/en-au.js\"),\n  \"en-ca\": () => import(\"dayjs/locale/en-ca.js\"),\n  \"en-gb\": () => import(\"dayjs/locale/en-gb.js\"),\n  \"en-ie\": () => import(\"dayjs/locale/en-ie.js\"),\n  \"en-il\": () => import(\"dayjs/locale/en-il.js\"),\n  \"en-nz\": () => import(\"dayjs/locale/en-nz.js\"),\n  es: () => import(\"dayjs/locale/es.js\"),\n  \"es-do\": () => import(\"dayjs/locale/es-do.js\"),\n  \"es-us\": () => import(\"dayjs/locale/es-us.js\"),\n  nl: () => import(\"dayjs/locale/nl.js\"),\n  fr: () => import(\"dayjs/locale/fr.js\"),\n  \"fr-ca\": () => import(\"dayjs/locale/fr-ca.js\"),\n  \"fr-ch\": () => import(\"dayjs/locale/fr-ch.js\"),\n  it: () => import(\"dayjs/locale/it.js\"),\n  \"it-ch\": () => import(\"dayjs/locale/it-ch.js\"),\n  ja: () => import(\"dayjs/locale/ja.js\"),\n  ko: () => import(\"dayjs/locale/ko.js\"),\n  pt: () => import(\"dayjs/locale/pt.js\"),\n  \"pt-br\": () => import(\"dayjs/locale/pt-br.js\"),\n  zh: () => import(\"dayjs/locale/zh-cn.js\"),\n  \"zh-cn\": () => import(\"dayjs/locale/zh-cn.js\"),\n  \"zh-tw\": () => import(\"dayjs/locale/zh-tw.js\"),\n  \"zh-mo\": () => import(\"dayjs/locale/zh-tw.js\"),\n  \"zh-hk\": () => import(\"dayjs/locale/zh-tw.js\")\n};\n\nfunction isSupportedLocale(locale, object) {\n  if (!locale) {\n    return null;\n  }\n  locale = locale.toLowerCase().replace(/_/g, \"-\");\n  if (object[locale]) {\n    return locale;\n  }\n  const language = locale.substring(0, 2);\n  if (object[language]) {\n    return language;\n  }\n  return null;\n}\n\nfunction findSupportedKey(requestedLocale, object, objectType) {\n  const requestedSupported = isSupportedLocale(requestedLocale, object);\n  if (requestedSupported) {\n    return requestedSupported;\n  }\n  if (requestedLocale) {\n    const keyList = JSON.stringify(Object.keys(object));\n    consoleError(`The requested locale \"${requestedLocale}\" does not contain a supported ${objectType}. We are defaulting to \"en\". The supported values are ${keyList}.`);\n  }\n  return \"en\";\n}\n\nasync function loadLocale(requestedLocale) {\n  try {\n    const localeKey = findSupportedKey(requestedLocale, locales, \"locale\");\n    const localeModule = await locales[localeKey]();\n    if (localeModule) {\n      return localeModule.default;\n    }\n    consoleError(`The locale data for \"${localeKey}\" did not load. The application will default to \"en\".`);\n  } catch (error) {\n    consoleError(`An error occurred loading the locale data for \"${requestedLocale}\". The application will default to \"en\".`, error);\n  }\n  return enLocaleData;\n}\n\nasync function loadLanguagePack(providedLanguagePack) {\n  if (providedLanguagePack) {\n    return fillWithEnglish(providedLanguagePack);\n  }\n  return enLanguagePack;\n}\n\nfunction fillWithEnglish(languagePack) {\n  return {\n    ...enLanguagePack,\n    ...languagePack\n  };\n}\n\nfunction handleBTag(chunks) {\n  return React.createElement(\"b\", null, chunks);\n}\n\nfunction handleBRTag() {\n  return React.createElement(\"br\", null);\n}\n\nfunction addHTMLSupport(values) {\n  values.b = handleBTag;\n  values.br = handleBRTag;\n  return values;\n}\n\nasync function loadDayjsLocale(locale) {\n  if (!dayjs.Ls[locale]) {\n    const previousLocale = dayjs.locale();\n    const localePack = await loadLocale(locale);\n    dayjs.locale(localePack);\n    dayjs.locale(previousLocale);\n    const isLoaded = Boolean(dayjs.Ls[locale]);\n    if (!isLoaded && locale.length === 2) {\n      throw Error(\"Locale is not recognized.\");\n    } else if (!isLoaded) {\n      return loadDayjsLocale(locale.substring(0, 2));\n    }\n  }\n  return locale;\n}\n\nfunction formatMessage(intl, id, values) {\n  return intl.formatMessage({\n    id: id\n  }, values);\n}\n\nfunction createEnglishFormat(key) {\n  return new IntlMessageFormat(enLanguagePack[key], \"en-US\");\n}\n\nexport { addHTMLSupport, createEnglishFormat, formatMessage, loadDayjsLocale, loadLanguagePack, loadLocale };\n","import { useContext } from \"react\";\n\nimport { LanguagePackContext } from \"../contexts/LanguagePackContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function useLanguagePack() {\n  return useContext(LanguagePackContext);\n}\n\nexport { useLanguagePack };\n","import cx from \"classnames\";\n\nimport React from \"react\";\n\nimport { HideComponentContext } from \"../../contexts/HideComponentContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function HideComponent(props) {\n  const {hidden: hidden, children: children, className: className, ...htmlAttributes} = props;\n  return React.createElement(HideComponentContext.Provider, {\n    value: hidden\n  }, React.createElement(\"div\", {\n    className: cx(className, {\n      WAC__hidden: hidden\n    }),\n    ...htmlAttributes\n  }, children));\n}\n\nexport { HideComponent };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const WindowSizeContext = React.createContext(null);\n\nexport { WindowSizeContext };\n","export { CarbonTheme } from \"../config/PublicConfig.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ var CarbonThemeClassNames;\n\n(function(CarbonThemeClassNames) {\n  CarbonThemeClassNames[\"WHITE\"] = \"cds--white\";\n  CarbonThemeClassNames[\"G10\"] = \"cds--g10\";\n  CarbonThemeClassNames[\"G90\"] = \"cds--g90\";\n  CarbonThemeClassNames[\"G100\"] = \"cds--g100\";\n})(CarbonThemeClassNames || (CarbonThemeClassNames = {}));\n\nvar ButtonKindEnum;\n\n(function(ButtonKindEnum) {\n  ButtonKindEnum[\"PRIMARY\"] = \"primary\";\n  ButtonKindEnum[\"SECONDARY\"] = \"secondary\";\n  ButtonKindEnum[\"DANGER\"] = \"danger\";\n  ButtonKindEnum[\"GHOST\"] = \"ghost\";\n  ButtonKindEnum[\"DANGER_PRIMARY\"] = \"danger--primary\";\n  ButtonKindEnum[\"DANGER_GHOST\"] = \"danger--ghost\";\n  ButtonKindEnum[\"DANGER_TERTIARY\"] = \"danger--tertiary\";\n  ButtonKindEnum[\"TERTIARY\"] = \"tertiary\";\n})(ButtonKindEnum || (ButtonKindEnum = {}));\n\nvar ButtonSizeEnum;\n\n(function(ButtonSizeEnum) {\n  ButtonSizeEnum[\"SMALL\"] = \"sm\";\n  ButtonSizeEnum[\"MEDIUM\"] = \"md\";\n  ButtonSizeEnum[\"LARGE\"] = \"lg\";\n  ButtonSizeEnum[\"XLARGE\"] = \"xl\";\n  ButtonSizeEnum[\"XXLARGE\"] = \"2xl\";\n})(ButtonSizeEnum || (ButtonSizeEnum = {}));\n\nexport { ButtonKindEnum, ButtonSizeEnum, CarbonThemeClassNames };\n","import { useContext } from \"react\";\n\nimport { ServiceManagerContext } from \"../contexts/ServiceManagerContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function useServiceManager() {\n  return useContext(ServiceManagerContext);\n}\n\nexport { useServiceManager };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const ModalPortalRootContext = React.createContext(null);\n\nexport { ModalPortalRootContext };\n","import { v4 } from \"uuid\";\n\nexport { UUIDType } from \"./UUIDType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function uuid(_type) {\n  return v4();\n}\n\nexport { uuid };\n","import React, { useContext, useEffect } from \"react\";\n\nimport { AriaAnnouncerContext } from \"../../contexts/AriaAnnouncerContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function AriaLiveMessage(props) {\n  const ariaAnnouncer = useContext(AriaAnnouncerContext);\n  useEffect(() => {\n    ariaAnnouncer(props.message);\n  }, [ ariaAnnouncer, props.message ]);\n  return React.createElement(\"div\", null);\n}\n\nconst AriaLiveMessageExport = React.memo(AriaLiveMessage);\n\nexport { AriaLiveMessageExport as AriaLiveMessage };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction withoutEmptyStarters(config) {\n  let newConfig = config;\n  if (config?.starters?.buttons?.length) {\n    newConfig = {\n      allow_return: true,\n      ...config,\n      starters: {\n        ...config.starters,\n        buttons: config.starters.buttons.filter(button => Boolean(button.label?.trim()))\n      }\n    };\n    if (!newConfig?.starters?.buttons?.length) {\n      newConfig.starters.is_on = false;\n    }\n  }\n  return newConfig;\n}\n\nexport { withoutEmptyStarters };\n","import { createIntl } from \"react-intl\";\n\nimport actions from \"../store/actions.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function setIntl(serviceManager, locale, messages) {\n  serviceManager.intl = createIntl({\n    locale: locale,\n    messages: messages\n  });\n  serviceManager.store.dispatch(actions.setAppStateValue(\"languagePack\", messages));\n  serviceManager.store.dispatch(actions.setAppStateValue(\"locale\", locale));\n}\n\nexport { setIntl };\n","import dayjs from \"dayjs\";\n\nimport cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport actions from \"./store/actions.js\";\n\nimport { selectInputState } from \"./store/selectors.js\";\n\nimport \"../../types/state/AppState.js\";\n\nimport { withoutEmptyStarters } from \"./utils/homeScreenUtils.js\";\n\nimport { loadLocale, loadLanguagePack } from \"./utils/languages.js\";\n\nimport { consoleDebug, debugLog, consoleError, consoleWarn } from \"./utils/miscUtils.js\";\n\nimport { ViewChangeReason, MessageSendSource } from \"../../types/events/eventBusTypes.js\";\n\nimport { setIntl } from \"./utils/intlUtils.js\";\n\nimport { ViewType } from \"../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function createChatInstance({serviceManager: serviceManager, callRender: callRender}) {\n  let wasRendered = false;\n  function getMainWindow() {\n    return {\n      addClassName: name => serviceManager.mainWindow?.addClassName(name),\n      removeClassName: name => serviceManager.mainWindow?.removeClassName(name)\n    };\n  }\n  function getMessageInput() {\n    return {\n      getHTMLElement: () => serviceManager.mainWindow?.getMessageInput()?.getHTMLElement(),\n      setValue: value => serviceManager.mainWindow?.getMessageInput()?.setValue(value),\n      setEnableEnterKey: value => serviceManager.mainWindow?.getMessageInput()?.setEnableEnterKey(value),\n      addChangeListener: listener => serviceManager.mainWindow?.getMessageInput()?.addChangeListener(listener),\n      removeChangeListener: listener => serviceManager.mainWindow?.getMessageInput()?.removeChangeListener(listener)\n    };\n  }\n  function getHomeScreenInput() {\n    return {\n      getHTMLElement: () => serviceManager.mainWindow?.getHomeScreenInput()?.getHTMLElement(),\n      setValue: value => serviceManager.mainWindow?.getHomeScreenInput()?.setValue(value),\n      setEnableEnterKey: value => serviceManager.mainWindow?.getHomeScreenInput()?.setEnableEnterKey(value),\n      addChangeListener: listener => serviceManager.mainWindow?.getHomeScreenInput()?.addChangeListener(listener),\n      removeChangeListener: listener => serviceManager.mainWindow?.getHomeScreenInput()?.removeChangeListener(listener)\n    };\n  }\n  let instance = {\n    render: () => {\n      if (wasRendered) {\n        consoleError(\"The render function has already been called!\");\n        return Promise.resolve(instance);\n      }\n      wasRendered = true;\n      return callRender();\n    },\n    on: handlers => {\n      serviceManager.eventBus.on(handlers);\n      return instance;\n    },\n    off: handlers => {\n      serviceManager.eventBus.off(handlers);\n      return instance;\n    },\n    once: handlers => {\n      serviceManager.eventBus.once(handlers);\n      return instance;\n    },\n    updateLanguagePack: newPack => {\n      debugLog(\"Called instance.updateLanguagePack\", newPack);\n      return serviceManager.actions.updateLanguagePack(newPack);\n    },\n    updateLocale: newLocale => {\n      debugLog(\"Called instance.updateLocale\", newLocale);\n      const localePromise = loadLocale(newLocale);\n      const languagePackPromise = loadLanguagePack(serviceManager.store.getState().languagePack);\n      return Promise.all([ localePromise, languagePackPromise ]).then(([localePack, languagePack]) => {\n        dayjs.locale(localePack);\n        setIntl(serviceManager, localePack.name, languagePack);\n        serviceManager.messageService.pendingLocale = true;\n        serviceManager.messageService.localeIsExplicit = true;\n      });\n    },\n    updateCSSVariables: (variables, whiteLabelVariables) => {\n      debugLog(\"Called instance.updateCSSVariables\", variables);\n      return serviceManager.actions.updateCSSVariables(variables, whiteLabelVariables);\n    },\n    send: async (message, options) => {\n      debugLog(\"Called instance.send\", message, options);\n      if (selectInputState(serviceManager.store.getState()).isReadonly) {\n        throw new Error(\"You are unable to send messages in read only mode.\");\n      }\n      return serviceManager.actions.send(message, MessageSendSource.INSTANCE_SEND, options);\n    },\n    doAutoScroll: (options = {}) => {\n      debugLog(\"Called instance.doAutoScroll\", options);\n      serviceManager.mainWindow?.doAutoScroll?.(options);\n    },\n    destroy: () => {\n      debugLog(\"Called instance.destroy\");\n      serviceManager.store.dispatch(actions.setAppStateValue(\"isDestroyed\", true));\n      serviceManager.container?.remove();\n      instance = undefined;\n    },\n    updateAssistantInputFieldVisibility: isVisible => {\n      debugLog(\"Called instance.updateAssistantInputFieldVisibility\", isVisible);\n      serviceManager.store.dispatch(actions.updateInputState({\n        fieldVisible: isVisible\n      }, false));\n    },\n    updateInputIsDisabled: isDisabled => {\n      debugLog(\"Called instance.updateInputIsDisabled\", isDisabled);\n      serviceManager.store.dispatch(actions.updateInputState({\n        isReadonly: isDisabled\n      }, false));\n    },\n    updateBotUnreadIndicatorVisibility: isVisible => {\n      debugLog(\"Called instance.updateBotUnreadIndicatorVisibility\", isVisible);\n      serviceManager.store.dispatch(actions.setLauncherProperty(\"showUnreadIndicator\", isVisible));\n    },\n    changeView: async newView => {\n      debugLog(\"Called instance.changeView\", newView);\n      let issueWithNewView = false;\n      if (!wasRendered) {\n        consoleError(`You tried to call \"changeView\" without ever having called the \"render\" method. There is no view to change!`);\n        issueWithNewView = true;\n      }\n      const viewTypeValues = Object.values(ViewType);\n      if (typeof newView === \"string\") {\n        if (!viewTypeValues.includes(newView)) {\n          consoleError(`You tried to change the view but the view you specified is not a valid view name. Please use` + ` the valid view names; ${viewTypeValues.join(\", \")}.`);\n          issueWithNewView = true;\n        }\n      } else if (typeof newView === \"object\") {\n        Object.keys(newView).forEach(key => {\n          if (!viewTypeValues.includes(key)) {\n            consoleError(`You tried to change the state of multiple views by providing an object, however you included the key` + ` \"${key}\" within the object which is not a valid view name. Please use the valid view names; ` + `${viewTypeValues.join(\", \")}.`);\n            issueWithNewView = true;\n          }\n        });\n      } else {\n        consoleError(\"You tried to change the view but the view you provided was not a string or an object. You can either change\" + ' to one of the supported views by providing a string, ex. \"launcher\", \"mainWindow\", or \"tour\". Or you can' + ' change the state of multiple views by providing an object, ex. { \"launcher\": true, \"mainWindow\": false,' + ' \"tour\": true }. Please use one of these supported options.');\n        issueWithNewView = true;\n      }\n      if (!issueWithNewView) {\n        await serviceManager.actions.changeView(newView, {\n          viewChangeReason: ViewChangeReason.CALLED_CHANGE_VIEW\n        });\n      }\n    },\n    notifications: {\n      addNotification: notification => {\n        debugLog(\"Called instance.addNotification\", notification);\n        serviceManager.actions.addNotification(notification);\n      },\n      removeNotifications: groupID => {\n        debugLog(\"Called instance.removeNotifications\", groupID);\n        serviceManager.actions.removeNotification(groupID);\n      },\n      removeAllNotifications: () => {\n        debugLog(\"Called instance.removeAllNotifications\");\n        serviceManager.actions.removeAllNotifications();\n      }\n    },\n    updateMainHeaderTitle: title => {\n      debugLog(\"Called instance.updateMainHeaderTitle\", title);\n      if (!title) {\n        title = null;\n      }\n      serviceManager.actions.updateMainHeaderTitle(title);\n    },\n    updateHomeScreenConfig: homeScreenConfig => {\n      debugLog(\"Called instance.updateHomeScreenConfig\", homeScreenConfig);\n      const homeScreenConfigClone = cloneDeep(homeScreenConfig);\n      const isAIThemeEnabled = serviceManager.store.getState().theme.useAITheme;\n      if (isAIThemeEnabled) {\n        if (homeScreenConfig?.background) {\n          consoleWarn(\"The home screen background can not be changed when the AI theme is enabled.\");\n          delete homeScreenConfigClone.background;\n        }\n      }\n      serviceManager.actions.updateHomeScreenConfig(withoutEmptyStarters(homeScreenConfigClone));\n    },\n    getState: () => serviceManager.actions.getPublicWebChatState(),\n    writeableElements: createWriteableElementsProxy(serviceManager),\n    scrollToMessage: (messageID, animate) => {\n      debugLog(\"Called instance.scrollToMessage\", messageID, animate);\n      serviceManager.mainWindow?.doScrollToMessage(messageID, animate);\n    },\n    updateLauncherConfig: config => serviceManager.actions.updateLauncherConfig(config),\n    customPanels: serviceManager.customPanelManager,\n    updateCustomMenuOptions: options => {\n      debugLog(\"Called instance.updateCustomMenuOptions\", options);\n      serviceManager.store.dispatch(actions.setAppStateValue(\"customMenuOptions\", options));\n    },\n    restartConversation: async () => {\n      debugLog(\"Called instance.restartConversation\");\n      return serviceManager.actions.restartConversation();\n    },\n    agentEndConversation: () => {\n      debugLog(\"Called instance.agentEndConversation\");\n      consoleWarn(`The instance.agentEndConversation method is deprecated. Use instance.serviceDesk.endConversation instead.`);\n      return serviceManager.actions.agentEndConversation(false);\n    },\n    updateIsTypingCounter(direction) {\n      debugLog(\"Called instance.updateIsTypingCounter\", direction);\n      const {store: store} = serviceManager;\n      if (direction === \"increase\") {\n        store.dispatch(actions.addIsTypingCounter(1));\n      } else if (direction === \"decrease\") {\n        if (store.getState().botMessageState.isTypingCounter <= 0) {\n          consoleError(\"You cannot decrease the typing counter when it is already <= 0\");\n          return;\n        }\n        store.dispatch(actions.addIsTypingCounter(-1));\n      } else {\n        consoleError(`[updateIsTypingCounter] Invalid direction: ${direction}. Valid values are \"increase\" and \"decrease\".`);\n      }\n    },\n    updateIsLoadingCounter(direction) {\n      debugLog(\"Called instance.updateIsLoadingCounter\", direction);\n      const {store: store} = serviceManager;\n      if (direction === \"increase\") {\n        store.dispatch(actions.addIsLoadingCounter(1));\n      } else if (direction === \"decrease\") {\n        if (store.getState().botMessageState.isLoadingCounter <= 0) {\n          consoleError(\"You cannot decrease the loading counter when it is already <= 0\");\n          return;\n        }\n        store.dispatch(actions.addIsLoadingCounter(-1));\n      } else {\n        consoleError(`[updateIsLoadingCounter] Invalid direction: ${direction}. Valid values are \"increase\" and \"decrease\".`);\n      }\n    },\n    updateIsChatLoadingCounter(direction) {\n      debugLog(\"Called instance.updateIsChatLoadingCounter\", direction);\n      const {store: store} = serviceManager;\n      if (direction === \"increase\") {\n        store.dispatch(actions.addIsHydratingCounter(1));\n      } else if (direction === \"decrease\") {\n        if (store.getState().botMessageState.isHydratingCounter <= 0) {\n          consoleError(\"You cannot decrease the hydrating counter when it is already <= 0\");\n          return;\n        }\n        store.dispatch(actions.addIsHydratingCounter(-1));\n      } else {\n        consoleError(`[updateIsChatLoadingCounter] Invalid direction: ${direction}. Valid values are \"increase\" and \"decrease\".`);\n      }\n    },\n    updateHeaderConfig: config => {\n      const configCopy = cloneDeep(config);\n      serviceManager.store.dispatch(actions.updateChatHeaderConfig(configCopy));\n    },\n    updateMainHeaderAvatar: config => {\n      serviceManager.store.dispatch(actions.updateMainHeaderAvatar(config));\n    },\n    updateBotName: name => serviceManager.actions.updateBotName(name),\n    updateBotAvatarURL: url => serviceManager.actions.updateBotAvatarURL(url),\n    elements: {\n      getMainWindow: getMainWindow,\n      getMessageInput: getMessageInput,\n      getHomeScreenInput: getHomeScreenInput\n    },\n    tours: {\n      startTour: async message => {\n        debugLog(\"Called instance.tours.startTour\", message);\n        await serviceManager.actions.send(message, MessageSendSource.START_TOUR_METHOD, {\n          skipTourCard: true\n        });\n      },\n      endTour: async () => {\n        debugLog(\"Called instance.tours.endTour\");\n        serviceManager.actions.endTour({\n          viewChangeReason: ViewChangeReason.CALLED_END_TOUR\n        });\n      },\n      goToNextStep: async () => {\n        debugLog(\"Called instance.tours.goToNextStep\");\n        serviceManager.actions.changeStepInTour({\n          nextStep: true\n        });\n      },\n      goToStep: async stepId => {\n        debugLog(\"Called instance.tours.goToStep\", stepId);\n        serviceManager.actions.goToSpecificTourStep(stepId);\n      }\n    },\n    messaging: {\n      addMessage: (message, options = {}) => {\n        debugLog(\"Called instance.messaging.addMessage\", message, options);\n        serviceManager.messageService.messageLoadingManager.end();\n        return serviceManager.actions.receive(message, options?.isLatestWelcomeNode ?? false, null, {\n          disableFadeAnimation: options?.disableFadeAnimation\n        });\n      },\n      addMessageChunk: async (chunk, options = {}) => {\n        debugLog(\"Called instance.messaging.addMessageChunk\", chunk, options);\n        serviceManager.messageService.messageLoadingManager.end();\n        await serviceManager.actions.receiveChunk(chunk, null, options);\n      },\n      removeMessages: async messageIDs => {\n        debugLog(\"Called instance.messaging.removeMessages\", messageIDs);\n        return serviceManager.actions.removeMessages(messageIDs);\n      },\n      clearConversation: () => {\n        debugLog(\"Called instance.messaging.clearConversation\");\n        return serviceManager.actions.restartConversation({\n          skipHydration: true,\n          endAgentConversation: false,\n          fireEvents: false\n        });\n      },\n      insertHistory: messages => {\n        debugLog(\"Called instance.messaging.insertHistory\", messages);\n        return serviceManager.actions.insertHistory(messages);\n      }\n    },\n    requestFocus: () => {\n      debugLog(\"Called instance.requestFocus\");\n      serviceManager.appWindow?.requestFocus();\n    },\n    serviceDesk: {\n      endConversation: () => {\n        debugLog(\"Called instance.serviceDesk.endConversation\");\n        return serviceManager.actions.agentEndConversation(false);\n      },\n      updateIsSuspended: async isSuspended => {\n        debugLog(\"Called instance.serviceDesk.updateIsSuspended\", isSuspended);\n        return serviceManager.actions.agentUpdateIsSuspended(isSuspended);\n      }\n    }\n  };\n  if (serviceManager.store.getState().config.public.debug) {\n    consoleDebug(\"[ChatInstanceImpl] Created chat instance\", instance);\n  }\n  return instance;\n}\n\nfunction createWriteableElementsProxy(serviceManager) {\n  const elementSet = new Set;\n  const handler = {\n    get(target, element) {\n      if (!elementSet.has(element)) {\n        elementSet.add(element);\n      }\n      return target[element];\n    }\n  };\n  return new Proxy(serviceManager.writeableElements, handler);\n}\n\nexport { createChatInstance };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst NODE_ENV = \"production\";\n\nconst VERSION = \"0.4.0\";\n\nexport { NODE_ENV, VERSION };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar NotificationType;\n\n(function(NotificationType) {\n  NotificationType[\"TEXT_NOTIFICATION\"] = \"text_notification\";\n})(NotificationType || (NotificationType = {}));\n\nconst BOUNCING_ANIMATION_TIMEOUTS = [ 15e3, 6e4 ];\n\nconst TIME_TO_ENTRANCE_ANIMATION_START = 15e3;\n\nexport { BOUNCING_ANIMATION_TIMEOUTS, NotificationType, TIME_TO_ENTRANCE_ANIMATION_START };\n","import isEqual from \"lodash-es/isEqual.js\";\n\nimport { VERSION } from \"../environmentVariables.js\";\n\nimport { NotificationType, TIME_TO_ENTRANCE_ANIMATION_START } from \"../../../types/config/LauncherConfig.js\";\n\nimport { DEFAULT_CUSTOM_PANEL_ID } from \"../utils/constants.js\";\n\nimport { deepFreeze } from \"../utils/lang/objectUtils.js\";\n\nimport \"../../../types/utilities/carbonTypes.js\";\n\nimport { CarbonTheme } from \"../../../types/config/PublicConfig.js\";\n\nimport { CornersType } from \"../../../types/config/CornersType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const DEFAULT_LAUNCHER = {\n  config: {\n    is_on: true,\n    mobile: {\n      is_on: true,\n      title: \"\",\n      time_to_expand: TIME_TO_ENTRANCE_ANIMATION_START,\n      new_expand_time: false,\n      time_to_reduce: 1e4,\n      notification_type: NotificationType.TEXT_NOTIFICATION\n    },\n    desktop: {\n      is_on: true,\n      title: \"\",\n      new_expand_time: false,\n      time_to_expand: TIME_TO_ENTRANCE_ANIMATION_START,\n      notification_type: NotificationType.TEXT_NOTIFICATION\n    }\n  }\n};\n\ndeepFreeze(DEFAULT_LAUNCHER);\n\nconst DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS = {\n  title: null,\n  hideBackButton: false,\n  hidePanelHeader: false,\n  disableAnimation: false\n};\n\ndeepFreeze(DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS);\n\nconst DEFAULT_CUSTOM_PANEL_STATE = {\n  isOpen: false,\n  panelID: DEFAULT_CUSTOM_PANEL_ID,\n  options: DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS\n};\n\ndeepFreeze(DEFAULT_CUSTOM_PANEL_STATE);\n\nconst DEFAULT_IFRAME_PANEL_STATE = {\n  isOpen: false,\n  messageItem: null\n};\n\ndeepFreeze(DEFAULT_IFRAME_PANEL_STATE);\n\nconst DEFAULT_CITATION_PANEL_STATE = {\n  isOpen: false,\n  citationItem: null\n};\n\ndeepFreeze(DEFAULT_CITATION_PANEL_STATE);\n\nconst DEFAULT_TOUR_STATE = {\n  activeTourStepItems: null\n};\n\ndeepFreeze(DEFAULT_TOUR_STATE);\n\nconst DEFAULT_MESSAGE_PANEL_STATE = {\n  isOpen: false,\n  localMessageItem: null,\n  isMessageForInput: false\n};\n\ndeepFreeze(DEFAULT_MESSAGE_PANEL_STATE);\n\nconst VIEW_STATE_ALL_CLOSED = {\n  launcher: false,\n  mainWindow: false,\n  tour: false\n};\n\ndeepFreeze(VIEW_STATE_ALL_CLOSED);\n\nconst VIEW_STATE_LAUNCHER_OPEN = {\n  launcher: true,\n  mainWindow: false,\n  tour: false\n};\n\ndeepFreeze(VIEW_STATE_LAUNCHER_OPEN);\n\nconst VIEW_STATE_MAIN_WINDOW_OPEN = {\n  mainWindow: true,\n  launcher: false,\n  tour: false\n};\n\ndeepFreeze(VIEW_STATE_MAIN_WINDOW_OPEN);\n\nconst DEFAULT_PERSISTED_TO_BROWSER = {\n  chatState: {\n    version: VERSION,\n    disclaimersAccepted: {},\n    homeScreenState: {\n      isHomeScreenOpen: false,\n      showBackToBot: false\n    },\n    hasSentNonWelcomeMessage: false,\n    persistedTourState: {\n      activeTourID: null,\n      activeTourCurrentStepIndex: null\n    },\n    agentState: {\n      isConnected: false,\n      isSuspended: false,\n      agentProfiles: {}\n    }\n  },\n  launcherState: {\n    wasLoadedFromBrowser: false,\n    version: VERSION,\n    viewState: VIEW_STATE_ALL_CLOSED,\n    activeTour: false,\n    showUnreadIndicator: false,\n    mobileLauncherIsExtended: false,\n    mobileLauncherWasReduced: false,\n    mobileLauncherDisableBounce: false,\n    desktopLauncherIsExpanded: false,\n    desktopLauncherWasMinimized: false,\n    bounceTurn: 1,\n    hasSentNonWelcomeMessage: false\n  }\n};\n\ndeepFreeze(DEFAULT_PERSISTED_TO_BROWSER);\n\nconst DEFAULT_CHAT_MESSAGES_STATE = {\n  localMessageIDs: [],\n  messageIDs: [],\n  isTypingCounter: 0,\n  isLoadingCounter: 0,\n  isHydratingCounter: 0,\n  isScrollAnchored: false\n};\n\ndeepFreeze(DEFAULT_CHAT_MESSAGES_STATE);\n\nconst DEFAULT_MESSAGE_STATE = {\n  allMessageItemsByID: {},\n  allMessagesByID: {},\n  botMessageState: {\n    ...DEFAULT_CHAT_MESSAGES_STATE\n  }\n};\n\ndeepFreeze(DEFAULT_MESSAGE_STATE);\n\nconst DEFAULT_INPUT_STATE = () => ({\n  fieldVisible: true,\n  isReadonly: false,\n  files: [],\n  allowFileUploads: false,\n  allowMultipleFileUploads: false,\n  allowedFileUploadTypes: null,\n  stopStreamingButtonState: {\n    currentStreamID: null,\n    isVisible: false,\n    isDisabled: false\n  }\n});\n\nconst DEFAULT_AGENT_STATE = {\n  isConnecting: false,\n  isReconnecting: false,\n  numUnreadMessages: 0,\n  fileUploadInProgress: false,\n  showScreenShareRequest: false,\n  isScreenSharing: false,\n  isAgentTyping: false,\n  inputState: DEFAULT_INPUT_STATE()\n};\n\ndeepFreeze(DEFAULT_AGENT_STATE);\n\nconst DEFAULT_THEME_STATE = {\n  carbonTheme: CarbonTheme.G10,\n  useAITheme: false,\n  corners: CornersType.ROUND\n};\n\ndeepFreeze(DEFAULT_THEME_STATE);\n\nconst DEFAULT_LAYOUT_STATE = {\n  showFrame: true,\n  hasContentMaxWidth: true\n};\n\ndeepFreeze(DEFAULT_LAYOUT_STATE);\n\nfunction calcAnnouncementForWidgetOpen(previousState, newViewState) {\n  if (isEqual(previousState.persistedToBrowserStorage.launcherState.viewState, newViewState)) {\n    return previousState.announceMessage;\n  }\n  return {\n    messageID: newViewState.mainWindow ? \"window_ariaWindowOpened\" : \"window_ariaWindowClosed\"\n  };\n}\n\nfunction applyBotMessageState(state, newState) {\n  return {\n    ...state,\n    botMessageState: {\n      ...state.botMessageState,\n      ...newState\n    }\n  };\n}\n\nfunction handleViewStateChange(state, viewState) {\n  let {agentState: agentState} = state;\n  let {showUnreadIndicator: showUnreadIndicator} = state.persistedToBrowserStorage.launcherState;\n  if (viewState.mainWindow && state.isBrowserPageVisible) {\n    if (agentState.numUnreadMessages !== 0) {\n      agentState = {\n        ...agentState,\n        numUnreadMessages: 0\n      };\n    }\n    showUnreadIndicator = false;\n  }\n  return {\n    ...state,\n    announceMessage: calcAnnouncementForWidgetOpen(state, viewState),\n    agentState: agentState,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      launcherState: {\n        ...state.persistedToBrowserStorage.launcherState,\n        viewState: viewState,\n        showUnreadIndicator: showUnreadIndicator\n      }\n    }\n  };\n}\n\nfunction setHomeScreenOpenState(state, isOpen, showBackToBot) {\n  if (showBackToBot === undefined) {\n    showBackToBot = state.persistedToBrowserStorage.chatState.homeScreenState.showBackToBot;\n  }\n  return {\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        homeScreenState: {\n          ...state.persistedToBrowserStorage.chatState.homeScreenState,\n          isHomeScreenOpen: isOpen,\n          showBackToBot: showBackToBot\n        }\n      }\n    }\n  };\n}\n\nfunction applyLocalMessageUIState(state, localMessageID, propertyName, propertyValue) {\n  const oldMessage = state.allMessageItemsByID[localMessageID];\n  if (oldMessage) {\n    return {\n      ...state,\n      allMessageItemsByID: {\n        ...state.allMessageItemsByID,\n        [localMessageID]: {\n          ...oldMessage,\n          ui_state: {\n            ...oldMessage.ui_state,\n            [propertyName]: propertyValue\n          }\n        }\n      }\n    };\n  }\n  return state;\n}\n\nfunction applyFullMessage(state, message) {\n  const newState = {\n    ...state,\n    allMessagesByID: {\n      ...state.allMessagesByID,\n      [message.id]: message\n    }\n  };\n  if (!state.allMessagesByID[message.id]) {\n    const currentMessageIDs = state.botMessageState.messageIDs;\n    const newMessageIDs = [ ...currentMessageIDs, message.id ];\n    return applyBotMessageState(newState, {\n      messageIDs: newMessageIDs\n    });\n  }\n  return newState;\n}\n\nexport { DEFAULT_AGENT_STATE, DEFAULT_CHAT_MESSAGES_STATE, DEFAULT_CITATION_PANEL_STATE, DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS, DEFAULT_CUSTOM_PANEL_STATE, DEFAULT_IFRAME_PANEL_STATE, DEFAULT_INPUT_STATE, DEFAULT_LAUNCHER, DEFAULT_LAYOUT_STATE, DEFAULT_MESSAGE_PANEL_STATE, DEFAULT_MESSAGE_STATE, DEFAULT_PERSISTED_TO_BROWSER, DEFAULT_THEME_STATE, DEFAULT_TOUR_STATE, VIEW_STATE_ALL_CLOSED, VIEW_STATE_LAUNCHER_OPEN, VIEW_STATE_MAIN_WINDOW_OPEN, applyBotMessageState, applyFullMessage, applyLocalMessageUIState, handleViewStateChange, setHomeScreenOpenState };\n","import { gray100, white } from \"../../../node_modules/@carbon/colors/es/index.js\";\n\nimport Color from \"color\";\n\nimport { consoleError } from \"./miscUtils.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst MIN_CONTRAST = 4.5;\n\nfunction hexCodeToRGB(color) {\n  if (color.length === 7) {\n    const red = color.substring(1, 3);\n    const blue = color.substring(3, 5);\n    const green = color.substring(5, 7);\n    return [ parseInt(red, 16), parseInt(blue, 16), parseInt(green, 16) ];\n  }\n  if (color.length === 4) {\n    const red = color.substring(1, 2);\n    const blue = color.substring(2, 3);\n    const green = color.substring(3, 4);\n    return [ parseInt(red + red, 16), parseInt(blue + blue, 16), parseInt(green + green, 16) ];\n  }\n  consoleError(`Unsupported color code: \"${color}\"`);\n  return [ 0, 0, 0 ];\n}\n\nfunction calculateContrast(color1, color2) {\n  const rgb1 = hexCodeToRGB(color1);\n  const rgb2 = hexCodeToRGB(color2);\n  const luminance1 = calculateRelativeLuminance(rgb1);\n  const luminance2 = calculateRelativeLuminance(rgb2);\n  let contrast;\n  if (luminance1 > luminance2) {\n    contrast = (luminance1 + .05) / (luminance2 + .05);\n  } else {\n    contrast = (luminance2 + .05) / (luminance1 + .05);\n  }\n  return contrast;\n}\n\nfunction calculateRelativeLuminance([r8, g8, b8]) {\n  const rRGB = r8 / 255;\n  const gRGB = g8 / 255;\n  const bRGB = b8 / 255;\n  const R = rRGB <= .03928 ? rRGB / 12.92 : ((rRGB + .055) / 1.055) ** 2.4;\n  const G = gRGB <= .03928 ? gRGB / 12.92 : ((gRGB + .055) / 1.055) ** 2.4;\n  const B = bRGB <= .03928 ? bRGB / 12.92 : ((bRGB + .055) / 1.055) ** 2.4;\n  const luminance = .2126 * R + .7152 * G + .0722 * B;\n  return luminance;\n}\n\nfunction whiteOrBlackText(background) {\n  return calculateContrast(gray100, background) >= MIN_CONTRAST ? gray100 : white;\n}\n\nfunction adjustLightness(token, shift) {\n  const original = Color(token).hsl().object();\n  return Color({\n    ...original,\n    l: original.l + shift\n  }).round().hex().toLowerCase();\n}\n\nexport { MIN_CONTRAST, adjustLightness, calculateContrast, hexCodeToRGB, whiteOrBlackText };\n","import { white, gray100, gray10, blue60, gray80 } from \"../../../node_modules/@carbon/colors/es/index.js\";\n\nimport { whiteOrBlackText, adjustLightness, calculateContrast, MIN_CONTRAST, hexCodeToRGB } from \"./colors.js\";\n\nimport { WA_CONSOLE_PREFIX } from \"./constants.js\";\n\nimport { CarbonTheme } from \"../../../types/config/PublicConfig.js\";\n\nimport { CarbonThemeClassNames } from \"../../../types/utilities/carbonTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst CSS_VAR_PREFIX = \"--cds-\";\n\nconst CSS_CHAT_PREFIX = \"chat-\";\n\nconst HEXADECIMAL_REGEX = /#([a-f0-9]{3}){1,2}\\b/i;\n\nconst INTERNAL_OVERRIDES_LIGHT_THEME_MAP = {\n  \"$chat-button\": \"#000000\",\n  \"$chat-button-text-hover\": \"#525252\"\n};\n\nconst INTERNAL_OVERRIDES_DARK_THEME_MAP = {\n  \"$chat-button\": \"#ffffff\",\n  \"$chat-button-text-hover\": \"#f4f4f4\"\n};\n\nfunction convertCSSVariablesToString(cssVariables) {\n  const pieces = Object.keys(cssVariables).map(key => {\n    const value = cssVariables[key];\n    if (value === undefined) {\n      return \"\";\n    }\n    const fullName = key.startsWith(\"$\") ? `${CSS_VAR_PREFIX}${key.replace(/^\\$/, \"\")}` : `${CSS_VAR_PREFIX}${CSS_CHAT_PREFIX}${key}`;\n    return `${fullName}:${value};`;\n  });\n  let cssVariablesString = \"\";\n  const allValues = pieces.join(\"\");\n  const prefix = \"\";\n  if (allValues.length > 0) {\n    const rule = `${prefix}.WACContainer .cds--white, ${prefix}.WACContainer .cds--g10, ${prefix}.WACContainer .cds--g90, ${prefix}.WACContainer .cds--g100`;\n    cssVariablesString = `${rule}${`, :host`}{${allValues}}`;\n  }\n  return cssVariablesString;\n}\n\nfunction remoteStylesToCSSVars(whiteLabelVariables, carbonTheme) {\n  const cssOverrides = {};\n  const primaryColor = whiteLabelVariables[\"BASE-primary-color\"];\n  const secondaryColor = whiteLabelVariables[\"BASE-secondary-color\"];\n  const accentColor = whiteLabelVariables[\"BASE-accent-color\"];\n  if (primaryColor) {\n    cssOverrides[\"PRIMARY-color\"] = primaryColor;\n    cssOverrides[\"PRIMARY-color-text\"] = whiteOrBlackText(primaryColor);\n    cssOverrides[\"PRIMARY-color-hover\"] = adjustLightness(primaryColor, -8);\n    cssOverrides[\"PRIMARY-color-active\"] = adjustLightness(primaryColor, -10);\n    const useAccentColor = accentColor || blue60;\n    const tryFocusColor = carbonTheme === CarbonTheme.G90 || carbonTheme === CarbonTheme.G100 ? white : useAccentColor;\n    let useFocusColor;\n    if (calculateContrast(primaryColor, tryFocusColor) >= MIN_CONTRAST) {\n      useFocusColor = tryFocusColor;\n    } else if (tryFocusColor !== useAccentColor && calculateContrast(primaryColor, useAccentColor) >= MIN_CONTRAST) {\n      useFocusColor = useAccentColor;\n    } else if (tryFocusColor !== white && calculateContrast(primaryColor, white) >= MIN_CONTRAST) {\n      useFocusColor = white;\n    } else {\n      useFocusColor = gray100;\n    }\n    if (useFocusColor !== tryFocusColor) {\n      cssOverrides[\"PRIMARY-color-focus\"] = useFocusColor;\n    }\n  }\n  if (secondaryColor) {\n    cssOverrides[\"SECONDARY-color\"] = secondaryColor;\n    cssOverrides[\"SECONDARY-color-text\"] = whiteOrBlackText(secondaryColor);\n  } else if (carbonTheme === CarbonTheme.G90 || carbonTheme === CarbonTheme.G100) {\n    cssOverrides[\"SECONDARY-color\"] = `var(${CSS_VAR_PREFIX}layer-02)`;\n    cssOverrides[\"SECONDARY-color-text\"] = `var(${CSS_VAR_PREFIX}text-primary);`;\n  }\n  if (accentColor) {\n    const colorMap = ACCENT_COLOR_MAPS[carbonTheme];\n    const accentBlue20 = adjustLightness(accentColor, 40);\n    const accentBlue60Hover = adjustLightness(accentColor, -8);\n    const accentBlue80 = adjustLightness(accentColor, -20);\n    fillValues(cssOverrides, colorMap.blue20, accentBlue20);\n    fillValues(cssOverrides, colorMap.blue60, accentColor);\n    fillValues(cssOverrides, colorMap.blue60Hover, accentBlue60Hover);\n    fillValues(cssOverrides, colorMap.blue80, accentBlue80);\n    cssOverrides[\"LAUNCHER-color-background\"] = accentColor;\n    cssOverrides[\"LAUNCHER-color-background-hover\"] = accentBlue60Hover;\n    cssOverrides[\"LAUNCHER-color-background-active\"] = accentBlue80;\n    cssOverrides[\"LAUNCHER-EXPANDED-MESSAGE-color-background\"] = accentColor;\n    cssOverrides[\"LAUNCHER-EXPANDED-MESSAGE-color-hover\"] = accentBlue60Hover;\n    cssOverrides[\"LAUNCHER-EXPANDED-MESSAGE-color-active\"] = accentBlue80;\n    cssOverrides[\"ACCENT-color\"] = accentColor;\n    const accentColorRGB = hexCodeToRGB(accentColor);\n    cssOverrides[\"ACCENT-color-r\"] = accentColorRGB[0].toString();\n    cssOverrides[\"ACCENT-color-g\"] = accentColorRGB[1].toString();\n    cssOverrides[\"ACCENT-color-b\"] = accentColorRGB[2].toString();\n    cssOverrides[\"ACCENT-color-ghost-text\"] = accentColor;\n    const accentColorBW = whiteOrBlackText(accentColor);\n    cssOverrides[\"ACCENT-color-text\"] = accentColorBW;\n    cssOverrides[\"ACCENT-color-background-hover\"] = accentBlue60Hover;\n    cssOverrides[\"ACCENT-color-background-active\"] = accentBlue80;\n    cssOverrides[\"LAUNCHER-color-focus-border\"] = accentColorBW;\n    cssOverrides[\"LAUNCHER-color-avatar\"] = accentColorBW;\n    cssOverrides[\"LAUNCHER-EXPANDED-MESSAGE-color-text\"] = accentColorBW;\n    cssOverrides[\"LAUNCHER-EXPANDED-MESSAGE-color-focus-border\"] = accentColorBW;\n    cssOverrides[\"LAUNCHER-MOBILE-color-text\"] = accentColorBW;\n    cssOverrides[\"ACCENT-color-bw\"] = accentColorBW;\n    cssOverrides[\"ACCENT-color-bw-hover\"] = adjustLightness(accentColorBW, -8);\n    cssOverrides[\"ACCENT-color-bw-active\"] = adjustLightness(accentColorBW, -10);\n    cssOverrides[\"ACCENT-color-bw-inverse\"] = accentColorBW === gray100 ? white : gray100;\n    cssOverrides[\"ACCENT-color-bw-gray\"] = accentColorBW === gray100 ? gray80 : gray10;\n    cssOverrides[\"ACCENT-color-pastel\"] = accentColorBW === gray100 ? adjustLightness(accentColor, 20) : adjustLightness(accentColor, -15);\n  }\n  return cssOverrides;\n}\n\nconst ACCENT_COLOR_MAPS = {\n  white: {\n    blue20: [ \"$highlight\" ],\n    blue60: [ \"$background-brand\", \"$interactive\", \"$border-interactive\", \"$button-primary\", \"$button-tertiary\", \"$icon-interactive\", \"$focus\" ],\n    blue60Hover: [ \"$button-primary-hover\", \"$button-tertiary-hover\" ],\n    blue80: [ \"$button-primary-active\", \"$button-tertiary-active\" ]\n  },\n  g10: {\n    blue20: [ \"$highlight\" ],\n    blue60: [ \"$background-brand\", \"$interactive\", \"$border-interactive\", \"$button-primary\", \"$button-tertiary\", \"$icon-interactive\", \"$focus\" ],\n    blue60Hover: [ \"$button-primary-hover\", \"$button-tertiary-hover\" ],\n    blue80: [ \"$button-primary-active\", \"$button-tertiary-active\" ]\n  },\n  g90: {\n    blue20: [],\n    blue60: [ \"$background-brand\", \"$interactive\", \"$border-interactive\", \"$button-primary\", \"$button-tertiary\", \"$focus-inverse\" ],\n    blue60Hover: [ \"$button-primary-hover\", \"$button-tertiary-hover\" ],\n    blue80: [ \"$button-primary-active\", \"$highlight\", \"$button-tertiary-active\" ]\n  },\n  g100: {\n    blue20: [],\n    blue60: [ \"$background-brand\", \"$interactive\", \"$border-interactive\", \"$button-primary\", \"$button-tertiary\", \"$focus-inverse\" ],\n    blue60Hover: [ \"$button-primary-hover\", \"$button-tertiary-hover\" ],\n    blue80: [ \"$button-primary-active\", \"$highlight\", \"$button-tertiary-active\" ]\n  }\n};\n\nfunction fillValues(styles, propertyNames, value) {\n  propertyNames.forEach(propertyName => {\n    styles[propertyName] = value;\n  });\n}\n\nfunction mergeCSSVariables(publicVars, whiteLabelVariables, carbonTheme, useAITheme) {\n  carbonTheme = carbonTheme || CarbonTheme.G10;\n  useAITheme = useAITheme || false;\n  publicVars = publicVars || {};\n  const internalOverrides = createInternalCSSOverridesMap(carbonTheme, useAITheme);\n  const result = {\n    ...internalOverrides,\n    ...publicVars\n  };\n  Object.entries(result).forEach(([key, value]) => {\n    if (key.startsWith(\"$\") && !value.match(HEXADECIMAL_REGEX)) {\n      console.warn(`${WA_CONSOLE_PREFIX} You tried to call \"updateCSSVariables\" with an invalid value for \"${key}\": \"${publicVars[key]}\". You must use hexadecimal values for colors.`);\n      delete result[key];\n    }\n  });\n  const remoteVars = remoteStylesToCSSVars(whiteLabelVariables || {}, carbonTheme);\n  Object.entries(remoteVars).forEach(([key, value]) => {\n    if (value !== \"\" && publicVars[key] === undefined) {\n      result[key] = value;\n    }\n  });\n  return result;\n}\n\nfunction createInternalCSSOverridesMap(carbonTheme, useAITheme) {\n  let internalOverridesMap = {};\n  if (!useAITheme) {\n    if ([ CarbonTheme.G10, CarbonTheme.WHITE ].includes(carbonTheme)) {\n      internalOverridesMap = {\n        ...internalOverridesMap,\n        ...INTERNAL_OVERRIDES_LIGHT_THEME_MAP\n      };\n    } else if ([ CarbonTheme.G90, CarbonTheme.G100 ].includes(carbonTheme)) {\n      internalOverridesMap = {\n        ...internalOverridesMap,\n        ...INTERNAL_OVERRIDES_DARK_THEME_MAP\n      };\n    }\n  }\n  return internalOverridesMap;\n}\n\nfunction getThemeClassNames(themeState) {\n  let themeClassnames;\n  switch (themeState?.carbonTheme) {\n   case CarbonTheme.WHITE:\n    themeClassnames = CarbonThemeClassNames.WHITE;\n    break;\n\n   case CarbonTheme.G10:\n    themeClassnames = CarbonThemeClassNames.G10;\n    break;\n\n   case CarbonTheme.G90:\n    themeClassnames = CarbonThemeClassNames.G90;\n    break;\n\n   case CarbonTheme.G100:\n    themeClassnames = CarbonThemeClassNames.G100;\n    break;\n\n   default:\n    themeClassnames = CarbonThemeClassNames.G10;\n    break;\n  }\n  if (themeState?.useAITheme) {\n    themeClassnames += \" WAC--aiTheme\";\n  }\n  return themeClassnames;\n}\n\nexport { convertCSSVariablesToString, getThemeClassNames, mergeCSSVariables };\n","import { VIEW_STATE_ALL_CLOSED } from \"../store/reducerUtils.js\";\n\nimport { consoleError } from \"./miscUtils.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function constructViewState(newView, appState) {\n  const {viewState: viewState} = appState.persistedToBrowserStorage.launcherState;\n  let newViewState;\n  if (typeof newView === \"string\") {\n    newViewState = {\n      ...VIEW_STATE_ALL_CLOSED,\n      [newView]: true\n    };\n  } else {\n    newViewState = {\n      ...viewState,\n      ...newView\n    };\n  }\n  return newViewState;\n}\n\nfunction validateViewState(viewState, appState) {\n  const {activeTour: activeTour} = appState.persistedToBrowserStorage.launcherState;\n  if (viewState.tour && !activeTour) {\n    consoleError(\"Error changing the view. The new view was supposed to show a tour however there is no active tour to show.\" + \" Changing the view has been canceled.\");\n    return false;\n  }\n  return true;\n}\n\nexport { constructViewState, validateViewState };\n","import cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport isEqual from \"lodash-es/isEqual.js\";\n\nimport merge from \"lodash-es/merge.js\";\n\nimport inputItemToLocalItem from \"../schema/inputItemToLocalItem.js\";\n\nimport { outputItemToLocalItem, createLocalMessageItemsForNestedMessageItems } from \"../schema/outputItemToLocalItem.js\";\n\nimport { AgentsOnlineStatus } from \"../../../types/config/ServiceDeskConfig.js\";\n\nimport actions from \"../store/actions.js\";\n\nimport { agentUpdateIsSuspended } from \"../store/agentActions.js\";\n\nimport { DEFAULT_PERSISTED_TO_BROWSER, VIEW_STATE_LAUNCHER_OPEN } from \"../store/reducerUtils.js\";\n\nimport \"../../../types/state/AppState.js\";\n\nimport { arrayLastValue, asyncForEach } from \"../utils/lang/arrayUtils.js\";\n\nimport { deepFreeze } from \"../utils/lang/objectUtils.js\";\n\nimport { sleep } from \"../utils/lang/promiseUtils.js\";\n\nimport { uuid } from \"../utils/lang/uuid.js\";\n\nimport { createWelcomeRequest, isLiveAgentMessage, isRequest, createMessageRequestForText, addDefaultsToMessage, isResponse, createMessageResponseForText, isStreamCompleteItem, isStreamPartialItem, isStreamFinalResponse, renderAsUserDefinedMessage, isResponseWithNestedItems, streamItemID, isPause, isConnectToAgent, hasTourUserDefinedType, hasServiceDesk, isTyping } from \"../utils/messageUtils.js\";\n\nimport { debugLog, isEnableDebugLog, consoleError, consoleWarn, callOnError } from \"../utils/miscUtils.js\";\n\nimport { resolvablePromise } from \"../utils/resolvablePromise.js\";\n\nimport { mergeCSSVariables } from \"../utils/styleUtils.js\";\n\nimport { constructViewState, validateViewState } from \"../utils/viewStateUtils.js\";\n\nimport { MessageResponseTypes } from \"../../../types/messaging/Messages.js\";\n\nimport { BusEventType, MessageSendSource, TourStartReason, MainWindowCloseReason, ViewChangeReason, MainWindowOpenReason } from \"../../../types/events/eventBusTypes.js\";\n\nimport { CSSVariable } from \"../../../types/instance/ChatInstance.js\";\n\nimport { OnErrorType } from \"../../../types/config/PublicConfig.js\";\n\nimport { setIntl } from \"../utils/intlUtils.js\";\n\nimport { UUIDType } from \"../utils/lang/UUIDType.js\";\n\nimport { ViewType } from \"../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const VALID_PUBLIC_VARS_IN_AI_THEME_SET = new Set(Object.values(CSSVariable));\n\nconst UPDATE_CSS_VARS_AI_THEME_WARNING_MESSAGE = `[updateCSSVariables] The AI theme is enabled and only ${Object.values(CSSVariable).join(\", \")} can be updated.`;\n\nclass ChatActionsImpl {\n  constructor(serviceManager) {\n    this.hydrating = false;\n    this.restarting = false;\n    this.alreadyHydrated = false;\n    this.chunkQueue = [];\n    this.serviceManager = serviceManager;\n  }\n  async hydrateChat(alternateWelcomeRequest, alternateWelcomeRequestSource, alternateOptions) {\n    let fireReady = false;\n    try {\n      if (!this.hydrationPromise) {\n        this.hydrating = true;\n        this.hydrationPromise = this.doHydrateChat(alternateWelcomeRequest, alternateWelcomeRequestSource, alternateOptions);\n        fireReady = true;\n      }\n      await this.hydrationPromise;\n    } finally {\n      this.hydrating = false;\n    }\n    if (fireReady) {\n      await this.serviceManager.fire({\n        type: BusEventType.CHAT_READY\n      });\n    }\n  }\n  async doHydrateChat(alternateWelcomeRequest, alternateWelcomeRequestSource, alternateOptions) {\n    debugLog(\"Hydrating Carbon AI chat\", alternateWelcomeRequest, alternateWelcomeRequestSource, alternateOptions);\n    let history;\n    const {serviceManager: serviceManager} = this;\n    serviceManager.store.dispatch(actions.addIsHydratingCounter(1));\n    if (!this.alreadyHydrated) {\n      history = await this.serviceManager.historyService.loadHistory();\n      if (serviceManager.humanAgentService) {\n        debugLog(\"Initializing the human agent service\");\n        await serviceManager.humanAgentService.initialize();\n      } else {\n        debugLog(\"No service desk integrations present\");\n      }\n    }\n    const {config: config} = serviceManager.store.getState();\n    if (!history) {\n      if (!alternateWelcomeRequest) {\n        const state = serviceManager.store.getState();\n        if (state.homeScreenConfig?.is_on) {\n          serviceManager.store.dispatch(actions.setHomeScreenIsOpen(true));\n        } else if (!config.public.messaging?.skipWelcome) {\n          await serviceManager.actions.send(createWelcomeRequest(), MessageSendSource.WELCOME_REQUEST, {\n            returnBeforeStreaming: true\n          }, true);\n        }\n      }\n    } else {\n      serviceManager.store.dispatch(actions.hydrateMessageHistory(history.messageHistory));\n      await this.createElementsForUserDefinedResponses(history.messageHistory);\n      if (history.latestPanelLocalMessageItem) {\n        this.openResponsePanel(history.latestPanelLocalMessageItem, true);\n      }\n    }\n    if (alternateWelcomeRequest) {\n      serviceManager.store.dispatch(actions.setHomeScreenIsOpen(false));\n      await serviceManager.actions.send(alternateWelcomeRequest, alternateWelcomeRequestSource, alternateOptions, true);\n    }\n    serviceManager.store.dispatch(actions.chatWasHydrated());\n    serviceManager.store.dispatch(actions.addIsHydratingCounter(-1));\n    if (history) {\n      const lastMessageID = arrayLastValue(history.messageHistory.botMessageState.localMessageIDs);\n      const lastMessage = history.messageHistory.allMessageItemsByID[lastMessageID];\n      const lastOriginalMessage = history.messageHistory.allMessagesByID[lastMessage?.fullMessageID];\n      if (!isLiveAgentMessage(lastMessage) && isRequest(lastOriginalMessage)) {\n        serviceManager.messageService.resendMessage(lastOriginalMessage, lastMessage.ui_state.id);\n      }\n    }\n    const allowReconnect = config.public.serviceDesk.allowReconnect ?? true;\n    this.serviceManager?.humanAgentService?.handleHydration(allowReconnect, Boolean(history));\n    this.alreadyHydrated = true;\n  }\n  getPublicWebChatState() {\n    const state = this.serviceManager.store.getState();\n    const {persistedToBrowserStorage: persistedToBrowserStorage} = state;\n    const {chatState: chatState, launcherState: launcherState} = persistedToBrowserStorage;\n    const publicWebChatState = {\n      isConnectedWithHumanAgent: chatState.agentState.isConnected,\n      isWebChatOpen: launcherState.viewState.mainWindow,\n      isConnectingWithHumanAgent: state.agentState.isConnecting,\n      isHomeScreenOpen: chatState.homeScreenState.isHomeScreenOpen,\n      isDebugEnabled: isEnableDebugLog(),\n      hasUserSentMessage: chatState.hasSentNonWelcomeMessage,\n      isTourActive: launcherState.activeTour,\n      viewState: {\n        ...launcherState.viewState\n      },\n      serviceDesk: {\n        isConnected: chatState.agentState.isConnected,\n        isConnecting: state.agentState.isConnecting,\n        isSuspended: chatState.agentState.isSuspended ?? false\n      },\n      locale: this.serviceManager.store.getState().locale,\n      intl: this.serviceManager.intl\n    };\n    return publicWebChatState;\n  }\n  async sendWithCatch(message, source, options = {}, ignoreHydration = false) {\n    try {\n      await this.send(message, source, options, ignoreHydration);\n    } catch (error) {\n      consoleError(\"An error occurred sending the message\", error);\n    }\n  }\n  async send(message, source, options = {}, ignoreHydration = false) {\n    const messageRequest = typeof message === \"string\" ? createMessageRequestForText(message) : message;\n    if (this.serviceManager.store.getState().persistedToBrowserStorage.chatState.homeScreenState.isHomeScreenOpen) {\n      this.serviceManager.store.dispatch(actions.setHomeScreenIsOpen(false));\n    }\n    if (this.serviceManager.store.getState().responsePanelState.isOpen) {\n      this.serviceManager.store.dispatch(actions.setResponsePanelIsOpen(false));\n    }\n    if (this.hydrationPromise || ignoreHydration) {\n      if (!ignoreHydration) {\n        await this.hydrationPromise;\n      }\n      await this.doSend(messageRequest, source, options);\n    } else {\n      await this.hydrateChat(messageRequest, source, options);\n    }\n  }\n  async doSend(message, source, options = {}) {\n    const {store: store} = this.serviceManager;\n    addDefaultsToMessage(message);\n    const originalUserText = message.history?.label || message.input.text;\n    if (options.silent) {\n      message.history.silent = true;\n    }\n    const localMessage = inputItemToLocalItem(message, originalUserText);\n    if (!message.history.silent) {\n      store.dispatch(actions.addLocalMessageItem(localMessage, message, true));\n    } else {\n      store.dispatch(actions.addMessage(message));\n    }\n    if (options.setValueSelectedForMessageID) {\n      store.dispatch(actions.messageSetOptionSelected(options.setValueSelectedForMessageID, message));\n    }\n    deepFreeze(message);\n    await this.serviceManager.messageService.send(cloneDeep(message), source, localMessage.ui_state.id, options);\n  }\n  async receive(message, isLatestWelcomeNode = false, requestMessage, requestOptions) {\n    const {restartCount: initialRestartCount} = this.serviceManager;\n    if (!message.id) {\n      message.id = uuid(UUIDType.MESSAGE);\n    }\n    const preReceiveEvent = {\n      type: BusEventType.PRE_RECEIVE,\n      data: message\n    };\n    await this.serviceManager.fire(preReceiveEvent);\n    if (initialRestartCount !== this.serviceManager.restartCount) {\n      return;\n    }\n    if (!isLatestWelcomeNode) {\n      this.serviceManager.store.dispatch(actions.updateHasSentNonWelcomeMessage(true));\n    }\n    if (initialRestartCount !== this.serviceManager.restartCount) {\n      return;\n    }\n    const {languagePack: languagePack} = this.serviceManager.store.getState();\n    if (isResponse(message)) {\n      this.processMessageResponse(message, isLatestWelcomeNode, requestMessage, requestOptions).catch(error => {\n        consoleError(\"Error processing the message response\", error);\n      });\n    } else {\n      const inlineError = createMessageResponseForText(languagePack.errors_singleMessage, message.thread_id, MessageResponseTypes.INLINE_ERROR);\n      this.receive(inlineError, false);\n    }\n    deepFreeze(message);\n    await this.serviceManager.fire({\n      type: BusEventType.RECEIVE,\n      data: message\n    });\n  }\n  async removeMessages(messageIDs) {\n    this.serviceManager.store.dispatch(actions.removeMessages(messageIDs));\n  }\n  async insertHistory(messages) {\n    const scrollBottom = this.serviceManager.mainWindow?.getMessagesScrollBottom();\n    const state = this.serviceManager.store.getState();\n    const notes = {\n      notes: [ {\n        body: messages\n      } ]\n    };\n    const history = await this.serviceManager.historyService.loadHistory(notes);\n    const currentAppStateMessages = {\n      allMessageItemsByID: state.allMessageItemsByID,\n      allMessagesByID: state.allMessagesByID,\n      botMessageState: state.botMessageState\n    };\n    const newAppStateMessages = merge({}, history.messageHistory, currentAppStateMessages);\n    newAppStateMessages.botMessageState.messageIDs = [ ...history.messageHistory.botMessageState.messageIDs, ...currentAppStateMessages.botMessageState.messageIDs ];\n    newAppStateMessages.botMessageState.localMessageIDs = [ ...history.messageHistory.botMessageState.localMessageIDs, ...currentAppStateMessages.botMessageState.localMessageIDs ];\n    this.serviceManager.store.dispatch(actions.hydrateMessageHistory(newAppStateMessages));\n    await this.createElementsForUserDefinedResponses(history.messageHistory);\n    this.serviceManager.mainWindow?.doAutoScroll({\n      scrollToBottom: scrollBottom\n    });\n  }\n  async receiveChunk(chunk, messageID, options = {}) {\n    const chunkPromise = resolvablePromise();\n    this.chunkQueue.push({\n      chunk: chunk,\n      messageID: messageID,\n      options: options,\n      chunkPromise: chunkPromise\n    });\n    if (this.chunkQueue.length === 1) {\n      this.processChunkQueue();\n    }\n    return chunkPromise;\n  }\n  async processChunkQueue() {\n    const {chunk: chunk, options: options, chunkPromise: chunkPromise} = this.chunkQueue[0];\n    let {messageID: messageID} = this.chunkQueue[0];\n    const isCompleteItem = isStreamCompleteItem(chunk);\n    const isPartialItem = isStreamPartialItem(chunk);\n    const {store: store} = this.serviceManager;\n    const isStopGeneratingVisible = store.getState().botInputState.stopStreamingButtonState.isVisible;\n    if (isPartialItem) {\n      const streamingData = chunk.partial_item.streaming_metadata;\n      if (streamingData.cancellable && !isStopGeneratingVisible) {\n        store.dispatch(actions.setStopStreamingButtonVisible(true));\n      }\n    }\n    if (isCompleteItem || isPartialItem) {\n      if (!messageID) {\n        messageID = chunk.streaming_metadata.response_id;\n      }\n      if (!store.getState().allMessagesByID[messageID]) {\n        store.dispatch(actions.streamingStart(messageID));\n      }\n      const item = chunk.partial_item || chunk.complete_item;\n      store.dispatch(actions.streamingAddChunk(messageID, item, isCompleteItem, options.disableFadeAnimation ?? true));\n      if (chunk.partial_response?.history) {\n        if (Object.keys(chunk.partial_response).length > 1) {\n          throw new Error(`The partial_response object only supports the \"history\" property.`);\n        }\n        store.dispatch(actions.streamingMergeHistory(messageID, chunk.partial_response?.history));\n      }\n      await this.handleUserDefinedResponseItemsChunk(messageID, chunk, item);\n    } else if (isStreamFinalResponse(chunk)) {\n      this.receive(chunk.final_response, options.isLatestWelcomeNode, null, {\n        disableFadeAnimation: true\n      });\n    }\n    if ((isCompleteItem || isStreamFinalResponse(chunk)) && isStopGeneratingVisible) {\n      store.dispatch(actions.setStopStreamingButtonDisabled(false));\n      store.dispatch(actions.setStopStreamingButtonVisible(false));\n    }\n    this.chunkQueue.shift();\n    chunkPromise.doResolve();\n    if (this.chunkQueue[0]) {\n      this.processChunkQueue();\n    }\n  }\n  getOrCreateUserDefinedElement(messageItemID) {\n    let userDefinedItem = this.serviceManager.userDefinedElementRegistry.get(messageItemID);\n    if (!userDefinedItem) {\n      userDefinedItem = {\n        element: document.createElement(\"div\"),\n        slotName: `slot-user-defined-${uuid()}`\n      };\n      userDefinedItem.element.setAttribute(\"slot\", userDefinedItem.slotName);\n      this.serviceManager.userDefinedElementRegistry.set(messageItemID, userDefinedItem);\n    }\n    return userDefinedItem;\n  }\n  async handleUserDefinedResponseItems(localMessage, originalMessage) {\n    if (renderAsUserDefinedMessage(localMessage.item)) {\n      let element;\n      let slotName;\n      if (!localMessage.item.user_defined?.silent) {\n        ({element: element, slotName: slotName} = this.getOrCreateUserDefinedElement(localMessage.ui_state.id));\n      }\n      const userDefinedResponseEvent = {\n        type: BusEventType.USER_DEFINED_RESPONSE,\n        data: {\n          message: localMessage.item,\n          fullMessage: originalMessage,\n          element: element,\n          slot: slotName,\n          fullWidth: false\n        }\n      };\n      await this.serviceManager.fire(userDefinedResponseEvent);\n      if (userDefinedResponseEvent.data.fullWidth) {\n        this.serviceManager.store.dispatch(actions.setMessageUIProperty(localMessage.ui_state.id, \"fullWidth\", true));\n      }\n    } else if (isResponseWithNestedItems(localMessage.item)) {\n      const {itemsLocalMessageItemIDs: itemsLocalMessageItemIDs, bodyLocalMessageItemIDs: bodyLocalMessageItemIDs, footerLocalMessageItemIDs: footerLocalMessageItemIDs, gridLocalMessageItemIDs: gridLocalMessageItemIDs} = localMessage.ui_state;\n      const {allMessageItemsByID: allMessageItemsByID} = this.serviceManager.store.getState();\n      const createElementForNestedUserDefinedResponse = localMessageItemID => {\n        const nestedLocalMessage = allMessageItemsByID[localMessageItemID];\n        return this.handleUserDefinedResponseItems(nestedLocalMessage, originalMessage);\n      };\n      if (gridLocalMessageItemIDs?.length) {\n        await asyncForEach(gridLocalMessageItemIDs, row => asyncForEach(row, cell => asyncForEach(cell, itemID => createElementForNestedUserDefinedResponse(itemID))));\n      }\n      if (itemsLocalMessageItemIDs?.length) {\n        await asyncForEach(itemsLocalMessageItemIDs, createElementForNestedUserDefinedResponse);\n      }\n      if (bodyLocalMessageItemIDs?.length) {\n        await asyncForEach(bodyLocalMessageItemIDs, createElementForNestedUserDefinedResponse);\n      }\n      if (footerLocalMessageItemIDs?.length) {\n        await asyncForEach(footerLocalMessageItemIDs, createElementForNestedUserDefinedResponse);\n      }\n    }\n  }\n  async handleUserDefinedResponseItemsChunk(messageID, chunk, messageItem) {\n    if (renderAsUserDefinedMessage(messageItem)) {\n      const {store: store} = this.serviceManager;\n      const itemID = streamItemID(messageID, messageItem);\n      let element;\n      let slotName;\n      if (!messageItem.user_defined?.silent) {\n        ({element: element, slotName: slotName} = this.getOrCreateUserDefinedElement(itemID));\n      }\n      const userDefinedResponseEvent = {\n        type: BusEventType.CHUNK_USER_DEFINED_RESPONSE,\n        data: {\n          messageItem: messageItem,\n          chunk: chunk,\n          element: element,\n          slot: slotName,\n          fullWidth: false\n        }\n      };\n      await this.serviceManager.fire(userDefinedResponseEvent);\n      if (store.getState().allMessageItemsByID[itemID].ui_state.fullWidth !== userDefinedResponseEvent.data.fullWidth) {\n        store.dispatch(actions.setMessageUIProperty(itemID, \"fullWidth\", userDefinedResponseEvent.data.fullWidth));\n      }\n    }\n  }\n  async processMessageResponse(fullMessage, isLatestWelcomeNode, requestMessage, requestOptions = {}) {\n    const {store: store} = this.serviceManager;\n    const {config: config} = store.getState();\n    const initialRestartCount = this.serviceManager.restartCount;\n    const output = fullMessage.output.generic;\n    fullMessage.request_id = requestMessage?.id;\n    addDefaultsToMessage(fullMessage);\n    store.dispatch(actions.addMessage(fullMessage));\n    let previousItemID = null;\n    for (let index = 0; index < output.length && initialRestartCount === this.serviceManager.restartCount; index++) {\n      const messageItem = output[index];\n      if (messageItem) {\n        const pause = isPause(messageItem);\n        const agent = isConnectToAgent(messageItem);\n        const tour = hasTourUserDefinedType(messageItem);\n        const localMessageItem = outputItemToLocalItem(messageItem, fullMessage, isLatestWelcomeNode, requestOptions.disableFadeAnimation);\n        if (tour && (requestOptions.skipTourCard || messageItem.user_defined?.skip_card)) {\n          const startTourReason = requestOptions.skipTourCard ? TourStartReason.START_TOUR_METHOD : TourStartReason.SKIP_CARD;\n          const {viewState: viewState} = store.getState().persistedToBrowserStorage.launcherState;\n          if (viewState.mainWindow) {\n            const mainWindowCloseReason = requestOptions.skipTourCard ? MainWindowCloseReason.CALLED_START_TOUR : MainWindowCloseReason.TOUR_SKIP_CARD;\n            this.startTour(localMessageItem, startTourReason, {\n              mainWindowCloseReason: mainWindowCloseReason\n            }).catch(error => {\n              consoleError(\"Error starting the tour\", error);\n            });\n          } else {\n            const viewChangeReason = requestOptions.skipTourCard ? ViewChangeReason.CALLED_START_TOUR : ViewChangeReason.TOUR_SKIP_CARD;\n            this.startTour(localMessageItem, startTourReason, {\n              viewChangeReason: viewChangeReason\n            }).catch(error => {\n              consoleError(\"Error starting the tour\", error);\n            });\n          }\n        } else if (!tour && requestOptions.skipTourCard) {\n          consoleError(\"The message response received was not a tour, so the tour card was not skipped nor was a tour started by the startTour() call.\");\n        }\n        const nestedLocalMessageItems = [];\n        createLocalMessageItemsForNestedMessageItems(localMessageItem, fullMessage, false, nestedLocalMessageItems, true);\n        store.dispatch(actions.addNestedMessages(nestedLocalMessageItems));\n        if (agent && isResponse(fullMessage)) {\n          store.dispatch(actions.addIsTypingCounter(1));\n          if (!hasServiceDesk(config)) {\n            const message = 'Web chat received a \"connect_to_agent\" message but there is no service desk configured. Check your chat configuration.';\n            this.errorOccurred({\n              errorType: OnErrorType.INTEGRATION_ERROR,\n              message: message\n            });\n            store.dispatch(actions.setMessageHistoryProperty(localMessageItem.fullMessageID, \"agent_no_service_desk\", true));\n          }\n          const agentAvailability = await (this.serviceManager.humanAgentService?.checkAreAnyAgentsOnline(fullMessage));\n          if (initialRestartCount === this.serviceManager.restartCount) {\n            store.dispatch(actions.setMessageHistoryProperty(localMessageItem.fullMessageID, \"agent_availability\", agentAvailability));\n            let shouldAutoRequestAgent = false;\n            if (config.public.serviceDesk?.skipConnectAgentCard) {\n              shouldAutoRequestAgent = true;\n            }\n            store.dispatch(actions.addIsTypingCounter(-1));\n            if (shouldAutoRequestAgent && agentAvailability === AgentsOnlineStatus.ONLINE) {\n              this.serviceManager.humanAgentService.startChat(localMessageItem, fullMessage);\n            }\n          }\n        }\n        if (pause) {\n          const showIsTyping = isTyping(messageItem);\n          if (showIsTyping) {\n            store.dispatch(actions.addIsTypingCounter(1));\n          }\n          await sleep(messageItem.time);\n          if (showIsTyping && initialRestartCount === this.serviceManager.restartCount) {\n            store.dispatch(actions.addIsTypingCounter(-1));\n          }\n        } else {\n          await this.handleUserDefinedResponseItems(localMessageItem, fullMessage);\n          if (!localMessageItem.item.user_defined?.silent && initialRestartCount === this.serviceManager.restartCount) {\n            this.serviceManager.store.dispatch(actions.addLocalMessageItem(localMessageItem, fullMessage, false, previousItemID));\n            previousItemID = localMessageItem.ui_state.id;\n          }\n        }\n      }\n    }\n  }\n  openResponsePanel(localMessageItem, isMessageForInput) {\n    this.serviceManager.store.dispatch(actions.setResponsePanelContent(localMessageItem, isMessageForInput));\n    this.serviceManager.store.dispatch(actions.setResponsePanelIsOpen(true));\n  }\n  async insertLocalMessageResponse(message) {\n    message.id = uuid(UUIDType.MESSAGE);\n    await this.processMessageResponse(message, false, null, {});\n  }\n  updateLanguagePack(changes) {\n    const {languagePack: languagePack, locale: locale} = this.serviceManager.store.getState();\n    const messages = {\n      ...languagePack,\n      ...changes\n    };\n    setIntl(this.serviceManager, locale, messages);\n  }\n  addNotification(notification) {\n    this.serviceManager.store.dispatch(actions.addNotification(notification));\n  }\n  removeNotification(groupID) {\n    this.serviceManager.store.dispatch(actions.removeNotifications({\n      groupID: groupID\n    }));\n  }\n  removeAllNotifications() {\n    this.serviceManager.store.dispatch(actions.removeAllNotifications());\n  }\n  updateCSSVariables(publicVars, whiteLabelVariables = {}) {\n    const {store: store} = this.serviceManager;\n    const {theme: theme} = store.getState();\n    const {carbonTheme: carbonTheme, useAITheme: useAITheme} = theme;\n    if (useAITheme) {\n      const usePublicVars = publicVars;\n      publicVars = {};\n      whiteLabelVariables = {};\n      usePublicVars && Object.entries(usePublicVars).forEach(([variable]) => {\n        if (VALID_PUBLIC_VARS_IN_AI_THEME_SET.has(variable)) {\n          publicVars[variable] = usePublicVars[variable];\n        } else {\n          consoleWarn(UPDATE_CSS_VARS_AI_THEME_WARNING_MESSAGE);\n        }\n      });\n    } else {\n      publicVars = {\n        ...publicVars\n      };\n      whiteLabelVariables = {\n        ...whiteLabelVariables\n      };\n    }\n    const allVariables = mergeCSSVariables(publicVars, whiteLabelVariables, carbonTheme, useAITheme);\n    store.dispatch(actions.updateCSSVariables(allVariables, publicVars, whiteLabelVariables));\n  }\n  updateBotName(name) {\n    this.serviceManager.store.dispatch(actions.updateBotName(name));\n  }\n  updateMainHeaderTitle(title) {\n    this.serviceManager.store.dispatch(actions.updateMainHeaderTitle(title));\n  }\n  updateBotAvatarURL(url) {\n    this.serviceManager.store.dispatch(actions.updateBotAvatarURL(url));\n  }\n  updateHomeScreenConfig(homeScreenConfig) {\n    this.serviceManager.store.dispatch(actions.updateHomeScreenConfig(homeScreenConfig));\n  }\n  updateLauncherConfig(launcherConfig) {\n    this.serviceManager.store.dispatch(actions.updateLauncherConfig(launcherConfig));\n  }\n  async changeView(newView, reason, tryHydrating = true, forceViewChange = false) {\n    const {store: store} = this.serviceManager;\n    const {viewState: viewState} = store.getState().persistedToBrowserStorage.launcherState;\n    let newViewState = constructViewState(newView, store.getState());\n    if (!validateViewState(newViewState, store.getState())) {\n      return viewState;\n    }\n    if (!isEqual(newViewState, viewState) || forceViewChange) {\n      await this.fireViewChangeEventsAndChangeView(newViewState, reason);\n      newViewState = store.getState().persistedToBrowserStorage.launcherState.viewState;\n      if (tryHydrating && (newViewState.mainWindow || newViewState.tour) && !store.getState().isHydrated) {\n        this.hydrateChat().catch(error => {\n          consoleError(\"Error hydrating the chat\", error);\n        });\n      }\n    }\n    return newViewState;\n  }\n  async fireViewChangeEventsAndChangeView(newViewState, reason) {\n    const {store: store} = this.serviceManager;\n    if (store.getState().viewChanging) {\n      throw new Error(\"The view may not be changed while a view change event is already running. Please make sure to resolve any promises from these events.\");\n    }\n    store.dispatch(actions.setViewChanging(true));\n    const {viewState: viewState} = store.getState().persistedToBrowserStorage.launcherState;\n    const {viewChangeReason: viewChangeReason} = reason;\n    const oldViewState = deepFreeze(viewState);\n    try {\n      const preViewChangeEvent = {\n        type: BusEventType.VIEW_PRE_CHANGE,\n        reason: viewChangeReason,\n        oldViewState: oldViewState,\n        newViewState: newViewState,\n        cancelViewChange: false\n      };\n      await this.serviceManager.fire(preViewChangeEvent);\n      if (preViewChangeEvent.cancelViewChange) {\n        debugLog(\"The view changing was cancelled by a view:pre:change event.\");\n        return;\n      }\n      if (!validateViewState(preViewChangeEvent.newViewState, store.getState())) {\n        return;\n      }\n      newViewState = preViewChangeEvent.newViewState;\n      store.dispatch(actions.setViewState(deepFreeze(newViewState)));\n      const viewChangeEvent = {\n        type: BusEventType.VIEW_CHANGE,\n        reason: viewChangeReason,\n        oldViewState: oldViewState,\n        newViewState: newViewState,\n        cancelViewChange: false\n      };\n      await this.serviceManager.fire(viewChangeEvent);\n      if (viewChangeEvent.cancelViewChange) {\n        store.dispatch(actions.setViewState(oldViewState));\n        debugLog(\"The view changing was cancelled by a view:change event.\");\n        return;\n      }\n      if (!validateViewState(viewChangeEvent.newViewState, store.getState())) {\n        store.dispatch(actions.setViewState(oldViewState));\n        return;\n      }\n      newViewState = viewChangeEvent.newViewState;\n      store.dispatch(actions.setViewState(deepFreeze(newViewState)));\n    } finally {\n      store.dispatch(actions.setViewChanging(false));\n    }\n  }\n  async startTour(message, startTourReason, changeViewReason) {\n    this.serviceManager.store.dispatch(actions.setTourData(message.fullMessageID));\n    const newViewState = await this.changeView(ViewType.TOUR, changeViewReason);\n    if (newViewState.tour) {\n      await this.serviceManager.fire({\n        type: BusEventType.TOUR_START,\n        reason: startTourReason\n      });\n      await this.serviceManager.fire({\n        type: BusEventType.TOUR_STEP,\n        step: this.serviceManager.store.getState().tourState.activeTourStepItems[0]\n      });\n    }\n  }\n  async endTour(reason) {\n    const {viewState: viewState} = this.serviceManager.store.getState().persistedToBrowserStorage.launcherState;\n    let newViewState = viewState;\n    if (viewState.tour) {\n      newViewState = await this.changeView(ViewType.LAUNCHER, reason);\n    }\n    if (!newViewState.tour) {\n      this.serviceManager.store.dispatch(actions.clearTourData());\n      return true;\n    }\n    return false;\n  }\n  goToSpecificTourStep(stepId) {\n    const {activeTourStepItems: activeTourStepItems} = this.serviceManager.store.getState().tourState;\n    const newStepIndex = activeTourStepItems.findIndex(stepItem => stepItem.step_id === stepId);\n    if (newStepIndex) {\n      this.changeStepInTour({\n        newStepIndex: newStepIndex\n      });\n    } else {\n      consoleError(`No step with the id \"${stepId}\" was found within the current tour. As a result, goToTourStep() did not change the current tour step.`);\n    }\n  }\n  async changeStepInTour(changeStepOptions) {\n    const {store: store} = this.serviceManager;\n    const {activeTourStepItems: activeTourStepItems} = store.getState().tourState;\n    const {activeTourCurrentStepIndex: activeTourCurrentStepIndex} = store.getState().persistedToBrowserStorage.chatState.persistedTourState;\n    let {newStepIndex: newStepIndex} = changeStepOptions;\n    if (changeStepOptions.nextStep) {\n      newStepIndex = activeTourCurrentStepIndex + 1;\n    } else if (changeStepOptions.previousStep) {\n      newStepIndex = activeTourCurrentStepIndex - 1;\n    }\n    store.dispatch(actions.changeStepInTour(newStepIndex));\n    const actualNewStepIndex = store.getState().persistedToBrowserStorage.chatState.persistedTourState.activeTourCurrentStepIndex;\n    if (actualNewStepIndex === newStepIndex) {\n      await this.serviceManager.fire({\n        type: BusEventType.TOUR_STEP,\n        step: activeTourStepItems[actualNewStepIndex]\n      });\n    } else {\n      consoleWarn(\"The tour tried to change to a step that was out of bounds for the step array, so no step change was made.\");\n    }\n  }\n  errorOccurred(error) {\n    consoleError(\"An error has occurred\", error);\n    if (error.catastrophicErrorType) {\n      this.serviceManager.store.dispatch(actions.setAppStateValue(\"catastrophicErrorType\", error.catastrophicErrorType));\n    }\n    callOnError(this.serviceManager.additionalChatParameters.onError, error);\n  }\n  async restartConversation(options = {}) {\n    const {skipHydration: skipHydration = false, endAgentConversation: endAgentConversation = true, fireEvents: fireEvents = true} = options;\n    debugLog(\"Restarting conversation\");\n    if (this.restarting) {\n      consoleWarn(\"You cannot restart a conversation while a previous restart is still pending.\");\n      return;\n    }\n    this.restarting = true;\n    try {\n      const {serviceManager: serviceManager} = this;\n      const {store: store} = serviceManager;\n      if (fireEvents) {\n        await serviceManager.fire({\n          type: BusEventType.PRE_RESTART_CONVERSATION\n        });\n      }\n      serviceManager.restartCount++;\n      if (this.hydrating) {\n        await this.hydrationPromise;\n      }\n      const currentState = store.getState();\n      const {persistedToBrowserStorage: persistedToBrowserStorage} = currentState;\n      const {viewState: viewState} = persistedToBrowserStorage.launcherState;\n      const {isConnecting: isConnecting} = currentState.agentState;\n      const {isConnected: isConnected} = currentState.persistedToBrowserStorage.chatState.agentState;\n      if ((isConnected || isConnecting) && endAgentConversation) {\n        await serviceManager.humanAgentService.endChat(true, false, false);\n      }\n      if (viewState.tour) {\n        await this.serviceManager.actions.changeView(ViewType.MAIN_WINDOW, {\n          mainWindowOpenReason: MainWindowOpenReason.CALLED_RESTART_CONVERSATION\n        }, false);\n      }\n      this.serviceManager.instance.updateAssistantInputFieldVisibility(true);\n      this.serviceManager.messageService.cancelAllMessageRequests();\n      store.dispatch(actions.restartConversation());\n      if (!skipHydration) {\n        this.hydrationPromise = null;\n      }\n      if (fireEvents) {\n        await serviceManager.fire({\n          type: BusEventType.RESTART_CONVERSATION\n        });\n      }\n      if (this.hydrating) {\n        await this.hydrationPromise;\n      }\n      if (!skipHydration && !serviceManager.store.getState().isHydrated) {\n        this.hydrationPromise = null;\n        if (store.getState().persistedToBrowserStorage.launcherState.viewState.mainWindow) {\n          await serviceManager.actions.hydrateChat();\n        }\n      } else {\n        store.dispatch(actions.chatWasHydrated());\n      }\n    } finally {\n      this.restarting = false;\n    }\n  }\n  async destroySession(keepOpenState) {\n    const {store: store} = this.serviceManager;\n    const {persistedToBrowserStorage: persistedToBrowserStorage} = store.getState();\n    const originalViewState = persistedToBrowserStorage.launcherState.viewState;\n    const newPersistedToBrowserStorage = cloneDeep(DEFAULT_PERSISTED_TO_BROWSER);\n    if (keepOpenState) {\n      newPersistedToBrowserStorage.launcherState.viewState = originalViewState;\n      if (originalViewState.tour) {\n        newPersistedToBrowserStorage.launcherState.viewState = {\n          ...originalViewState,\n          tour: false,\n          mainWindow: true\n        };\n      }\n    } else {\n      newPersistedToBrowserStorage.launcherState.viewState = VIEW_STATE_LAUNCHER_OPEN;\n    }\n    this.serviceManager.messageService.cancelAllMessageRequests();\n    this.serviceManager.userSessionStorageService.clearLauncherSession();\n    this.serviceManager.userSessionStorageService.clearChatSession();\n    this.serviceManager.store.dispatch(actions.setAppStateValue(\"persistedToBrowserStorage\", newPersistedToBrowserStorage));\n  }\n  agentEndConversation(endedByUser) {\n    return this.serviceManager.humanAgentService.endChat(endedByUser);\n  }\n  agentUpdateIsSuspended(isSuspended) {\n    this.serviceManager.store.dispatch(agentUpdateIsSuspended(isSuspended));\n  }\n  async createElementsForUserDefinedResponses(messages) {\n    await asyncForEach(Object.values(messages.allMessageItemsByID), localMessage => {\n      const originalMessage = messages.allMessagesByID[localMessage.fullMessageID];\n      return this.handleUserDefinedResponseItems(localMessage, originalMessage);\n    });\n  }\n}\n\nexport { ChatActionsImpl };\n","import cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport { asyncForEach, asArray } from \"../utils/lang/arrayUtils.js\";\n\nimport { debugStackTrace, consoleError, consoleLog, consoleWarn, isEnableDebugLog, debugLog } from \"../utils/miscUtils.js\";\n\nimport { resolvablePromise } from \"../utils/resolvablePromise.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const HANDLER_NOT_FUNCTION = \"The event handler is not a function.\";\n\nclass EventBus {\n  constructor() {\n    this.handlersByType = new Map;\n    this.eventsTypesRunning = new Set;\n    this.eventsRunningCount = 0;\n  }\n  async fire(busEvent, instance) {\n    logEvent(\"Before fire\", busEvent);\n    const {type: type} = busEvent;\n    if (!type) {\n      throw new Error(`Attempted to fire an event with no type! ${JSON.stringify(busEvent)}`);\n    }\n    function wrappedHandler(handler) {\n      const result = handler(busEvent, instance);\n      if (result && !(result instanceof Promise)) {\n        consoleWarn(`An event handler for event ${type} returned a non-promise. This might be a mistake.`, result);\n      }\n      return result;\n    }\n    if (this.eventsTypesRunning.has(type)) {\n      throw new Error(`An event of type ${type} is already running. Please make sure that you have resolved the Promises for any earlier events that were fired.`);\n    }\n    try {\n      this.eventsRunningCount++;\n      try {\n        this.eventsTypesRunning.add(type);\n        const handlersForType = this.handlersByType.get(type);\n        if (handlersForType && handlersForType.length) {\n          const handlersCopy = handlersForType.slice();\n          await asyncForEach(handlersCopy, wrappedHandler);\n        }\n      } finally {\n        this.eventsTypesRunning.delete(type);\n      }\n    } finally {\n      this.eventsRunningCount--;\n      if (this.waitForEmptyPromise && this.eventsRunningCount === 0) {\n        this.waitForEmptyPromise.doResolve();\n      }\n    }\n    logEvent(\"After fire\", busEvent);\n  }\n  fireSync(busEvent, instance) {\n    logEvent(\"Before fire\", busEvent);\n    const {type: type} = busEvent;\n    const handlersForType = this.handlersByType.get(type);\n    if (handlersForType && handlersForType.length) {\n      const handlersCopy = handlersForType.slice();\n      handlersCopy.forEach(handler => handler(busEvent, instance));\n    }\n    logEvent(\"After fire\", busEvent);\n  }\n  async waitForEmpty() {\n    if (this.eventsRunningCount === 0) {\n      return;\n    }\n    if (!this.waitForEmptyPromise) {\n      this.waitForEmptyPromise = resolvablePromise();\n    }\n    await this.waitForEmptyPromise;\n    this.waitForEmptyPromise = null;\n  }\n  on(handlers) {\n    const data = asArray(handlers);\n    data.forEach(({type: type, handler: handler}) => {\n      if (!type) {\n        throw new Error(`Attempted to listen to an event with no type: \"${type}\"!`);\n      }\n      if (typeof handler === \"function\") {\n        if (!this.handlersByType.has(type)) {\n          this.handlersByType.set(type, []);\n        }\n        const handlersForType = this.handlersByType.get(type);\n        debugStackTrace(`[EventBus] Adding ${type} event handler`, handler);\n        handlersForType.push(handler);\n      } else {\n        consoleError(HANDLER_NOT_FUNCTION, handler);\n      }\n    });\n    return this;\n  }\n  off(handlers) {\n    const data = asArray(handlers);\n    data.forEach(({type: type, handler: handler}) => {\n      const handlersForType = this.handlersByType.get(type);\n      if (handlersForType) {\n        if (handler) {\n          const index = handlersForType.indexOf(handler);\n          if (index !== -1) {\n            const removed = handlersForType.splice(index, 1);\n            debugStackTrace(`[EventBus] Removing ${type} event handlers`, removed);\n          }\n        } else {\n          debugStackTrace(`[EventBus] Removing all ${type} event handlers`);\n          this.handlersByType.set(type, []);\n        }\n      }\n    });\n    return this;\n  }\n  once(handlers) {\n    const data = asArray(handlers);\n    data.forEach(({type: type, handler: handler}) => {\n      if (typeof handler === \"function\") {\n        const onceHandler = (event, instance) => {\n          this.off({\n            type: type,\n            handler: onceHandler\n          });\n          return handler(event, instance);\n        };\n        this.on({\n          type: type,\n          handler: onceHandler\n        });\n      } else {\n        consoleError(HANDLER_NOT_FUNCTION, handler);\n      }\n    });\n    return this;\n  }\n  logListeners() {\n    this.handlersByType.forEach((listeners, type) => {\n      console.group(`Event ${type} (${listeners.length})`);\n      listeners.forEach(listener => {\n        consoleLog(\"Listener\", listener);\n      });\n      console.groupEnd();\n    });\n  }\n  clear() {\n    this.handlersByType.clear();\n    return this;\n  }\n}\n\nfunction logEvent(message, busEvent) {\n  if (isEnableDebugLog()) {\n    const eventCopy = cloneDeep(busEvent);\n    debugLog(`[EventBus] ${message}`, eventCopy);\n  }\n}\n\nexport { EventBus };\n","import actions from \"../store/actions.js\";\n\nimport { DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS } from \"../store/reducerUtils.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function createCustomPanelInstance(serviceManager) {\n  const customPanelInstance = {\n    open(options = DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS) {\n      const {store: store} = serviceManager;\n      store.dispatch(actions.setCustomPanelConfigOptions(options));\n      store.dispatch(actions.setCustomPanelOpen(true));\n    },\n    close() {\n      serviceManager.store.dispatch(actions.setCustomPanelOpen(false));\n    }\n  };\n  return Object.freeze(customPanelInstance);\n}\n\nexport { createCustomPanelInstance };\n","import { notesToLoadedHistory } from \"../schema/historyToMessages.js\";\n\nimport actions from \"../store/actions.js\";\n\nimport \"../../../types/state/AppState.js\";\n\nimport { consoleError } from \"../utils/miscUtils.js\";\n\nimport { MainWindowOpenReason } from \"../../../types/events/eventBusTypes.js\";\n\nimport { ViewType } from \"../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ class HistoryService {\n  constructor(serviceManager) {\n    this.serviceManager = serviceManager;\n  }\n  async loadHistory(useHistory) {\n    const state = this.serviceManager.store.getState();\n    const {config: config, persistedToBrowserStorage: persistedToBrowserStorage} = state;\n    const publicConfig = config.public;\n    const {viewState: viewState} = persistedToBrowserStorage.launcherState;\n    try {\n      let resultData;\n      if (useHistory) {\n        resultData = useHistory;\n      } else if (publicConfig.messaging?.customLoadHistory) {\n        const items = await publicConfig.messaging.customLoadHistory(this.serviceManager.instance);\n        const note = {\n          body: items\n        };\n        resultData = {\n          notes: [ note ]\n        };\n      }\n      if (resultData) {\n        const historyNotes = resultData?.notes;\n        return notesToLoadedHistory(historyNotes, this.serviceManager);\n      }\n      if (viewState.tour) {\n        await this.serviceManager.actions.changeView(ViewType.MAIN_WINDOW, {\n          mainWindowOpenReason: MainWindowOpenReason.SESSION_HISTORY\n        }, false);\n        this.serviceManager.store.dispatch(actions.clearTourData());\n      }\n    } catch (error) {\n      consoleError(\"An error occurred while attempting to load the conversation history\", error);\n    }\n    return null;\n  }\n}\n\nexport { HistoryService };\n","import { DEFAULT_CHAT_MESSAGES_STATE } from \"../store/reducerUtils.js\";\n\nimport { MessageErrorState } from \"../../../types/messaging/LocalMessageItem.js\";\n\nimport \"../utils/constants.js\";\n\nimport { findLast } from \"../utils/lang/arrayUtils.js\";\n\nimport { deepFreeze } from \"../utils/lang/objectUtils.js\";\n\nimport { isResponse, isRequest, isPause, isResponseWithNestedItems, THREAD_ID_MAIN, isOptionItem, isDateResponseType, isEventRequest } from \"../utils/messageUtils.js\";\n\nimport inputItemToLocalItem from \"./inputItemToLocalItem.js\";\n\nimport { outputItemToLocalItem, createLocalMessageItemsForNestedMessageItems } from \"./outputItemToLocalItem.js\";\n\nimport { BusEventType } from \"../../../types/events/eventBusTypes.js\";\n\nimport { FileStatusValue } from \"../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ async function notesToLoadedHistory(notes, serviceManager) {\n  const allLocalMessagesByID = {};\n  const allMessagesByID = {};\n  const loadingState = {\n    serviceManager: serviceManager,\n    allMessages: [],\n    allMessagesByID: allMessagesByID,\n    allLocalMessagesByID: allLocalMessagesByID,\n    threadMessagesByThreadID: {},\n    responsesByRequestID: {},\n    relatedMessageByID: {},\n    localMessagesByOriginalMessageID: {},\n    lastThreadID: null,\n    loadedHistory: {\n      messageHistory: {\n        allMessageItemsByID: allLocalMessagesByID,\n        allMessagesByID: allMessagesByID,\n        botMessageState: null\n      },\n      latestTransferToAgentResponse: null,\n      latestPanelLocalMessageItem: null\n    }\n  };\n  await notesToMessages(notes, loadingState);\n  if (!loadingState.allMessages.length) {\n    return null;\n  }\n  createLocalMessages(loadingState);\n  createChatStates(loadingState);\n  markIsLatestWelcomeNode(loadingState);\n  markSelectedOptions(loadingState);\n  return loadingState.loadedHistory;\n}\n\nasync function notesToMessages(notes, loadingState) {\n  const {allMessages: allMessages, allMessagesByID: allMessagesByID, responsesByRequestID: responsesByRequestID, relatedMessageByID: relatedMessageByID, serviceManager: serviceManager, localMessagesByOriginalMessageID: localMessagesByOriginalMessageID} = loadingState;\n  if (!notes?.length) {\n    return;\n  }\n  notes.forEach(note => {\n    const sessionHistory = note.body;\n    const pushAndPrepareMessage = historyItem => {\n      const {message: message} = historyItem;\n      if (!isEventRequest(message) && (isRequest(message) || isResponse(message))) {\n        addMessage(message, loadingState, historyItem);\n      }\n    };\n    sessionHistory.forEach(pushAndPrepareMessage);\n  });\n  for (let index = allMessages.length - 1; index >= 0; index--) {\n    const message = allMessages[index];\n    if (message.history?.file_upload_status === FileStatusValue.UPLOADING) {\n      message.history.file_upload_status = FileStatusValue.COMPLETE;\n      message.history.error_state = MessageErrorState.FAILED;\n    }\n    if (isResponse(message) && message.history.silent) {\n      allMessages.splice(index, 1);\n      delete allMessagesByID[message.id];\n    } else {\n      localMessagesByOriginalMessageID[message.id] = [];\n      if (isResponse(message) && message.request_id) {\n        responsesByRequestID[message.request_id] = message;\n      }\n      if (message.history.related_message_id) {\n        relatedMessageByID[message.history.related_message_id] = message;\n      }\n    }\n  }\n  if (!allMessages.length) {\n    return;\n  }\n  Object.freeze(allMessages);\n  const beginEvent = {\n    type: BusEventType.HISTORY_BEGIN,\n    messages: allMessages\n  };\n  await serviceManager.eventBus.fire(beginEvent, serviceManager.instance);\n  allMessages.forEach(deepFreeze);\n  await serviceManager.eventBus.fire({\n    type: BusEventType.HISTORY_END,\n    messages: allMessages\n  }, serviceManager.instance);\n}\n\nfunction addMessage(message, loadingState, historyItem) {\n  message.history = message.history || {};\n  message.history.from_history = true;\n  message.history.timestamp = new Date(historyItem.time).getTime();\n  if (message.thread_id !== THREAD_ID_MAIN) {\n    loadingState.lastThreadID = message.thread_id;\n  }\n  loadingState.allMessagesByID[message.id] = message;\n  loadingState.allMessages.push(message);\n}\n\nfunction createLocalMessages(loadingState) {\n  const {allMessages: allMessages, allLocalMessagesByID: allLocalMessagesByID, localMessagesByOriginalMessageID: localMessagesByOriginalMessageID} = loadingState;\n  allMessages.forEach(message => {\n    if (isRequest(message)) {\n      if (!message.history?.silent) {\n        const text = message.history?.label || message.input.text;\n        const localMessage = inputItemToLocalItem(message, text);\n        localMessagesByOriginalMessageID[message.id].push(localMessage);\n        allLocalMessagesByID[localMessage.ui_state.id] = localMessage;\n      }\n    } else {\n      const items = getResponseItems(message);\n      if (items?.length) {\n        items.forEach(messageItem => {\n          if (!isPause(messageItem)) {\n            const localMessage = outputItemToLocalItem(messageItem, message, false);\n            localMessagesByOriginalMessageID[message.id].push(localMessage);\n            allLocalMessagesByID[localMessage.ui_state.id] = localMessage;\n            if (isResponseWithNestedItems(localMessage.item)) {\n              const nestedLocalMessageItems = [];\n              createLocalMessageItemsForNestedMessageItems(localMessage, message, true, nestedLocalMessageItems, true);\n              nestedLocalMessageItems.forEach(localMessageItem => {\n                const localMessageID = localMessageItem.ui_state.id;\n                loadingState.loadedHistory.messageHistory.allMessageItemsByID[localMessageID] = localMessageItem;\n              });\n            }\n          }\n        });\n      }\n    }\n    addMessageToThread(message, loadingState);\n  });\n}\n\nfunction getResponseItems(message) {\n  if (isResponse(message)) {\n    return message.output.generic;\n  }\n  return null;\n}\n\nfunction addMessageToThread(message, loadingState) {\n  const {threadMessagesByThreadID: threadMessagesByThreadID} = loadingState;\n  let thread = threadMessagesByThreadID[THREAD_ID_MAIN];\n  if (!thread) {\n    thread = [];\n    threadMessagesByThreadID[THREAD_ID_MAIN] = thread;\n  }\n  thread.push(message);\n}\n\nfunction createChatStates(loadingState) {\n  const {loadedHistory: loadedHistory, threadMessagesByThreadID: threadMessagesByThreadID, localMessagesByOriginalMessageID: localMessagesByOriginalMessageID} = loadingState;\n  loadedHistory.messageHistory.botMessageState = toChatMessageState(threadMessagesByThreadID[THREAD_ID_MAIN], localMessagesByOriginalMessageID);\n}\n\nfunction toChatMessageState(messages, localMessagesByFullMessageID) {\n  const localMessageIDs = [];\n  const messageIDs = [];\n  if (messages) {\n    messages.forEach(message => {\n      messageIDs.push(message.id);\n      localMessagesByFullMessageID[message.id].forEach(localMessage => {\n        localMessageIDs.push(localMessage.ui_state.id);\n      });\n    });\n  }\n  return {\n    ...DEFAULT_CHAT_MESSAGES_STATE,\n    localMessageIDs: localMessageIDs,\n    messageIDs: messageIDs\n  };\n}\n\nfunction markIsLatestWelcomeNode(loadingState) {\n  const {responsesByRequestID: responsesByRequestID, threadMessagesByThreadID: threadMessagesByThreadID, localMessagesByOriginalMessageID: localMessagesByOriginalMessageID} = loadingState;\n  const mainThreadMessages = threadMessagesByThreadID[THREAD_ID_MAIN];\n  const welcomeRequest = findLast(mainThreadMessages, message => isRequest(message) && message.history.is_welcome_request);\n  if (welcomeRequest) {\n    const welcomeResponse = responsesByRequestID[welcomeRequest.id];\n    if (welcomeResponse) {\n      localMessagesByOriginalMessageID[welcomeResponse.id].forEach(localMessage => {\n        localMessage.ui_state.isWelcomeResponse = true;\n      });\n    }\n  }\n}\n\nfunction markSelectedOptions({allMessages: allMessages, relatedMessageByID: relatedMessageByID, localMessagesByOriginalMessageID: localMessagesByOriginalMessageID}) {\n  allMessages.forEach(message => {\n    if (isResponse(message)) {\n      localMessagesByOriginalMessageID[message.id].forEach(localMessage => {\n        if (isOptionItem(localMessage.item)) {\n          const relatedRequest = relatedMessageByID[message.id];\n          if (isRequest(relatedRequest)) {\n            localMessage.ui_state.optionSelected = relatedRequest;\n          }\n        } else if (isDateResponseType(localMessage)) {\n          const relatedRequest = relatedMessageByID[message.id];\n          if (isRequest(relatedRequest)) {\n            localMessage.ui_state.originalUserText = relatedRequest.history.label;\n          }\n        }\n      });\n    }\n  });\n}\n\nexport { notesToLoadedHistory };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nclass MessageLoadingManager {\n  start(onExceededMaxSilentLoading, onEnd, onTimeout, msMaxSilentLoading, msMaxAttempt) {\n    this.hasExceededMaxSilentLoading = false;\n    this.onEnd = onEnd;\n    this.onSilentLoading = setTimeout(() => {\n      this.hasExceededMaxSilentLoading = true;\n      onExceededMaxSilentLoading();\n    }, msMaxSilentLoading);\n    this.onMaxAttempt = setTimeout(() => {\n      onTimeout();\n    }, msMaxAttempt);\n  }\n  end() {\n    if (this.onMaxAttempt) {\n      clearTimeout(this.onMaxAttempt);\n    }\n    if (this.onSilentLoading) {\n      clearTimeout(this.onSilentLoading);\n    }\n    if (this.onEnd) {\n      this.onEnd(this.hasExceededMaxSilentLoading);\n    }\n    this.hasExceededMaxSilentLoading = null;\n    this.onEnd = null;\n  }\n}\n\nexport { MessageLoadingManager };\n","import cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport inputItemToLocalItem from \"../schema/inputItemToLocalItem.js\";\n\nimport { createLocalMessageForInlineError } from \"../schema/outputItemToLocalItem.js\";\n\nimport actions from \"../store/actions.js\";\n\nimport { MessageErrorState } from \"../../../types/messaging/LocalMessageItem.js\";\n\nimport { deepFreeze } from \"../utils/lang/objectUtils.js\";\n\nimport { MessageLoadingManager } from \"../utils/messageServiceUtils.js\";\n\nimport { getLastBotResponseWithContext, THREAD_ID_MAIN } from \"../utils/messageUtils.js\";\n\nimport { debugLog, consoleError, safeFetchTextWithTimeout } from \"../utils/miscUtils.js\";\n\nimport { resolvablePromise } from \"../utils/resolvablePromise.js\";\n\nimport { MessageInputType } from \"../../../types/messaging/Messages.js\";\n\nimport { MessageSendSource, BusEventType } from \"../../../types/events/eventBusTypes.js\";\n\nimport { OnErrorType } from \"../../../types/config/PublicConfig.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst MS_BETWEEN_RETRIES = [ 1e3, 3e3, 5e3 ];\n\nconst MS_MAX_ATTEMPT = 150 * 1e3;\n\nconst MS_MAX_SILENT_ERROR = 6e3;\n\nconst MS_MAX_SILENT_LOADING = 4e3;\n\nvar RetryType;\n\n(function(RetryType) {\n  RetryType[RetryType[\"SILENT\"] = 1] = \"SILENT\";\n  RetryType[RetryType[\"VISIBLE\"] = 2] = \"VISIBLE\";\n})(RetryType || (RetryType = {}));\n\nclass MessageService {\n  constructor(serviceManager, publicConfig) {\n    this.pendingLocale = false;\n    this.localeIsExplicit = false;\n    this.serviceManager = serviceManager;\n    this.messageLoadingManager = new MessageLoadingManager;\n    this.queue = {\n      waiting: [],\n      current: null\n    };\n    const timeoutOverride = publicConfig.messaging?.messageTimeoutSecs;\n    this.timeoutMS = timeoutOverride ? timeoutOverride * 1e3 : MS_MAX_ATTEMPT;\n  }\n  async processSuccess(current, received) {\n    const {requestOptions: requestOptions, isProcessed: isProcessed} = current;\n    const isWelcomeNode = Boolean(current.message.history.is_welcome_request);\n    if (isProcessed) {\n      return;\n    }\n    this.setMessageErrorState(current, MessageErrorState.NONE);\n    const {message: message} = current;\n    if (received) {\n      if (message.input.message_type !== MessageInputType.EVENT) {\n        if (!isWelcomeNode) {\n          this.messageLoadingManager.end();\n        }\n        received.history = received.history || {};\n        received.history.timestamp = received.history.timestamp || Date.now();\n        current.trackData.lastRequestTime = Date.now() - current.timeLastRequest;\n        current.trackData.totalRequestTime = Date.now() - current.timeFirstRequest;\n        await this.serviceManager.actions.receive(received, isWelcomeNode, message, requestOptions);\n      }\n      this.messageLoadingManager.end();\n    }\n    if (current.isProcessed) {\n      return;\n    }\n    {\n      current.sendMessagePromise.doResolve();\n      current.isProcessed = true;\n    }\n    this.moveToNextQueueItem();\n  }\n  addErrorMessage() {\n    const {store: store} = this.serviceManager;\n    const errorMessage = store.getState().languagePack.errors_singleMessage;\n    const {originalMessage: originalMessage, localMessage: localMessage} = createLocalMessageForInlineError(errorMessage);\n    store.dispatch(actions.addLocalMessageItem(localMessage, originalMessage, true));\n  }\n  async resendMessage(message, localMessageID) {\n    await this.send(cloneDeep(message), MessageSendSource.HYDRATE_RESEND, localMessageID, {\n      skipQueue: true,\n      silent: true\n    });\n  }\n  sendToAssistantAndUpdateErrorState(current) {\n    if (current.isProcessed) {\n      return;\n    }\n    this.sendToAssistant(current);\n    const now = Date.now();\n    const msSinceStarted = now - current.timeFirstRequest;\n    const isSilentErrorWindow = MS_MAX_SILENT_ERROR > msSinceStarted;\n    const type = isSilentErrorWindow ? RetryType.SILENT : RetryType.VISIBLE;\n    if (type === RetryType.VISIBLE) {\n      this.setMessageErrorState(current, MessageErrorState.RETRYING);\n      this.queue.waiting.forEach(waitingMessage => {\n        this.setMessageErrorState(waitingMessage, MessageErrorState.WAITING);\n      });\n    }\n  }\n  async processError(pendingRequest, resultText, allowRetry) {\n    const {message: message, timeFirstRequest: timeFirstRequest, timeLastRequest: timeLastRequest, tryCount: tryCount, isProcessed: isProcessed, trackData: trackData, requestOptions: requestOptions} = pendingRequest;\n    const isWelcome = message.history.is_welcome_request;\n    const now = Date.now();\n    const msSinceStarted = now - timeFirstRequest;\n    const isInAttemptWindow = this.timeoutMS > msSinceStarted && tryCount < MS_BETWEEN_RETRIES.length;\n    if (isProcessed) {\n      return;\n    }\n    trackData.lastRequestTime = Date.now() - timeLastRequest;\n    trackData.totalRequestTime = Date.now() - timeFirstRequest;\n    if (isInAttemptWindow && allowRetry) {\n      trackData.numErrors++;\n      const retryDelay = MS_BETWEEN_RETRIES[pendingRequest.tryCount++];\n      setTimeout(() => {\n        this.sendToAssistantAndUpdateErrorState(pendingRequest);\n      }, retryDelay);\n    } else {\n      let catastrophicErrorType = false;\n      if (isWelcome) {\n        catastrophicErrorType = true;\n      } else if (requestOptions.silent) {\n        this.addErrorMessage();\n      }\n      this.serviceManager.actions.errorOccurred({\n        errorType: OnErrorType.MESSAGE_COMMUNICATION,\n        message: \"An error occurred sending a message\",\n        otherData: resultText,\n        catastrophicErrorType: catastrophicErrorType\n      });\n      this.rejectFinalErrorOnMessage(pendingRequest, resultText);\n    }\n  }\n  rejectFinalErrorOnMessage(pendingRequest, resultText = \"An undefined error occurred trying to send your message.\") {\n    const {sendMessagePromise: sendMessagePromise} = pendingRequest;\n    this.setMessageErrorState(pendingRequest, MessageErrorState.FAILED);\n    const {message: message} = pendingRequest;\n    if (pendingRequest === this.queue.current && message.input.message_type !== MessageInputType.EVENT && !message.history.is_welcome_request) {\n      this.messageLoadingManager.end();\n    }\n    sendMessagePromise.doReject(new Error(resultText));\n    pendingRequest.isProcessed = true;\n    if (pendingRequest === this.queue.current) {\n      this.moveToNextQueueItem();\n    }\n  }\n  async sendToAssistant(current) {\n    const {store: store} = this.serviceManager;\n    const state = store.getState();\n    const {customSendMessage: customSendMessage} = state.config.public.messaging;\n    current.timeLastRequest = Date.now();\n    if (current.isProcessed) {\n      return;\n    }\n    try {\n      const message = cloneDeep(current.message);\n      current.message = message;\n      store.dispatch(actions.updateMessage(message));\n      const controller = new AbortController;\n      current.sendMessageController = controller;\n      debugLog(\"Called customSendMessage\", message);\n      await customSendMessage(message, {\n        signal: controller.signal\n      }, this.serviceManager.instance);\n      await this.processSuccess(current, null);\n    } catch (error) {\n      consoleError(\"An error occurred while sending a message\", error);\n      const resultText = error && (typeof error === \"string\" ? error : JSON.stringify(error)) || \"There was an unidentified error.\";\n      this.processError(current, resultText, !customSendMessage);\n    }\n  }\n  async runQueueIfReady() {\n    if (!this.queue.current && this.queue.waiting.length > 0) {\n      const {eventBus: eventBus, store: store} = this.serviceManager;\n      this.clearCurrentQueueItem();\n      this.queue.current = this.queue.waiting.shift();\n      const {current: current} = this.queue;\n      const {message: message, source: source} = current;\n      const state = store.getState();\n      const {config: config} = store.getState();\n      const {public: publicConfig} = config;\n      current.timeFirstRequest = Date.now();\n      if (message.input.message_type !== MessageInputType.EVENT) {\n        const lastResponse = getLastBotResponseWithContext(state);\n        if (lastResponse) {\n          message.thread_id = THREAD_ID_MAIN;\n        }\n        if (!message.history.is_welcome_request) {\n          const LOADING_INDICATOR_TIMER = !publicConfig.messaging?.messageLoadingIndicatorTimeoutSecs && publicConfig.messaging?.messageLoadingIndicatorTimeoutSecs !== 0 ? MS_MAX_SILENT_LOADING : publicConfig.messaging.messageLoadingIndicatorTimeoutSecs * 1e3;\n          this.messageLoadingManager.start(() => {\n            this.serviceManager.store.dispatch(actions.addIsLoadingCounter(1));\n          }, didExceedMaxLoading => {\n            if (didExceedMaxLoading) {\n              this.serviceManager.store.dispatch(actions.addIsLoadingCounter(-1));\n            }\n          }, () => {\n            this.cancelMessageRequestByID(message.id, true);\n          }, LOADING_INDICATOR_TIMER, this.timeoutMS);\n        }\n        if (current.isProcessed) {\n          return;\n        }\n        const originalUserText = message.history?.label || message.input.text;\n        await eventBus.fire({\n          type: BusEventType.PRE_SEND,\n          data: message,\n          source: source\n        }, this.serviceManager.instance);\n        if (current.isProcessed) {\n          return;\n        }\n        const localMessage = inputItemToLocalItem(message, originalUserText, current.localMessageID);\n        if (!message.history.silent) {\n          store.dispatch(actions.updateLocalMessageItem(localMessage));\n          store.dispatch(actions.updateMessage(message));\n        }\n        deepFreeze(message);\n        await eventBus.fire({\n          type: BusEventType.SEND,\n          data: message,\n          source: source\n        }, this.serviceManager.instance);\n      }\n      this.sendToAssistant(current);\n    }\n  }\n  addToMessageQueue(message, source, localMessageID, sendMessagePromise, requestOptions = {}) {\n    const newPendingMessage = {\n      localMessageID: localMessageID,\n      message: message,\n      sendMessagePromise: sendMessagePromise,\n      requestOptions: requestOptions || {},\n      timeFirstRequest: 0,\n      timeLastRequest: 0,\n      trackData: {\n        numErrors: 0,\n        lastRequestTime: 0,\n        totalRequestTime: 0\n      },\n      tryCount: 0,\n      isProcessed: false,\n      source: source\n    };\n    this.queue.waiting.push(newPendingMessage);\n    if (this.queue.current) {\n      if (message.history?.error_state === MessageErrorState.RETRYING) {\n        this.setMessageErrorState(newPendingMessage, MessageErrorState.WAITING);\n      }\n    }\n  }\n  clearCurrentQueueItem() {\n    if (this.queue.current) {\n      this.queue.current = null;\n    }\n  }\n  moveToNextQueueItem() {\n    this.clearCurrentQueueItem();\n    this.runQueueIfReady();\n  }\n  setMessageErrorState(pendingRequest, errorState) {\n    const {message: message} = pendingRequest;\n    const {allMessagesByID: allMessagesByID} = this.serviceManager.store.getState();\n    const messageToUpdate = allMessagesByID[message.id];\n    if (messageToUpdate) {\n      const currentState = messageToUpdate.history?.error_state;\n      const errorSame = currentState === errorState || errorState === MessageErrorState.NONE && !currentState;\n      if (!errorSame) {\n        let announceMessageID;\n        switch (errorState) {\n         case MessageErrorState.FAILED:\n          {\n            announceMessageID = \"errors_ariaMessageFailed\";\n            break;\n          }\n        }\n        if (announceMessageID) {\n          this.serviceManager.store.dispatch(actions.announceMessage({\n            messageID: announceMessageID\n          }));\n        }\n        this.serviceManager.store.dispatch(actions.setMessageErrorState(message.id, errorState));\n        const {allMessagesByID: allMessagesByID} = this.serviceManager.store.getState();\n        pendingRequest.message = allMessagesByID[message.id];\n      }\n    }\n  }\n  send(message, source, localMessageID, requestOptions) {\n    message.history.timestamp = message.history.timestamp || Date.now();\n    message.input = message.input || {};\n    message.input.message_type = message.input.message_type || MessageInputType.TEXT;\n    const sendMessagePromise = resolvablePromise();\n    this.addToMessageQueue(message, source, localMessageID, sendMessagePromise, requestOptions);\n    this.runQueueIfReady();\n    return sendMessagePromise;\n  }\n  cancelAllMessageRequests() {\n    while (this.queue.waiting.length) {\n      this.cancelMessageRequestByID(this.queue.waiting[0].message.id, false);\n    }\n    if (this.queue.current) {\n      this.cancelMessageRequestByID(this.queue.current.message.id, false);\n      this.clearCurrentQueueItem();\n    }\n  }\n  async cancelMessageRequestByID(messageID, logError) {\n    let pendingRequest;\n    if (this.queue.current?.message.id === messageID) {\n      pendingRequest = this.queue.current;\n    } else {\n      const index = this.queue.waiting.findIndex(item => item.message.id === messageID);\n      if (index !== -1) {\n        pendingRequest = this.queue.waiting[index];\n        this.queue.waiting.splice(index, 1);\n      }\n    }\n    if (pendingRequest) {\n      const {lastResponse: lastResponse, sendMessageController: sendMessageController} = pendingRequest;\n      sendMessageController?.abort(\"Message was cancelled\");\n      this.rejectFinalErrorOnMessage(pendingRequest, \"Message was cancelled\");\n      if (logError) {\n        this.serviceManager.actions.errorOccurred({\n          errorType: OnErrorType.MESSAGE_COMMUNICATION,\n          message: \"Message was cancelled\",\n          otherData: await safeFetchTextWithTimeout(lastResponse)\n        });\n      }\n    }\n  }\n}\n\nexport { MessageService as default };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nclass NamespaceService {\n  constructor(namespace) {\n    this.originalName = namespace;\n    this.attributeSafe = namespace;\n    this.suffix = getSuffix(namespace);\n  }\n}\n\nfunction getSuffix(namespace) {\n  const computedName = computeNamespaceName(namespace);\n  return computedName?.length ? `--${namespace}` : \"\";\n}\n\nfunction computeNamespaceName(namespace) {\n  return namespace ? namespace.trim() : \"\";\n}\n\nexport { NamespaceService };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nclass ServiceManager {\n  constructor() {\n    this.userDefinedElementRegistry = new Map;\n    this.restartCount = 0;\n  }\n  async fire(busEvent) {\n    return this.eventBus.fire(busEvent, this.instance);\n  }\n}\n\nexport { ServiceManager };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nlet innerStorage = {};\n\nconst storage = {\n  getItem(key) {\n    return innerStorage[key];\n  },\n  setItem(key, value) {\n    innerStorage[key] = value;\n  },\n  removeItem(key) {\n    delete innerStorage[key];\n  },\n  length: Object.keys(innerStorage).length,\n  clear() {\n    innerStorage = {};\n  },\n  key(index) {\n    return Object.keys(innerStorage)[index];\n  }\n};\n\nexport { storage as default };\n","import { VERSION } from \"../environmentVariables.js\";\n\nimport { IS_SESSION_STORAGE } from \"../utils/browserUtils.js\";\n\nimport { consoleError } from \"../utils/miscUtils.js\";\n\nimport storage$1 from \"./mockStorage.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst storage = IS_SESSION_STORAGE() ? window.sessionStorage : storage$1;\n\nclass UserSessionStorageService {\n  constructor(serviceManager) {\n    this.serviceManager = serviceManager;\n    this.prefix = `CARBON_CHAT_SESSION${this.serviceManager?.namespace?.suffix || \"\"}`;\n  }\n  loadChatSession() {\n    try {\n      const chatSessionString = storage.getItem(this.getChatSessionKey());\n      const chatSession = chatSessionString ? JSON.parse(chatSessionString) : null;\n      if (chatSession?.version === VERSION) {\n        return chatSession;\n      }\n      this.clearChatSession();\n      return null;\n    } catch (error) {\n      this.clearChatSession();\n      return null;\n    }\n  }\n  loadLauncherSession() {\n    try {\n      const launcherSessionString = storage.getItem(this.getLauncherSessionKey());\n      const launcherSession = launcherSessionString ? JSON.parse(launcherSessionString) : null;\n      if (launcherSession?.version === VERSION) {\n        launcherSession.wasLoadedFromBrowser = true;\n        return launcherSession;\n      }\n      this.clearLauncherSession();\n      return null;\n    } catch (error) {\n      this.clearLauncherSession();\n      return null;\n    }\n  }\n  persistChatSession(session) {\n    try {\n      storage.setItem(this.getChatSessionKey(), JSON.stringify(session));\n    } catch (error) {\n      consoleError(\"Error in persistChatSession\", error);\n    }\n  }\n  persistLauncherSession(session) {\n    try {\n      storage.setItem(this.getLauncherSessionKey(), JSON.stringify(session));\n    } catch (error) {\n      consoleError(\"Error in persistLauncherSession\", error);\n    }\n  }\n  clearChatSession() {\n    try {\n      storage.removeItem(this.getChatSessionKey());\n    } catch (error) {\n      consoleError(\"Error in clearChatSession\", error);\n    }\n  }\n  clearLauncherSession() {\n    try {\n      storage.removeItem(this.getLauncherSessionKey());\n    } catch (error) {\n      consoleError(\"Error in clearLauncherSession\", error);\n    }\n  }\n  getChatSessionKey() {\n    return this.prefix;\n  }\n  getLauncherSessionKey() {\n    return this.prefix;\n  }\n}\n\nexport { UserSessionStorageService };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction replaceCurrentArrayValue(currentValue, newValue) {\n  if (Array.isArray(newValue)) {\n    return newValue;\n  }\n  return undefined;\n}\n\nexport { replaceCurrentArrayValue };\n","import { HA_END_CHAT, HA_UPDATE_FILE_UPLOAD_IN_PROGRESS, HA_SET_IS_SCREEN_SHARING, HA_UPDATE_CAPABILITIES, HA_SET_AGENT_LEFT_CHAT, HA_UPDATE_IS_TYPING, HA_UPDATE_IS_SUSPENDED, HA_SET_PERSISTED_STATE, HA_SET_AGENT_JOINED, HA_SET_SHOW_SCREEN_SHARE_REQUEST, HA_SET_AGENT_AVAILABILITY, HA_SET_IS_RECONNECTING, HA_SET_IS_CONNECTING } from \"./agentActions.js\";\n\nimport { applyLocalMessageUIState } from \"./reducerUtils.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const agentReducers = {\n  [HA_SET_IS_CONNECTING]: (state, action) => {\n    const {isConnecting: isConnecting, localMessageID: localMessageID} = action;\n    return {\n      ...state,\n      agentState: {\n        ...state.agentState,\n        isConnecting: isConnecting,\n        activeLocalMessageID: localMessageID,\n        numUnreadMessages: isConnecting ? 0 : state.agentState.numUnreadMessages\n      },\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          agentState: {\n            ...state.persistedToBrowserStorage.chatState.agentState,\n            isSuspended: isConnecting ? state.persistedToBrowserStorage.chatState.agentState.isSuspended : false\n          }\n        }\n      }\n    };\n  },\n  [HA_SET_IS_RECONNECTING]: (state, action) => {\n    const {isReconnecting: isReconnecting} = action;\n    return {\n      ...state,\n      agentState: {\n        ...state.agentState,\n        isReconnecting: isReconnecting\n      }\n    };\n  },\n  [HA_SET_AGENT_AVAILABILITY]: (state, action) => {\n    if (!state.agentState.isConnecting) {\n      return state;\n    }\n    return {\n      ...state,\n      agentState: {\n        ...state.agentState,\n        availability: state.agentState.isConnecting ? action.availability : null\n      }\n    };\n  },\n  [HA_SET_SHOW_SCREEN_SHARE_REQUEST]: (state, {showRequest: showRequest}) => ({\n    ...state,\n    agentState: {\n      ...state.agentState,\n      showScreenShareRequest: showRequest\n    }\n  }),\n  [HA_SET_AGENT_JOINED]: (state, action) => {\n    const agentProfiles = {\n      ...state.persistedToBrowserStorage.chatState.agentState.agentProfiles\n    };\n    const {agentProfile: agentProfile} = action;\n    if (agentProfile) {\n      agentProfiles[agentProfile.id] = agentProfile;\n    }\n    return {\n      ...state,\n      agentState: {\n        ...state.agentState,\n        isConnecting: false,\n        isReconnecting: false,\n        availability: null\n      },\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          agentState: {\n            ...state.persistedToBrowserStorage.chatState.agentState,\n            isConnected: true,\n            agentProfile: agentProfile,\n            agentProfiles: agentProfiles\n          }\n        }\n      }\n    };\n  },\n  [HA_SET_PERSISTED_STATE]: (state, action) => ({\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        agentState: {\n          ...state.persistedToBrowserStorage.chatState.agentState,\n          serviceDeskState: action.state\n        }\n      }\n    }\n  }),\n  [HA_UPDATE_IS_SUSPENDED]: (state, action) => {\n    if (!state.agentState.isConnecting && !state.persistedToBrowserStorage.chatState.agentState.isConnected) {\n      return state;\n    }\n    return {\n      ...state,\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          agentState: {\n            ...state.persistedToBrowserStorage.chatState.agentState,\n            isSuspended: action.isSuspended\n          }\n        }\n      }\n    };\n  },\n  [HA_UPDATE_IS_TYPING]: (state, action) => ({\n    ...state,\n    agentState: {\n      ...state.agentState,\n      isAgentTyping: action.isTyping\n    }\n  }),\n  [HA_SET_AGENT_LEFT_CHAT]: state => ({\n    ...state,\n    botMessageState: {\n      ...state.botMessageState\n    },\n    agentState: {\n      ...state.agentState,\n      isAgentTyping: false\n    },\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        agentState: {\n          ...state.persistedToBrowserStorage.chatState.agentState,\n          agentProfile: null\n        }\n      }\n    }\n  }),\n  [HA_UPDATE_CAPABILITIES]: (state, action) => {\n    const newInputState = {\n      ...state.agentState.inputState,\n      ...action.capabilities\n    };\n    if (!newInputState.allowFileUploads) {\n      newInputState.files = [];\n    }\n    return {\n      ...state,\n      agentState: {\n        ...state.agentState,\n        inputState: newInputState\n      }\n    };\n  },\n  [HA_SET_IS_SCREEN_SHARING]: (state, {isSharing: isSharing}) => ({\n    ...state,\n    agentState: {\n      ...state.agentState,\n      isScreenSharing: isSharing\n    }\n  }),\n  [HA_UPDATE_FILE_UPLOAD_IN_PROGRESS]: (state, action) => ({\n    ...state,\n    agentState: {\n      ...state.agentState,\n      fileUploadInProgress: action.fileUploadInProgress\n    }\n  }),\n  [HA_END_CHAT]: state => {\n    let newState = applyLocalMessageUIState(state, state.agentState.activeLocalMessageID, \"wasAgentChatEnded\", true);\n    newState = {\n      ...newState,\n      agentState: {\n        ...newState.agentState,\n        isConnecting: false,\n        isReconnecting: false,\n        availability: null,\n        activeLocalMessageID: null,\n        isAgentTyping: false,\n        inputState: {\n          ...newState.agentState.inputState,\n          isReadonly: false\n        }\n      },\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          agentState: {\n            ...state.persistedToBrowserStorage.chatState.agentState,\n            isConnected: false,\n            isSuspended: false,\n            agentProfile: null\n          }\n        }\n      }\n    };\n    return newState;\n  }\n};\n\nexport { agentReducers };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction populateTourStepItems(state) {\n  const {activeTourID: activeTourID} = state.persistedToBrowserStorage.chatState.persistedTourState;\n  if (activeTourID) {\n    const originalMessage = state.allMessagesByID[activeTourID];\n    const tourMessageItem = originalMessage?.output?.generic?.find(message => Boolean(message.user_defined?.steps));\n    if (tourMessageItem) {\n      return {\n        ...state,\n        tourState: {\n          ...state.tourState,\n          activeTourStepItems: tourMessageItem.user_defined?.steps\n        }\n      };\n    }\n  }\n  return clearTourState(state);\n}\n\nfunction clearTourState(state) {\n  return {\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        persistedTourState: {\n          activeTourID: null,\n          activeTourCurrentStepIndex: null\n        }\n      },\n      launcherState: {\n        ...state.persistedToBrowserStorage.launcherState,\n        activeTour: false\n      }\n    },\n    tourState: {\n      ...state.tourState,\n      activeTourStepItems: null\n    }\n  };\n}\n\nexport { clearTourState, populateTourStepItems };\n","import merge from \"lodash-es/merge.js\";\n\nimport mergeWith from \"lodash-es/mergeWith.js\";\n\nimport { outputItemToLocalItem } from \"../schema/outputItemToLocalItem.js\";\n\nimport \"../utils/constants.js\";\n\nimport { replaceCurrentArrayValue } from \"../utils/customizers.js\";\n\nimport { streamItemID, isResponse, isRequest } from \"../utils/messageUtils.js\";\n\nimport { UPDATE_MAIN_HEADER_AVATAR, SET_STREAM_ID, SET_STOP_STREAMING_BUTTON_DISABLED, SET_STOP_STREAMING_BUTTON_VISIBLE, UPDATE_MAX_VISIBLE_HEADER_OBJECTS, UPDATE_CHAT_HEADER_CONFIG, STREAMING_ADD_CHUNK, STREAMING_MERGE_HISTORY, STREAMING_START, SET_RESPONSE_PANEL_CONTENT, SET_RESPONSE_PANEL_IS_OPEN, ADD_NESTED_MESSAGES, FILE_UPLOAD_INPUT_ERROR, CLEAR_INPUT_FILES, REMOVE_ALL_NOTIFICATIONS, REMOVE_NOTIFICATIONS, ADD_NOTIFICATION, REMOVE_LOCAL_MESSAGE_ITEM, REMOVE_INPUT_FILE, ADD_INPUT_FILE, SET_IS_BROWSER_PAGE_VISIBLE, UPDATE_INPUT_STATE, CHANGE_STEP_IN_TOUR, CLEAR_TOUR_DATA, SET_TOUR_DATA, SET_CUSTOM_PANEL_OPTIONS, SET_CUSTOM_PANEL_OPEN, SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN, CLOSE_IFRAME_PANEL, OPEN_IFRAME_CONTENT, SET_LAUNCHER_MINIMIZED, SET_CHAT_MESSAGES_PROPERTY, SET_LAUNCHER_CONFIG_PROPERTY, SET_LAUNCHER_PROPERTY, UPDATE_LAUNCHER_CONFIG, TOGGLE_HOME_SCREEN, SET_HOME_SCREEN_IS_OPEN, ACCEPTED_DISCLAIMER, ANNOUNCE_MESSAGE, MERGE_HISTORY, SET_MESSAGE_HISTORY_PROPERTY, SET_MESSAGE_UI_PROPERTY, UPDATE_HOME_SCREEN_CONFIG, UPDATE_CSS_VARIABLES, UPDATE_MAIN_HEADER_TITLE, UPDATE_LAUNCHER_AVATAR_URL, UPDATE_BOT_AVATAR_URL, UPDATE_BOT_NAME, SET_INITIAL_VIEW_CHANGE_COMPLETE, SET_VIEW_CHANGING, SET_VIEW_STATE, UPDATE_HAS_SENT_NON_WELCOME_MESSAGE, UPDATE_PERSISTED_CHAT_STATE, SET_APP_STATE_VALUE, ADD_IS_HYDRATING_COUNTER, ADD_IS_LOADING_COUNTER, ADD_IS_TYPING_COUNTER, MESSAGE_SET_OPTION_SELECTED, ADD_MESSAGE, UPDATE_MESSAGE, UPDATE_LOCAL_MESSAGE_ITEM, REMOVE_MESSAGES, ADD_LOCAL_MESSAGE_ITEM, HYDRATE_MESSAGE_HISTORY, RESTART_CONVERSATION, HYDRATE_CHAT, CHANGE_STATE } from \"./actions.js\";\n\nimport { agentReducers } from \"./agentReducers.js\";\n\nimport { setHomeScreenOpenState, applyFullMessage, applyBotMessageState, applyLocalMessageUIState, handleViewStateChange, DEFAULT_CUSTOM_PANEL_STATE, DEFAULT_CITATION_PANEL_STATE, DEFAULT_IFRAME_PANEL_STATE } from \"./reducerUtils.js\";\n\nimport { clearTourState, populateTourStepItems } from \"./tourReducerUtils.js\";\n\nimport { AgentMessageType } from \"../../../types/messaging/Messages.js\";\n\nimport { FileStatusValue, LauncherType } from \"../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst EXCLUDE_AGENT_UNREAD = new Set([ AgentMessageType.USER_ENDED_CHAT, AgentMessageType.CHAT_WAS_ENDED, AgentMessageType.RELOAD_WARNING ]);\n\nconst reducers = {\n  [CHANGE_STATE]: (state, action) => merge({}, state, action.partialState),\n  [HYDRATE_CHAT]: state => ({\n    ...state,\n    isHydrated: true\n  }),\n  [RESTART_CONVERSATION]: state => {\n    let newState = {\n      ...state,\n      botMessageState: {\n        ...state.botMessageState,\n        localMessageIDs: [],\n        messageIDs: [],\n        isTypingCounter: 0,\n        isScrollAnchored: false\n      },\n      allMessageItemsByID: {},\n      allMessagesByID: {},\n      iFramePanelState: {\n        ...DEFAULT_IFRAME_PANEL_STATE\n      },\n      viewSourcePanelState: {\n        ...DEFAULT_CITATION_PANEL_STATE\n      },\n      customPanelState: {\n        ...DEFAULT_CUSTOM_PANEL_STATE\n      },\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          homeScreenState: {\n            ...state.persistedToBrowserStorage.chatState.homeScreenState,\n            showBackToBot: false\n          }\n        }\n      },\n      isHydrated: false,\n      catastrophicErrorType: null\n    };\n    newState = clearTourState(newState);\n    if (newState.homeScreenConfig.is_on) {\n      newState = setHomeScreenOpenState(newState, true);\n    }\n    return newState;\n  },\n  [HYDRATE_MESSAGE_HISTORY]: (state, action) => {\n    let newState = {\n      ...state,\n      ...action.messageHistory\n    };\n    if (state.persistedToBrowserStorage.chatState.persistedTourState.activeTourID) {\n      newState = populateTourStepItems(newState);\n    }\n    return newState;\n  },\n  [ADD_LOCAL_MESSAGE_ITEM]: (state, action) => {\n    const {messageItem: messageItem, message: message, addMessage: addMessage, addAfterID: addAfterID} = action;\n    const {id: id} = messageItem.ui_state;\n    const isSilent = message.history.silent;\n    let newState = state;\n    if (addMessage) {\n      newState = applyFullMessage(newState, message);\n    }\n    const currentIndex = newState.botMessageState.localMessageIDs.findIndex(existingID => existingID === id);\n    const newLocalMessageIDs = [ ...newState.botMessageState.localMessageIDs ];\n    let insertAtIndex = currentIndex;\n    if (currentIndex !== -1) {\n      newLocalMessageIDs.splice(currentIndex, 1);\n    } else {\n      insertAtIndex = newLocalMessageIDs.length;\n    }\n    if (addAfterID) {\n      const afterIDIndex = newLocalMessageIDs.findIndex(existingID => existingID === addAfterID);\n      if (afterIDIndex !== -1) {\n        insertAtIndex = afterIDIndex + 1;\n      }\n    }\n    newLocalMessageIDs.splice(insertAtIndex, 0, id);\n    if (!isSilent) {\n      newState = {\n        ...newState,\n        allMessageItemsByID: {\n          ...newState.allMessageItemsByID,\n          [id]: messageItem\n        },\n        botMessageState: {\n          ...newState.botMessageState,\n          localMessageIDs: newLocalMessageIDs\n        }\n      };\n      if (newState.persistedToBrowserStorage.chatState.homeScreenState.isHomeScreenOpen) {\n        newState = setHomeScreenOpenState(newState, false);\n      }\n      const isBotMessage = !messageItem.item.agent_message_type;\n      const isMainWindowOpen = state.persistedToBrowserStorage.launcherState.viewState.mainWindow;\n      if (!isBotMessage && (!isMainWindowOpen || !state.isBrowserPageVisible)) {\n        const fromAgent = !isRequest(message);\n        if (fromAgent && !EXCLUDE_AGENT_UNREAD.has(messageItem.item.agent_message_type)) {\n          newState = {\n            ...newState,\n            agentState: {\n              ...newState.agentState,\n              numUnreadMessages: newState.agentState.numUnreadMessages + 1\n            }\n          };\n        }\n      }\n    }\n    return newState;\n  },\n  [REMOVE_MESSAGES]: (state, {messageIDs: messageIDs}) => {\n    const idsSet = new Set(messageIDs);\n    const newAllMessages = {\n      ...state.allMessagesByID\n    };\n    const newAllMessageItems = {\n      ...state.allMessageItemsByID\n    };\n    const newMessageIDs = state.botMessageState.messageIDs.filter(messageID => !idsSet.has(messageID));\n    const newMessageItemsIDs = state.botMessageState.localMessageIDs.filter(messageItemID => {\n      const messageItem = newAllMessageItems[messageItemID];\n      const removeItem = idsSet.has(messageItem?.fullMessageID);\n      if (removeItem) {\n        delete newAllMessageItems[messageItemID];\n      }\n      return !removeItem;\n    });\n    messageIDs.forEach(messageID => {\n      delete newAllMessages[messageID];\n    });\n    const newState = {\n      ...state,\n      allMessagesByID: newAllMessages,\n      allMessageItemsByID: newAllMessageItems,\n      botMessageState: {\n        ...state.botMessageState,\n        messageIDs: newMessageIDs,\n        localMessageIDs: newMessageItemsIDs\n      }\n    };\n    return newState;\n  },\n  [UPDATE_LOCAL_MESSAGE_ITEM]: (state, action) => {\n    const {messageItem: messageItem} = action;\n    return {\n      ...state,\n      allMessageItemsByID: {\n        ...state.allMessageItemsByID,\n        [messageItem.ui_state.id]: messageItem\n      }\n    };\n  },\n  [UPDATE_MESSAGE]: (state, action) => {\n    const {message: message} = action;\n    return {\n      ...state,\n      allMessagesByID: {\n        ...state.allMessagesByID,\n        [message.id]: message\n      }\n    };\n  },\n  [ADD_MESSAGE]: (state, action) => {\n    const {message: message} = action;\n    const messageID = message.id;\n    let newState = state;\n    if (isResponse(message)) {\n      const itemIDsInNewMessage = [];\n      message.output.generic.forEach(item => {\n        const id = streamItemID(messageID, item);\n        if (id) {\n          itemIDsInNewMessage.push(id);\n        }\n      });\n      const newAllMessageItemsByID = {\n        ...state.allMessageItemsByID\n      };\n      const existingItemIDs = [];\n      let firstFoundIndex;\n      const newLocalMessageIDs = state.botMessageState.localMessageIDs.filter((itemID, index) => {\n        const item = state.allMessageItemsByID[itemID];\n        const isItemInMessage = item.fullMessageID === messageID;\n        if (isItemInMessage) {\n          if (firstFoundIndex === undefined) {\n            firstFoundIndex = index;\n          }\n          if (!itemIDsInNewMessage.includes(itemID)) {\n            delete newAllMessageItemsByID[itemID];\n          } else {\n            existingItemIDs.push(itemID);\n          }\n        }\n        return !isItemInMessage;\n      });\n      if (existingItemIDs.length) {\n        const itemIDsToInsert = itemIDsInNewMessage.filter(itemID => existingItemIDs.includes(itemID));\n        if (itemIDsToInsert.length) {\n          newLocalMessageIDs.splice(firstFoundIndex, 0, ...itemIDsToInsert);\n        }\n      }\n      newState = {\n        ...newState,\n        allMessageItemsByID: newAllMessageItemsByID,\n        botMessageState: {\n          ...newState.botMessageState,\n          localMessageIDs: newLocalMessageIDs\n        }\n      };\n    }\n    return applyFullMessage(newState, message);\n  },\n  [MESSAGE_SET_OPTION_SELECTED]: (state, action) => {\n    const newMessagesByID = {\n      ...state.allMessageItemsByID\n    };\n    newMessagesByID[action.messageID] = {\n      ...state.allMessageItemsByID[action.messageID],\n      ui_state: {\n        ...state.allMessageItemsByID[action.messageID].ui_state,\n        optionSelected: action.sentMessage\n      }\n    };\n    return {\n      ...state,\n      allMessageItemsByID: newMessagesByID\n    };\n  },\n  [ADD_IS_TYPING_COUNTER]: (state, action) => ({\n    ...state,\n    botMessageState: {\n      ...state.botMessageState,\n      isTypingCounter: Math.max(state.botMessageState.isTypingCounter + action.addToIsTyping, 0)\n    }\n  }),\n  [ADD_IS_LOADING_COUNTER]: (state, action) => ({\n    ...state,\n    botMessageState: {\n      ...state.botMessageState,\n      isLoadingCounter: Math.max(state.botMessageState.isLoadingCounter + action.addToIsLoading, 0)\n    }\n  }),\n  [ADD_IS_HYDRATING_COUNTER]: (state, action) => ({\n    ...state,\n    botMessageState: {\n      ...state.botMessageState,\n      isHydratingCounter: Math.max(state.botMessageState.isHydratingCounter + action.addToIsHydrating, 0)\n    }\n  }),\n  [SET_APP_STATE_VALUE]: (state, action) => ({\n    ...state,\n    [action.key]: action.value\n  }),\n  [UPDATE_PERSISTED_CHAT_STATE]: (state, action) => ({\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        ...action.chatState\n      }\n    }\n  }),\n  [UPDATE_HAS_SENT_NON_WELCOME_MESSAGE]: (state, action) => {\n    if (state.persistedToBrowserStorage.chatState.hasSentNonWelcomeMessage === action.hasSentNonWelcomeMessage) {\n      return state;\n    }\n    return {\n      ...state,\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          hasSentNonWelcomeMessage: action.hasSentNonWelcomeMessage\n        },\n        launcherState: {\n          ...state.persistedToBrowserStorage.launcherState,\n          hasSentNonWelcomeMessage: action.hasSentNonWelcomeMessage\n        }\n      }\n    };\n  },\n  [SET_VIEW_STATE]: (state, action) => handleViewStateChange(state, action.viewState),\n  [SET_VIEW_CHANGING]: (state, action) => ({\n    ...state,\n    viewChanging: action.viewChanging\n  }),\n  [SET_INITIAL_VIEW_CHANGE_COMPLETE]: (state, action) => ({\n    ...state,\n    initialViewChangeComplete: action.changeComplete\n  }),\n  [UPDATE_BOT_NAME]: (state, action) => ({\n    ...state,\n    botName: action.name,\n    headerDisplayName: state.theme.useAITheme ? state.headerDisplayName : action.name\n  }),\n  [UPDATE_BOT_AVATAR_URL]: (state, action) => ({\n    ...state,\n    botAvatarURL: action.url\n  }),\n  [UPDATE_LAUNCHER_AVATAR_URL]: (state, action) => ({\n    ...state,\n    launcher: {\n      ...state.launcher,\n      config: {\n        ...state.launcher.config,\n        mobile: {\n          ...state.launcher.config.mobile,\n          avatar_url_override: action.source\n        },\n        desktop: {\n          ...state.launcher.config.desktop,\n          avatar_url_override: action.source\n        }\n      }\n    }\n  }),\n  [UPDATE_MAIN_HEADER_TITLE]: (state, action) => ({\n    ...state,\n    headerDisplayName: action.title\n  }),\n  [UPDATE_CSS_VARIABLES]: (state, action) => {\n    const {config: config} = state;\n    const {variables: variables} = action;\n    const newConfig = {\n      public: {\n        ...config.public\n      }\n    };\n    return {\n      ...state,\n      config: newConfig,\n      cssVariableOverrides: variables\n    };\n  },\n  [UPDATE_HOME_SCREEN_CONFIG]: (state, action) => {\n    const newHomeScreenConfig = action.homeScreenConfig;\n    return {\n      ...state,\n      homeScreenConfig: mergeWith({}, state.homeScreenConfig, newHomeScreenConfig, replaceCurrentArrayValue)\n    };\n  },\n  [SET_MESSAGE_UI_PROPERTY]: (state, action) => applyLocalMessageUIState(state, action.localMessageID, action.propertyName, action.propertyValue),\n  [SET_MESSAGE_HISTORY_PROPERTY]: (state, action) => {\n    const {messageID: messageID, propertyName: propertyName, propertyValue: propertyValue} = action;\n    const oldMessage = state.allMessagesByID[messageID];\n    if (oldMessage) {\n      return {\n        ...state,\n        allMessagesByID: {\n          ...state.allMessagesByID,\n          [messageID]: {\n            ...oldMessage,\n            history: {\n              ...oldMessage.history,\n              [propertyName]: propertyValue\n            }\n          }\n        }\n      };\n    }\n    return state;\n  },\n  [MERGE_HISTORY]: (state, action) => {\n    const oldMessage = state.allMessagesByID[action.messageID];\n    if (oldMessage) {\n      return {\n        ...state,\n        allMessagesByID: {\n          ...state.allMessagesByID,\n          [action.messageID]: {\n            ...oldMessage,\n            history: merge({}, oldMessage.history, action.history)\n          }\n        }\n      };\n    }\n    return state;\n  },\n  [ANNOUNCE_MESSAGE]: (state, action) => ({\n    ...state,\n    announceMessage: action.message\n  }),\n  [ACCEPTED_DISCLAIMER]: state => ({\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        disclaimersAccepted: {\n          ...state.persistedToBrowserStorage.chatState.disclaimersAccepted,\n          [window.location.hostname]: true\n        }\n      }\n    }\n  }),\n  [SET_HOME_SCREEN_IS_OPEN]: (state, {isOpen: isOpen}) => setHomeScreenOpenState(state, isOpen),\n  [TOGGLE_HOME_SCREEN]: state => setHomeScreenOpenState(state, !state.persistedToBrowserStorage.chatState.homeScreenState.isHomeScreenOpen, true),\n  [UPDATE_LAUNCHER_CONFIG]: (state, action) => {\n    const newConfig = merge({}, state.launcher.config, action.launcherConfig);\n    return {\n      ...state,\n      launcher: {\n        ...state.launcher,\n        config: newConfig\n      },\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        launcherState: {\n          ...state.persistedToBrowserStorage.launcherState,\n          desktopLauncherIsExpanded: newConfig.is_on && newConfig.desktop.is_on ? state.persistedToBrowserStorage.launcherState.desktopLauncherIsExpanded : false,\n          mobileLauncherIsExtended: newConfig.is_on && newConfig.mobile.is_on ? state.persistedToBrowserStorage.launcherState.mobileLauncherIsExtended : false\n        }\n      }\n    };\n  },\n  [SET_LAUNCHER_PROPERTY]: (state, action) => ({\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      launcherState: {\n        ...state.persistedToBrowserStorage.launcherState,\n        [action.propertyName]: action.propertyValue\n      }\n    }\n  }),\n  [SET_LAUNCHER_CONFIG_PROPERTY]: (state, action) => {\n    const newState = {\n      ...state,\n      launcher: {\n        ...state.launcher,\n        config: {\n          ...state.launcher.config\n        }\n      }\n    };\n    if (!action.launcherType || action.launcherType === LauncherType.DESKTOP) {\n      newState.launcher.config.desktop = {\n        ...state.launcher.config.desktop,\n        [action.propertyName]: action.propertyValue\n      };\n    }\n    if (!action.launcherType || action.launcherType === LauncherType.MOBILE) {\n      newState.launcher.config.mobile = {\n        ...state.launcher.config.mobile,\n        [action.propertyName]: action.propertyValue\n      };\n    }\n    return newState;\n  },\n  [SET_CHAT_MESSAGES_PROPERTY]: (state, action) => applyBotMessageState(state, {\n    [action.propertyName]: action.propertyValue\n  }),\n  [SET_LAUNCHER_MINIMIZED]: state => ({\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      launcherState: {\n        ...state.persistedToBrowserStorage.launcherState,\n        desktopLauncherIsExpanded: false,\n        desktopLauncherWasMinimized: true\n      }\n    }\n  }),\n  [OPEN_IFRAME_CONTENT]: (state, {messageItem: messageItem}) => ({\n    ...state,\n    iFramePanelState: {\n      ...state.iFramePanelState,\n      messageItem: messageItem,\n      isOpen: true\n    },\n    announceMessage: {\n      messageID: \"iframe_ariaOpenedPanel\"\n    }\n  }),\n  [CLOSE_IFRAME_PANEL]: state => ({\n    ...state,\n    iFramePanelState: {\n      ...state.iFramePanelState,\n      isOpen: false\n    },\n    announceMessage: {\n      messageID: \"iframe_ariaClosedPanel\"\n    }\n  }),\n  [SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN]: (state, action) => ({\n    ...state,\n    viewSourcePanelState: {\n      ...state.viewSourcePanelState,\n      citationItem: action.citationItem,\n      relatedSearchResult: action.relatedSearchResult,\n      isOpen: action.isOpen\n    }\n  }),\n  [SET_CUSTOM_PANEL_OPEN]: (state, action) => ({\n    ...state,\n    customPanelState: {\n      ...state.customPanelState,\n      isOpen: action.isOpen\n    }\n  }),\n  [SET_CUSTOM_PANEL_OPTIONS]: (state, action) => ({\n    ...state,\n    customPanelState: {\n      ...state.customPanelState,\n      options: action.options\n    }\n  }),\n  [SET_TOUR_DATA]: (state, action) => {\n    const newStateWithPersistedTourData = {\n      ...state,\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          persistedTourState: {\n            activeTourID: action.newActiveTourMessageID,\n            activeTourCurrentStepIndex: 0\n          }\n        },\n        launcherState: {\n          ...state.persistedToBrowserStorage.launcherState,\n          activeTour: true\n        }\n      }\n    };\n    return populateTourStepItems(newStateWithPersistedTourData);\n  },\n  [CLEAR_TOUR_DATA]: state => clearTourState(state),\n  [CHANGE_STEP_IN_TOUR]: (state, action) => ({\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        persistedTourState: {\n          ...state.persistedToBrowserStorage.chatState.persistedTourState,\n          activeTourCurrentStepIndex: Math.max(Math.min(action.newStepNumber, state.tourState.activeTourStepItems.length - 1), 0)\n        }\n      }\n    }\n  }),\n  [UPDATE_INPUT_STATE]: (state, action) => {\n    const currentInputState = getInputState(state, action.isInputToAgent);\n    const newInputState = {\n      ...currentInputState,\n      ...action.newState\n    };\n    const newState = applyInputState(state, newInputState, action.isInputToAgent);\n    return newState;\n  },\n  [SET_IS_BROWSER_PAGE_VISIBLE]: (state, action) => {\n    let numUnreadMessages;\n    const isMainWindowOpen = state.persistedToBrowserStorage.launcherState.viewState.mainWindow;\n    if (isMainWindowOpen && action.isVisible) {\n      numUnreadMessages = 0;\n    } else {\n      numUnreadMessages = state.agentState.numUnreadMessages;\n    }\n    return {\n      ...state,\n      isBrowserPageVisible: action.isVisible,\n      agentState: {\n        ...state.agentState,\n        numUnreadMessages: numUnreadMessages\n      }\n    };\n  },\n  [ADD_INPUT_FILE]: (state, {file: file, isInputToAgent: isInputToAgent}) => {\n    const currentInputState = getInputState(state, isInputToAgent);\n    return applyInputState(state, {\n      ...currentInputState,\n      files: [ ...currentInputState.files, file ]\n    }, isInputToAgent);\n  },\n  [REMOVE_INPUT_FILE]: (state, {fileID: fileID, isInputToAgent: isInputToAgent}) => {\n    const currentInputState = getInputState(state, isInputToAgent);\n    const newUploads = [ ...currentInputState.files ];\n    const index = newUploads.findIndex(file => file.id === fileID);\n    if (index !== -1) {\n      newUploads.splice(index, 1);\n    }\n    return applyInputState(state, {\n      ...currentInputState,\n      files: newUploads\n    }, isInputToAgent);\n  },\n  [REMOVE_LOCAL_MESSAGE_ITEM]: (state, {localMessageItemID: localMessageItemID}) => {\n    const newLocalMessageIDs = state.botMessageState.localMessageIDs.filter(id => id !== localMessageItemID);\n    const allMessageItemsByID = {\n      ...state.allMessageItemsByID\n    };\n    if (allMessageItemsByID[localMessageItemID]) {\n      delete allMessageItemsByID[localMessageItemID];\n    }\n    return {\n      ...state,\n      allMessageItemsByID: allMessageItemsByID,\n      botMessageState: {\n        ...state.botMessageState,\n        localMessageIDs: newLocalMessageIDs\n      }\n    };\n  },\n  [ADD_NOTIFICATION]: (state, {notification: notification, notificationID: notificationID}) => ({\n    ...state,\n    notifications: state.notifications.concat({\n      id: notificationID,\n      notification: notification\n    })\n  }),\n  [REMOVE_NOTIFICATIONS]: (state, {groupID: groupID, notificationID: notificationID}) => ({\n    ...state,\n    notifications: state.notifications.filter(notification => {\n      if (notificationID) {\n        return notification.id !== notificationID;\n      }\n      return notification.notification.groupID !== groupID;\n    })\n  }),\n  [REMOVE_ALL_NOTIFICATIONS]: state => ({\n    ...state,\n    notifications: []\n  }),\n  [CLEAR_INPUT_FILES]: (state, {isInputToAgent: isInputToAgent}) => {\n    const currentInputState = getInputState(state, isInputToAgent);\n    return applyInputState(state, {\n      ...currentInputState,\n      files: []\n    }, isInputToAgent);\n  },\n  [FILE_UPLOAD_INPUT_ERROR]: (state, {fileID: fileID, errorMessage: errorMessage, isInputToAgent: isInputToAgent}) => {\n    const currentInputSate = getInputState(state, isInputToAgent);\n    const newUploads = [ ...currentInputSate.files ];\n    const index = newUploads.findIndex(file => file.id === fileID);\n    if (index !== -1) {\n      newUploads[index] = {\n        ...newUploads[index],\n        isError: true,\n        errorMessage: errorMessage,\n        status: FileStatusValue.COMPLETE\n      };\n    }\n    return applyInputState(state, {\n      ...currentInputSate,\n      files: newUploads\n    }, isInputToAgent);\n  },\n  [ADD_NESTED_MESSAGES]: (state, {localMessageItems: localMessageItems}) => {\n    const allMessageItemsByID = {\n      ...state.allMessageItemsByID\n    };\n    localMessageItems.forEach(localMessageItem => {\n      allMessageItemsByID[localMessageItem.ui_state.id] = localMessageItem;\n    });\n    return {\n      ...state,\n      allMessageItemsByID: allMessageItemsByID\n    };\n  },\n  [SET_RESPONSE_PANEL_IS_OPEN]: (state, {isOpen: isOpen}) => ({\n    ...state,\n    responsePanelState: {\n      ...state.responsePanelState,\n      isOpen: isOpen\n    }\n  }),\n  [SET_RESPONSE_PANEL_CONTENT]: (state, {localMessageItem: localMessageItem, isMessageForInput: isMessageForInput}) => ({\n    ...state,\n    responsePanelState: {\n      ...state.responsePanelState,\n      localMessageItem: localMessageItem,\n      isMessageForInput: isMessageForInput\n    }\n  }),\n  [STREAMING_START]: (state, {messageID: messageID}) => {\n    const streamIntoResponse = {\n      id: messageID,\n      output: {\n        generic: []\n      },\n      history: {\n        timestamp: Date.now()\n      }\n    };\n    return applyFullMessage(state, streamIntoResponse);\n  },\n  [STREAMING_MERGE_HISTORY]: (state, {messageID: messageID, history: history}) => {\n    const existingMessage = state.allMessagesByID[messageID];\n    const newMessage = merge({}, existingMessage, {\n      history: history\n    });\n    if (existingMessage) {\n      return {\n        ...state,\n        allMessagesByID: {\n          ...state.allMessagesByID,\n          [messageID]: newMessage\n        }\n      };\n    }\n    return state;\n  },\n  [STREAMING_ADD_CHUNK]: (state, {chunkItem: chunkItem, fullMessageID: fullMessageID, isCompleteItem: isCompleteItem, disableFadeAnimation: disableFadeAnimation}) => {\n    const message = state.allMessagesByID[fullMessageID];\n    const localItemID = streamItemID(fullMessageID, chunkItem);\n    const existingLocalMessageItem = state.allMessageItemsByID[localItemID];\n    let {localMessageIDs: localMessageIDs} = state.botMessageState;\n    let newItem;\n    if (!existingLocalMessageItem) {\n      newItem = outputItemToLocalItem(chunkItem, message, false);\n      newItem.ui_state.needsAnnouncement = false;\n      newItem.ui_state.disableFadeAnimation = disableFadeAnimation;\n      newItem.ui_state.isIntermediateStreaming = true;\n      if (isCompleteItem) {\n        newItem.ui_state.streamingState = {\n          chunks: [],\n          isDone: true\n        };\n      } else {\n        newItem.ui_state.streamingState = {\n          chunks: [ chunkItem ],\n          isDone: false\n        };\n      }\n      localMessageIDs = [ ...localMessageIDs, localItemID ];\n      if (!newItem.item.response_type) {\n        throw new Error(`New chunk item does not have a response_type: ${JSON.stringify(chunkItem)}`);\n      }\n    } else if (isCompleteItem) {\n      newItem = outputItemToLocalItem(chunkItem, message, false);\n      newItem.ui_state.needsAnnouncement = false;\n      newItem.ui_state.disableFadeAnimation = disableFadeAnimation;\n      newItem.ui_state.streamingState = {\n        chunks: [],\n        isDone: true\n      };\n    } else {\n      newItem = {\n        ...existingLocalMessageItem,\n        ui_state: {\n          ...existingLocalMessageItem?.ui_state,\n          streamingState: {\n            ...existingLocalMessageItem?.ui_state.streamingState,\n            chunks: [ ...existingLocalMessageItem?.ui_state.streamingState?.chunks || [], chunkItem ]\n          }\n        }\n      };\n    }\n    return {\n      ...state,\n      allMessageItemsByID: {\n        ...state.allMessageItemsByID,\n        [localItemID]: newItem\n      },\n      botMessageState: {\n        ...state.botMessageState,\n        localMessageIDs: localMessageIDs\n      }\n    };\n  },\n  [UPDATE_CHAT_HEADER_CONFIG]: (state, {chatHeaderConfig: chatHeaderConfig}) => ({\n    ...state,\n    chatHeaderState: {\n      ...state.chatHeaderState,\n      config: {\n        ...state.chatHeaderState.config,\n        ...chatHeaderConfig\n      }\n    }\n  }),\n  [UPDATE_MAX_VISIBLE_HEADER_OBJECTS]: (state, {maxTotal: maxTotal}) => ({\n    ...state,\n    chatHeaderState: {\n      ...state.chatHeaderState,\n      maxVisibleHeaderObjects: maxTotal\n    }\n  }),\n  [SET_STOP_STREAMING_BUTTON_VISIBLE]: (state, {isVisible: isVisible}) => ({\n    ...state,\n    botInputState: {\n      ...state.botInputState,\n      stopStreamingButtonState: {\n        ...state.botInputState.stopStreamingButtonState,\n        isVisible: isVisible\n      }\n    }\n  }),\n  [SET_STOP_STREAMING_BUTTON_DISABLED]: (state, {isDisabled: isDisabled}) => ({\n    ...state,\n    botInputState: {\n      ...state.botInputState,\n      stopStreamingButtonState: {\n        ...state.botInputState.stopStreamingButtonState,\n        isDisabled: isDisabled\n      }\n    }\n  }),\n  [SET_STREAM_ID]: (state, {currentStreamID: currentStreamID}) => ({\n    ...state,\n    botInputState: {\n      ...state.botInputState,\n      stopStreamingButtonState: {\n        ...state.botInputState.stopStreamingButtonState,\n        currentStreamID: currentStreamID\n      }\n    }\n  }),\n  [UPDATE_MAIN_HEADER_AVATAR]: (state, {config: config}) => ({\n    ...state,\n    headerAvatarConfig: config\n  })\n};\n\nfunction applyInputState(state, newInputState, isInputToAgent) {\n  if (isInputToAgent) {\n    return {\n      ...state,\n      agentState: {\n        ...state.agentState,\n        inputState: newInputState\n      }\n    };\n  }\n  return {\n    ...state,\n    botInputState: newInputState\n  };\n}\n\nfunction getInputState(state, isInputToAgent) {\n  return isInputToAgent ? state.agentState.inputState : state.botInputState;\n}\n\nObject.assign(reducers, agentReducers);\n\nexport { reducers };\n","import merge from \"lodash-es/merge.js\";\n\nimport { createStore } from \"redux\";\n\nimport { NODE_ENV } from \"../environmentVariables.js\";\n\nimport { IS_PHONE } from \"../utils/browserUtils.js\";\n\nimport \"../utils/constants.js\";\n\nimport { withoutEmptyStarters } from \"../utils/homeScreenUtils.js\";\n\nimport { getBotName } from \"../utils/miscUtils.js\";\n\nimport { mergeCSSVariables } from \"../utils/styleUtils.js\";\n\nimport { reducers } from \"./reducers.js\";\n\nimport { DEFAULT_THEME_STATE, VIEW_STATE_MAIN_WINDOW_OPEN, VIEW_STATE_LAUNCHER_OPEN, DEFAULT_LAUNCHER, DEFAULT_PERSISTED_TO_BROWSER, DEFAULT_INPUT_STATE, VIEW_STATE_ALL_CLOSED, DEFAULT_TOUR_STATE, DEFAULT_MESSAGE_PANEL_STATE, DEFAULT_CUSTOM_PANEL_STATE, DEFAULT_CITATION_PANEL_STATE, DEFAULT_IFRAME_PANEL_STATE, DEFAULT_AGENT_STATE, DEFAULT_MESSAGE_STATE, DEFAULT_LAYOUT_STATE } from \"./reducerUtils.js\";\n\nimport \"../../../types/instance/apiTypes.js\";\n\nimport enLanguagePack from \"../../languages/en.json.js\";\n\nimport { CornersType } from \"../../../types/config/CornersType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function doCreateStore(config, serviceManager) {\n  let useAITheme;\n  if (config.public.themeConfig?.useAITheme !== undefined) {\n    useAITheme = config.public.themeConfig?.useAITheme;\n  } else {\n    useAITheme = DEFAULT_THEME_STATE.useAITheme;\n  }\n  const themeState = {\n    carbonTheme: config.public.themeConfig?.carbonTheme || DEFAULT_THEME_STATE.carbonTheme,\n    useAITheme: useAITheme,\n    corners: getThemeCornersType(config)\n  };\n  const botName = getBotName(themeState.useAITheme, config);\n  const initialState = {\n    ...DEFAULT_MESSAGE_STATE,\n    notifications: [],\n    botInputState: {\n      ...DEFAULT_INPUT_STATE(),\n      isReadonly: config.public.isReadonly,\n      fieldVisible: !config.public.isReadonly\n    },\n    agentState: {\n      ...DEFAULT_AGENT_STATE\n    },\n    botName: botName,\n    headerDisplayName: null,\n    botAvatarURL: config.public.botAvatarURL || null,\n    headerAvatarConfig: null,\n    chatWidthBreakpoint: null,\n    chatWidth: null,\n    chatHeight: null,\n    cssVariableOverrides: mergeCSSVariables({}, {}, themeState.carbonTheme, themeState.useAITheme),\n    isHydrated: false,\n    languagePack: enLanguagePack,\n    locale: \"en\",\n    config: config,\n    originalConfig: config,\n    suspendScrollDetection: false,\n    homeScreenConfig: withoutEmptyStarters({}),\n    persistedToBrowserStorage: {\n      ...DEFAULT_PERSISTED_TO_BROWSER,\n      chatState: {\n        ...DEFAULT_PERSISTED_TO_BROWSER.chatState,\n        homeScreenState: {\n          ...DEFAULT_PERSISTED_TO_BROWSER.chatState.homeScreenState\n        }\n      }\n    },\n    launcher: merge({}, DEFAULT_LAUNCHER, {\n      config: merge({}, {}, {\n        mobile: {}\n      }, {\n        is_on: config.public.showLauncher\n      })\n    }),\n    iFramePanelState: DEFAULT_IFRAME_PANEL_STATE,\n    viewSourcePanelState: DEFAULT_CITATION_PANEL_STATE,\n    isDestroyed: false,\n    customPanelState: DEFAULT_CUSTOM_PANEL_STATE,\n    viewChanging: false,\n    initialViewChangeComplete: false,\n    targetViewState: config.public.openChatByDefault ? VIEW_STATE_MAIN_WINDOW_OPEN : VIEW_STATE_LAUNCHER_OPEN,\n    responsePanelState: DEFAULT_MESSAGE_PANEL_STATE,\n    customMenuOptions: null,\n    tourState: DEFAULT_TOUR_STATE,\n    isBrowserPageVisible: true,\n    showNonHeaderBackgroundCover: false,\n    theme: themeState,\n    layout: getLayoutState(config),\n    chatHeaderState: {\n      config: null,\n      maxVisibleHeaderObjects: 0\n    }\n  };\n  const sessionStorageLauncherState = serviceManager.userSessionStorageService?.loadLauncherSession();\n  if (sessionStorageLauncherState) {\n    initialState.targetViewState = sessionStorageLauncherState.viewState;\n    sessionStorageLauncherState.viewState = VIEW_STATE_ALL_CLOSED;\n    initialState.persistedToBrowserStorage.launcherState = sessionStorageLauncherState;\n  }\n  const enhancer = config.public.debug || NODE_ENV === \"development\" ? window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__({\n    name: \"CarbonAIChat\",\n    instanceId: `Chat${serviceManager.namespace.suffix}`\n  }) : undefined;\n  return createStore(reducerFunction, initialState, enhancer);\n}\n\nfunction getThemeCornersType(config) {\n  if (getLayoutState(config).showFrame === false || IS_PHONE || config.public.themeConfig?.corners === CornersType.SQUARE) {\n    return CornersType.SQUARE;\n  }\n  return DEFAULT_THEME_STATE.corners;\n}\n\nfunction getLayoutState(config) {\n  if (config.public.themeConfig?.useAITheme) {\n    return {\n      showFrame: config.public.layout?.showFrame ?? true,\n      hasContentMaxWidth: config.public.layout?.hasContentMaxWidth ?? true\n    };\n  }\n  return merge({}, DEFAULT_LAYOUT_STATE, config.public.layout);\n}\n\nfunction reducerFunction(state, action) {\n  return action && reducers[action.type] ? reducers[action.type](state, action) : state;\n}\n\nexport { doCreateStore };\n","import cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport { consoleDebug, consoleWarn } from \"./utils/miscUtils.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const DEFAULT_PUBLIC_CONFIG = {\n  openChatByDefault: false,\n  showLauncher: true,\n  shouldTakeFocusIfOpensAutomatically: true,\n  serviceDesk: {},\n  messaging: {},\n  themeConfig: {\n    useAITheme: true\n  }\n};\n\nasync function instantiateWidget(pagePublicConfig, chatConstructorPromise, render, element) {\n  const config = cloneDeep(pagePublicConfig);\n  if (!config.messaging?.customSendMessage) {\n    throw new Error(`You must set messaging.customSendMessage in your configuration object.`);\n  }\n  if (config?.debug) {\n    consoleDebug(\"[ChatEntry] Called instantiateWidget\", config);\n  }\n  if (document.location.protocol !== \"https:\") {\n    consoleWarn('Your page is not running with \"https\"; your data will not be sent  securely.');\n  }\n  if (document.compatMode !== \"CSS1Compat\") {\n    consoleWarn('Your page is running in quirks mode; you may experience layout issues with the chat. Add \"<!DOCTYPE html>\" to the page to run in standards mode.');\n  }\n  const {onError: onError, ...publicConfig} = config;\n  const Chat = await chatConstructorPromise(publicConfig);\n  const additionalChatParameters = {\n    onError: onError,\n    render: render\n  };\n  return new Chat(publicConfig, element, additionalChatParameters);\n}\n\nexport { DEFAULT_PUBLIC_CONFIG, instantiateWidget };\n","import dayjs from \"dayjs\";\n\nimport LocalizedFormat from \"dayjs/plugin/localizedFormat.js\";\n\nimport isEqual from \"lodash-es/isEqual.js\";\n\nimport merge from \"lodash-es/merge.js\";\n\nimport { createChatInstance } from \"./ChatInstanceImpl.js\";\n\nimport { createServiceManager } from \"./loadServices.js\";\n\nimport actions from \"./store/actions.js\";\n\nimport { VIEW_STATE_ALL_CLOSED } from \"./store/reducerUtils.js\";\n\nimport { loadLanguagePack, loadLocale } from \"./utils/languages.js\";\n\nimport { hasServiceDesk } from \"./utils/messageUtils.js\";\n\nimport { consoleDebug, consoleError } from \"./utils/miscUtils.js\";\n\nimport { DEFAULT_PUBLIC_CONFIG } from \"./chatEntryFunctions.js\";\n\nimport { MainWindowOpenReason, ViewChangeReason } from \"../../types/events/eventBusTypes.js\";\n\nimport { setIntl } from \"./utils/intlUtils.js\";\n\nimport { loadHAA } from \"../dynamic-imports/dynamic-imports.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\ndayjs.extend(LocalizedFormat);\n\nclass Chat {\n  constructor(publicConfigProvided, customHostElement, additionalChatParametersProvided) {\n    if (publicConfigProvided?.debug) {\n      consoleDebug(\"Constructed chat widget\", publicConfigProvided);\n    }\n    const publicConfig = merge({}, DEFAULT_PUBLIC_CONFIG, publicConfigProvided);\n    this.additionalChatParameters = additionalChatParametersProvided || {};\n    this.appConfig = {\n      public: publicConfig\n    };\n    this.customHostElement = customHostElement;\n  }\n  async start() {\n    try {\n      const result = await this.startInternal();\n      return result.instance;\n    } catch (error) {\n      consoleError(\"There was an error starting your chat\", error);\n      return null;\n    }\n  }\n  async startInternal() {\n    const doesHaveServiceDesk = hasServiceDesk(this.appConfig);\n    this.serviceManager = await createServiceManager(this.appConfig, this.additionalChatParameters);\n    const [languagePack, localePack, render, createHumanAgentService] = await Promise.all([ loadLanguagePack(this.serviceManager.store.getState().languagePack), loadLocale(this.serviceManager.store.getState().locale), Promise.resolve(this.additionalChatParameters.render), doesHaveServiceDesk ? loadHAA() : Promise.resolve(null) ]);\n    this.serviceManager.customHostElement = this.customHostElement;\n    if (createHumanAgentService) {\n      this.serviceManager.humanAgentService = createHumanAgentService(this.serviceManager);\n    }\n    setIntl(this.serviceManager, localePack.name, languagePack);\n    dayjs.locale(localePack);\n    const reallyRenderAndReturnInstance = async () => {\n      await render({\n        serviceManager: this.serviceManager\n      });\n      const initialState = this.serviceManager.store.getState();\n      const {wasLoadedFromBrowser: wasLoadedFromBrowser} = initialState.persistedToBrowserStorage.launcherState;\n      const {targetViewState: targetViewState} = initialState;\n      const {openChatByDefault: openChatByDefault} = initialState.config.public;\n      if (targetViewState.mainWindow) {\n        let mainWindowOpenReason = MainWindowOpenReason.SESSION_HISTORY;\n        if (openChatByDefault && !wasLoadedFromBrowser) {\n          mainWindowOpenReason = MainWindowOpenReason.OPEN_BY_DEFAULT;\n        }\n        await this.serviceManager.actions.changeView(targetViewState, {\n          mainWindowOpenReason: mainWindowOpenReason\n        });\n      } else {\n        const viewChangeReason = ViewChangeReason.WEB_CHAT_LOADED;\n        const tryHydrating = targetViewState.tour;\n        const forceViewChange = isEqual(targetViewState, VIEW_STATE_ALL_CLOSED);\n        await this.serviceManager.actions.changeView(targetViewState, {\n          viewChangeReason: viewChangeReason\n        }, tryHydrating, forceViewChange);\n      }\n      this.serviceManager.store.dispatch(actions.setInitialViewChangeComplete(true));\n      return this.serviceManager.instance;\n    };\n    const renderAndReturnInstance = () => {\n      const promise = reallyRenderAndReturnInstance();\n      this.serviceManager.renderPromise = promise;\n      return promise;\n    };\n    this.serviceManager.instance = createChatInstance({\n      serviceManager: this.serviceManager,\n      callRender: renderAndReturnInstance\n    });\n    return {\n      instance: this.serviceManager.instance,\n      serviceManager: this.serviceManager\n    };\n  }\n}\n\nexport { Chat as default };\n","import { ChatActionsImpl } from \"./events/ChatActionsImpl.js\";\n\nimport { EventBus } from \"./events/EventBus.js\";\n\nimport { createCustomPanelManager } from \"./services/CustomPanelManager.js\";\n\nimport { HistoryService } from \"./services/HistoryService.js\";\n\nimport MessageService from \"./services/MessageService.js\";\n\nimport { NamespaceService } from \"./services/NamespaceService.js\";\n\nimport { ServiceManager } from \"./services/ServiceManager.js\";\n\nimport { UserSessionStorageService } from \"./services/UserSessionStorageService.js\";\n\nimport { doCreateStore } from \"./store/doCreateStore.js\";\n\nimport { copyToSessionStorage, createHandleWindowTitle } from \"./store/subscriptions.js\";\n\nimport \"./utils/constants.js\";\n\nimport { setEnableDebugLog, setEnableDebugStackTracesLog } from \"./utils/miscUtils.js\";\n\nimport { setIntl } from \"./utils/intlUtils.js\";\n\nimport { WriteableElementName } from \"../../types/instance/ChatInstance.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ async function createServiceManager(appConfig, additionalChatParameters) {\n  const publicConfig = appConfig.public;\n  const serviceManager = new ServiceManager;\n  serviceManager.additionalChatParameters = additionalChatParameters;\n  serviceManager.namespace = new NamespaceService(publicConfig.namespace);\n  serviceManager.userSessionStorageService = new UserSessionStorageService(serviceManager);\n  serviceManager.actions = new ChatActionsImpl(serviceManager);\n  serviceManager.eventBus = new EventBus;\n  serviceManager.store = doCreateStore(appConfig, serviceManager);\n  serviceManager.historyService = new HistoryService(serviceManager);\n  serviceManager.messageService = new MessageService(serviceManager, publicConfig);\n  serviceManager.store.subscribe(copyToSessionStorage(serviceManager));\n  if (!publicConfig.disableWindowTitleChanges) {\n    serviceManager.store.subscribe(createHandleWindowTitle(serviceManager));\n  }\n  serviceManager.customPanelManager = createCustomPanelManager(serviceManager);\n  setIntl(serviceManager, serviceManager.store.getState().locale, serviceManager.store.getState().languagePack);\n  serviceManager.writeableElements = {\n    [WriteableElementName.AI_TOOLTIP_AFTER_DESCRIPTION_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.WELCOME_NODE_BEFORE_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.HEADER_BOTTOM_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.BEFORE_INPUT_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.HOME_SCREEN_HEADER_BOTTOM_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.HOME_SCREEN_AFTER_STARTERS_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.HOME_SCREEN_BEFORE_INPUT_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.CUSTOM_PANEL_ELEMENT]: document.createElement(\"div\")\n  };\n  if (publicConfig.debug) {\n    setEnableDebugLog(true);\n  }\n  if (publicConfig.debugStackTraces) {\n    setEnableDebugStackTracesLog(true);\n  }\n  return serviceManager;\n}\n\nexport { createServiceManager };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst UNREAD_COUNT_TITLE_TIME = 1e4;\n\nfunction copyToSessionStorage(serviceManager) {\n  let previousPersistedToBrowserStorage = serviceManager.store.getState().persistedToBrowserStorage;\n  return () => {\n    const {persistedToBrowserStorage: persistedToBrowserStorage} = serviceManager.store.getState();\n    const persistChatSession = previousPersistedToBrowserStorage !== persistedToBrowserStorage;\n    if (persistChatSession) {\n      previousPersistedToBrowserStorage = persistedToBrowserStorage;\n      serviceManager.userSessionStorageService.persistChatSession(persistedToBrowserStorage.chatState);\n      serviceManager.userSessionStorageService.persistLauncherSession(persistedToBrowserStorage.launcherState);\n    }\n  };\n}\n\nfunction createHandleWindowTitle(serviceManager) {\n  const {store: store} = serviceManager;\n  let originalTitle;\n  let changeTitleTimer;\n  let previousState = store.getState();\n  return () => {\n    const state = store.getState();\n    const {agentState: agentState} = store.getState();\n    const {numUnreadMessages: numUnreadMessages} = agentState;\n    if (numUnreadMessages !== previousState.agentState.numUnreadMessages) {\n      if (!numUnreadMessages) {\n        clearTimeout(changeTitleTimer);\n        if (originalTitle) {\n          window.document.title = originalTitle;\n          originalTitle = null;\n        }\n      } else {\n        clearTimeout(changeTitleTimer);\n        if (!originalTitle) {\n          originalTitle = window.document.title;\n        }\n        window.document.title = state.languagePack.agent_newMessage;\n        changeTitleTimer = setTimeout(() => {\n          window.document.title = `(${numUnreadMessages}) ${originalTitle}`;\n        }, UNREAD_COUNT_TITLE_TIME);\n      }\n    }\n    previousState = state;\n  };\n}\n\nexport { copyToSessionStorage, createHandleWindowTitle };\n","import { DEFAULT_CUSTOM_PANEL_ID } from \"../utils/constants.js\";\n\nimport { createCustomPanelInstance } from \"./CustomPanelInstance.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function createCustomPanelManager(serviceManger) {\n  const panels = {\n    [DEFAULT_CUSTOM_PANEL_ID]: createCustomPanelInstance(serviceManger)\n  };\n  return Object.freeze({\n    getPanel() {\n      return panels[DEFAULT_CUSTOM_PANEL_ID];\n    }\n  });\n}\n\nexport { createCustomPanelManager };\n","import React, { useRef, useCallback, useEffect } from \"react\";\n\nimport { useIntl } from \"react-intl\";\n\nimport { AriaAnnouncerContext } from \"../../contexts/AriaAnnouncerContext.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport { AriaAnnouncerComponent } from \"./AriaAnnouncerComponent.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function AriaAnnouncerProvider(props) {\n  const intl = useIntl();\n  const {store: store} = useServiceManager();\n  const announcerRef = useRef();\n  const announcerFunction = useCallback(value => {\n    if (!announcerRef.current) {\n      setTimeout(() => announcerRef.current.announceValue(value));\n    } else {\n      announcerRef.current.announceValue(value);\n    }\n  }, []);\n  const previousAnnounceMessageRef = useRef();\n  useEffect(() => {\n    const unsubscribe = store.subscribe(() => {\n      const currentAnnounceMessage = store.getState().announceMessage;\n      if (currentAnnounceMessage !== previousAnnounceMessageRef.current) {\n        announcerFunction(currentAnnounceMessage);\n        previousAnnounceMessageRef.current = currentAnnounceMessage;\n      }\n    });\n    return unsubscribe;\n  }, [ store, announcerFunction ]);\n  return React.createElement(AriaAnnouncerContext.Provider, {\n    value: announcerFunction\n  }, props.children, React.createElement(AriaAnnouncerComponent, {\n    intl: intl,\n    ref: announcerRef\n  }));\n}\n\nexport { AriaAnnouncerProvider };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction getLauncherButtonAriaLabel(languagePack, isLauncherHidden, isTourActive) {\n  if (isTourActive) {\n    return isLauncherHidden ? languagePack.launcher_isTourOpen : languagePack.launcher_isTourClosed;\n  }\n  return isLauncherHidden ? languagePack.launcher_isOpen : languagePack.launcher_isClosed;\n}\n\nexport { getLauncherButtonAriaLabel };\n","import AiLaunch from \"@carbon/icons-react/es/AiLaunch.js\";\n\nimport ArrowUpLeft from \"@carbon/icons-react/es/ArrowUpLeft.js\";\n\nimport ChatLaunch from \"@carbon/icons-react/es/ChatLaunch.js\";\n\nimport { Button } from \"@carbon/react\";\n\nimport cx from \"classnames\";\n\nimport React, { forwardRef, useImperativeHandle } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { doFocusRef } from \"../../utils/domUtils.js\";\n\nimport { getLauncherButtonAriaLabel } from \"./launcherUtils.js\";\n\nimport { ButtonKindEnum } from \"../../../../types/utilities/carbonTypes.js\";\n\nimport { PageObjectId } from \"../../utils/PageObjectId.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function Launcher(props, ref) {\n  const {onToggleOpen: onToggleOpen, languagePack: languagePack, unreadAgentCount: unreadAgentCount, intl: intl, showUnreadIndicator: showUnreadIndicator, className: className, tabIndex: tabIndex, launcherHidden: launcherHidden, activeTour: activeTour} = props;\n  const launcherAvatarURL = useSelector(state => state.theme.useAITheme ? undefined : state.launcher.config.desktop.avatar_url_override);\n  const useAITheme = useSelector(state => state.theme.useAITheme);\n  const buttonRef = React.createRef();\n  useImperativeHandle(ref, () => ({\n    requestFocus: () => {\n      doFocusRef(buttonRef);\n    }\n  }));\n  let ariaLabel = getLauncherButtonAriaLabel(languagePack, launcherHidden, activeTour);\n  if (unreadAgentCount !== 0) {\n    ariaLabel += `. ${intl.formatMessage({\n      id: \"icon_ariaUnreadMessages\"\n    }, {\n      count: unreadAgentCount\n    })}`;\n  }\n  let launcherAvatar = useAITheme ? React.createElement(AiLaunch, {\n    size: 24,\n    className: \"WACLauncher_svg\"\n  }) : React.createElement(ChatLaunch, {\n    size: 24,\n    className: \"WACLauncher__svg\"\n  });\n  if (launcherAvatarURL) {\n    launcherAvatar = React.createElement(\"img\", {\n      className: \"WACLauncher__Avatar\",\n      src: launcherAvatarURL,\n      alt: \"\",\n      \"aria-hidden\": true\n    });\n  }\n  return React.createElement(\"div\", {\n    className: cx(\"WACLauncher__ButtonContainer\", \"WACLauncher__ButtonContainer--round\", className, {\n      \"WACLauncher__ButtonContainer--hidden\": launcherHidden\n    })\n  }, React.createElement(Button, {\n    \"aria-label\": ariaLabel,\n    className: cx(\"WACLauncher__Button\", {\n      WACLauncher__TourButton: activeTour\n    }),\n    \"data-testid\": PageObjectId.LAUNCHER,\n    kind: ButtonKindEnum.PRIMARY,\n    type: \"button\",\n    onClick: onToggleOpen,\n    ref: buttonRef,\n    tabIndex: tabIndex\n  }, activeTour ? React.createElement(ArrowUpLeft, {\n    size: 24,\n    className: \"WACLauncher__svg\"\n  }) : launcherAvatar, (unreadAgentCount !== 0 || showUnreadIndicator) && React.createElement(\"div\", {\n    className: \"WAC__countIndicator\"\n  }, unreadAgentCount !== 0 ? unreadAgentCount : \"\")));\n}\n\nconst LauncherExport = forwardRef(Launcher);\n\nexport { LauncherExport as Launcher };\n","import { createComponent } from \"@lit/react\";\n\nimport React from \"react\";\n\nimport CarbonTagElement from \"@carbon/web-components/es-custom/components/tag/tag.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const Tag = createComponent({\n  tagName: \"cds-custom-tag\",\n  elementClass: CarbonTagElement,\n  react: React\n});\n\nexport { Tag as default };\n","import Close16 from \"@carbon/icons/es/close/16.js\";\n\nimport { carbonIconToReact } from \"../../utils/carbonIcon.js\";\n\nimport Tag from \"../../../react/carbon/Tag.js\";\n\nimport cx from \"classnames\";\n\nimport React from \"react\";\n\nimport { Launcher as LauncherExport } from \"./Launcher.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const CloseIcon = carbonIconToReact(Close16);\n\nfunction LauncherComplex(props) {\n  const {languagePack: languagePack, intl: intl, launcherConfig: launcherConfig, launcherComplexRef: launcherComplexRef, launcherRef: launcherRef, onOpen: onOpen, onMinimize: onMinimize, unreadAgentCount: unreadAgentCount, showUnreadIndicator: showUnreadIndicator, desktopLauncherIsExpanded: desktopLauncherIsExpanded, launcherHidden: launcherHidden, activeTour: activeTour, className: className} = props;\n  const {launcher_desktopGreeting: launcher_desktopGreeting, launcher_closeButton: launcher_closeButton, launcher_ariaIsExpanded: launcher_ariaIsExpanded} = languagePack;\n  function getLauncherContent() {\n    if (launcherConfig.desktop.title) {\n      return launcherConfig.desktop.title;\n    }\n    return launcher_desktopGreeting;\n  }\n  const handleTagKeyDown = e => {\n    if (e.key === \"Enter\" || e.key === \" \") {\n      e.preventDefault();\n      onMinimize();\n    }\n  };\n  return React.createElement(\"div\", {\n    className: cx(\"WACLauncher__ButtonContainer\", \"WACLauncherComplex__Container\", className, {\n      \"WACLauncher__ButtonContainer--hidden\": launcherHidden\n    }),\n    ref: launcherComplexRef\n  }, React.createElement(\"button\", {\n    className: \"WACLauncherComplex__ContentButton\",\n    type: \"button\",\n    onClick: onOpen,\n    disabled: !desktopLauncherIsExpanded\n  }, React.createElement(\"div\", {\n    className: cx(\"WACWidget__textEllipsis\", {\n      WACLauncherComplex__Text: !launcherHidden\n    })\n  }, getLauncherContent())), React.createElement(LauncherExport, {\n    languagePack: languagePack,\n    intl: intl,\n    ref: launcherRef,\n    onToggleOpen: onOpen,\n    className: \"WACLauncherComplex__SmallLauncherContainer\",\n    unreadAgentCount: unreadAgentCount,\n    showUnreadIndicator: showUnreadIndicator,\n    launcherHidden: launcherHidden,\n    activeTour: activeTour\n  }), React.createElement(Tag, {\n    className: \"WACLauncher__CloseButton\",\n    \"aria-label\": launcher_ariaIsExpanded,\n    onClick: onMinimize,\n    onKeyDown: handleTagKeyDown,\n    tabIndex: 0,\n    disabled: !desktopLauncherIsExpanded\n  }, React.createElement(CloseIcon, {\n    slot: \"icon\",\n    className: \"WACLauncher__CloseButtonIcon\"\n  }), launcher_closeButton));\n}\n\nexport { LauncherComplex };\n","import React, { useState, useRef, useCallback, useEffect } from \"react\";\n\nimport { useIntl } from \"react-intl\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { useLanguagePack } from \"../../hooks/useLanguagePack.js\";\n\nimport { useOnMount } from \"../../hooks/useOnMount.js\";\n\nimport { usePrevious } from \"../../hooks/usePrevious.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport actions from \"../../store/actions.js\";\n\nimport { BOUNCING_ANIMATION_TIMEOUTS } from \"../../../../types/config/LauncherConfig.js\";\n\nimport { Launcher as LauncherExport } from \"./Launcher.js\";\n\nimport { LauncherComplex } from \"./LauncherComplex.js\";\n\nimport { LauncherType } from \"../../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst TIME_FOR_MINIMIZE_ANIMATION = 400;\n\nconst TIME_FOR_BOUNCE_ANIMATION = 500;\n\nconst LauncherDesktopContainer = props => {\n  const {launcherRef: launcherRef, onDoToggle: onDoToggle, requestFocus: requestFocus, launcherHidden: launcherHidden, activeTour: activeTour} = props;\n  const serviceManager = useServiceManager();\n  const languagePack = useLanguagePack();\n  const intl = useIntl();\n  const browserLauncherState = useSelector(state => state.persistedToBrowserStorage.launcherState);\n  const {desktopLauncherWasMinimized: desktopLauncherWasMinimized, desktopLauncherIsExpanded: desktopLauncherIsExpanded, bounceTurn: bounceTurn, showUnreadIndicator: showUnreadIndicator, viewState: viewState} = browserLauncherState;\n  const launcherState = useSelector(state => state.launcher);\n  const launcherConfig = launcherState.config;\n  const {time_to_expand: time_to_expand, new_expand_time: new_expand_time} = launcherConfig.desktop;\n  const isExpandedLauncherEnabled = launcherConfig.desktop.is_on;\n  const unreadAgentCount = useSelector(state => state.agentState.numUnreadMessages);\n  const [smallLauncherClassName, setSmallLauncherClassName] = useState(\"\");\n  const [complexLauncherClassName, setComplexLauncherClassName] = useState(\"\");\n  const launcherComplexRef = useRef();\n  const launcherHiddenRef = useRef();\n  launcherHiddenRef.current = launcherHidden;\n  const animateOnceVisible = useRef(false);\n  const bounceTurnRef = useRef();\n  bounceTurnRef.current = bounceTurn;\n  const animationStartTimerRef = useRef();\n  const animationFinishedTimerRef = useRef();\n  const firstBounceAnimationStartTimerRef = useRef();\n  const firstBounceAnimationFinishedTimerRef = useRef();\n  const secondBounceAnimationStartTimerRef = useRef();\n  const secondBounceAnimationFinishedTimerRef = useRef();\n  const determineLauncherHeight = useCallback(() => {\n    const expandedLauncherHeight = `${launcherComplexRef.current?.offsetHeight}px`;\n    if (launcherComplexRef.current?.style?.setProperty) {\n      launcherComplexRef.current.style.setProperty(\"--cds-chat-LAUNCHER-desktop-expanded-height\", expandedLauncherHeight);\n    }\n  }, []);\n  const startExpandLauncher = useCallback(() => {\n    if (!launcherHiddenRef.current) {\n      serviceManager.store.dispatch(actions.setLauncherProperty(\"desktopLauncherIsExpanded\", true));\n      determineLauncherHeight();\n      setComplexLauncherClassName(\"WACLauncherComplex__Container--introAnimation\");\n    }\n  }, [ determineLauncherHeight, serviceManager.store ]);\n  const setExpandAnimationTimers = useCallback(() => {\n    animationStartTimerRef.current = setTimeout(() => {\n      startExpandLauncher();\n    }, time_to_expand);\n  }, [ time_to_expand, startExpandLauncher ]);\n  const clearExpandAnimationTimers = useCallback(() => {\n    clearTimeout(animationStartTimerRef.current);\n    clearTimeout(animationFinishedTimerRef.current);\n  }, []);\n  const startBounceAnimation = useCallback(() => {\n    if (!launcherHiddenRef.current) {\n      setSmallLauncherClassName(\"WACLauncher__ButtonContainer--bounceAnimation\");\n    }\n  }, []);\n  const finishBounceAnimation = useCallback(() => {\n    if (!launcherHiddenRef.current) {\n      setSmallLauncherClassName(\"WACLauncher__ButtonContainer--noAnimation\");\n      bounceTurnRef.current++;\n      serviceManager.store.dispatch(actions.setLauncherProperty(\"bounceTurn\", bounceTurnRef.current));\n    }\n  }, [ serviceManager.store ]);\n  const setBounceAnimationTimers = useCallback(() => {\n    if (bounceTurnRef.current === 1) {\n      firstBounceAnimationStartTimerRef.current = setTimeout(() => {\n        startBounceAnimation();\n      }, BOUNCING_ANIMATION_TIMEOUTS[0]);\n      firstBounceAnimationFinishedTimerRef.current = setTimeout(() => {\n        finishBounceAnimation();\n      }, BOUNCING_ANIMATION_TIMEOUTS[0] + TIME_FOR_BOUNCE_ANIMATION);\n      secondBounceAnimationStartTimerRef.current = setTimeout(() => {\n        startBounceAnimation();\n      }, BOUNCING_ANIMATION_TIMEOUTS[0] + BOUNCING_ANIMATION_TIMEOUTS[1]);\n      secondBounceAnimationFinishedTimerRef.current = setTimeout(() => {\n        finishBounceAnimation();\n      }, BOUNCING_ANIMATION_TIMEOUTS[0] + BOUNCING_ANIMATION_TIMEOUTS[1] + TIME_FOR_BOUNCE_ANIMATION);\n    } else if (bounceTurnRef.current === 2) {\n      secondBounceAnimationStartTimerRef.current = setTimeout(() => {\n        startBounceAnimation();\n      }, BOUNCING_ANIMATION_TIMEOUTS[1]);\n      secondBounceAnimationFinishedTimerRef.current = setTimeout(() => {\n        finishBounceAnimation();\n      }, BOUNCING_ANIMATION_TIMEOUTS[1] + TIME_FOR_BOUNCE_ANIMATION);\n    }\n  }, [ finishBounceAnimation, startBounceAnimation ]);\n  const clearBounceAnimationTimers = useCallback(() => {\n    clearTimeout(firstBounceAnimationStartTimerRef.current);\n    clearTimeout(firstBounceAnimationFinishedTimerRef.current);\n    clearTimeout(secondBounceAnimationStartTimerRef.current);\n    clearTimeout(secondBounceAnimationFinishedTimerRef.current);\n  }, []);\n  const setDefaultLauncherState = useCallback(() => {\n    clearExpandAnimationTimers();\n    serviceManager.store.dispatch(actions.setLauncherMinimized());\n    clearBounceAnimationTimers();\n    serviceManager.store.dispatch(actions.setLauncherProperty(\"bounceTurn\", 3));\n    animateOnceVisible.current = false;\n    setSmallLauncherClassName(\"WACLauncher__ButtonContainer--noAnimation\");\n  }, [ clearBounceAnimationTimers, clearExpandAnimationTimers, serviceManager.store ]);\n  useOnMount(() => {\n    if (desktopLauncherIsExpanded) {\n      animateOnceVisible.current = true;\n    } else if (!desktopLauncherWasMinimized && isExpandedLauncherEnabled) {\n      setExpandAnimationTimers();\n      return () => {\n        clearExpandAnimationTimers();\n      };\n    } else if (desktopLauncherWasMinimized && bounceTurn !== 3) {\n      setBounceAnimationTimers();\n      return () => {\n        clearBounceAnimationTimers();\n      };\n    }\n    return undefined;\n  });\n  useEffect(() => {\n    if (viewState.launcher && animateOnceVisible.current) {\n      determineLauncherHeight();\n      setComplexLauncherClassName(\"WACLauncherComplex__Container--simpleAnimation\");\n      animateOnceVisible.current = false;\n    }\n  }, [ determineLauncherHeight, viewState.launcher ]);\n  useEffect(() => {\n    if (viewState.mainWindow || viewState.tour) {\n      setDefaultLauncherState();\n    }\n  }, [ viewState, setDefaultLauncherState ]);\n  useEffect(() => {\n    if (new_expand_time) {\n      clearBounceAnimationTimers();\n      clearExpandAnimationTimers();\n      setExpandAnimationTimers();\n      serviceManager.store.dispatch(actions.setLauncherConfigProperty(\"new_expand_time\", false, LauncherType.DESKTOP));\n    }\n  }, [ animationFinishedTimerRef, animationStartTimerRef, new_expand_time, setExpandAnimationTimers, clearExpandAnimationTimers, clearBounceAnimationTimers, serviceManager.store ]);\n  const prevLauncherTitle = usePrevious(launcherConfig.desktop.title);\n  useEffect(() => {\n    if (prevLauncherTitle !== launcherConfig.desktop.title && (launcherConfig.desktop.title || prevLauncherTitle)) {\n      determineLauncherHeight();\n    }\n  }, [ determineLauncherHeight, launcherConfig, prevLauncherTitle ]);\n  const onMinimize = useCallback(() => {\n    setComplexLauncherClassName(\"WACLauncherComplex__Container--closeAnimation\");\n    setTimeout(() => {\n      setSmallLauncherClassName(\"WACLauncher__ButtonContainer--noAnimation\");\n      serviceManager.store.dispatch(actions.setLauncherMinimized());\n      setTimeout(requestFocus);\n    }, TIME_FOR_MINIMIZE_ANIMATION);\n  }, [ requestFocus, serviceManager.store ]);\n  const onOpen = useCallback(() => {\n    setDefaultLauncherState();\n    onDoToggle();\n  }, [ onDoToggle, setDefaultLauncherState ]);\n  let launcher;\n  if (desktopLauncherIsExpanded) {\n    launcher = React.createElement(LauncherComplex, {\n      languagePack: languagePack,\n      intl: intl,\n      launcherComplexRef: launcherComplexRef,\n      launcherRef: launcherRef,\n      launcherConfig: launcherConfig,\n      onOpen: onOpen,\n      onMinimize: onMinimize,\n      unreadAgentCount: unreadAgentCount,\n      showUnreadIndicator: showUnreadIndicator,\n      desktopLauncherIsExpanded: desktopLauncherIsExpanded,\n      launcherHidden: launcherHidden,\n      activeTour: activeTour,\n      className: complexLauncherClassName\n    });\n  } else {\n    launcher = React.createElement(LauncherExport, {\n      languagePack: languagePack,\n      intl: intl,\n      ref: launcherRef,\n      onToggleOpen: onOpen,\n      unreadAgentCount: unreadAgentCount,\n      showUnreadIndicator: showUnreadIndicator,\n      className: smallLauncherClassName,\n      launcherHidden: launcherHidden,\n      activeTour: activeTour\n    });\n  }\n  return launcher;\n};\n\nexport { LauncherDesktopContainer };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction animateWithClass(element, className, endAnimationNameOrDelay, endAnimationCallback) {\n  if (element) {\n    element.classList.add(className);\n    if (typeof endAnimationNameOrDelay === \"number\") {\n      setTimeout(() => {\n        element.classList.remove(className);\n        if (endAnimationCallback) {\n          endAnimationCallback();\n        }\n      }, endAnimationNameOrDelay);\n    } else {\n      const listener = event => {\n        if (!endAnimationNameOrDelay || event.animationName === endAnimationNameOrDelay) {\n          element.removeEventListener(\"animationend\", listener);\n          element.removeEventListener(\"animationcancel\", listener);\n          element.classList.remove(className);\n          if (endAnimationCallback) {\n            endAnimationCallback();\n          }\n        }\n      };\n      element.addEventListener(\"animationend\", listener);\n      element.addEventListener(\"animationcancel\", listener);\n    }\n  }\n}\n\nfunction setAnimationTimeouts(element, animation, timeouts, options) {\n  const {startingIndex: startingIndex, beforeAll: beforeAll, afterAll: afterAll, beforeEach: beforeEach, afterEach: afterEach} = options;\n  let index = startingIndex || 0;\n  let terminate = false;\n  let timeoutID = null;\n  function playAnimation() {\n    if (beforeAll && index === 0) {\n      beforeAll();\n    }\n    const isComplete = index === timeouts.length;\n    if (!isComplete && !terminate) {\n      timeoutID = setTimeout(setAnimationListener, timeouts[index]);\n    } else if (isComplete && afterAll) {\n      afterAll();\n    }\n  }\n  function replayAnimation() {\n    if (afterEach) {\n      afterEach();\n    }\n    index++;\n    element.removeEventListener(\"animationend\", replayAnimation);\n    element.classList.remove(animation);\n    playAnimation();\n  }\n  function setAnimationListener() {\n    if (beforeEach) {\n      beforeEach();\n    }\n    element.addEventListener(\"animationend\", replayAnimation);\n    element.classList.add(animation);\n  }\n  playAnimation();\n  return () => {\n    terminate = true;\n    clearTimeout(timeoutID);\n    element.classList.remove(animation);\n    element.removeEventListener(\"animationend\", replayAnimation);\n  };\n}\n\nexport { animateWithClass, setAnimationTimeouts };\n","import ArrowUpLeft from \"@carbon/icons-react/es/ArrowUpLeft.js\";\n\nimport ChatLaunch from \"@carbon/icons-react/es/ChatLaunch.js\";\n\nimport { Button } from \"@carbon/react\";\n\nimport cx from \"classnames\";\n\nimport React, { forwardRef, useState, useRef, useImperativeHandle, useEffect } from \"react\";\n\nimport { useIntl } from \"react-intl\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { useAriaAnnouncer } from \"../../hooks/useAriaAnnouncer.js\";\n\nimport { useLanguagePack } from \"../../hooks/useLanguagePack.js\";\n\nimport { usePrevious } from \"../../hooks/usePrevious.js\";\n\nimport { animateWithClass } from \"../../utils/animationUtils.js\";\n\nimport { IS_MOBILE } from \"../../utils/browserUtils.js\";\n\nimport { doFocusRef } from \"../../utils/domUtils.js\";\n\nimport { getLauncherButtonAriaLabel } from \"./launcherUtils.js\";\n\nimport { ButtonKindEnum } from \"../../../../types/utilities/carbonTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const MAX_EXTENDED_LAUNCHER_WIDTH = 400;\n\nfunction LauncherExtended(props, ref) {\n  const {unreadAgentCount: unreadAgentCount, showUnreadIndicator: showUnreadIndicator, launcherConfig: launcherConfig, isExtended: isExtended, playExtendAnimation: playExtendAnimation, onToggleOpen: onToggleOpen, onSwipeRight: onSwipeRight, onReduceEnd: onReduceEnd, className: className, launcherHidden: launcherHidden, activeTour: activeTour} = props;\n  const ariaAnnouncer = useAriaAnnouncer();\n  const languagePack = useLanguagePack();\n  const intl = useIntl();\n  const launcherAvatarURL = useSelector(state => state.theme.useAITheme ? undefined : state.launcher.config.mobile.avatar_url_override);\n  const [animateExtendedState, setAnimateExtendedState] = useState(playExtendAnimation);\n  const [showGreetingMessage, setShowGreetingMessage] = useState(false);\n  const prevIsExtended = usePrevious(isExtended);\n  const buttonRef = useRef();\n  const extendedContainerRef = useRef();\n  const greetingMessageRef = useRef();\n  const textHolderRef = useRef();\n  const touchStartRef = useRef({\n    touchStartX: null,\n    touchStartY: null\n  });\n  const shouldReduceExtendedLauncher = !isExtended && prevIsExtended;\n  const extendWithAnimation = isExtended && animateExtendedState;\n  const extendWithoutAnimation = isExtended && !animateExtendedState;\n  const launcherGreetingMessage = launcherConfig.mobile.title || languagePack.launcher_mobileGreeting;\n  let ariaLabel = getLauncherButtonAriaLabel(languagePack, launcherHidden, activeTour);\n  if (unreadAgentCount !== 0) {\n    ariaLabel += `. ${intl.formatMessage({\n      id: \"icon_ariaUnreadMessages\"\n    }, {\n      count: unreadAgentCount\n    })}`;\n  }\n  let launcherAvatar = React.createElement(ChatLaunch, {\n    size: 24,\n    className: \"WACLauncher__svg\"\n  });\n  if (launcherAvatarURL) {\n    launcherAvatar = React.createElement(\"img\", {\n      className: \"WACLauncher__Avatar\",\n      src: launcherAvatarURL,\n      \"aria-hidden\": true,\n      alt: \"\"\n    });\n  }\n  useImperativeHandle(ref, () => ({\n    requestFocus: () => {\n      doFocusRef(buttonRef);\n    },\n    launcherContainerElement: () => extendedContainerRef.current\n  }));\n  useEffect(() => {\n    const textHolderElement = textHolderRef.current;\n    const greetingMessageElement = greetingMessageRef.current;\n    const extendedContainerElement = extendedContainerRef.current;\n    calculateAndSetMaxExtendedLauncherWidth(textHolderElement, greetingMessageElement, extendedContainerElement);\n  }, [ ariaAnnouncer, extendWithoutAnimation, launcherGreetingMessage ]);\n  useEffect(() => {\n    if (isExtended) {\n      if (animateExtendedState) {\n        doFadeAnimationForElements({\n          fadeInElement: greetingMessageRef.current,\n          fadeInTime: 300\n        }, () => {\n          setAnimateExtendedState(false);\n        });\n      } else {\n        setShowGreetingMessage(true);\n      }\n      const buttonEl = buttonRef.current;\n      const handleTouchMove = event => {\n        checkIfUserSwipedRight(event.touches[0], touchStartRef.current, onSwipeRight);\n      };\n      const handleTouchStart = event => {\n        const {clientX: clientX, clientY: clientY} = event.touches[0];\n        const touchStart = touchStartRef.current;\n        touchStart.touchStartX = clientX;\n        touchStart.touchStartY = clientY;\n        buttonRef.current.addEventListener(\"touchmove\", handleTouchMove);\n      };\n      buttonEl.addEventListener(\"touchstart\", handleTouchStart);\n      return () => {\n        buttonEl.removeEventListener(\"touchmove\", handleTouchMove);\n        buttonEl.removeEventListener(\"touchstart\", handleTouchStart);\n      };\n    } else if (shouldReduceExtendedLauncher) {\n      const reduceAnimationEndListener = () => {\n        onReduceEnd();\n        setAnimateExtendedState(true);\n        extendedContainerRef.current.removeEventListener(\"animationend\", reduceAnimationEndListener);\n      };\n      extendedContainerRef.current.addEventListener(\"animationend\", reduceAnimationEndListener);\n      doFadeAnimationForElements({\n        fadeOutElement: greetingMessageRef.current\n      });\n    }\n    return undefined;\n  }, [ animateExtendedState, ariaAnnouncer, isExtended, launcherGreetingMessage, onReduceEnd, onSwipeRight, shouldReduceExtendedLauncher ]);\n  return React.createElement(\"div\", {\n    className: cx(\"WACLauncher__ButtonContainer WACLauncher__ButtonContainer--round WACLauncherExtended__Container\", className, {\n      \"WACLauncher__ButtonContainer--hidden\": launcherHidden,\n      \"WACLauncherExtended__Button--extended\": extendWithoutAnimation,\n      \"WACLauncherExtended__Button--extendedAnimation\": extendWithAnimation,\n      \"WACLauncherExtended__Button--reducedAnimation\": shouldReduceExtendedLauncher\n    }),\n    ref: extendedContainerRef\n  }, React.createElement(Button, {\n    \"aria-label\": ariaLabel,\n    className: cx(\"WACLauncher__Button\", \"WACLauncherExtended__Button\", {\n      WACLauncher__TourButton: activeTour\n    }),\n    kind: activeTour ? ButtonKindEnum.GHOST : ButtonKindEnum.PRIMARY,\n    type: \"button\",\n    ref: buttonRef,\n    onClick: onToggleOpen\n  }, React.createElement(\"div\", {\n    className: \"WACLauncherExtended__WrapperContainer\"\n  }, React.createElement(\"div\", {\n    className: \"WACLauncherExtended__Wrapper\"\n  }, React.createElement(\"div\", {\n    className: \"WACLauncherExtended__TextHolder\",\n    ref: textHolderRef\n  }, React.createElement(\"div\", {\n    className: cx(\"WACLauncherExtended__Greeting\", {\n      \"WACLauncherExtended__Element--hidden\": !showGreetingMessage\n    }),\n    ref: greetingMessageRef\n  }, React.createElement(\"div\", {\n    className: \"WACLauncherExtended__GreetingText\",\n    \"aria-hidden\": !isExtended\n  }, launcherGreetingMessage))), React.createElement(\"div\", {\n    className: \"WACLauncher__IconHolder\"\n  }, activeTour ? React.createElement(ArrowUpLeft, {\n    size: 24,\n    className: \"WACLauncher__svg\"\n  }) : launcherAvatar))), (unreadAgentCount !== 0 || showUnreadIndicator) && React.createElement(\"div\", {\n    className: \"WAC__countIndicator\"\n  }, unreadAgentCount !== 0 ? unreadAgentCount : \"\")));\n}\n\nfunction calculateAndSetMaxExtendedLauncherWidth(textHolderEl, greetingMessageEl, extendedContainerEl) {\n  const nonTextSpace = 68;\n  const maxLauncherExtendedWidth = getMaxLauncherExtendedWidth();\n  const maxTextHolderWidth = maxLauncherExtendedWidth - nonTextSpace + 12;\n  textHolderEl.style.setProperty(\"width\", `${maxTextHolderWidth}px`);\n  greetingMessageEl.style.setProperty(\"width\", `${maxTextHolderWidth - 12}px`);\n  greetingMessageEl.style.setProperty(\"display\", \"flex\");\n  const {clientWidth: clientWidth} = greetingMessageEl.querySelector(\".WACLauncherExtended__GreetingText\");\n  let launcherExtendedWidth = clientWidth + nonTextSpace + 1;\n  if (launcherExtendedWidth > MAX_EXTENDED_LAUNCHER_WIDTH) {\n    launcherExtendedWidth = MAX_EXTENDED_LAUNCHER_WIDTH;\n  }\n  greetingMessageEl.removeAttribute(\"style\");\n  textHolderEl.removeAttribute(\"style\");\n  extendedContainerEl.style.setProperty(\"--cds-chat--LAUNCHER-EXTENDED-width\", `${launcherExtendedWidth}px`);\n}\n\nfunction doFadeAnimationForElements({fadeOutElement: fadeOutElement, fadeInElement: fadeInElement, fadeInTime: fadeInTime = 600}, callback) {\n  if (fadeOutElement) {\n    fadeOutElement.classList.remove(\"WACLauncherExtended__Element--hidden\");\n    animateWithClass(fadeOutElement, \"WACLauncherExtended__Element--FadeOut\", 500, () => {\n      fadeOutElement.classList.add(\"WACLauncherExtended__Element--hidden\");\n      fadeOutElement.classList.remove(\"WACLauncherExtended__Element--FadeOut\");\n      if (!fadeInElement && callback) {\n        callback();\n      }\n    });\n  }\n  if (fadeInElement) {\n    setTimeout(() => {\n      fadeInElement.classList.remove(\"WACLauncherExtended__Element--hidden\");\n      animateWithClass(fadeInElement, \"WACLauncherExtended__Element--FadeIn\", 600, () => {\n        fadeInElement.classList.remove(\"WACLauncherExtended__Element--FadeIn\");\n        if (callback) {\n          callback();\n        }\n      });\n    }, fadeInTime);\n  }\n}\n\nfunction checkIfUserSwipedRight(touchList, touchStartCoordinates, callback) {\n  const {touchStartX: touchStartX, touchStartY: touchStartY} = touchStartCoordinates;\n  if (touchStartX === null || touchStartY === null) {\n    return;\n  }\n  const {clientX: touchEndX, clientY: touchEndY} = touchList;\n  const differenceX = touchEndX - touchStartX;\n  const differenceY = touchEndY - touchStartY;\n  if (Math.abs(differenceX) > Math.abs(differenceY)) {\n    if (differenceX > 0) {\n      callback();\n    }\n  }\n  touchStartCoordinates.touchStartX = null;\n  touchStartCoordinates.touchStartY = null;\n}\n\nfunction getMaxLauncherExtendedWidth() {\n  const launcherPosition = IS_MOBILE ? 32 : 64;\n  const {width: width, height: height} = window.screen;\n  const lowestValue = Math.min(height, width);\n  const extendedWidth = lowestValue - launcherPosition;\n  return Math.min(extendedWidth, MAX_EXTENDED_LAUNCHER_WIDTH);\n}\n\nconst LauncherExtendedExport = React.memo(forwardRef(LauncherExtended));\n\nexport { LauncherExtendedExport as LauncherExtended };\n","import cx from \"classnames\";\n\nimport React, { useState, useRef, useCallback, useEffect } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { useOnMount } from \"../../hooks/useOnMount.js\";\n\nimport { usePrevious } from \"../../hooks/usePrevious.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport actions from \"../../store/actions.js\";\n\nimport { BOUNCING_ANIMATION_TIMEOUTS } from \"../../../../types/config/LauncherConfig.js\";\n\nimport { setAnimationTimeouts } from \"../../utils/animationUtils.js\";\n\nimport { LauncherExtended as LauncherExtendedExport } from \"./LauncherExtended.js\";\n\nimport { LauncherType } from \"../../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function LauncherMobileContainer(props) {\n  const {launcherRef: launcherRef, onToggleOpen: onToggleOpen, launcherHidden: launcherHidden, activeTour: activeTour} = props;\n  const serviceManager = useServiceManager();\n  const {config: launcherConfig} = useSelector(state => state.launcher);\n  const unreadAgentCount = useSelector(state => state.agentState.numUnreadMessages);\n  const {mobileLauncherIsExtended: isExtended, mobileLauncherWasReduced: wasReduced, mobileLauncherDisableBounce: disableBounce, bounceTurn: bounceTurn, showUnreadIndicator: showUnreadIndicator, viewState: viewState} = useSelector(state => state.persistedToBrowserStorage.launcherState);\n  const [isStartingBounceAnimation, setIsStartingBounceAnimation] = useState(false);\n  const prevIsExtended = usePrevious(isExtended);\n  const prevWasReduced = usePrevious(wasReduced);\n  const initialBounceTurn = useRef(bounceTurn).current;\n  const previouslyPlayedExtendAnimation = useRef(wasReduced).current;\n  const extendLauncherTimeoutIDRef = useRef(null);\n  const reduceLauncherTimeoutIDRef = useRef(null);\n  const endBounceAnimationRef = useRef(null);\n  const shouldBounceRef = useRef(previouslyPlayedExtendAnimation && !disableBounce);\n  const {time_to_expand: time_to_expand, new_expand_time: new_expand_time, time_to_reduce: time_to_reduce} = launcherConfig.mobile;\n  const isExpandedLauncherEnabled = launcherConfig.mobile.is_on;\n  const playExtendAnimation = prevIsExtended === undefined && !isExtended;\n  const isExtending = prevIsExtended !== undefined && !prevIsExtended && isExtended;\n  const hasReduced = prevWasReduced !== undefined && !prevWasReduced && wasReduced;\n  const disableIntroAnimation = isExtending || hasReduced || isStartingBounceAnimation;\n  const setLauncherStateAsReduced = useCallback(() => {\n    if (!wasReduced) {\n      serviceManager.store.dispatch(actions.setLauncherProperty(\"mobileLauncherWasReduced\", true));\n    }\n  }, [ wasReduced, serviceManager ]);\n  const reduceLauncher = useCallback(() => {\n    clearTimeouts();\n    if (isExtended) {\n      document.removeEventListener(\"scroll\", reduceLauncher);\n      serviceManager.store.dispatch(actions.setLauncherProperty(\"mobileLauncherIsExtended\", false));\n    }\n  }, [ isExtended, serviceManager ]);\n  const setExpandAnimationTimeout = useCallback(() => {\n    extendLauncherTimeoutIDRef.current = setTimeout(() => {\n      if (!isExtended && !isExtending) {\n        serviceManager.store.dispatch(actions.setLauncherProperty(\"mobileLauncherWasReduced\", false));\n        serviceManager.store.dispatch(actions.setLauncherProperty(\"mobileLauncherIsExtended\", true));\n      }\n    }, time_to_expand);\n  }, [ isExtended, isExtending, serviceManager.store, time_to_expand ]);\n  const setDefaultLauncherState = useCallback(() => {\n    const endBounceAnimation = endBounceAnimationRef.current;\n    if (endBounceAnimation) {\n      endBounceAnimation();\n      endBounceAnimationRef.current = null;\n    }\n    serviceManager.store.dispatch(actions.setLauncherProperty(\"mobileLauncherDisableBounce\", true));\n    reduceLauncher();\n    setLauncherStateAsReduced();\n  }, [ reduceLauncher, serviceManager.store, setLauncherStateAsReduced ]);\n  useOnMount(() => {\n    if (!wasReduced && playExtendAnimation && isExpandedLauncherEnabled) {\n      setExpandAnimationTimeout();\n    } else if (shouldBounceRef.current) {\n      const launcherContainerElement = launcherRef?.current?.launcherContainerElement();\n      if (launcherContainerElement) {\n        const startRecurringBounceAnimation = () => {\n          if (shouldBounceRef.current) {\n            let turnCounter = initialBounceTurn;\n            launcherContainerElement.removeEventListener(\"animationend\", startRecurringBounceAnimation);\n            setIsStartingBounceAnimation(true);\n            endBounceAnimationRef.current = setAnimationTimeouts(launcherContainerElement, \"WACLauncher__ButtonContainer--bounceAnimation\", BOUNCING_ANIMATION_TIMEOUTS, {\n              startingIndex: initialBounceTurn - 1,\n              afterEach: () => {\n                turnCounter++;\n                serviceManager.store.dispatch(actions.setLauncherProperty(\"bounceTurn\", turnCounter));\n              },\n              afterAll: () => {\n                serviceManager.store.dispatch(actions.setLauncherProperty(\"mobileLauncherDisableBounce\", true));\n              }\n            });\n          }\n        };\n        launcherContainerElement.addEventListener(\"animationend\", startRecurringBounceAnimation);\n      }\n    }\n  });\n  useEffect(() => {\n    if (viewState.mainWindow || viewState.tour) {\n      setDefaultLauncherState();\n    }\n  }, [ viewState, setDefaultLauncherState ]);\n  useEffect(() => {\n    if (new_expand_time) {\n      if (shouldBounceRef.current) {\n        shouldBounceRef.current = false;\n      }\n      const endBounceAnimation = endBounceAnimationRef.current;\n      if (endBounceAnimation) {\n        endBounceAnimation();\n        endBounceAnimationRef.current = null;\n      }\n      if (extendLauncherTimeoutIDRef.current) {\n        clearTimeout(extendLauncherTimeoutIDRef.current);\n      }\n      setExpandAnimationTimeout();\n      serviceManager.store.dispatch(actions.setLauncherConfigProperty(\"new_expand_time\", false, LauncherType.MOBILE));\n    }\n  }, [ setExpandAnimationTimeout, new_expand_time, serviceManager.store, shouldBounceRef ]);\n  function clearTimeouts() {\n    const extendLauncherTimeoutID = extendLauncherTimeoutIDRef.current;\n    const reduceLauncherTimeoutID = reduceLauncherTimeoutIDRef.current;\n    if (reduceLauncherTimeoutID) {\n      clearTimeout(reduceLauncherTimeoutID);\n      reduceLauncherTimeoutIDRef.current = null;\n    }\n    if (extendLauncherTimeoutID) {\n      clearTimeout(extendLauncherTimeoutID);\n      extendLauncherTimeoutIDRef.current = null;\n    }\n  }\n  const handleToggleOpen = useCallback(() => {\n    setDefaultLauncherState();\n    onToggleOpen();\n  }, [ onToggleOpen, setDefaultLauncherState ]);\n  const handleSwipeRight = useCallback(() => {\n    reduceLauncher();\n  }, [ reduceLauncher ]);\n  useEffect(() => {\n    if (isExtended) {\n      reduceLauncherTimeoutIDRef.current = setTimeout(() => {\n        reduceLauncher();\n      }, time_to_reduce);\n      document.addEventListener(\"scroll\", reduceLauncher);\n    }\n  }, [ isExtended, reduceLauncher, time_to_reduce, serviceManager ]);\n  return React.createElement(LauncherExtendedExport, {\n    className: cx({\n      \"WACLauncher__ButtonContainer--noAnimation\": disableIntroAnimation\n    }),\n    ref: launcherRef,\n    launcherConfig: launcherConfig,\n    showUnreadIndicator: showUnreadIndicator,\n    unreadAgentCount: unreadAgentCount,\n    isExtended: isExtended,\n    playExtendAnimation: playExtendAnimation,\n    onToggleOpen: handleToggleOpen,\n    onSwipeRight: handleSwipeRight,\n    onReduceEnd: setLauncherStateAsReduced,\n    launcherHidden: launcherHidden,\n    activeTour: activeTour\n  });\n}\n\nexport { LauncherMobileContainer };\n","import React, { useRef, useCallback } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { useEffectDidUpdate } from \"../../hooks/useEffectDidUpdate.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport \"../../../../types/state/AppState.js\";\n\nimport { IS_PHONE } from \"../../utils/browserUtils.js\";\n\nimport { LauncherDesktopContainer } from \"./LauncherDesktopContainer.js\";\n\nimport { LauncherMobileContainer } from \"./LauncherMobileContainer.js\";\n\nimport { ViewChangeReason, MainWindowOpenReason } from \"../../../../types/events/eventBusTypes.js\";\n\nimport { ViewType } from \"../../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function LauncherContainer() {\n  const serviceManager = useServiceManager();\n  const launcherRef = useRef();\n  const viewState = useSelector(state => state.persistedToBrowserStorage.launcherState.viewState);\n  const initialViewChangeComplete = useSelector(state => state.initialViewChangeComplete);\n  const launcherHidden = !viewState.launcher;\n  const activeTour = useSelector(state => state.persistedToBrowserStorage.launcherState.activeTour);\n  const requestFocus = useCallback(() => {\n    launcherRef.current?.requestFocus();\n  }, [ launcherRef ]);\n  const onDoToggle = useCallback(() => {\n    if (activeTour) {\n      return serviceManager.actions.changeView(ViewType.TOUR, {\n        viewChangeReason: ViewChangeReason.LAUNCHER_CLICKED\n      });\n    }\n    return serviceManager.actions.changeView(ViewType.MAIN_WINDOW, {\n      mainWindowOpenReason: MainWindowOpenReason.DEFAULT_LAUNCHER\n    });\n  }, [ activeTour, serviceManager.actions ]);\n  useEffectDidUpdate(() => {\n    if (viewState.launcher && !viewState.mainWindow && !viewState.tour && initialViewChangeComplete) {\n      launcherRef.current?.requestFocus();\n    }\n  }, [ viewState ]);\n  let launcherContainer;\n  if (IS_PHONE) {\n    launcherContainer = React.createElement(LauncherMobileContainer, {\n      launcherRef: launcherRef,\n      onToggleOpen: onDoToggle,\n      launcherHidden: launcherHidden,\n      activeTour: activeTour\n    });\n  } else {\n    launcherContainer = React.createElement(LauncherDesktopContainer, {\n      launcherRef: launcherRef,\n      onDoToggle: onDoToggle,\n      requestFocus: requestFocus,\n      launcherHidden: launcherHidden,\n      activeTour: activeTour\n    });\n  }\n  return launcherContainer;\n}\n\nexport { LauncherContainer };\n","import { useRef, useEffect } from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function useEffectDidUpdate(effect, deps) {\n  const hasRunRef = useRef(false);\n  useEffect(() => {\n    if (hasRunRef.current) {\n      return effect();\n    }\n    hasRunRef.current = true;\n    return undefined;\n  }, deps);\n}\n\nexport { useEffectDidUpdate };\n","import Loading from \"../../react/carbon/Loading.js\";\n\nimport cx from \"classnames\";\n\nimport React, { useContext } from \"react\";\n\nimport { HideComponentContext } from \"../contexts/HideComponentContext.js\";\n\nimport { BotHeader as BotHeaderExport } from \"./header/BotHeader.js\";\n\nimport { HomeScreenHeader as HomeScreenHeaderExport } from \"./homeScreen/HomeScreenHeader.js\";\n\nimport { AnnounceOnMountComponent as AnnounceOnMountComponentExport } from \"./util/AnnounceOnMountComponent.js\";\n\nimport { MountChildrenOnDelay } from \"./util/MountChildrenOnDelay.js\";\n\nimport { OverlayPanelName } from \"./OverlayPanel.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function HydrationPanel({onClose: onClose, languagePack: languagePack, isHydrated: isHydrated, headerDisplayName: headerDisplayName, useHomeScreenVersion: useHomeScreenVersion}) {\n  const isHidden = useContext(HideComponentContext);\n  let header;\n  if (useHomeScreenVersion) {\n    header = React.createElement(HomeScreenHeaderExport, {\n      onClose: onClose\n    });\n  } else {\n    header = React.createElement(BotHeaderExport, {\n      onClose: onClose,\n      headerDisplayName: headerDisplayName,\n      onToggleHomeScreen: null,\n      includeWriteableElement: false,\n      testIdPrefix: OverlayPanelName.HYDRATING\n    });\n  }\n  return React.createElement(\"div\", {\n    className: \"WAC WAC__hydratingContainer\"\n  }, header, React.createElement(\"div\", {\n    className: cx(\"WAC__hydrating\", \"WACPanelContent\", {\n      \"WAC__hydrating--homeScreen\": useHomeScreenVersion\n    })\n  }, !isHidden && React.createElement(MountChildrenOnDelay, {\n    delay: 400\n  }, !isHydrated && React.createElement(AnnounceOnMountComponentExport, {\n    announceOnce: languagePack.window_ariaWindowLoading\n  }), React.createElement(Loading, {\n    active: true,\n    overlay: false,\n    assistiveText: languagePack.window_ariaWindowLoading\n  }))));\n}\n\nexport { HydrationPanel };\n","import React, { useEffect, useCallback } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { BusEventType } from \"../../../../types/events/eventBusTypes.js\";\n\nimport { useAriaAnnouncer } from \"../../hooks/useAriaAnnouncer.js\";\n\nimport { useLanguagePack } from \"../../hooks/useLanguagePack.js\";\n\nimport { usePrevious } from \"../../hooks/usePrevious.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport actions from \"../../store/actions.js\";\n\nimport { DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS } from \"../../store/reducerUtils.js\";\n\nimport { AnimationInType, AnimationOutType } from \"../../../../types/utilities/Animation.js\";\n\nimport { consoleError } from \"../../utils/miscUtils.js\";\n\nimport { BasePanelComponent as BasePanelComponentExport } from \"../BasePanelComponent.js\";\n\nimport { OverlayPanel, OverlayPanelName } from \"../OverlayPanel.js\";\n\nimport WriteableElement from \"../WriteableElement.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function CustomPanel(props) {\n  const {useAITheme: useAITheme, onPanelOpenEnd: onPanelOpenEnd, onPanelCloseEnd: onPanelCloseEnd, onPanelOpenStart: onPanelOpenStart, onPanelCloseStart: onPanelCloseStart, onClose: onClose, onCloseAndRestart: onCloseAndRestart, onClickRestart: onClickRestart} = props;\n  const languagePack = useLanguagePack();\n  const {isOpen: isOpen, options: options} = useSelector(state => state.customPanelState);\n  const {title: title, hidePanelHeader: hidePanelHeader, disableDefaultCloseAction: disableDefaultCloseAction, disableAnimation: disableAnimation, onClickBack: onClickBack, onClickClose: onClickClose, onClickCloseAndRestart: onClickCloseAndRestart} = options;\n  const serviceManager = useServiceManager();\n  const ariaAnnouncer = useAriaAnnouncer();\n  const prevIsOpen = usePrevious(isOpen);\n  const openAnimation = disableAnimation ? AnimationInType.NONE : AnimationInType.SLIDE_IN_FROM_BOTTOM;\n  const closeAnimation = disableAnimation ? AnimationOutType.NONE : AnimationOutType.SLIDE_OUT_TO_BOTTOM;\n  useEffect(() => {\n    if (prevIsOpen !== isOpen && isOpen) {\n      if (!hidePanelHeader && title) {\n        ariaAnnouncer(title);\n      }\n    }\n  }, [ ariaAnnouncer, hidePanelHeader, isOpen, prevIsOpen, title ]);\n  const onClickBackLocal = useCallback(() => {\n    serviceManager.store.dispatch(actions.setCustomPanelOpen(false));\n    onClickBack?.();\n  }, [ serviceManager, onClickBack ]);\n  const onClickCloseLocal = useCallback(() => {\n    if (!disableDefaultCloseAction) {\n      checkAllowClose(serviceManager.store.getState().viewChanging);\n      onClose();\n    }\n    onClickClose?.();\n  }, [ disableDefaultCloseAction, onClickClose, onClose, serviceManager ]);\n  const onCloseAndRestartLocal = useCallback(() => {\n    if (!disableDefaultCloseAction) {\n      checkAllowClose(serviceManager.store.getState().viewChanging);\n      onCloseAndRestart();\n    }\n    onClickCloseAndRestart?.();\n  }, [ disableDefaultCloseAction, onClickCloseAndRestart, onCloseAndRestart, serviceManager ]);\n  return React.createElement(OverlayPanel, {\n    className: \"WAC__overlay--covering\",\n    onOpenStart: () => {\n      serviceManager.eventBus.fire({\n        type: BusEventType.CUSTOM_PANEL_PRE_OPEN\n      }, serviceManager.instance);\n      onPanelOpenStart();\n    },\n    onOpenEnd: () => {\n      serviceManager.eventBus.fire({\n        type: BusEventType.CUSTOM_PANEL_OPEN\n      }, serviceManager.instance);\n      onPanelOpenEnd();\n    },\n    onCloseStart: () => {\n      serviceManager.eventBus.fire({\n        type: BusEventType.CUSTOM_PANEL_PRE_CLOSE\n      }, serviceManager.instance);\n      onPanelCloseStart();\n    },\n    onCloseEnd: () => {\n      serviceManager.eventBus.fire({\n        type: BusEventType.CUSTOM_PANEL_CLOSE\n      }, serviceManager.instance);\n      onPanelCloseEnd();\n      serviceManager.store.dispatch(actions.setCustomPanelConfigOptions(DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS));\n    },\n    animationOnOpen: openAnimation,\n    animationOnClose: closeAnimation,\n    shouldOpen: isOpen,\n    serviceManager: serviceManager,\n    overlayPanelName: OverlayPanelName.CUSTOM\n  }, React.createElement(BasePanelComponentExport, {\n    className: \"WACCustomPanel\",\n    eventName: \"Custom panel opened\",\n    eventDescription: \"A user opened a custom panel.\",\n    labelBackButton: languagePack.general_returnToAssistant,\n    isOpen: isOpen,\n    title: title,\n    useAITheme: useAITheme,\n    onClickBack: onClickBackLocal,\n    onClickClose: onClickCloseLocal,\n    onClickCloseAndRestart: onCloseAndRestartLocal,\n    onClickRestart: onClickRestart,\n    hidePanelHeader: hidePanelHeader,\n    hideBackButton: options.hideBackButton,\n    hideCloseButton: options.hideCloseButton,\n    hideCloseAndRestartButton: options.hideCloseAndRestartButton,\n    testIdPrefix: OverlayPanelName.CUSTOM\n  }, React.createElement(WriteableElement, {\n    slotName: \"customPanelElement\",\n    className: \"WACCustomPanel__ContentContainer\"\n  })));\n}\n\nfunction checkAllowClose(viewChanging) {\n  if (viewChanging) {\n    const message = \"You are attempting to close Carbon AI chat from a custom panel while Carbon AI chat is currently running a view\" + \" change event which is not permitted. Please use the disableDefaultCloseAction option to disable\" + \" this behavior for the custom panel and then use onClickClose to resolve your Promise that is handling\" + \" the event; that Promise will allow you to close Carbon AI chat.\";\n    consoleError(message);\n    throw new Error(message);\n  }\n}\n\nconst CustomPanelExport = React.memo(CustomPanel);\n\nexport { CustomPanelExport as CustomPanel };\n","import \"intl-pluralrules\";\n\nimport cx from \"classnames\";\n\nimport FocusTrap from \"focus-trap-react\";\n\nimport React, { Component, Suspense } from \"react\";\n\nimport { connect } from \"react-redux\";\n\nimport { HydrationPanel } from \"../../components/HydrationPanel.js\";\n\nimport { OverlayPanel, OverlayPanelName } from \"../../components/OverlayPanel.js\";\n\nimport { CustomPanel as CustomPanelExport } from \"../../components/panels/CustomPanel.js\";\n\nimport { HideComponent } from \"../../components/util/HideComponent.js\";\n\nimport VisuallyHidden from \"../../components/util/VisuallyHidden.js\";\n\nimport { ModalPortalRootContext } from \"../../contexts/ModalPortalRootContext.js\";\n\nimport actions from \"../../store/actions.js\";\n\nimport { selectIsInputToAgent, selectInputState, selectAgentDisplayState } from \"../../store/selectors.js\";\n\nimport { AnimationOutType, AnimationInType } from \"../../../../types/utilities/Animation.js\";\n\nimport { ChatWidthBreakpoint } from \"../../../../types/state/AppState.js\";\n\nimport { addClassNameToState, removeClassNameFromState } from \"../../../../types/utilities/HasAddRemoveClassName.js\";\n\nimport { IS_MOBILE, IS_IOS } from \"../../utils/browserUtils.js\";\n\nimport \"../../utils/constants.js\";\n\nimport { doFocusRef, SCROLLBAR_WIDTH } from \"../../utils/domUtils.js\";\n\nimport { arrayLastValue } from \"../../utils/lang/arrayUtils.js\";\n\nimport { createMessageRequestForText, createMessageRequestForChoice } from \"../../utils/messageUtils.js\";\n\nimport { consoleError, createDidCatchErrorData } from \"../../utils/miscUtils.js\";\n\nimport { MessageSendSource, MainWindowCloseReason } from \"../../../../types/events/eventBusTypes.js\";\n\nimport { lazyChat, lazyCatastrophicError, lazyDisclaimer, lazyHomeScreenContainer, lazyIFramePanel, lazyViewSourcePanel, lazyBodyAndFooterPanelComponent } from \"../../../dynamic-imports/dynamic-imports.js\";\n\nimport { ViewType } from \"../../../../types/instance/apiTypes.js\";\n\nimport { CornersType } from \"../../../../types/config/CornersType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const Chat = lazyChat();\n\nconst CatastrophicError = lazyCatastrophicError();\n\nconst Disclaimer = lazyDisclaimer();\n\nconst HomeScreenContainer = lazyHomeScreenContainer();\n\nconst IFramePanel = lazyIFramePanel();\n\nconst ViewSourcePanel = lazyViewSourcePanel();\n\nconst BodyAndFooterPanelComponent = lazyBodyAndFooterPanelComponent();\n\nconst WIDTH_BREAKPOINT_STANDARD = \"WAC--standardWidth\";\n\nconst WIDTH_BREAKPOINT_NARROW = \"WAC--narrowWidth\";\n\nconst WIDTH_BREAKPOINT_WIDE = \"WAC--wideWidth\";\n\nclass MainWindow extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      closing: false,\n      open: this.props.persistedToBrowserStorage.launcherState.viewState.mainWindow,\n      modalPortalHostElement: null,\n      numPanelsOpen: 0,\n      numPanelsAnimating: 0,\n      numPanelsCovering: 0,\n      isHydrationAnimationComplete: this.props.isHydrated,\n      shouldAutoFocus: this.props.config.public.shouldTakeFocusIfOpensAutomatically,\n      extraClassNames: [],\n      areModulesLoaded: false\n    };\n    this.mainWindowRef = React.createRef();\n    this.containerRef = React.createRef();\n    this.botChatRef = React.createRef();\n    this.homeScreenInputRef = React.createRef();\n    this.disclaimerRef = React.createRef();\n    this.brandingRef = React.createRef();\n    this.animationContainerRef = React.createRef();\n    this.iframePanelRef = React.createRef();\n    this.viewSourcePanelRef = React.createRef();\n    this.previousBodyVisibility = undefined;\n    this.previousBodyPosition = undefined;\n    this.onResize = () => {\n      let appChatWidthBreakpoint;\n      const height = this.containerRef?.current?.offsetHeight;\n      const width = this.containerRef?.current?.offsetWidth;\n      if (width >= 672 + 16 + 16) {\n        appChatWidthBreakpoint = ChatWidthBreakpoint.WIDE;\n      } else if (width >= 360) {\n        appChatWidthBreakpoint = ChatWidthBreakpoint.STANDARD;\n      } else {\n        appChatWidthBreakpoint = ChatWidthBreakpoint.NARROW;\n      }\n      this.props.serviceManager.store.dispatch(actions.setAppStateValue(\"chatWidth\", width));\n      this.props.serviceManager.store.dispatch(actions.setAppStateValue(\"chatHeight\", height));\n      this.props.serviceManager.store.dispatch(actions.setAppStateValue(\"chatWidthBreakpoint\", appChatWidthBreakpoint));\n    };\n    this.onVisualViewportResize = () => {\n      this.updateFromVisualViewport();\n    };\n    this.updateFromVisualViewport = () => {\n      const element = this.props.serviceManager.container;\n      const {visualViewport: visualViewport} = window;\n      if (visualViewport) {\n        element.style.setProperty(\"--cds-chat-viewport-height\", `${visualViewport.height}px`);\n        element.style.setProperty(\"--cds-chat-viewport-width\", `${visualViewport.width}px`);\n        element.style.setProperty(\"--cds-chat-viewport-offsetTop\", `${visualViewport.offsetTop}px`);\n        element.style.setProperty(\"--cds-chat-viewport-offsetLeft\", `${visualViewport.offsetLeft}px`);\n      } else {\n        const height = \"100vh\";\n        element.style.setProperty(\"--cds-chat-viewport-height\", height);\n        element.style.setProperty(\"--cds-chat-viewport-width\", \"100vw\");\n        element.style.setProperty(\"--cds-chat-viewport-offsetTop\", \"0\");\n        element.style.setProperty(\"--cds-chat-viewport-offsetLeft\", \"0\");\n      }\n    };\n    this.setModalPortalHostElement = ref => {\n      if (this.state.modalPortalHostElement !== ref) {\n        this.setState({\n          modalPortalHostElement: ref\n        });\n      }\n    };\n    this.onSendInput = async (text, source, options) => {\n      const isInputToAgent = selectIsInputToAgent(this.props);\n      const {serviceManager: serviceManager} = this.props;\n      const state = serviceManager.store.getState();\n      const {files: files} = selectInputState(state);\n      if (isInputToAgent) {\n        serviceManager.humanAgentService.sendMessageToAgent(text, files);\n      } else {\n        const messageRequest = createMessageRequestForText(text);\n        serviceManager.actions.sendWithCatch(messageRequest, source, {\n          ...options\n        });\n      }\n      if (files.length) {\n        serviceManager.store.dispatch(actions.clearInputFiles(isInputToAgent));\n      }\n    };\n    this.onSendHomeButtonInput = input => {\n      const messageRequest = createMessageRequestForChoice(input);\n      this.props.serviceManager.actions.sendWithCatch(messageRequest, MessageSendSource.HOME_SCREEN_STARTER);\n    };\n    this.removeChatFromDom = () => {\n      this.containerRef.current.removeEventListener(\"animationend\", this.removeChatFromDom);\n      this.setState({\n        open: false,\n        closing: false\n      });\n    };\n    this.onRestart = async () => {\n      await this.props.serviceManager.actions.restartConversation();\n      this.requestFocus();\n    };\n    this.onClose = async () => this.doClose(false);\n    this.onCloseAndRestart = async () => this.doClose(true);\n    this.onToggleHomeScreen = () => {\n      this.props.serviceManager.store.dispatch(actions.toggleHomeScreen());\n    };\n    this.requestFocus = () => {\n      try {\n        if (this.state.shouldAutoFocus && !IS_MOBILE) {\n          if (this.getShowDisclaimer()) {\n            if (this.disclaimerRef.current) {\n              doFocusRef(this.disclaimerRef);\n            }\n          } else if (this.getShowHomeScreen()) {\n            if (this.homeScreenInputRef.current) {\n              this.homeScreenInputRef.current.takeFocus();\n            }\n          } else if (this.props.iFramePanelState.isOpen) {\n            if (this.iframePanelRef.current) {\n              this.iframePanelRef.current.requestFocus();\n            }\n          } else if (this.botChatRef.current) {\n            this.botChatRef.current.requestInputFocus();\n          }\n        }\n      } catch (error) {\n        consoleError(\"An error occurred in MainWindow.requestFocus\", error);\n      }\n    };\n    this.onUserTyping = isTyping => {\n      if (this.props.serviceManager.store.getState().persistedToBrowserStorage.chatState.agentState.isConnected) {\n        this.props.serviceManager.humanAgentService.userTyping(isTyping);\n      }\n    };\n    this.onAcceptDisclaimer = () => {\n      this.props.serviceManager.store.dispatch(actions.acceptDisclaimer());\n    };\n    this.onPanelOpenStart = coverBackground => {\n      this.setState(prevState => ({\n        numPanelsOpen: prevState.numPanelsOpen + 1,\n        numPanelsAnimating: prevState.numPanelsAnimating + 1,\n        numPanelsCovering: prevState.numPanelsCovering + (coverBackground ? 1 : 0)\n      }), this.requestFocus);\n    };\n    this.onPanelOpenEnd = () => {\n      this.setState(prevState => ({\n        numPanelsAnimating: prevState.numPanelsAnimating - 1\n      }));\n    };\n    this.onPanelCloseStart = () => {\n      this.setState(prevState => ({\n        numPanelsAnimating: prevState.numPanelsAnimating + 1\n      }), this.requestFocus);\n    };\n    this.onPanelCloseEnd = coverBackground => {\n      this.setState(prevState => ({\n        numPanelsOpen: prevState.numPanelsOpen - 1,\n        numPanelsAnimating: prevState.numPanelsAnimating - 1,\n        numPanelsCovering: prevState.numPanelsCovering - (coverBackground ? 1 : 0)\n      }));\n    };\n    this.onHydrationPanelClose = () => {\n      this.setState({\n        isHydrationAnimationComplete: true\n      }, this.requestFocus);\n    };\n  }\n  componentDidMount() {\n    const {persistedToBrowserStorage: persistedToBrowserStorage, config: config, serviceManager: serviceManager, mainWindowRef: mainWindowRef} = this.props;\n    const {viewState: viewState} = persistedToBrowserStorage.launcherState;\n    const {public: publicConfig} = config;\n    serviceManager.mainWindow = this;\n    mainWindowRef.current = this;\n    this.mainWindowObserver = new ResizeObserver(this.onResize);\n    this.mainWindowObserver.observe(this.containerRef.current);\n    if (IS_MOBILE && !publicConfig.disableCustomElementMobileEnhancements) {\n      const {visualViewport: visualViewport} = window;\n      if (visualViewport) {\n        visualViewport.addEventListener(\"resize\", this.onVisualViewportResize);\n        visualViewport.addEventListener(\"scroll\", this.updateFromVisualViewport);\n      }\n      this.updateFromVisualViewport();\n      this.updateBody(false);\n    }\n    this.containerRef.current.style.setProperty(\"--cds-chat-scrollbar-width\", `${SCROLLBAR_WIDTH()}px`);\n    if (viewState.mainWindow) {\n      this.loadPanels();\n    }\n  }\n  componentWillUnmount() {\n    this.mainWindowObserver.unobserve(this.containerRef.current);\n  }\n  destroy() {\n    if (IS_MOBILE && !this.props.config.public.disableCustomElementMobileEnhancements) {\n      const {visualViewport: visualViewport} = window;\n      if (visualViewport) {\n        visualViewport.removeEventListener(\"resize\", this.onVisualViewportResize);\n        visualViewport.removeEventListener(\"scroll\", this.updateFromVisualViewport);\n      }\n    }\n    this.updateBody(true);\n  }\n  componentDidUpdate(oldProps, oldState) {\n    const newProps = this.props;\n    const newState = this.state;\n    const {persistedToBrowserStorage: persistedToBrowserStorage, useCustomHostElement: useCustomHostElement, isDestroyed: isDestroyed} = newProps;\n    const {viewState: viewState} = persistedToBrowserStorage.launcherState;\n    const {open: open} = newState;\n    const prevViewState = oldProps.persistedToBrowserStorage.launcherState.viewState;\n    if (viewState.mainWindow !== prevViewState.mainWindow) {\n      this.updateBody(false);\n      this.updateFromVisualViewport();\n    }\n    if (isDestroyed && !oldProps.isDestroyed) {\n      this.destroy();\n    }\n    if ((oldState.areModulesLoaded !== newState.areModulesLoaded || oldProps.isHydrated !== newProps.isHydrated) && newProps.isHydrated && newState.areModulesLoaded) {\n      this.setState({\n        isHydrationAnimationComplete: true\n      }, () => {\n        requestAnimationFrame(() => {\n          this.requestFocus();\n        });\n      });\n    }\n    if (viewState.mainWindow && (!prevViewState.mainWindow || !open)) {\n      this.setState({\n        open: true\n      }, () => {\n        this.requestFocus();\n      });\n      this.loadPanels();\n    } else if (!viewState.mainWindow && prevViewState.mainWindow && oldState.open && open) {\n      this.setState({\n        closing: true\n      });\n      if (useCustomHostElement) {\n        this.removeChatFromDom();\n      } else {\n        this.containerRef.current.addEventListener(\"animationend\", this.removeChatFromDom);\n        this.requestFocus();\n      }\n    }\n    if (newProps.config.public.shouldTakeFocusIfOpensAutomatically) {\n      if (!oldProps.persistedToBrowserStorage.chatState.hasSentNonWelcomeMessage && newProps.persistedToBrowserStorage.chatState.hasSentNonWelcomeMessage && !this.state.shouldAutoFocus) {\n        this.setState({\n          shouldAutoFocus: true\n        });\n      } else if (oldProps.botMessageState.localMessageIDs.length > newProps.botMessageState.localMessageIDs.length && this.state.shouldAutoFocus) {\n        this.setState({\n          shouldAutoFocus: false\n        });\n      } else if (oldProps.botMessageState.localMessageIDs.length < newProps.botMessageState.localMessageIDs.length && !this.state.shouldAutoFocus) {\n        this.setState({\n          shouldAutoFocus: true\n        });\n      }\n    }\n    const newLastItemID = arrayLastValue(newProps.botMessageState.localMessageIDs);\n    const oldLastItemID = arrayLastValue(oldProps.botMessageState.localMessageIDs);\n    if (newLastItemID !== oldLastItemID && newState.shouldAutoFocus) {\n      const lastMessageItem = newProps.allMessageItemsByID[newLastItemID];\n      const lastMessage = newProps.allMessagesByID[lastMessageItem?.fullMessageID];\n      if (!lastMessage?.history?.from_history) {\n        this.requestFocus();\n      }\n    }\n  }\n  componentDidCatch(error, errorInfo) {\n    this.props.serviceManager.actions.errorOccurred(createDidCatchErrorData(\"MainWindow\", error, errorInfo, true));\n  }\n  loadPanels() {\n    Promise.all([ Chat.preload(), CatastrophicError.preload(), Disclaimer.preload(), HomeScreenContainer.preload(), IFramePanel.preload(), ViewSourcePanel.preload(), BodyAndFooterPanelComponent.preload() ]).then(() => {\n      this.setState({\n        areModulesLoaded: true\n      });\n    });\n  }\n  updateBody(unmounting) {\n    if (IS_IOS && !this.props.config.public.disableCustomElementMobileEnhancements) {\n      if ((window.screen.width <= 500 || window.screen.height <= 500) && this.props.persistedToBrowserStorage.launcherState.viewState.mainWindow && !unmounting) {\n        this.previousBodyVisibility = document.body.style.getPropertyValue(\"visibility\");\n        this.previousBodyPosition = document.body.style.getPropertyValue(\"position\");\n        document.body.style.setProperty(\"visibility\", \"hidden\", \"important\");\n        document.body.style.setProperty(\"position\", \"fixed\", \"important\");\n      } else {\n        document.body.style.setProperty(\"visibility\", this.previousBodyVisibility);\n        document.body.style.setProperty(\"position\", this.previousBodyPosition);\n      }\n    }\n  }\n  async doClose(fromCloseAndRestart) {\n    const {serviceManager: serviceManager} = this.props;\n    const {activeTour: activeTour} = serviceManager.store.getState().persistedToBrowserStorage.launcherState;\n    if (fromCloseAndRestart) {\n      const newViewState = await serviceManager.actions.changeView(ViewType.LAUNCHER, {\n        mainWindowCloseReason: MainWindowCloseReason.MAIN_WINDOW_CLOSED_AND_RESTARTED\n      });\n      if (!newViewState.mainWindow) {\n        await serviceManager.actions.restartConversation();\n      }\n    } else {\n      await serviceManager.actions.changeView(activeTour ? ViewType.TOUR : ViewType.LAUNCHER, {\n        mainWindowCloseReason: MainWindowCloseReason.DEFAULT_MINIMIZE\n      });\n    }\n  }\n  getShowHomeScreen() {\n    return this.props.homeScreenConfig.is_on && this.props.persistedToBrowserStorage.chatState.homeScreenState.isHomeScreenOpen && !this.getShowDisclaimer();\n  }\n  getShowDisclaimer() {\n    return this.props.config.public.disclaimer?.is_on && !this.props.persistedToBrowserStorage.chatState.disclaimersAccepted[window.location.hostname];\n  }\n  doAutoScroll(options) {\n    this.botChatRef?.current?.doAutoScroll(options);\n  }\n  getMessagesScrollBottom() {\n    return this.botChatRef?.current?.getMessagesScrollBottom();\n  }\n  doScrollToMessage(messageID, animate = true) {\n    this.botChatRef.current?.doScrollToMessage(messageID, animate);\n  }\n  getMessageInput() {\n    return this.botChatRef.current?.getMessageInput();\n  }\n  getHomeScreenInput() {\n    return this.homeScreenInputRef.current?.getMessageInput();\n  }\n  addClassName(name) {\n    this.setState(addClassNameToState(name));\n  }\n  removeClassName(name) {\n    this.setState(removeClassNameFromState(name));\n  }\n  renderChat() {\n    const {isHydrated: isHydrated, config: config, chatWidthBreakpoint: chatWidthBreakpoint} = this.props;\n    const {areModulesLoaded: areModulesLoaded} = this.state;\n    const showCovering = this.state.numPanelsCovering > 0 && config.public.layout?.hasContentMaxWidth && chatWidthBreakpoint === ChatWidthBreakpoint.WIDE;\n    return React.createElement(\"div\", {\n      className: \"WACWidget--content\"\n    }, this.renderCustomPanel(), this.renderHydrationPanel(), isHydrated && areModulesLoaded && React.createElement(React.Fragment, null, this.renderDisclaimerPanel(), this.renderResponsePanel(), this.renderHomeScreenPanel(), this.renderIFramePanel(), this.renderViewSourcePanel(), showCovering && React.createElement(\"div\", {\n      className: \"WACBackgroundCover\"\n    }), this.renderBotChat()));\n  }\n  renderBotChat() {\n    const {botName: botName, languagePack: languagePack, config: config, serviceManager: serviceManager, botMessageState: botMessageState, agentState: agentState, allMessageItemsByID: allMessageItemsByID, isHydrated: isHydrated, locale: locale, theme: theme, headerDisplayName: headerDisplayName, headerAvatarConfig: headerAvatar} = this.props;\n    const {numPanelsAnimating: numPanelsAnimating, numPanelsOpen: numPanelsOpen, isHydrationAnimationComplete: isHydrationAnimationComplete} = this.state;\n    const inputState = selectInputState(this.props);\n    const agentDisplayState = selectAgentDisplayState(this.props);\n    const showDisclaimer = this.getShowDisclaimer();\n    let hideBotContainer;\n    if (!isHydrationAnimationComplete) {\n      hideBotContainer = true;\n    } else if (numPanelsAnimating > 0) {\n      hideBotContainer = false;\n    } else if (numPanelsOpen > 0) {\n      hideBotContainer = true;\n    }\n    return React.createElement(HideComponent, {\n      className: \"WACBotContainer\",\n      hidden: hideBotContainer\n    }, React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(Chat, {\n      botName: botName,\n      headerDisplayName: headerDisplayName,\n      headerAvatarConfig: headerAvatar,\n      ref: this.botChatRef,\n      languagePack: languagePack,\n      config: config,\n      serviceManager: serviceManager,\n      onClose: this.onClose,\n      onCloseAndRestart: this.onCloseAndRestart,\n      messageState: botMessageState,\n      onSendInput: text => this.onSendInput(text, MessageSendSource.MESSAGE_INPUT),\n      agentState: agentState,\n      agentDisplayState: agentDisplayState,\n      allMessageItemsByID: allMessageItemsByID,\n      onRestart: this.onRestart,\n      isHydrated: isHydrated,\n      isHydrationAnimationComplete: isHydrationAnimationComplete && !showDisclaimer,\n      inputState: inputState,\n      onToggleHomeScreen: this.onToggleHomeScreen,\n      onUserTyping: this.onUserTyping,\n      locale: locale,\n      useAITheme: theme.useAITheme,\n      carbonTheme: theme.carbonTheme\n    })));\n  }\n  renderInnerHydrationPanel() {\n    const {botMessageState: botMessageState, serviceManager: serviceManager, languagePack: languagePack, headerDisplayName: headerDisplayName, persistedToBrowserStorage: persistedToBrowserStorage, homeScreenConfig: homeScreenConfig} = this.props;\n    const {areModulesLoaded: areModulesLoaded} = this.state;\n    const useHomeScreenVersion = homeScreenConfig.is_on && !persistedToBrowserStorage.launcherState.hasSentNonWelcomeMessage;\n    return React.createElement(HydrationPanel, {\n      headerDisplayName: headerDisplayName,\n      isHydrated: botMessageState.isHydratingCounter === 0 && areModulesLoaded,\n      serviceManager: serviceManager,\n      onClose: this.onClose,\n      languagePack: languagePack,\n      useHomeScreenVersion: useHomeScreenVersion\n    });\n  }\n  renderHydrationPanel() {\n    const {botMessageState: botMessageState, serviceManager: serviceManager, catastrophicErrorType: catastrophicErrorType, persistedToBrowserStorage: persistedToBrowserStorage} = this.props;\n    const {viewState: viewState} = persistedToBrowserStorage.launcherState;\n    const {areModulesLoaded: areModulesLoaded} = this.state;\n    return React.createElement(OverlayPanel, {\n      onOpenStart: () => this.onPanelOpenStart(false),\n      onCloseStart: this.onPanelCloseStart,\n      onOpenEnd: this.onPanelOpenEnd,\n      onCloseEnd: () => {\n        this.onHydrationPanelClose();\n        this.onPanelCloseEnd(false);\n      },\n      animationOnOpen: AnimationInType.NONE,\n      animationOnClose: AnimationOutType.NONE,\n      shouldOpen: (botMessageState.isHydratingCounter > 0 || !areModulesLoaded) && !catastrophicErrorType && viewState.mainWindow,\n      shouldHide: false,\n      serviceManager: serviceManager,\n      overlayPanelName: OverlayPanelName.HYDRATING\n    }, this.renderInnerHydrationPanel());\n  }\n  renderCatastrophicPanel() {\n    const {serviceManager: serviceManager, botName: botName, languagePack: languagePack, headerDisplayName: headerDisplayName} = this.props;\n    return React.createElement(OverlayPanel, {\n      animationOnOpen: AnimationInType.NONE,\n      animationOnClose: AnimationOutType.NONE,\n      shouldOpen: true,\n      serviceManager: serviceManager,\n      overlayPanelName: OverlayPanelName.CATASTROPHIC\n    }, React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(CatastrophicError, {\n      onClose: this.onClose,\n      headerDisplayName: headerDisplayName,\n      languagePack: languagePack,\n      onRestart: this.onRestart,\n      showHeader: true,\n      botName: botName\n    })));\n  }\n  renderDisclaimerPanel() {\n    const {serviceManager: serviceManager, config: config} = this.props;\n    const showDisclaimer = this.getShowDisclaimer();\n    return config.public.disclaimer?.is_on ? React.createElement(OverlayPanel, {\n      onOpenStart: () => this.onPanelOpenStart(false),\n      onCloseStart: this.onPanelCloseStart,\n      onOpenEnd: this.onPanelOpenEnd,\n      onCloseEnd: () => this.onPanelCloseEnd(false),\n      animationOnOpen: AnimationInType.FADE_IN,\n      animationOnClose: AnimationOutType.FADE_OUT,\n      shouldOpen: showDisclaimer,\n      serviceManager: serviceManager,\n      overlayPanelName: OverlayPanelName.DISCLAIMER\n    }, React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(Disclaimer, {\n      onAcceptDisclaimer: this.onAcceptDisclaimer,\n      onClose: this.onClose,\n      disclaimerHTML: config.public.disclaimer?.disclaimerHTML,\n      disclaimerAcceptButtonRef: this.disclaimerRef\n    }))) : null;\n  }\n  renderHomeScreenPanel() {\n    const {isHydrationAnimationComplete: isHydrationAnimationComplete} = this.state;\n    const showHomeScreen = this.getShowHomeScreen();\n    return React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(HomeScreenContainer, {\n      onPanelOpenStart: () => this.onPanelOpenStart(false),\n      onPanelOpenEnd: this.onPanelOpenEnd,\n      onPanelCloseStart: this.onPanelCloseStart,\n      onPanelCloseEnd: () => this.onPanelCloseEnd(false),\n      onClose: this.onClose,\n      onCloseAndRestart: this.onCloseAndRestart,\n      onSendBotInput: text => this.onSendInput(text, MessageSendSource.HOME_SCREEN_INPUT),\n      onSendButtonInput: this.onSendHomeButtonInput,\n      onRestart: this.onRestart,\n      showHomeScreen: showHomeScreen,\n      isHydrationAnimationComplete: isHydrationAnimationComplete,\n      homeScreenInputRef: this.homeScreenInputRef,\n      onToggleHomeScreen: this.onToggleHomeScreen,\n      requestFocus: this.requestFocus\n    }));\n  }\n  renderIFramePanel() {\n    const {serviceManager: serviceManager, iFramePanelState: iFramePanelState} = this.props;\n    return React.createElement(OverlayPanel, {\n      className: \"WAC__overlay--covering\",\n      onOpenStart: () => this.onPanelOpenStart(true),\n      onCloseStart: this.onPanelCloseStart,\n      onOpenEnd: this.onPanelOpenEnd,\n      onCloseEnd: () => this.onPanelCloseEnd(true),\n      animationOnOpen: AnimationInType.SLIDE_IN_FROM_BOTTOM,\n      animationOnClose: AnimationOutType.SLIDE_OUT_TO_BOTTOM,\n      shouldOpen: iFramePanelState.isOpen,\n      serviceManager: serviceManager,\n      overlayPanelName: OverlayPanelName.IFRAME\n    }, React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(IFramePanel, {\n      useAITheme: this.props.theme.useAITheme,\n      ref: this.iframePanelRef,\n      onClickClose: this.onClose,\n      onClickRestart: this.onRestart,\n      onClickCloseAndRestart: this.onCloseAndRestart\n    })));\n  }\n  renderViewSourcePanel() {\n    const {serviceManager: serviceManager, viewSourcePanelState: viewSourcePanelState} = this.props;\n    return React.createElement(OverlayPanel, {\n      className: \"WAC__overlay--covering\",\n      onOpenStart: () => this.onPanelOpenStart(true),\n      onCloseStart: this.onPanelCloseStart,\n      onOpenEnd: this.onPanelOpenEnd,\n      onCloseEnd: () => this.onPanelCloseEnd(true),\n      animationOnOpen: AnimationInType.SLIDE_IN_FROM_BOTTOM,\n      animationOnClose: AnimationOutType.SLIDE_OUT_TO_BOTTOM,\n      shouldOpen: viewSourcePanelState.isOpen,\n      serviceManager: serviceManager,\n      overlayPanelName: OverlayPanelName.CONVERSATIONAL_SEARCH_CITATION\n    }, React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(ViewSourcePanel, {\n      ref: this.viewSourcePanelRef,\n      onClickClose: this.onClose,\n      onClickRestart: this.onRestart,\n      onClickCloseAndRestart: this.onCloseAndRestart\n    })));\n  }\n  renderCustomPanel() {\n    return React.createElement(CustomPanelExport, {\n      useAITheme: this.props.theme.useAITheme,\n      onClose: this.onClose,\n      onClickRestart: this.onRestart,\n      onCloseAndRestart: this.onCloseAndRestart,\n      onPanelOpenStart: () => this.onPanelOpenStart(true),\n      onPanelOpenEnd: this.onPanelOpenEnd,\n      onPanelCloseStart: this.onPanelCloseStart,\n      onPanelCloseEnd: () => this.onPanelCloseEnd(true)\n    });\n  }\n  renderResponsePanel() {\n    if (!this.props.responsePanelState.localMessageItem) {\n      return null;\n    }\n    const {isOpen: isOpen, localMessageItem: localMessageItem, isMessageForInput: isMessageForInput} = this.props.responsePanelState;\n    const panelOptions = (localMessageItem?.item).panel;\n    const eventName = `\"Show panel\" opened`;\n    const eventDescription = \"Panel opened through panel response type\";\n    const overlayPanelName = OverlayPanelName.PANEL_RESPONSE;\n    return React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(BodyAndFooterPanelComponent, {\n      eventName: eventName,\n      eventDescription: eventDescription,\n      overlayPanelName: overlayPanelName,\n      testIdPrefix: overlayPanelName,\n      isOpen: isOpen,\n      isMessageForInput: isMessageForInput,\n      localMessageItem: localMessageItem,\n      title: panelOptions?.title,\n      showAnimations: panelOptions?.show_animations,\n      useAITheme: this.props.theme.useAITheme,\n      requestFocus: this.requestFocus,\n      onClose: this.onClose,\n      onClickRestart: this.onRestart,\n      onCloseAndRestart: this.onCloseAndRestart,\n      onClickBack: () => this.props.serviceManager.store.dispatch(actions.setResponsePanelIsOpen(false)),\n      onPanelOpenStart: () => this.onPanelOpenStart(true),\n      onPanelOpenEnd: this.onPanelOpenEnd,\n      onPanelCloseStart: this.onPanelCloseStart,\n      onPanelCloseEnd: () => {\n        this.onPanelCloseEnd(true);\n        this.props.serviceManager.store.dispatch(actions.setResponsePanelContent(null, false));\n      }\n    }));\n  }\n  renderWidget() {\n    const {serviceManager: serviceManager, useCustomHostElement: useCustomHostElement, locale: locale, catastrophicErrorType: catastrophicErrorType, config: config, isHydrated: isHydrated, theme: theme, chatWidthBreakpoint: chatWidthBreakpoint, layout: layout, languagePack: languagePack} = this.props;\n    const {closing: closing, open: open, extraClassNames: extraClassNames} = this.state;\n    const localeClassName = `WACLocale-${locale || \"en\"}`;\n    const showGlass = config.public.enableFocusTrap && open && !config.public.hideCloseButton && !config.public.headerConfig.hideMinimizeButton;\n    const trapActive = Boolean(showGlass && isHydrated);\n    const isWideWidth = chatWidthBreakpoint === ChatWidthBreakpoint.WIDE;\n    return React.createElement(FocusTrap, {\n      active: trapActive\n    }, React.createElement(\"div\", {\n      className: cx(\"WACMainWindow\", \"WACWidget__FocusTrapContainer\", ...extraClassNames),\n      ref: this.mainWindowRef\n    }, showGlass && React.createElement(\"div\", {\n      className: \"WACWidget__FocusTrapGlass\"\n    }), React.createElement(\"div\", {\n      id: `WACWidget${serviceManager.namespace.suffix}`,\n      className: cx(`WACWidget ${localeClassName}`, {\n        \"WACWidget--rounded\": theme.corners === CornersType.ROUND,\n        \"WACWidget--defaultElement\": !useCustomHostElement,\n        \"WACWidget--launched\": !closing,\n        \"WACWidget--closing\": closing,\n        \"WACWidget--closed\": !open,\n        \"WACWidget--maxWidth\": isWideWidth && layout.hasContentMaxWidth,\n        [WIDTH_BREAKPOINT_NARROW]: chatWidthBreakpoint === ChatWidthBreakpoint.NARROW,\n        [WIDTH_BREAKPOINT_STANDARD]: chatWidthBreakpoint === ChatWidthBreakpoint.STANDARD,\n        [WIDTH_BREAKPOINT_WIDE]: isWideWidth\n      }),\n      ref: this.containerRef\n    }, React.createElement(VisuallyHidden, null, React.createElement(\"h1\", null, languagePack.window_title)), catastrophicErrorType && this.renderCatastrophicPanel(), !catastrophicErrorType && React.createElement(\"div\", {\n      ref: this.animationContainerRef,\n      className: \"WACWidget__animationContainer\",\n      onScroll: () => {\n        if (this.animationContainerRef.current.scrollTop !== 0) {\n          this.animationContainerRef.current.scrollTop = 0;\n        }\n      }\n    }, this.renderChat()), React.createElement(\"div\", {\n      className: \"WACMainWindowModalHost\",\n      ref: this.setModalPortalHostElement\n    }))));\n  }\n  render() {\n    return React.createElement(ModalPortalRootContext.Provider, {\n      value: this.state.modalPortalHostElement\n    }, this.renderWidget());\n  }\n}\n\nvar MainWindow$1 = connect(state => state, null, null, {\n  forwardRef: true\n})(MainWindow);\n\nexport { MainWindow$1 as default };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction addClassNameToState(name) {\n  return previousState => {\n    const currentIndex = previousState.extraClassNames.indexOf(name);\n    if (currentIndex === -1) {\n      return {\n        extraClassNames: [ ...previousState.extraClassNames, name ]\n      };\n    }\n    return null;\n  };\n}\n\nfunction removeClassNameFromState(name) {\n  return previousState => ({\n    extraClassNames: previousState.extraClassNames.filter(value => value !== name)\n  });\n}\n\nexport { addClassNameToState, removeClassNameFromState };\n","import \"intl-pluralrules\";\n\nimport cx from \"classnames\";\n\nimport React, { useState, useMemo, useRef, Suspense } from \"react\";\n\nimport { RawIntlProvider, useIntl } from \"react-intl\";\n\nimport { Provider, useSelector, useDispatch } from \"react-redux\";\n\nimport { AriaAnnouncerProvider } from \"../components/aria/AriaAnnouncerProvider.js\";\n\nimport { LauncherContainer } from \"../components/launcher/LauncherContainer.js\";\n\nimport { LanguagePackContext } from \"../contexts/LanguagePackContext.js\";\n\nimport { WindowSizeContext } from \"../contexts/WindowSizeContext.js\";\n\nimport { ServiceManagerContext } from \"../contexts/ServiceManagerContext.js\";\n\nimport { useOnMount } from \"../hooks/useOnMount.js\";\n\nimport actions from \"../store/actions.js\";\n\nimport { IS_PHONE_IN_PORTRAIT_MODE, IS_PHONE } from \"../utils/browserUtils.js\";\n\nimport { consoleDebug, consoleError } from \"../utils/miscUtils.js\";\n\nimport { convertCSSVariablesToString, getThemeClassNames } from \"../utils/styleUtils.js\";\n\nimport MainWindow from \"./main/MainWindow.js\";\n\nimport { lazyTourComponent } from \"../../dynamic-imports/dynamic-imports.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const TourContainerLazy = lazyTourComponent();\n\nfunction App({serviceManager: serviceManager, hostElement: hostElement, applicationStyles: applicationStyles, fontStyles: fontStyles}) {\n  const {store: store} = serviceManager;\n  const {config: config} = store.getState();\n  if (config.public.debug) {\n    consoleDebug(\"[render] Called render\");\n  }\n  const combinedStyles = `${fontStyles ? `${fontStyles} ` : \"\"}${applicationStyles}`;\n  return React.createElement(Provider, {\n    store: store\n  }, React.createElement(AppContainer, {\n    serviceManager: serviceManager,\n    hostElement: hostElement,\n    applicationStyles: combinedStyles\n  }));\n}\n\nfunction AppContainer({serviceManager: serviceManager, hostElement: hostElement, applicationStyles: applicationStyles}) {\n  const languagePack = useSelector(state => state.languagePack);\n  const cssVariableOverrides = useSelector(state => state.cssVariableOverrides);\n  const theme = useSelector(state => state.theme);\n  const config = useSelector(state => state.config);\n  const layout = useSelector(state => state.layout);\n  const {namespace: namespace} = serviceManager;\n  const {originalName: originalName} = namespace;\n  const dispatch = useDispatch();\n  const [windowSize, setWindowSize] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight\n  });\n  const cssVariableOverrideString = useMemo(() => convertCSSVariablesToString(cssVariableOverrides), [ cssVariableOverrides ]);\n  const dir = document.dir || \"auto\";\n  useOnMount(() => {\n    const windowListener = () => {\n      setWindowSize({\n        width: window.innerWidth,\n        height: window.innerHeight\n      });\n    };\n    window.addEventListener(\"resize\", windowListener);\n    const visibilityListener = () => {\n      dispatch(actions.setIsBrowserPageVisible(document.visibilityState === \"visible\"));\n    };\n    document.addEventListener(\"visibilitychange\", visibilityListener);\n    return () => {\n      window.removeEventListener(\"resize\", windowListener);\n      document.removeEventListener(\"visibilitychange\", visibilityListener);\n    };\n  });\n  return React.createElement(\"div\", {\n    className: \"WACContainer\",\n    \"data-namespace\": originalName,\n    ref: node => {\n      if (node && hostElement) {\n        node.style.setProperty(\"height\", \"100%\", \"important\");\n        node.style.setProperty(\"width\", \"100%\", \"important\");\n      }\n    }\n  }, React.createElement(\"div\", {\n    className: \"WACContainer--styles\"\n  }, React.createElement(\"style\", {\n    \"data-base-styles\": \"true\",\n    nonce: config.public.cspNonce\n  }, applicationStyles || `.WACContainer { visibility: hidden; }`), React.createElement(\"style\", {\n    \"data-variables-custom\": \"true\",\n    nonce: config.public.cspNonce\n  }, cssVariableOverrideString)), React.createElement(\"div\", {\n    className: cx(`WACContainer--render`, getThemeClassNames(theme), {\n      \"WACContainer-disableMobileEnhancements\": hostElement && config.public.disableCustomElementMobileEnhancements,\n      \"WAC-isPhone\": IS_PHONE && !config.public.disableCustomElementMobileEnhancements,\n      \"WAC-isPhonePortraitMode\": IS_PHONE_IN_PORTRAIT_MODE && !config.public.disableCustomElementMobileEnhancements,\n      \"WAC--frameless\": !layout?.showFrame\n    }),\n    dir: dir\n  }, React.createElement(WindowSizeContext.Provider, {\n    value: windowSize\n  }, React.createElement(ServiceManagerContext.Provider, {\n    value: serviceManager\n  }, React.createElement(RawIntlProvider, {\n    value: serviceManager.intl\n  }, React.createElement(LanguagePackContext.Provider, {\n    value: languagePack\n  }, React.createElement(AriaAnnouncerProvider, null, React.createElement(MainContainer, {\n    serviceManager: serviceManager,\n    hostElement: hostElement\n  }))))))));\n}\n\nfunction MainContainer(props) {\n  const {hostElement: hostElement, serviceManager: serviceManager} = props;\n  const showLauncher = useSelector(state => state.launcher.config.is_on);\n  const {viewState: viewState} = useSelector(state => state.persistedToBrowserStorage.launcherState);\n  const tourContainerRef = useRef();\n  const mainWindowRef = useRef();\n  const showTour = viewState.tour;\n  const showedTourOnce = useRef(showTour);\n  showedTourOnce.current = showTour || showedTourOnce.current;\n  const intl = useIntl();\n  const namespace = serviceManager.namespace.originalName;\n  const languageKey = namespace ? \"window_ariaChatRegionNamespace\" : \"window_ariaChatRegion\";\n  const regionLabel = intl.formatMessage({\n    id: languageKey\n  }, {\n    namespace: namespace\n  });\n  useOnMount(() => {\n    function requestFocus() {\n      try {\n        const {persistedToBrowserStorage: persistedToBrowserStorage} = serviceManager.store.getState();\n        const {viewState: viewState} = persistedToBrowserStorage.launcherState;\n        if (viewState.tour) {\n          tourContainerRef.current?.requestFocus();\n        } else if (viewState.mainWindow) {\n          mainWindowRef.current?.requestFocus();\n        }\n      } catch (error) {\n        consoleError(\"An error occurred in App.requestFocus\", error);\n      }\n    }\n    serviceManager.appWindow = {\n      requestFocus: requestFocus\n    };\n  });\n  return React.createElement(\"div\", {\n    className: \"WACWidget__regionContainer\",\n    role: \"region\",\n    \"aria-label\": regionLabel\n  }, React.createElement(MainWindow, {\n    mainWindowRef: mainWindowRef,\n    useCustomHostElement: Boolean(hostElement),\n    serviceManager: serviceManager\n  }), showedTourOnce.current && React.createElement(Suspense, {\n    fallback: null\n  }, React.createElement(TourContainerLazy, {\n    ref: tourContainerRef\n  })), showLauncher && React.createElement(LauncherContainer, null));\n}\n\nexport { App as default };\n","import React from \"react\";\n\nimport ReactDOM from \"react-dom\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function UserDefinedResponsePortalsContainer({chatInstance: chatInstance, renderUserDefinedResponse: renderUserDefinedResponse, userDefinedResponseEventsBySlot: userDefinedResponseEventsBySlot}) {\n  return renderUserDefinedResponse ? Object.entries(userDefinedResponseEventsBySlot).map(([slot, slotState]) => {\n    const {element: element} = slotState;\n    if (!element) {\n      return null;\n    }\n    return React.createElement(UserDefinedResponseComponentPortal, {\n      key: slot,\n      hostElement: element\n    }, renderUserDefinedResponse(slotState, chatInstance));\n  }) : null;\n}\n\nfunction UserDefinedResponseComponentPortal({hostElement: hostElement, children: children}) {\n  return ReactDOM.createPortal(children, hostElement);\n}\n\nconst UserDefinedResponsePortalsContainerExport = React.memo(UserDefinedResponsePortalsContainer);\n\nexport { UserDefinedResponsePortalsContainerExport as UserDefinedResponsePortalsContainer };\n","import React from \"react\";\n\nimport ReactDOM from \"react-dom\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function WriteableElementsPortalsContainer({chatInstance: chatInstance, renderResponseMap: renderResponseMap}) {\n  return React.createElement(React.Fragment, null, Object.keys(chatInstance.writeableElements).map(key => {\n    const responseItem = renderResponseMap[key];\n    return responseItem ? React.createElement(WriteableElementsComponentPortal, {\n      key: key,\n      hostElement: chatInstance.writeableElements[key]\n    }, responseItem) : null;\n  }));\n}\n\nfunction WriteableElementsComponentPortal({hostElement: hostElement, children: children}) {\n  return ReactDOM.createPortal(children, hostElement);\n}\n\nconst WriteableElementsPortalsContainerExport = React.memo(WriteableElementsPortalsContainer);\n\nexport { WriteableElementsPortalsContainerExport as WriteableElementsPortalsContainer };\n","import isEqual from \"lodash-es/isEqual.js\";\n\nimport React, { useState, useRef, useEffect } from \"react\";\n\nimport Chat from \"../../shared/Chat.js\";\n\nimport { instantiateWidget } from \"../../shared/chatEntryFunctions.js\";\n\nimport App from \"../../shared/containers/App.js\";\n\nimport { sleep } from \"../../shared/utils/lang/promiseUtils.js\";\n\nimport { UserDefinedResponsePortalsContainer as UserDefinedResponsePortalsContainerExport } from \"./UserDefinedResponsePortalsContainer.js\";\n\nimport { WriteableElementsPortalsContainer as WriteableElementsPortalsContainerExport } from \"./WriteableElementsPortalsContainer.js\";\n\nimport { BusEventType } from \"../../../types/events/eventBusTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function AppContainer({config: config, onBeforeRender: onBeforeRender, onAfterRender: onAfterRender, renderUserDefinedResponse: renderUserDefinedResponse, renderWriteableElements: renderWriteableElements, container: container, setParentInstance: setParentInstance, element: element}) {\n  const [instance, setInstance] = useState(null);\n  const [renderProps, setRenderProps] = useState(null);\n  const [applicationStyles, setApplicationStyles] = useState(null);\n  const setInstances = instance => {\n    setInstance(instance);\n    setParentInstance?.(instance);\n  };\n  const [userDefinedResponseEventsBySlot, setUserDefinedResponseEventsBySlot] = useState({});\n  const managedWebChatRef = useRef(null);\n  const previousConfigRef = useRef(null);\n  useEffect(() => {\n    const previousConfig = previousConfigRef.current;\n    previousConfigRef.current = config;\n    async function render({serviceManager: serviceManager}) {\n      const applicationStyles = await loadStyles();\n      serviceManager.container = container;\n      if (serviceManager.customHostElement) {\n        container.style.setProperty(\"width\", \"100%\", \"important\");\n        container.style.setProperty(\"height\", \"100%\", \"important\");\n      } else {\n        container.style.setProperty(\"width\", \"0\", \"important\");\n        container.style.setProperty(\"height\", \"0\", \"important\");\n      }\n      setApplicationStyles(applicationStyles);\n      setRenderProps({\n        serviceManager: serviceManager\n      });\n      await sleep(0);\n    }\n    if (!isEqual(previousConfig, config)) {\n      const managedWebChat = {\n        instance: null,\n        shouldDestroy: false,\n        config: config\n      };\n      if (config) {\n        loadChat({\n          managedWebChatRef: managedWebChatRef,\n          managedWebChat: managedWebChat,\n          render: render,\n          setInstance: setInstances,\n          onBeforeRender: onBeforeRender,\n          onAfterRender: onAfterRender,\n          setUserDefinedResponseEventsBySlot: setUserDefinedResponseEventsBySlot,\n          element: element\n        });\n      }\n      return () => {\n        destroyWebChat(managedWebChat, setInstances);\n        previousConfigRef.current = null;\n      };\n    }\n    return undefined;\n  }, [ config, container ]);\n  if (renderProps && instance) {\n    return React.createElement(React.Fragment, null, React.createElement(App, {\n      serviceManager: renderProps.serviceManager,\n      hostElement: renderProps.serviceManager.customHostElement,\n      applicationStyles: applicationStyles\n    }), renderUserDefinedResponse && React.createElement(UserDefinedResponsePortalsContainerExport, {\n      chatInstance: instance,\n      renderUserDefinedResponse: renderUserDefinedResponse,\n      userDefinedResponseEventsBySlot: userDefinedResponseEventsBySlot\n    }), renderWriteableElements && React.createElement(WriteableElementsPortalsContainerExport, {\n      chatInstance: instance,\n      renderResponseMap: renderWriteableElements\n    }));\n  }\n  return null;\n}\n\nasync function destroyWebChat(managedWebChat, setInstance) {\n  if (managedWebChat) {\n    if (managedWebChat.instance) {\n      managedWebChat.instance.destroy();\n      await sleep(0);\n    }\n    managedWebChat.shouldDestroy = true;\n    managedWebChat.instance = null;\n  }\n  setInstance(null);\n  await sleep(0);\n}\n\nfunction addUserDefinedResponseHandler(webChatInstance, setUserDefinedResponseEventsBySlot) {\n  function userDefinedResponseHandler(event) {\n    setUserDefinedResponseEventsBySlot(userDefinedEventsBySlot => ({\n      ...userDefinedEventsBySlot,\n      [event.data.slot]: {\n        fullMessage: event.data.fullMessage,\n        messageItem: event.data.message,\n        element: event.data.element\n      }\n    }));\n  }\n  function userDefinedChunkHandler(event) {\n    if (\"complete_item\" in event.data.chunk) {\n      const messageItem = event.data.chunk.complete_item;\n      setUserDefinedResponseEventsBySlot(userDefinedEventsBySlot => ({\n        ...userDefinedEventsBySlot,\n        [event.data.slot]: {\n          messageItem: messageItem,\n          element: event.data.element\n        }\n      }));\n    } else if (\"partial_item\" in event.data.chunk) {\n      const itemChunk = event.data.chunk.partial_item;\n      setUserDefinedResponseEventsBySlot(userDefinedEventsBySlot => ({\n        ...userDefinedEventsBySlot,\n        [event.data.slot]: {\n          partialItems: [ ...userDefinedEventsBySlot[event.data.slot]?.partialItems || [], itemChunk ],\n          element: event.data.element\n        }\n      }));\n    }\n  }\n  function restartHandler() {\n    setUserDefinedResponseEventsBySlot({});\n  }\n  webChatInstance.on({\n    type: BusEventType.CHUNK_USER_DEFINED_RESPONSE,\n    handler: userDefinedChunkHandler\n  });\n  webChatInstance.on({\n    type: BusEventType.USER_DEFINED_RESPONSE,\n    handler: userDefinedResponseHandler\n  });\n  webChatInstance.on({\n    type: BusEventType.RESTART_CONVERSATION,\n    handler: restartHandler\n  });\n}\n\nasync function loadChat({managedWebChatRef: managedWebChatRef, managedWebChat: managedWebChat, render: render, setInstance: setInstance, onBeforeRender: onBeforeRender, onAfterRender: onAfterRender, setUserDefinedResponseEventsBySlot: setUserDefinedResponseEventsBySlot, element: element}) {\n  await destroyWebChat(managedWebChatRef.current, setInstance);\n  managedWebChatRef.current = managedWebChat;\n  if (managedWebChat.shouldDestroy) {\n    await destroyWebChat(managedWebChat, setInstance);\n    return;\n  }\n  const widget = await instantiateWidget(managedWebChat.config, () => Promise.resolve(Chat), Promise.resolve(render), element);\n  const instance = await widget.start();\n  addUserDefinedResponseHandler(instance, setUserDefinedResponseEventsBySlot);\n  onBeforeRender?.(instance);\n  await instance.render();\n  onAfterRender?.(instance);\n  setInstance(instance);\n  managedWebChat.instance = instance;\n  if (managedWebChat.shouldDestroy) {\n    await destroyWebChat(managedWebChat, setInstance);\n  }\n}\n\nconst AppContainerExport = React.memo(AppContainer);\n\nconst loadBaseStyles = async () => {\n  const {default: styles} = await import(\"../../shared/styles/export.scss.js\");\n  return styles;\n};\n\nconst loadCarbon = async () => {\n  const {default: carbon} = await import(\"../../shared/styles/export.carbon.scss.js\");\n  return carbon;\n};\n\nasync function loadStyles() {\n  const [styles, carbonStyles] = await Promise.all([ loadBaseStyles(), loadCarbon() ]);\n  return carbonStyles + styles;\n}\n\nexport { AppContainerExport as AppContainer };\n","import { compute } from \"compute-scroll-into-view\";\n\nimport memoizeOne from \"memoize-one\";\n\nimport { tabbable } from \"tabbable\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const SCROLLBAR_WIDTH = memoizeOne(getScrollbarWidth);\n\nfunction doScrollElementIntoView(element, animate = false, boundary) {\n  if (element) {\n    const actions = compute(element, {\n      boundary: boundary,\n      scrollMode: \"if-needed\",\n      block: \"nearest\",\n      inline: \"nearest\"\n    });\n    actions.forEach(({el: el, top: top, left: left}) => {\n      doScrollElement(el, Math.round(top), Math.round(left), animate);\n    });\n  }\n}\n\nfunction doScrollElement(element, scrollTop, scrollLeft, animate = false) {\n  setTimeout(() => {\n    if (element) {\n      if (animate && element.scroll) {\n        element.scroll({\n          top: scrollTop,\n          left: scrollLeft,\n          behavior: \"smooth\"\n        });\n      } else {\n        element.scrollTop = scrollTop;\n        element.scrollLeft = scrollLeft;\n      }\n    }\n  });\n}\n\nfunction getScrollbarWidth() {\n  const outer = document.createElement(\"div\");\n  outer.style.visibility = \"hidden\";\n  outer.style.overflow = \"scroll\";\n  document.body.appendChild(outer);\n  const inner = document.createElement(\"div\");\n  outer.appendChild(inner);\n  const scrollbarWidth = outer.offsetWidth - inner.offsetWidth;\n  outer.parentNode.removeChild(outer);\n  return scrollbarWidth;\n}\n\nfunction doFocus(element, preventScroll = false) {\n  if (element && document.activeElement !== element && tabbable(element, {\n    getShadowRoot: true\n  })) {\n    element.focus({\n      preventScroll: preventScroll\n    });\n  }\n}\n\nfunction doFocusRef(ref, defer = false, preventScroll = false) {\n  if (ref) {\n    if (defer) {\n      setTimeout(() => {\n        doFocusRef(ref);\n      });\n    } else if (ref.current) {\n      doFocus(ref.current, preventScroll);\n    }\n  }\n}\n\nfunction isElement(node) {\n  return node?.nodeType === 1;\n}\n\nfunction isTextNode(node) {\n  return node?.nodeType === 3;\n}\n\nfunction isInputNode(node) {\n  return node?.tagName === \"INPUT\";\n}\n\nfunction isImageNode(node) {\n  return node?.tagName === \"IMG\";\n}\n\nfunction isTextAreaNode(node) {\n  return node?.tagName === \"TEXTAREA\";\n}\n\nfunction focusOnFirstFocusableItemInArrayOfElements(elements) {\n  for (let index = 0; index < elements.length; index++) {\n    if (focusOnFirstFocusableElement(elements[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction focusOnFirstFocusableElement(parentElement) {\n  const focusableElements = tabbable(parentElement, {\n    getShadowRoot: true\n  });\n  if (focusableElements?.length) {\n    doFocus(focusableElements[0]);\n    return true;\n  }\n  return false;\n}\n\nfunction isEnterKey(event) {\n  if (event.key === \"Enter\" && !hasModifiers(event)) {\n    return !(event.isComposing || event.keyCode === 229);\n  }\n  return false;\n}\n\nfunction hasModifiers(event) {\n  return event.shiftKey || event.altKey || event.metaKey || event.ctrlKey;\n}\n\nfunction getScrollBottom(element) {\n  if (element) {\n    return element.scrollHeight - element.offsetHeight - element.scrollTop;\n  }\n  return 0;\n}\n\nexport { SCROLLBAR_WIDTH, doFocusRef, doScrollElement, doScrollElementIntoView, focusOnFirstFocusableItemInArrayOfElements, getScrollBottom, isElement, isEnterKey, isImageNode, isInputNode, isTextAreaNode, isTextNode };\n","import cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport \"./constants.js\";\n\nimport { findLastWithMap } from \"./lang/arrayUtils.js\";\n\nimport { uuid } from \"./lang/uuid.js\";\n\nimport { MessageResponseTypes, MessageInputType, ButtonItemType, AgentMessageType, InternalMessageRequestType } from \"../../../types/messaging/Messages.js\";\n\nimport { UUIDType } from \"./lang/UUIDType.js\";\n\nimport { FileStatusValue } from \"../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const THREAD_ID_MAIN = \"main\";\n\nfunction isResponse(message) {\n  return message && message.output !== undefined;\n}\n\nfunction isDateResponseType(localMessage) {\n  return localMessage?.item.response_type === MessageResponseTypes.DATE;\n}\n\nfunction addDefaultsToMessage(fullMessage) {\n  if (!fullMessage.id) {\n    fullMessage.id = uuid(UUIDType.MESSAGE);\n  }\n  if (!fullMessage.thread_id) {\n    fullMessage.thread_id = THREAD_ID_MAIN;\n  }\n  if (!fullMessage.history) {\n    fullMessage.history = {};\n  }\n  if (!fullMessage.history.timestamp) {\n    fullMessage.history.timestamp = Date.now();\n  }\n  if (fullMessage.history.from_history === undefined) {\n    fullMessage.history.from_history = false;\n  }\n  return fullMessage;\n}\n\nfunction isRequest(message) {\n  return message?.input !== undefined;\n}\n\nfunction isLiveAgentMessage(message) {\n  return Boolean(message.item.agent_message_type);\n}\n\nfunction hasLiveAgentMessage(message) {\n  return isResponse(message) && Boolean(message.output.generic?.find(item => item?.agent_message_type)) || isRequest(message) && Boolean(message.input.agent_message_type);\n}\n\nfunction isEventRequest(message) {\n  return message?.input?.message_type === MessageInputType.EVENT;\n}\n\nfunction isTextItem(item) {\n  return item && item.response_type === \"text\" && item.text !== undefined;\n}\n\nfunction isTyping(message) {\n  return message.response_type === MessageResponseTypes.PAUSE && message.typing == true;\n}\n\nfunction isPause(message) {\n  return message.response_type === MessageResponseTypes.PAUSE;\n}\n\nfunction isOptionItem(item) {\n  return item?.response_type === MessageResponseTypes.OPTION && item.options !== undefined;\n}\n\nfunction createMessageRequestForChoice(choice, relatedResponseID) {\n  const messageRequest = {\n    id: uuid(UUIDType.MESSAGE),\n    thread_id: THREAD_ID_MAIN,\n    ...cloneDeep(choice.value)\n  };\n  messageRequest.history = {\n    label: choice.label,\n    related_message_id: relatedResponseID\n  };\n  return messageRequest;\n}\n\nfunction createMessageRequestForButtonItemOption(buttonItem, relatedResponseID) {\n  const messageRequest = {\n    id: uuid(UUIDType.MESSAGE),\n    thread_id: THREAD_ID_MAIN,\n    input: null\n  };\n  if (buttonItem.value?.input?.text) {\n    messageRequest.input = cloneDeep(buttonItem.value.input);\n  } else {\n    messageRequest.input = {\n      text: buttonItem.label\n    };\n  }\n  messageRequest.history = {\n    related_message_id: relatedResponseID\n  };\n  return messageRequest;\n}\n\nfunction createWelcomeRequest() {\n  return addDefaultsToMessage({\n    id: uuid(UUIDType.MESSAGE),\n    input: {\n      text: \"\"\n    },\n    history: {\n      silent: true,\n      is_welcome_request: true\n    },\n    thread_id: THREAD_ID_MAIN\n  });\n}\n\nfunction createMessageRequestForText(text) {\n  return addDefaultsToMessage({\n    input: {\n      text: text,\n      message_type: MessageInputType.TEXT\n    }\n  });\n}\n\nfunction createMessageRequestForFileUpload(upload) {\n  return addDefaultsToMessage({\n    id: upload.id,\n    input: {\n      text: upload.file.name,\n      message_type: InternalMessageRequestType.FILE,\n      agent_message_type: AgentMessageType.FROM_USER\n    },\n    history: {\n      file_upload_status: FileStatusValue.UPLOADING\n    }\n  });\n}\n\nfunction createMessageRequestForDate(inputString, userString, relatedResponseID) {\n  const messageRequest = createMessageRequestForText(inputString);\n  messageRequest.history = {\n    label: userString,\n    related_message_id: relatedResponseID\n  };\n  return messageRequest;\n}\n\nfunction createMessageResponseForText(text, threadID = THREAD_ID_MAIN, responseType = MessageResponseTypes.TEXT, context) {\n  const textItem = {\n    response_type: responseType,\n    text: text\n  };\n  const messageResponse = {\n    id: uuid(UUIDType.MESSAGE),\n    thread_id: threadID,\n    output: {\n      generic: [ textItem ]\n    }\n  };\n  return messageResponse;\n}\n\nfunction createMessageResponseForItem(item, context) {\n  const messageResponse = {\n    output: {\n      generic: [ item ]\n    }\n  };\n  return addDefaultsToMessage(messageResponse);\n}\n\nfunction isConnectToAgent(response) {\n  return response?.response_type === MessageResponseTypes.CONNECT_TO_AGENT;\n}\n\nfunction isCardResponseType(response) {\n  return response?.response_type === MessageResponseTypes.CARD;\n}\n\nfunction isCarouselResponseType(response) {\n  return response?.response_type === MessageResponseTypes.CAROUSEL;\n}\n\nfunction isButtonResponseType(response) {\n  return response?.response_type === MessageResponseTypes.BUTTON;\n}\n\nfunction isShowPanelButtonType(response) {\n  return isButtonResponseType(response) && response.button_type === ButtonItemType.SHOW_PANEL;\n}\n\nfunction isResponseWithNestedItems(item) {\n  if (isButtonResponseType(item)) {\n    return hasBodyOrFooter(item.panel);\n  }\n  if (isCardResponseType(item)) {\n    return hasBodyOrFooter(item);\n  }\n  if (isCarouselResponseType(item)) {\n    return item.items !== undefined;\n  }\n  return isGridResponseType(item);\n}\n\nfunction hasBodyOrFooter(item) {\n  return item?.body !== undefined || item?.footer !== undefined;\n}\n\nfunction renderAsUserDefinedMessage(messageItem) {\n  const responseType = messageItem.response_type;\n  switch (responseType) {\n   case MessageResponseTypes.TEXT:\n   case MessageResponseTypes.IMAGE:\n   case MessageResponseTypes.OPTION:\n   case MessageResponseTypes.CONNECT_TO_AGENT:\n   case MessageResponseTypes.IFRAME:\n   case MessageResponseTypes.VIDEO:\n   case MessageResponseTypes.AUDIO:\n   case MessageResponseTypes.DATE:\n   case MessageResponseTypes.CONVERSATIONAL_SEARCH:\n   case MessageResponseTypes.TABLE:\n   case MessageResponseTypes.INLINE_ERROR:\n   case MessageResponseTypes.CARD:\n   case MessageResponseTypes.CAROUSEL:\n   case MessageResponseTypes.BUTTON:\n   case MessageResponseTypes.GRID:\n    return false;\n\n   default:\n    return !renderAsTour(messageItem);\n  }\n}\n\nfunction renderAsTour(messageItem) {\n  return hasTourUserDefinedType(messageItem);\n}\n\nfunction hasTourUserDefinedType(message) {\n  return message?.user_defined?.user_defined_type === \"IBM_BETA_JOURNEYS_TOUR\";\n}\n\nfunction hasServiceDesk(config) {\n  return Boolean(config.public.serviceDeskFactory);\n}\n\nfunction isItemSupportedInResponseBody(item) {\n  switch (item.response_type) {\n   case MessageResponseTypes.IMAGE:\n   case MessageResponseTypes.IFRAME:\n   case MessageResponseTypes.VIDEO:\n   case MessageResponseTypes.AUDIO:\n   case MessageResponseTypes.TEXT:\n   case MessageResponseTypes.USER_DEFINED:\n   case MessageResponseTypes.CARD:\n   case MessageResponseTypes.GRID:\n    return true;\n\n   default:\n    return false;\n  }\n}\n\nfunction isSingleItemCarousel(messageItem) {\n  return isCarouselResponseType(messageItem) && messageItem.items.length === 1;\n}\n\nfunction isGridResponseType(item) {\n  return item?.response_type === MessageResponseTypes.GRID;\n}\n\nfunction getOptionType(preference, totalOptions) {\n  let type = \"button\";\n  if (preference && preference === \"button\") {\n    type = \"button\";\n  } else if (preference && preference === \"dropdown\") {\n    type = \"dropdown\";\n  } else if (totalOptions > 4) {\n    type = \"dropdown\";\n  }\n  return type;\n}\n\nfunction isStreamPartialItem(chunk) {\n  return Boolean(chunk.partial_item);\n}\n\nfunction isStreamCompleteItem(chunk) {\n  return Boolean(chunk.complete_item);\n}\n\nfunction isStreamFinalResponse(chunk) {\n  return Boolean(chunk.final_response);\n}\n\nfunction streamItemID(messageID, item) {\n  const itemID = item?.streaming_metadata?.id;\n  if (!itemID) {\n    return null;\n  }\n  return `${messageID}-${itemID}`;\n}\n\nfunction getMediaDimensions(item) {\n  return item.dimensions;\n}\n\nfunction getLastBotResponseWithContext(state) {\n  const messageIDs = state.botMessageState.messageIDs || [];\n  return findLastWithMap(messageIDs, state.allMessagesByID, message => isResponse(message) && !hasLiveAgentMessage(message) && Boolean(message.context));\n}\n\nexport { THREAD_ID_MAIN, addDefaultsToMessage, createMessageRequestForButtonItemOption, createMessageRequestForChoice, createMessageRequestForDate, createMessageRequestForFileUpload, createMessageRequestForText, createMessageResponseForItem, createMessageResponseForText, createWelcomeRequest, getLastBotResponseWithContext, getMediaDimensions, getOptionType, hasServiceDesk, hasTourUserDefinedType, isButtonResponseType, isCardResponseType, isCarouselResponseType, isConnectToAgent, isDateResponseType, isEventRequest, isGridResponseType, isItemSupportedInResponseBody, isLiveAgentMessage, isOptionItem, isPause, isRequest, isResponse, isResponseWithNestedItems, isShowPanelButtonType, isSingleItemCarousel, isStreamCompleteItem, isStreamFinalResponse, isStreamPartialItem, isTextItem, isTyping, renderAsTour, renderAsUserDefinedMessage, streamItemID };\n","import React, { PureComponent } from \"react\";\n\nimport { withAriaAnnouncer } from \"../../hocs/withAriaAnnouncer.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ class AnnounceOnMountComponent extends PureComponent {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      isMounted: false\n    };\n    this.onceAnnounced = false;\n  }\n  componentDidMount() {\n    this.setState({\n      isMounted: true\n    });\n    if (!this.onceAnnounced) {\n      if (this.props.announceOnce) {\n        setTimeout(() => {\n          this.props.ariaAnnouncer(this.props.announceOnce);\n        });\n      }\n      this.onceAnnounced = true;\n    }\n  }\n  render() {\n    return React.createElement(\"div\", {\n      \"aria-live\": \"polite\"\n    }, this.state.isMounted && this.props.children);\n  }\n}\n\nconst AnnounceOnMountComponentExport = withAriaAnnouncer(AnnounceOnMountComponent);\n\nexport { AnnounceOnMountComponentExport as AnnounceOnMountComponent };\n","export { ViewType } from \"../instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ var ChatWidthBreakpoint;\n\n(function(ChatWidthBreakpoint) {\n  ChatWidthBreakpoint[\"NARROW\"] = \"narrow\";\n  ChatWidthBreakpoint[\"STANDARD\"] = \"standard\";\n  ChatWidthBreakpoint[\"WIDE\"] = \"wide\";\n})(ChatWidthBreakpoint || (ChatWidthBreakpoint = {}));\n\nexport { ChatWidthBreakpoint };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function WriteableElement({slotName: slotName, id: id, className: className}) {\n  return React.createElement(\"div\", {\n    className: className,\n    id: id,\n    \"data-floating-menu-container\": true\n  }, React.createElement(\"slot\", {\n    name: slotName\n  }));\n}\n\nvar WriteableElement$1 = React.memo(WriteableElement);\n\nexport { WriteableElement$1 as default };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const ServiceManagerContext = React.createContext(null);\n\nexport { ServiceManagerContext };\n","import { Component } from \"react\";\n\nimport ReactDOM from \"react-dom\";\n\nimport { ModalPortalRootContext } from \"../contexts/ModalPortalRootContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nclass ModalPortal extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      attachedToHost: null\n    };\n    this.modalElement = document.createElement(\"div\");\n  }\n  componentDidMount() {\n    this.attachIfNeeded();\n  }\n  componentDidUpdate() {\n    this.attachIfNeeded();\n  }\n  componentWillUnmount() {\n    if (this.state.attachedToHost) {\n      this.state.attachedToHost.removeChild(this.modalElement);\n    }\n  }\n  attachIfNeeded() {\n    const hostElement = this.context;\n    if (hostElement && !this.state.attachedToHost) {\n      this.setState({\n        attachedToHost: hostElement\n      });\n      hostElement.appendChild(this.modalElement);\n    }\n  }\n  render() {\n    if (!this.state.attachedToHost) {\n      return null;\n    }\n    return ReactDOM.createPortal(this.props.children, this.modalElement);\n  }\n}\n\nModalPortal.contextType = ModalPortalRootContext;\n\nexport { ModalPortal };\n","import { Button } from \"@carbon/react\";\n\nimport FocusTrap from \"focus-trap-react\";\n\nimport React, { Component } from \"react\";\n\nimport { ModalPortal } from \"../../containers/ModalPortal.js\";\n\nimport { AriaLiveMessage as AriaLiveMessageExport } from \"../aria/AriaLiveMessage.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ class ConfirmModal extends Component {\n  constructor() {\n    super(...arguments);\n    this.onYesClick = () => {\n      this.props.onConfirm();\n    };\n    this.onNoClick = () => {\n      this.props.onCancel();\n    };\n    this.onKeyDown = event => {\n      if (event.key === \"Escape\") {\n        this.props.onCancel();\n      }\n    };\n  }\n  render() {\n    const {title: title, message: message, cancelButtonLabel: cancelButtonLabel, confirmButtonLabel: confirmButtonLabel, modalAnnounceMessage: modalAnnounceMessage, serviceManager: serviceManager} = this.props;\n    return React.createElement(ModalPortal, null, React.createElement(FocusTrap, null, React.createElement(\"div\", {\n      className: \"WACConfirmModal\",\n      role: \"dialog\",\n      \"aria-labelledby\": `WACConfirmModal__title${serviceManager.namespace.suffix}`,\n      \"aria-describedby\": `WACConfirmModal__message${serviceManager.namespace.suffix}`\n    }, React.createElement(\"div\", {\n      className: \"WACConfirmModal__container\"\n    }, React.createElement(AriaLiveMessageExport, {\n      message: modalAnnounceMessage\n    }), React.createElement(\"div\", {\n      className: \"WACConfirmModal__title\",\n      id: `WACConfirmModal__title${serviceManager.namespace.suffix}`\n    }, title), React.createElement(\"div\", {\n      className: \"WACConfirmModal__message\",\n      id: `WACConfirmModal__message${serviceManager.namespace.suffix}`\n    }, message), React.createElement(\"div\", {\n      className: \"WACConfirmModal__buttonContainer\"\n    }, React.createElement(Button, {\n      className: \"WACConfirmModal__NoButton\",\n      kind: \"secondary\",\n      onClick: this.onNoClick,\n      onKeyDown: this.onKeyDown,\n      size: \"md\"\n    }, cancelButtonLabel), React.createElement(Button, {\n      className: \"WACConfirmModal__YesButton\",\n      onClick: this.onYesClick,\n      onKeyDown: this.onKeyDown,\n      size: \"md\"\n    }, confirmButtonLabel))))));\n  }\n}\n\nexport { ConfirmModal };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar CSSVariable;\n\n(function(CSSVariable) {\n  CSSVariable[\"BASE_HEIGHT\"] = \"BASE-height\";\n  CSSVariable[\"BASE_MAX_HEIGHT\"] = \"BASE-max-height\";\n  CSSVariable[\"BASE_WIDTH\"] = \"BASE-width\";\n  CSSVariable[\"BASE_Z_INDEX\"] = \"BASE-z-index\";\n})(CSSVariable || (CSSVariable = {}));\n\nvar WriteableElementName;\n\n(function(WriteableElementName) {\n  WriteableElementName[\"AI_TOOLTIP_AFTER_DESCRIPTION_ELEMENT\"] = \"aiTooltipAfterDescriptionElement\";\n  WriteableElementName[\"WELCOME_NODE_BEFORE_ELEMENT\"] = \"welcomeNodeBeforeElement\";\n  WriteableElementName[\"HEADER_BOTTOM_ELEMENT\"] = \"headerBottomElement\";\n  WriteableElementName[\"BEFORE_INPUT_ELEMENT\"] = \"beforeInputElement\";\n  WriteableElementName[\"HOME_SCREEN_BEFORE_INPUT_ELEMENT\"] = \"homeScreenBeforeInputElement\";\n  WriteableElementName[\"HOME_SCREEN_AFTER_STARTERS_ELEMENT\"] = \"homeScreenAfterStartersElement\";\n  WriteableElementName[\"HOME_SCREEN_HEADER_BOTTOM_ELEMENT\"] = \"homeScreenHeaderBottomElement\";\n  WriteableElementName[\"CUSTOM_PANEL_ELEMENT\"] = \"customPanelElement\";\n})(WriteableElementName || (WriteableElementName = {}));\n\nexport { CSSVariable, WriteableElementName };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst getBotInputState = state => state.botInputState;\n\nconst getAgentInputState = state => state.agentState.inputState;\n\nconst getAgentState = state => state.agentState;\n\nconst getPersistedAgent = state => state.persistedToBrowserStorage.chatState.agentState;\n\nfunction selectAgentDisplayState(state) {\n  const agentState = getAgentState(state);\n  const persisted = getPersistedAgent(state);\n  if (persisted.isSuspended) {\n    return {\n      isConnectingOrConnected: false,\n      disableInput: false,\n      isAgentTyping: false,\n      inputPlaceholderKey: null\n    };\n  }\n  const {isReconnecting: isReconnecting, isConnecting: isConnecting, isAgentTyping: isAgentTyping} = agentState;\n  const {isConnected: isConnected} = persisted;\n  let inputPlaceholderKey;\n  if (isConnecting) {\n    inputPlaceholderKey = \"agent_inputPlaceholderConnecting\";\n  } else if (isReconnecting) {\n    inputPlaceholderKey = \"agent_inputPlaceholderReconnecting\";\n  } else {\n    inputPlaceholderKey = null;\n  }\n  return {\n    isAgentTyping: isAgentTyping,\n    isConnectingOrConnected: isConnecting || isConnected,\n    disableInput: isConnecting || isReconnecting,\n    inputPlaceholderKey: inputPlaceholderKey\n  };\n}\n\nfunction selectIsInputToAgent(state) {\n  return selectAgentDisplayState(state).isConnectingOrConnected;\n}\n\nfunction selectInputState(state) {\n  return selectIsInputToAgent(state) ? getAgentInputState(state) : getBotInputState(state);\n}\n\nexport { selectAgentDisplayState, selectInputState, selectIsInputToAgent };\n","import Home from \"@carbon/icons-react/es/Home.js\";\n\nimport React, { forwardRef, useRef, useCallback, useImperativeHandle } from \"react\";\n\nimport { useSelector, shallowEqual } from \"react-redux\";\n\nimport { useLanguagePack } from \"../../hooks/useLanguagePack.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport { selectAgentDisplayState } from \"../../store/selectors.js\";\n\nimport \"../../utils/constants.js\";\n\nimport WriteableElement from \"../WriteableElement.js\";\n\nimport { Header as HeaderExport } from \"./Header.js\";\n\nimport { WriteableElementName } from \"../../../../types/instance/ChatInstance.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function BotHeader(props, ref) {\n  const {onClose: onClose, onCloseAndRestart: onCloseAndRestart, onRestart: onRestart, onToggleHomeScreen: onToggleHomeScreen, headerDisplayName: headerDisplayName, includeWriteableElement: includeWriteableElement, enableChatHeaderConfig: enableChatHeaderConfig, headerAvatarConfig: headerAvatarConfig, testIdPrefix: testIdPrefix} = props;\n  const serviceManager = useServiceManager();\n  const languagePack = useLanguagePack();\n  const homeScreenIsOn = useSelector(state => state.homeScreenConfig.is_on && state.homeScreenConfig.allow_return);\n  const publicConfig = useSelector(state => state.config.public);\n  const customMenuOptions = useSelector(state => state.customMenuOptions);\n  const {isConnectingOrConnected: isConnectingOrConnected} = useSelector(selectAgentDisplayState, shallowEqual);\n  const useAITheme = useSelector(state => state.theme.useAITheme);\n  const maxVisibleHeaderObjects = useSelector(state => state.chatHeaderState.maxVisibleHeaderObjects);\n  const leftObjectsLength = useSelector(state => state.chatHeaderState.config?.left?.length || 0);\n  const rightObjectsLength = useSelector(state => state.chatHeaderState.config?.right?.length || 0);\n  const headerRef = useRef();\n  const isHeaderObjectsInOverflow = leftObjectsLength > maxVisibleHeaderObjects || rightObjectsLength > maxVisibleHeaderObjects;\n  const hasChatHeaderObjects = enableChatHeaderConfig && isHeaderObjectsInOverflow;\n  const showRestartButton = publicConfig.showRestartButton || publicConfig.headerConfig?.showRestartButton;\n  const allowHomeScreen = homeScreenIsOn && !isConnectingOrConnected;\n  const overflowClicked = useCallback(index => {\n    if (index === 0 && allowHomeScreen) {\n      onToggleHomeScreen?.();\n    } else {\n      const {handler: handler} = customMenuOptions[allowHomeScreen ? index - 1 : index];\n      handler();\n    }\n  }, [ customMenuOptions, onToggleHomeScreen, allowHomeScreen ]);\n  let overflowItems = customMenuOptions?.map(option => option.text);\n  if (overflowItems && allowHomeScreen) {\n    overflowItems.splice(0, 0, languagePack.homeScreen_overflowMenuHomeScreen);\n  } else if (!overflowItems && allowHomeScreen && hasChatHeaderObjects) {\n    overflowItems = [ languagePack.homeScreen_overflowMenuHomeScreen ];\n  }\n  useImperativeHandle(ref, () => headerRef.current);\n  return React.createElement(\"div\", {\n    className: \"WACHeader__Container\"\n  }, React.createElement(HeaderExport, {\n    ref: headerRef,\n    showCenter: true,\n    headerAvatarConfig: headerAvatarConfig,\n    displayName: headerDisplayName,\n    showBackButton: Boolean(allowHomeScreen && onToggleHomeScreen),\n    showRestartButton: showRestartButton,\n    useAITheme: useAITheme,\n    backContent: React.createElement(Home, null),\n    labelBackButton: languagePack.homeScreen_returnToHome,\n    onClickRestart: onRestart,\n    onClickClose: onClose,\n    onCloseAndRestart: onCloseAndRestart,\n    onClickBack: onToggleHomeScreen,\n    overflowItems: overflowItems,\n    overflowClicked: overflowClicked,\n    enableChatHeaderConfig: enableChatHeaderConfig,\n    testIdPrefix: testIdPrefix\n  }), includeWriteableElement && React.createElement(WriteableElement, {\n    slotName: WriteableElementName.HEADER_BOTTOM_ELEMENT,\n    id: `headerBottomElement${serviceManager.namespace.suffix}`,\n    className: \"WACHeader__HeaderBottomElement\"\n  }));\n}\n\nconst BotHeaderExport = React.memo(forwardRef(BotHeader));\n\nexport { BotHeaderExport as BotHeader };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction deepFreeze(object) {\n  Object.freeze(object);\n  Object.getOwnPropertyNames(object).forEach(prop => {\n    if (Object.prototype.hasOwnProperty.call(object, prop) && object[prop] !== null && (typeof object[prop] === \"object\" || typeof object[prop] === \"function\") && !Object.isFrozen(object[prop])) {\n      deepFreeze(object[prop]);\n    }\n  });\n  return object;\n}\n\nexport { deepFreeze };\n","import { MessageResponseTypes } from \"../../../types/messaging/Messages.js\";\n\nimport { uuid } from \"../utils/lang/uuid.js\";\n\nimport { UUIDType } from \"../utils/lang/UUIDType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function inputItemToLocalItem(message, originalUserText, id = uuid(UUIDType.LOCAL_MESSAGE)) {\n  const localMessage = {\n    item: {\n      response_type: MessageResponseTypes.TEXT,\n      ...message.input\n    },\n    ui_state: {\n      id: id,\n      originalUserText: originalUserText,\n      needsAnnouncement: false\n    },\n    fullMessageID: message.id\n  };\n  return localMessage;\n}\n\nexport { inputItemToLocalItem as default };\n","import { useContext } from \"react\";\n\nimport { AriaAnnouncerContext } from \"../contexts/AriaAnnouncerContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function useAriaAnnouncer() {\n  return useContext(AriaAnnouncerContext);\n}\n\nexport { useAriaAnnouncer };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst HA_SET_AGENT_AVAILABILITY = \"HA_SET_AGENT_AVAILABILITY\";\n\nconst HA_SET_IS_CONNECTING = \"HA_SET_IS_CONNECTING\";\n\nconst HA_SET_IS_RECONNECTING = \"HA_SET_IS_RECONNECTING\";\n\nconst HA_SET_AGENT_JOINED = \"HA_SET_AGENT_JOINED\";\n\nconst HA_SET_AGENT_LEFT_CHAT = \"HA_SET_AGENT_LEFT_CHAT\";\n\nconst HA_END_CHAT = \"HA_END_CHAT\";\n\nconst HA_UPDATE_CAPABILITIES = \"HA_UPDATE_CAPABILITIES\";\n\nconst HA_UPDATE_FILE_UPLOAD_IN_PROGRESS = \"HA_UPDATE_FILE_UPLOAD_IN_PROGRESS\";\n\nconst HA_SET_SHOW_SCREEN_SHARE_REQUEST = \"HA_SET_SHOW_SCREEN_SHARE_REQUEST\";\n\nconst HA_SET_IS_SCREEN_SHARING = \"HA_SET_IS_SCREEN_SHARING\";\n\nconst HA_SET_PERSISTED_STATE = \"HA_SET_PERSISTED_STATE\";\n\nconst HA_UPDATE_IS_SUSPENDED = \"HA_UPDATE_IS_SUSPENDED\";\n\nconst HA_UPDATE_IS_TYPING = \"HA_UPDATE_IS_TYPING\";\n\nfunction setIsConnecting(isConnecting, localMessageID) {\n  return {\n    type: HA_SET_IS_CONNECTING,\n    isConnecting: isConnecting,\n    localMessageID: localMessageID\n  };\n}\n\nfunction setIsReconnecting(isReconnecting) {\n  return {\n    type: HA_SET_IS_RECONNECTING,\n    isReconnecting: isReconnecting\n  };\n}\n\nfunction setAgentLeftChat() {\n  return {\n    type: HA_SET_AGENT_LEFT_CHAT\n  };\n}\n\nfunction endChat() {\n  return {\n    type: HA_END_CHAT\n  };\n}\n\nfunction setAgentAvailability(availability) {\n  return {\n    type: HA_SET_AGENT_AVAILABILITY,\n    availability: availability\n  };\n}\n\nfunction setAgentJoined(agentProfile) {\n  return {\n    type: HA_SET_AGENT_JOINED,\n    agentProfile: agentProfile\n  };\n}\n\nfunction updateCapabilities(capabilities) {\n  return {\n    type: HA_UPDATE_CAPABILITIES,\n    capabilities: capabilities\n  };\n}\n\nfunction updateFilesUploadInProgress(fileUploadInProgress) {\n  return {\n    type: HA_UPDATE_FILE_UPLOAD_IN_PROGRESS,\n    fileUploadInProgress: fileUploadInProgress\n  };\n}\n\nfunction setShowScreenShareRequest(showRequest) {\n  return {\n    type: HA_SET_SHOW_SCREEN_SHARE_REQUEST,\n    showRequest: showRequest\n  };\n}\n\nfunction setIsScreenSharing(isSharing) {\n  return {\n    type: HA_SET_IS_SCREEN_SHARING,\n    isSharing: isSharing\n  };\n}\n\nfunction setPersistedServiceDeskState(state) {\n  return {\n    type: HA_SET_PERSISTED_STATE,\n    state: state\n  };\n}\n\nfunction agentUpdateIsSuspended(isSuspended) {\n  return {\n    type: HA_UPDATE_IS_SUSPENDED,\n    isSuspended: isSuspended\n  };\n}\n\nfunction agentUpdateIsTyping(isTyping) {\n  return {\n    type: HA_UPDATE_IS_TYPING,\n    isTyping: isTyping\n  };\n}\n\nexport { HA_END_CHAT, HA_SET_AGENT_AVAILABILITY, HA_SET_AGENT_JOINED, HA_SET_AGENT_LEFT_CHAT, HA_SET_IS_CONNECTING, HA_SET_IS_RECONNECTING, HA_SET_IS_SCREEN_SHARING, HA_SET_PERSISTED_STATE, HA_SET_SHOW_SCREEN_SHARE_REQUEST, HA_UPDATE_CAPABILITIES, HA_UPDATE_FILE_UPLOAD_IN_PROGRESS, HA_UPDATE_IS_SUSPENDED, HA_UPDATE_IS_TYPING, agentUpdateIsSuspended, agentUpdateIsTyping, endChat, setAgentAvailability, setAgentJoined, setAgentLeftChat, setIsConnecting, setIsReconnecting, setIsScreenSharing, setPersistedServiceDeskState, setShowScreenShareRequest, updateCapabilities, updateFilesUploadInProgress };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const LanguagePackContext = React.createContext(null);\n\nexport { LanguagePackContext };\n"],"names":["useUUID","ref","useRef","undefined","current","uuid","UUIDType","COMPONENT","Loading","createComponent","tagName","elementClass","CarbonLoadingElement","react","React","AriaAnnouncerContext","CSS_CLASS_PREFIX","WEB_COMPONENT_PREFIX","asArray","value","Array","isArray","async","asyncForEach","array","callbackFunction","index","length","findLast","predicate","startAt","lastIndex","findLastIndex","findLastWithMap","keys","map","arrayLastValue","outputItemToLocalItem","messageItem","fullMessage","isLatestWelcomeNode","disableFadeAnimation","localMessage","ui_state","id","streamItemID","LOCAL_MESSAGE","needsAnnouncement","history","from_history","item","fullMessageID","isWelcomeResponse","createLocalMessageForInlineError","text","originalMessage","createMessageResponseForItem","createLocalMessageForItem","response_type","MessageResponseTypes","INLINE_ERROR","createLocalMessageItemsForNestedMessageItems","localMessageItem","fromHistory","nestedLocalMessageItems","allowFooter","isGridResponseType","gridLocalMessageItemIDs","rows","row","cells","cell","cellLocalMessageItemIDs","createLocalMessageItemsForNestedType","items","nestedMessageItem","isSupportedMessageItemInBody","isCarouselResponseType","itemsLocalMessageItemIDs","bodyItems","body","panel","bodyLocalMessageItemIDs","isShowPanelButtonType","footerItems","footer","footerLocalMessageItemIDs","rootMessageItem","isButtonResponseType","isSupportedMessageItemInFooter","type","nestedMessageItemIDs","isSupported","forEach","nestedLocalMessageItem","push","isResponseWithNestedItems","consoleError","CARD","isCardResponseType","isItemSupportedInResponseBody","CAROUSEL","BUTTON","button_type","ButtonItemType","SHOW_PANEL","GRID","BasePanelComponent","className","children","isOpen","hidePanelHeader","labelBackButton","title","hideBackButton","useAITheme","onClickCloseAndRestart","onClickRestart","testIdPrefix","headerProps","showRestartButton","useSelector","state","config","public","headerConfig","headerRef","useImperativeHandle","FocusTrap","active","focusTrapOptions","clickOutsideDeactivates","returnFocusOnDeactivate","IS_MOBILE","preventScroll","HeaderExport","onCloseAndRestart","showBackButton","displayName","showCenter","BasePanelComponentExport","CHANGE_STATE","UPDATE_BOT_NAME","UPDATE_BOT_AVATAR_URL","UPDATE_LAUNCHER_AVATAR_URL","UPDATE_MAIN_HEADER_TITLE","HYDRATE_CHAT","HYDRATE_MESSAGE_HISTORY","ADD_LOCAL_MESSAGE_ITEM","REMOVE_MESSAGES","UPDATE_LOCAL_MESSAGE_ITEM","SET_APP_STATE_VALUE","ADD_IS_TYPING_COUNTER","ADD_IS_LOADING_COUNTER","ADD_IS_HYDRATING_COUNTER","SET_VIEW_STATE","SET_VIEW_CHANGING","SET_INITIAL_VIEW_CHANGE_COMPLETE","UPDATE_CSS_VARIABLES","MESSAGE_SET_OPTION_SELECTED","SET_MESSAGE_UI_PROPERTY","SET_MESSAGE_HISTORY_PROPERTY","MERGE_HISTORY","SET_LAUNCHER_PROPERTY","SET_LAUNCHER_CONFIG_PROPERTY","ANNOUNCE_MESSAGE","SET_CHAT_MESSAGES_PROPERTY","RESTART_CONVERSATION","ACCEPTED_DISCLAIMER","ADD_MESSAGE","UPDATE_HOME_SCREEN_CONFIG","UPDATE_HAS_SENT_NON_WELCOME_MESSAGE","UPDATE_PERSISTED_CHAT_STATE","SET_TOUR_DATA","CLEAR_TOUR_DATA","CHANGE_STEP_IN_TOUR","SET_HOME_SCREEN_IS_OPEN","UPDATE_LAUNCHER_CONFIG","UPDATE_MESSAGE","SET_LAUNCHER_MINIMIZED","CLOSE_IFRAME_PANEL","OPEN_IFRAME_CONTENT","SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN","SET_CUSTOM_PANEL_OPTIONS","SET_CUSTOM_PANEL_OPEN","TOGGLE_HOME_SCREEN","UPDATE_INPUT_STATE","SET_IS_BROWSER_PAGE_VISIBLE","ADD_INPUT_FILE","CLEAR_INPUT_FILES","REMOVE_INPUT_FILE","REMOVE_LOCAL_MESSAGE_ITEM","FILE_UPLOAD_INPUT_ERROR","ADD_NESTED_MESSAGES","SET_RESPONSE_PANEL_IS_OPEN","SET_RESPONSE_PANEL_CONTENT","STREAMING_ADD_CHUNK","STREAMING_START","STREAMING_MERGE_HISTORY","ADD_NOTIFICATION","REMOVE_ALL_NOTIFICATIONS","REMOVE_NOTIFICATIONS","UPDATE_CHAT_HEADER_CONFIG","UPDATE_MAX_VISIBLE_HEADER_OBJECTS","SET_STOP_STREAMING_BUTTON_VISIBLE","SET_STOP_STREAMING_BUTTON_DISABLED","SET_STREAM_ID","UPDATE_MAIN_HEADER_AVATAR","actions","changeState","partialState","chatWasHydrated","hydrateMessageHistory","messageHistory","removeMessages","messageIDs","restartConversation","addLocalMessageItem","message","addMessage","addAfterID","updateLocalMessageItem","updateMessage","messageSetOptionSelected","messageID","sentMessage","updatePersistedChatState","chatState","setTourData","newActiveTourMessageID","clearTourData","changeStepInTour","newStepNumber","updateHasSentNonWelcomeMessage","hasSentNonWelcomeMessage","setAppStateValue","key","addIsTypingCounter","addToIsTyping","addIsLoadingCounter","addToIsLoading","addIsHydratingCounter","addToIsHydrating","updateBotName","name","updateMainHeaderTitle","updateBotAvatarURL","url","updateCSSVariables","variables","publicVars","whiteLabelVariables","updateHomeScreenConfig","homeScreenConfig","setViewState","viewState","setViewChanging","viewChanging","setInitialViewChangeComplete","changeComplete","setMessageUIProperty","localMessageID","propertyName","propertyValue","setLauncherProperty","setLauncherConfigProperty","launcherType","setMessageHistoryProperty","mergeMessageHistory","setMessageErrorState","errorState","setMessageWasAnnounced","announceMessage","setChatMessagesStateProperty","addNotification","notification","notificationID","removeNotifications","groupID","removeAllNotifications","acceptDisclaimer","setHomeScreenIsOpen","updateLauncherConfig","launcherConfig","setLauncherMinimized","closeIFramePanel","setIFrameContent","setViewSourcePanelIsOpen","citationItem","relatedSearchResult","setCustomPanelConfigOptions","options","setCustomPanelOpen","toggleHomeScreen","updateInputState","newState","isInputToAgent","setIsBrowserPageVisible","isVisible","addInputFile","file","removeFileUpload","fileID","removeLocalMessageItem","localMessageItemID","fileUploadInputError","errorMessage","clearInputFiles","addNestedMessages","localMessageItems","setResponsePanelIsOpen","setResponsePanelContent","isMessageForInput","streamingStart","streamingMergeHistory","streamingAddChunk","chunkItem","isCompleteItem","updateChatHeaderConfig","chatHeaderConfig","setMaxVisibleHeaderObjects","maxTotal","setStopStreamingButtonVisible","setStopStreamingButtonDisabled","isDisabled","setStreamID","currentStreamID","updateMainHeaderAvatar","withAriaAnnouncer","Component","Wrapped","props","ariaAnnouncer","useContext","PageObjectId","makeTestId","MessageErrorState","carbonIconToReact","icon","createElement","attrs","width","height","fill","content","child","i","elem","AnimationInType","AnimationOutType","OverlayPanelName","OverlayPanel","PureComponent","constructor","super","arguments","this","isClosing","isOpening","openPanelTimeout","closePanelTimeout","openPanel","onOpenEnd","onOpenStart","animationOnOpen","animationDurationOpen","setState","durationInMS","NONE","conditionalSetTimeout","closePanel","onCloseEnd","onCloseStart","animationOnClose","animationDurationClose","componentDidMount","shouldOpen","componentDidUpdate","prevProps","componentWillUnmount","clearTimeout","render","overlayPanelName","HideComponent","hidden","cx","HideComponentContext","enLanguagePack","ai_slug_title","ai_slug_description","components_overflow_ariaLabel","components_swiper_currentLabel","errors_communicating","errors_imageSource","errors_videoSource","errors_audioSource","errors_iframeSource","errors_singleMessage","errors_ariaMessageRetrying","errors_ariaMessageFailed","errors_noAgentsAvailable","errors_noAgentsJoined","errors_connectingToAgent","errors_busy","errors_agentAppSessionExpired","errors_generalContent","errors_somethingWrong","input_ariaLabel","input_placeholder","input_buttonLabel","input_uploadButtonLabel","window_title","window_ariaTourRegion","window_ariaTourRegionNamespace","window_ariaChatRegion","window_ariaChatRegionNamespace","window_ariaWindowOpened","window_ariaWindowClosed","window_ariaWindowLoading","launcher_isOpen","launcher_isClosed","launcher_isTourOpen","launcher_isTourClosed","launcher_desktopGreeting","launcher_mobileGreeting","launcher_ariaIsExpanded","launcher_closeButton","messages_youSaid","messages_botSaid","messages_agentSaid","messages_searchResults","messages_searchResultsLink","messages_searchResultsOpenDocument","messages_searchResultsOpenDocumentWithLabel","messages_searchResultsExpand","messages_searchResultsCollapse","messages_botIsLoading","messages_botIsTyping","messages_agentIsTyping","messages_scrollHandle","messages_scrollHandleDetailed","messages_scrollHandleEnd","messages_scrollHandleEndDetailed","message_labelBot","message_labelYou","notifications_toastClose","buttons_restart","buttons_cancel","buttons_retry","options_select","options_ariaOptionsDisabled","header_previewLinkTitle","header_ariaCloseRestart","header_ariaBotAvatar","header_overflowMenu_options","homeScreen_returnToAssistant","homeScreen_returnToHome","homeScreen_overflowMenuHomeScreen","homeScreen_ariaQuickStartListButton","homeScreen_ariaQuickStartListOpened","homeScreen_ariaQuickStartListClosed","default_agent_availableMessage","default_agent_unavailableMessage","agent_reason_error","agent_sdMissingWarning","agent_noName","agent_chatTitle","agent_startChat","agent_connecting","agent_agentNoNameTitle","agent_agentJoinedName","agent_agentJoinedNoName","agent_youConnectedWarning","agent_connectingMinutes","agent_connectingQueue","agent_ariaAgentAvatar","agent_ariaGenericAvatar","agent_ariaGenericBotAvatar","agent_youEndedChat","agent_conversationWasEnded","agent_disconnected","agent_reconnected","agent_agentLeftChat","agent_agentLeftChatNoName","agent_agentEndedChat","agent_agentEndedChatNoName","agent_transferring","agent_transferringNoName","agent_endChat","agent_confirmSuspendedEndChatTitle","agent_confirmSuspendedEndChatMessage","agent_confirmCancelRequestTitle","agent_confirmCancelRequestMessage","agent_confirmCancelRequestNo","agent_confirmCancelRequestYes","agent_confirmEndChat","agent_confirmEndChatNo","agent_confirmEndChatYes","agent_confirmEndSuspendedYes","agent_botReturned","agent_newMessage","agent_cardButtonChatRequested","agent_cardButtonConnected","agent_cardButtonChatEnded","agent_cardMessageChatEnded","agent_cardMessageConnected","agent_connectButtonCancel","agent_connectedButtonEndChat","agent_connectWaiting","agent_defaultMessageToAgent","agent_inputPlaceholderConnecting","agent_inputPlaceholderReconnecting","agent_sharingStopSharingButton","agent_sharingRequestTitle","agent_sharingRequestMessage","agent_sharingAcceptButton","agent_sharingDeclineButton","agent_sharingRequested","agent_sharingAccepted","agent_sharingDeclined","agent_sharingCancelled","agent_sharingEnded","agent_suspendedWarning","icon_ariaUnreadMessages","showMore","showMoreResults","disclaimer_title","disclaimer_accept","general_ariaCloseInformationOverlay","general_ariaAnnounceOpenedInformationOverlay","general_ariaAnnounceClosedInformationOverlay","general_ariaAnnounceEscapeOverlay","general_returnToAssistant","conversationalSearch_streamingIncomplete","conversationalSearch_viewSourceDocument","conversationalSearch_citationsLabel","conversationalSearch_toggleCitations","conversationalSearch_responseStopped","launcher_chatNow","iframe_ariaSourceLoaded","iframe_ariaImageAltText","iframe_ariaClosePanel","iframe_ariaOpenedPanel","iframe_ariaClosedPanel","iframe_ariaClickPreviewCard","closeAndRestartModal_title","closeAndRestartModal_message","closeAndRestartModal_confirm","closeAndRestartModal_cancel","datePicker_chooseDate","datePicker_confirmDate","tour_resumeButton","tour_restartButton","tour_startButton","tour_doneButton","tour_ariaMinimizeButton","tour_ariaCloseButton","tour_ariaChatButton","tour_ariaPreviousButton","tour_ariaNextButton","tour_instructions","tour_errorFetchingStep","tour_errorTitle","tour_errorBody","fileSharing_fileTooLarge","fileSharing_ariaAnnounceSuccess","fileSharing_fileIcon","fileSharing_removeButtonTitle","fileSharing_statusUploading","fileSharing_uploadFailed","fileSharing_agentMessageText","fileSharing_request","carousel_prevNavButton","carousel_nextNavButton","input_completionsTagApp","input_completionsTagAssistant","table_filterPlaceholder","table_previousPage","table_nextPage","table_itemsPerPage","table_paginationSupplementalText","table_paginationStatus","feedback_positiveLabel","feedback_negativeLabel","feedback_defaultTitle","feedback_defaultPrompt","feedback_defaultPlaceholder","feedback_submitLabel","feedback_cancelLabel","input_stopResponse","messages_responseStopped","chainOfThought_stepTitle","chainOfThought_inputLabel","chainOfThought_outputLabel","chainOfThought_toolLabel","chainOfThought_statusSucceededLabel","chainOfThought_statusFailedLabel","chainOfThought_statusProcessingLabel","chainOfThought_explainabilityLabel","MountChildrenOnDelay","showChildren","onComponentDidMount","setTimeout","delay","defaultProps","resolvablePromise","resolveFunction","rejectFunction","promise","Promise","resolve","reject","doResolve","resolveValue","isResolved","isComplete","doReject","rejectValue","isRejected","loadHAA","createService","lazyWithPreload","factory","preload","lazyChat","lazyCatastrophicError","then","mod","default","CatastrophicError","lazyDisclaimer","Disclaimer","lazyHomeScreenContainer","HomeScreenContainer","lazyIFramePanel","IFramePanel","lazyViewSourcePanel","ViewSourcePanel","lazyBodyAndFooterPanelComponent","BodyAndFooterPanelComponent","lazyTourComponent","lazyMediaPlayer","exported","lazyCarousel","VisuallyHidden","isClient","window","navigator","browser","detect","screenWidth","screenHeight","screen","IS_IOS","os","IS_PHONE","IS_PHONE_IN_PORTRAIT_MODE","IS_SESSION_STORAGE","memoizeOne","sessionStorage","setItem","getItem","removeItem","getURLHostName","URL","hostname","operation","timeout","usePrevious","useEffect","ChatHeaderObjectType","ChatHeaderAvatarElement","LitElement","isLoaded","_handleOnError","onError","styles","css","unsafeCSS","__decorate","property","String","prototype","Object","bind","CHAT_HEADER_AVATAR_TAG_NAME","CDSChatHeaderAvatarElement","classElement","corners","alt","html","CornersType","ROUND","chatHeaderAvatarTemplate","carbonElement","ChatHeaderAvatar","ChatHeaderLinkElement","isNewTab","customElementClass","label","ButtonKindEnum","GHOST","chatHeaderLinkTemplate","Boolean","ChatHeaderLink","ChatHeaderMenu","target","menuAlignment","containerRef","Menu","open","size","mode","legacyAutoalign","ChatHeaderMenuButton","setIsOpen","useState","refs","menuRefs","context","menuContext","useFloating","onOpenChange","getReferenceProps","getMenuReferenceProps","getFloatingProps","getMenuFloatingProps","useInteractions","useClick","useDismiss","setReference","Button","ButtonSizeEnum","MEDIUM","kind","onClick","renderIcon","ChevronUp","ChevronDown","onMouseDown","event","preventDefault","ariaLabel","floating","setFloating","ChatHeaderMenuItem","MenuItem","ChatHeaderMenuItemRadioGroup","defaultSelectedItem","selectedItem","onChange","MenuItemRadioGroup","itemToString","menuItem","ChatHeaderOverflowMenu","onOpen","onClose","tooltipPosition","iconDescription","hasIconOnly","ChatHeaderTitleElement","chatHeaderTitleTemplate","ChatHeaderTitle","AISlug","CDSAILabel","Header","backContent","onClickClose","onClickBack","overflowItems","overflowClicked","backButtonType","hideCloseButton","hideCloseAndRestartButton","brandColor","enableChatHeaderConfig","headerAvatarConfig","backButtonRef","restartButtonRef","closeAndRestartButtonRef","closeButtonRef","centerObjectsRef","centerGapRef","overflowRef","serviceManager","useServiceManager","languagePack","useLanguagePack","publicConfig","chatHeaderState","chatWidthBreakpoint","maxVisibleHeaderObjects","overflowIsOpen","setOverflowIsOpen","confirmModelOpen","setConfirmModelOpen","selectedGroupMenuitems","setSelectedGroupMenuItems","isImageError","setIsImageError","hasHeaderAvatar","isHidden","prevChatHeaderAvatarURL","isWideWidth","ChatWidthBreakpoint","WIDE","chatHeaderTitle","headerTitle","chatHeaderDisplayName","closeConfirmModel","useCallback","showCloseAndRestartButton","useHideCloseButton","hideMinimizeButton","closeIcon","closeReverseIcon","closeIsReversible","minimizeButtonIconType","MinimizeButtonIconType","CLOSE","CloseLarge","MINIMIZE","SubtractLarge","SIDE_PANEL_LEFT","SidePanelClose","SIDE_PANEL_RIGHT","Error","onConfirm","getComponentInMenu","list","LINK","doFocusRef","RADIO_GROUP","nextObject","Fragment","MenuItemDivider","prevState","MENU","filter","getComponentInChatHeader","headerObject","requestFocus","leftObjectsLength","rightObjectsLength","left","right","isLeftObjectsInOverflow","isRightObjectsInOverflow","renderChatHeaderObjectsInOverflow","hasOverflow","isRTL","document","dir","leftContent","leftChatHeaderComponents","rightChatHeaderComponents","leftChatHeaderMenuComponents","rightChatHeaderMenuComponents","slice","Close","HeaderButton","buttonRef","buttonKind","DownToBottom","store","dispatch","centerResizeObserver","ResizeObserver","centerGapElement","offsetWidth","newTotal","Math","floor","observe","disconnect","AI_LABEL_SIZE","EXTRA_SMALL","alignment","POPOVER_ALIGNMENT","BOTTOM_LEFT","BOTTOM_RIGHT","slot","WriteableElement","slotName","WriteableElementName","AI_TOOLTIP_AFTER_DESCRIPTION_ELEMENT","namespace","suffix","Restart","WACReverseIcon","isReversible","testId","CLOSE_CHAT","ConfirmModal","onCancel","cancelButtonLabel","confirmButtonLabel","modalAnnounceMessage","WACDirectionHasReversibleSVG","forwardRef","ANNOUNCE_INPUT_TYPES","Set","ANNOUNCE_NODE_EXCLUDE_ATTRIBUTE","AriaAnnouncerComponent","ref1","ref2","useRef1","doAnnouncements","strings","pendingValues","elementToAnnounce","nodeToText","useElement","innerText","join","innerHTML","announceValue","nodeType","hasNodeType","formattedMessage","intl","formatMessage","messageValues","messageText","node","isElement","getComputedStyle","display","getAttribute","hasAttribute","trimAndPush","isInputNode","has","toLowerCase","placeholder","isTextAreaNode","isImageNode","shadowRoot","childNodes","childNode","isTextNode","data","trim","replaceAll","HomeScreenHeader","onRestart","persistedToBrowserStorage","homeScreenState","showBackToBot","headerDisplayName","customMenuOptions","theme","handler","option","HOME_SCREEN","HomeScreenHeaderExport","locales","ar","ar-dz","ar-kw","ar-ly","ar-ma","ar-sa","ar-tn","cs","de","de-at","de-ch","en","en-au","en-ca","en-gb","en-ie","en-il","en-nz","es","es-do","es-us","nl","fr","fr-ca","fr-ch","it","it-ch","ja","ko","pt","pt-br","zh","zh-cn","zh-tw","zh-mo","zh-hk","loadLocale","requestedLocale","localeKey","object","requestedSupported","locale","replace","language","substring","isSupportedLocale","keyList","JSON","stringify","findSupportedKey","localeModule","error","enLocaleData","loadLanguagePack","providedLanguagePack","handleBTag","chunks","handleBRTag","addHTMLSupport","values","b","br","loadDayjsLocale","dayjs","previousLocale","localePack","createEnglishFormat","IntlMessageFormat","LanguagePackContext","htmlAttributes","Provider","WAC__hidden","WindowSizeContext","CarbonThemeClassNames","ServiceManagerContext","ModalPortalRootContext","_type","v4","AriaLiveMessage","AriaLiveMessageExport","withoutEmptyStarters","newConfig","starters","buttons","allow_return","button","is_on","setIntl","messages","createIntl","createWriteableElementsProxy","elementSet","get","element","add","Proxy","writeableElements","VERSION","NotificationType","BOUNCING_ANIMATION_TIMEOUTS","DEFAULT_LAUNCHER","mobile","time_to_expand","new_expand_time","time_to_reduce","notification_type","TEXT_NOTIFICATION","desktop","deepFreeze","DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS","disableAnimation","DEFAULT_CUSTOM_PANEL_STATE","panelID","DEFAULT_CUSTOM_PANEL_ID","DEFAULT_IFRAME_PANEL_STATE","DEFAULT_CITATION_PANEL_STATE","DEFAULT_TOUR_STATE","activeTourStepItems","DEFAULT_MESSAGE_PANEL_STATE","VIEW_STATE_ALL_CLOSED","launcher","mainWindow","tour","VIEW_STATE_LAUNCHER_OPEN","VIEW_STATE_MAIN_WINDOW_OPEN","DEFAULT_PERSISTED_TO_BROWSER","version","disclaimersAccepted","isHomeScreenOpen","persistedTourState","activeTourID","activeTourCurrentStepIndex","agentState","isConnected","isSuspended","agentProfiles","launcherState","wasLoadedFromBrowser","activeTour","showUnreadIndicator","mobileLauncherIsExtended","mobileLauncherWasReduced","mobileLauncherDisableBounce","desktopLauncherIsExpanded","desktopLauncherWasMinimized","bounceTurn","DEFAULT_CHAT_MESSAGES_STATE","localMessageIDs","isTypingCounter","isLoadingCounter","isHydratingCounter","isScrollAnchored","DEFAULT_MESSAGE_STATE","allMessageItemsByID","allMessagesByID","botMessageState","DEFAULT_AGENT_STATE","isConnecting","isReconnecting","numUnreadMessages","fileUploadInProgress","showScreenShareRequest","isScreenSharing","isAgentTyping","inputState","fieldVisible","isReadonly","files","allowFileUploads","allowMultipleFileUploads","allowedFileUploadTypes","stopStreamingButtonState","DEFAULT_THEME_STATE","carbonTheme","CarbonTheme","G10","DEFAULT_LAYOUT_STATE","showFrame","hasContentMaxWidth","applyBotMessageState","setHomeScreenOpenState","applyLocalMessageUIState","oldMessage","applyFullMessage","MIN_CONTRAST","hexCodeToRGB","color","red","blue","green","parseInt","calculateContrast","color1","color2","rgb1","rgb2","luminance1","calculateRelativeLuminance","luminance2","contrast","r8","g8","b8","rRGB","gRGB","bRGB","whiteOrBlackText","background","gray100","white","adjustLightness","token","shift","original","Color","hsl","l","round","hex","CSS_VAR_PREFIX","HEXADECIMAL_REGEX","INTERNAL_OVERRIDES_LIGHT_THEME_MAP","INTERNAL_OVERRIDES_DARK_THEME_MAP","ACCENT_COLOR_MAPS","blue20","blue60","blue60Hover","blue80","g10","g90","g100","fillValues","propertyNames","mergeCSSVariables","internalOverrides","internalOverridesMap","WHITE","includes","G90","G100","createInternalCSSOverridesMap","result","entries","startsWith","match","console","warn","WA_CONSOLE_PREFIX","remoteVars","cssOverrides","primaryColor","secondaryColor","accentColor","useAccentColor","tryFocusColor","useFocusColor","colorMap","accentBlue20","accentBlue60Hover","accentBlue80","accentColorRGB","toString","accentColorBW","gray80","gray10","remoteStylesToCSSVars","getThemeClassNames","themeState","themeClassnames","validateViewState","appState","VALID_PUBLIC_VARS_IN_AI_THEME_SET","CSSVariable","UPDATE_CSS_VARS_AI_THEME_WARNING_MESSAGE","ChatActionsImpl","hydrating","restarting","alreadyHydrated","chunkQueue","hydrateChat","alternateWelcomeRequest","alternateWelcomeRequestSource","alternateOptions","fireReady","hydrationPromise","doHydrateChat","fire","BusEventType","CHAT_READY","debugLog","historyService","loadHistory","humanAgentService","initialize","getState","createElementsForUserDefinedResponses","latestPanelLocalMessageItem","openResponsePanel","messaging","skipWelcome","send","createWelcomeRequest","MessageSendSource","WELCOME_REQUEST","returnBeforeStreaming","lastMessageID","lastMessage","lastOriginalMessage","isLiveAgentMessage","isRequest","messageService","resendMessage","allowReconnect","serviceDesk","handleHydration","getPublicWebChatState","isConnectedWithHumanAgent","isWebChatOpen","isConnectingWithHumanAgent","isDebugEnabled","isEnableDebugLog","hasUserSentMessage","isTourActive","sendWithCatch","source","ignoreHydration","messageRequest","createMessageRequestForText","responsePanelState","doSend","addDefaultsToMessage","originalUserText","input","silent","inputItemToLocalItem","setValueSelectedForMessageID","cloneDeep","receive","requestMessage","requestOptions","restartCount","initialRestartCount","MESSAGE","preReceiveEvent","PRE_RECEIVE","isResponse","processMessageResponse","catch","inlineError","createMessageResponseForText","thread_id","RECEIVE","insertHistory","scrollBottom","getMessagesScrollBottom","notes","currentAppStateMessages","newAppStateMessages","merge","doAutoScroll","scrollToBottom","receiveChunk","chunk","chunkPromise","processChunkQueue","isStreamCompleteItem","isPartialItem","isStreamPartialItem","isStopGeneratingVisible","botInputState","partial_item","streaming_metadata","cancellable","response_id","complete_item","partial_response","handleUserDefinedResponseItemsChunk","isStreamFinalResponse","final_response","getOrCreateUserDefinedElement","messageItemID","userDefinedItem","userDefinedElementRegistry","setAttribute","set","handleUserDefinedResponseItems","renderAsUserDefinedMessage","user_defined","userDefinedResponseEvent","USER_DEFINED_RESPONSE","fullWidth","createElementForNestedUserDefinedResponse","nestedLocalMessage","itemID","CHUNK_USER_DEFINED_RESPONSE","output","generic","request_id","previousItemID","pause","isPause","agent","isConnectToAgent","hasTourUserDefinedType","skipTourCard","skip_card","startTourReason","TourStartReason","START_TOUR_METHOD","SKIP_CARD","mainWindowCloseReason","MainWindowCloseReason","CALLED_START_TOUR","TOUR_SKIP_CARD","startTour","viewChangeReason","ViewChangeReason","hasServiceDesk","errorOccurred","errorType","OnErrorType","INTEGRATION_ERROR","agentAvailability","checkAreAnyAgentsOnline","shouldAutoRequestAgent","skipConnectAgentCard","AgentsOnlineStatus","ONLINE","startChat","showIsTyping","isTyping","sleep","time","insertLocalMessageResponse","updateLanguagePack","changes","removeNotification","usePublicVars","variable","consoleWarn","allVariables","changeView","newView","reason","tryHydrating","forceViewChange","newViewState","constructViewState","isEqual","fireViewChangeEventsAndChangeView","isHydrated","oldViewState","preViewChangeEvent","VIEW_PRE_CHANGE","cancelViewChange","viewChangeEvent","VIEW_CHANGE","changeViewReason","ViewType","TOUR","TOUR_START","TOUR_STEP","step","tourState","endTour","LAUNCHER","goToSpecificTourStep","stepId","newStepIndex","findIndex","stepItem","step_id","changeStepOptions","nextStep","previousStep","actualNewStepIndex","catastrophicErrorType","callOnError","additionalChatParameters","skipHydration","endAgentConversation","fireEvents","PRE_RESTART_CONVERSATION","currentState","endChat","MAIN_WINDOW","mainWindowOpenReason","MainWindowOpenReason","CALLED_RESTART_CONVERSATION","instance","updateAssistantInputFieldVisibility","cancelAllMessageRequests","destroySession","keepOpenState","originalViewState","newPersistedToBrowserStorage","userSessionStorageService","clearLauncherSession","clearChatSession","agentEndConversation","endedByUser","agentUpdateIsSuspended","HANDLER_NOT_FUNCTION","EventBus","handlersByType","Map","eventsTypesRunning","eventsRunningCount","busEvent","logEvent","handlersForType","handlersCopy","delete","waitForEmptyPromise","fireSync","waitForEmpty","on","handlers","debugStackTrace","off","indexOf","removed","splice","once","onceHandler","logListeners","listeners","group","listener","consoleLog","groupEnd","clear","eventCopy","createCustomPanelInstance","customPanelInstance","close","freeze","HistoryService","useHistory","resultData","customLoadHistory","historyNotes","allLocalMessagesByID","loadingState","allMessages","threadMessagesByThreadID","responsesByRequestID","relatedMessageByID","localMessagesByOriginalMessageID","lastThreadID","loadedHistory","latestTransferToAgentResponse","note","historyItem","isEventRequest","timestamp","Date","getTime","THREAD_ID_MAIN","file_upload_status","FileStatusValue","UPLOADING","COMPLETE","error_state","FAILED","related_message_id","beginEvent","HISTORY_BEGIN","eventBus","HISTORY_END","notesToMessages","getResponseItems","thread","addMessageToThread","createLocalMessages","localMessagesByFullMessageID","toChatMessageState","createChatStates","mainThreadMessages","welcomeRequest","is_welcome_request","welcomeResponse","markIsLatestWelcomeNode","isOptionItem","relatedRequest","optionSelected","isDateResponseType","markSelectedOptions","notesToLoadedHistory","SESSION_HISTORY","MessageLoadingManager","start","onExceededMaxSilentLoading","onEnd","onTimeout","msMaxSilentLoading","msMaxAttempt","hasExceededMaxSilentLoading","onSilentLoading","onMaxAttempt","end","MS_BETWEEN_RETRIES","RetryType","MessageService","pendingLocale","localeIsExplicit","messageLoadingManager","queue","waiting","timeoutOverride","messageTimeoutSecs","timeoutMS","processSuccess","received","isProcessed","isWelcomeNode","message_type","MessageInputType","EVENT","now","trackData","lastRequestTime","timeLastRequest","totalRequestTime","timeFirstRequest","sendMessagePromise","moveToNextQueueItem","addErrorMessage","HYDRATE_RESEND","skipQueue","sendToAssistantAndUpdateErrorState","sendToAssistant","SILENT","VISIBLE","RETRYING","waitingMessage","WAITING","processError","pendingRequest","resultText","allowRetry","tryCount","isWelcome","msSinceStarted","isInAttemptWindow","numErrors","retryDelay","MESSAGE_COMMUNICATION","otherData","rejectFinalErrorOnMessage","customSendMessage","controller","AbortController","sendMessageController","signal","runQueueIfReady","clearCurrentQueueItem","getLastBotResponseWithContext","LOADING_INDICATOR_TIMER","messageLoadingIndicatorTimeoutSecs","didExceedMaxLoading","cancelMessageRequestByID","PRE_SEND","SEND","addToMessageQueue","newPendingMessage","messageToUpdate","announceMessageID","TEXT","logError","lastResponse","abort","safeFetchTextWithTimeout","NamespaceService","originalName","attributeSafe","computedName","computeNamespaceName","getSuffix","ServiceManager","innerStorage","storage","storage$1","UserSessionStorageService","prefix","loadChatSession","chatSessionString","getChatSessionKey","chatSession","parse","loadLauncherSession","launcherSessionString","getLauncherSessionKey","launcherSession","persistChatSession","session","persistLauncherSession","replaceCurrentArrayValue","currentValue","newValue","agentReducers","HA_SET_IS_CONNECTING","action","activeLocalMessageID","HA_SET_IS_RECONNECTING","HA_SET_AGENT_AVAILABILITY","availability","HA_SET_SHOW_SCREEN_SHARE_REQUEST","showRequest","HA_SET_AGENT_JOINED","agentProfile","HA_SET_PERSISTED_STATE","serviceDeskState","HA_UPDATE_IS_SUSPENDED","HA_UPDATE_IS_TYPING","HA_SET_AGENT_LEFT_CHAT","HA_UPDATE_CAPABILITIES","newInputState","capabilities","HA_SET_IS_SCREEN_SHARING","isSharing","HA_UPDATE_FILE_UPLOAD_IN_PROGRESS","HA_END_CHAT","populateTourStepItems","tourMessageItem","find","steps","clearTourState","EXCLUDE_AGENT_UNREAD","AgentMessageType","USER_ENDED_CHAT","CHAT_WAS_ENDED","RELOAD_WARNING","reducers","iFramePanelState","viewSourcePanelState","customPanelState","isSilent","currentIndex","existingID","newLocalMessageIDs","insertAtIndex","afterIDIndex","isBotMessage","agent_message_type","isMainWindowOpen","isBrowserPageVisible","idsSet","newAllMessages","newAllMessageItems","newMessageIDs","newMessageItemsIDs","itemIDsInNewMessage","newAllMessageItemsByID","existingItemIDs","firstFoundIndex","isItemInMessage","itemIDsToInsert","newMessagesByID","max","previousState","handleViewStateChange","initialViewChangeComplete","botName","botAvatarURL","avatar_url_override","cssVariableOverrides","newHomeScreenConfig","mergeWith","location","LauncherType","DESKTOP","MOBILE","min","applyInputState","getInputState","currentInputState","newUploads","notifications","concat","currentInputSate","isError","status","existingMessage","newMessage","localItemID","existingLocalMessageItem","newItem","streamingState","isDone","isIntermediateStreaming","assign","getThemeCornersType","getLayoutState","themeConfig","SQUARE","layout","reducerFunction","DEFAULT_PUBLIC_CONFIG","openChatByDefault","showLauncher","shouldTakeFocusIfOpensAutomatically","LocalizedFormat","Chat","publicConfigProvided","customHostElement","additionalChatParametersProvided","debug","consoleDebug","appConfig","startInternal","doesHaveServiceDesk","getBotName","initialState","chatWidth","chatHeight","originalConfig","suspendScrollDetection","isDestroyed","targetViewState","showNonHeaderBackgroundCover","sessionStorageLauncherState","enhancer","__REDUX_DEVTOOLS_EXTENSION__","instanceId","createStore","doCreateStore","subscribe","previousPersistedToBrowserStorage","copyToSessionStorage","disableWindowTitleChanges","originalTitle","changeTitleTimer","createHandleWindowTitle","customPanelManager","serviceManger","panels","getPanel","createCustomPanelManager","WELCOME_NODE_BEFORE_ELEMENT","HEADER_BOTTOM_ELEMENT","BEFORE_INPUT_ELEMENT","HOME_SCREEN_HEADER_BOTTOM_ELEMENT","HOME_SCREEN_AFTER_STARTERS_ELEMENT","HOME_SCREEN_BEFORE_INPUT_ELEMENT","CUSTOM_PANEL_ELEMENT","setEnableDebugLog","debugStackTraces","setEnableDebugStackTracesLog","createServiceManager","createHumanAgentService","all","reallyRenderAndReturnInstance","OPEN_BY_DEFAULT","WEB_CHAT_LOADED","callRender","wasRendered","newPack","updateLocale","newLocale","localePromise","languagePackPromise","selectInputState","INSTANCE_SEND","destroy","container","remove","updateInputIsDisabled","updateBotUnreadIndicatorVisibility","issueWithNewView","viewTypeValues","CALLED_CHANGE_VIEW","homeScreenConfigClone","scrollToMessage","animate","doScrollToMessage","customPanels","updateCustomMenuOptions","updateIsTypingCounter","direction","updateIsLoadingCounter","updateIsChatLoadingCounter","updateHeaderConfig","configCopy","elements","getMainWindow","addClassName","removeClassName","getMessageInput","getHTMLElement","setValue","setEnableEnterKey","addChangeListener","removeChangeListener","getHomeScreenInput","tours","CALLED_END_TOUR","goToNextStep","goToStep","addMessageChunk","clearConversation","appWindow","endConversation","updateIsSuspended","createChatInstance","renderAndReturnInstance","renderPromise","AriaAnnouncerProvider","useIntl","announcerRef","announcerFunction","previousAnnounceMessageRef","currentAnnounceMessage","getLauncherButtonAriaLabel","isLauncherHidden","Launcher","onToggleOpen","unreadAgentCount","tabIndex","launcherHidden","launcherAvatarURL","count","launcherAvatar","AiLaunch","ChatLaunch","src","WACLauncher__TourButton","PRIMARY","ArrowUpLeft","LauncherExport","Tag","CarbonTagElement","CloseIcon","Close16","LauncherComplex","launcherComplexRef","launcherRef","onMinimize","disabled","WACLauncherComplex__Text","onKeyDown","e","LauncherDesktopContainer","onDoToggle","browserLauncherState","isExpandedLauncherEnabled","smallLauncherClassName","setSmallLauncherClassName","complexLauncherClassName","setComplexLauncherClassName","launcherHiddenRef","animateOnceVisible","bounceTurnRef","animationStartTimerRef","animationFinishedTimerRef","firstBounceAnimationStartTimerRef","firstBounceAnimationFinishedTimerRef","secondBounceAnimationStartTimerRef","secondBounceAnimationFinishedTimerRef","determineLauncherHeight","expandedLauncherHeight","offsetHeight","style","setProperty","startExpandLauncher","setExpandAnimationTimers","clearExpandAnimationTimers","startBounceAnimation","finishBounceAnimation","setBounceAnimationTimers","clearBounceAnimationTimers","setDefaultLauncherState","useOnMount","prevLauncherTitle","animateWithClass","endAnimationNameOrDelay","endAnimationCallback","classList","animationName","removeEventListener","addEventListener","LauncherExtended","isExtended","playExtendAnimation","onSwipeRight","onReduceEnd","useAriaAnnouncer","animateExtendedState","setAnimateExtendedState","showGreetingMessage","setShowGreetingMessage","prevIsExtended","extendedContainerRef","greetingMessageRef","textHolderRef","touchStartRef","touchStartX","touchStartY","shouldReduceExtendedLauncher","extendWithAnimation","extendWithoutAnimation","launcherGreetingMessage","launcherContainerElement","textHolderEl","greetingMessageEl","extendedContainerEl","maxTextHolderWidth","launcherPosition","extendedWidth","getMaxLauncherExtendedWidth","clientWidth","querySelector","launcherExtendedWidth","removeAttribute","calculateAndSetMaxExtendedLauncherWidth","doFadeAnimationForElements","fadeInElement","fadeInTime","buttonEl","handleTouchMove","touchList","touchStartCoordinates","callback","clientX","touchEndX","clientY","touchEndY","differenceX","differenceY","abs","checkIfUserSwipedRight","touches","handleTouchStart","touchStart","reduceAnimationEndListener","fadeOutElement","LauncherExtendedExport","LauncherMobileContainer","wasReduced","disableBounce","isStartingBounceAnimation","setIsStartingBounceAnimation","prevWasReduced","initialBounceTurn","previouslyPlayedExtendAnimation","extendLauncherTimeoutIDRef","reduceLauncherTimeoutIDRef","endBounceAnimationRef","shouldBounceRef","isExtending","disableIntroAnimation","setLauncherStateAsReduced","reduceLauncher","extendLauncherTimeoutID","reduceLauncherTimeoutID","clearTimeouts","setExpandAnimationTimeout","endBounceAnimation","startRecurringBounceAnimation","turnCounter","animation","timeouts","startingIndex","beforeAll","afterAll","beforeEach","afterEach","terminate","timeoutID","playAnimation","setAnimationListener","replayAnimation","setAnimationTimeouts","handleToggleOpen","handleSwipeRight","LauncherContainer","LAUNCHER_CLICKED","launcherContainer","effect","deps","hasRunRef","useEffectDidUpdate","HydrationPanel","useHomeScreenVersion","header","BotHeaderExport","onToggleHomeScreen","includeWriteableElement","HYDRATING","AnnounceOnMountComponentExport","announceOnce","overlay","assistiveText","CustomPanel","onPanelOpenEnd","onPanelCloseEnd","onPanelOpenStart","onPanelCloseStart","disableDefaultCloseAction","prevIsOpen","openAnimation","SLIDE_IN_FROM_BOTTOM","closeAnimation","SLIDE_OUT_TO_BOTTOM","onClickBackLocal","onClickCloseLocal","checkAllowClose","onCloseAndRestartLocal","CUSTOM_PANEL_PRE_OPEN","CUSTOM_PANEL_OPEN","CUSTOM_PANEL_PRE_CLOSE","CUSTOM_PANEL_CLOSE","CUSTOM","eventName","eventDescription","CustomPanelExport","WIDTH_BREAKPOINT_STANDARD","WIDTH_BREAKPOINT_NARROW","WIDTH_BREAKPOINT_WIDE","MainWindow","closing","modalPortalHostElement","numPanelsOpen","numPanelsAnimating","numPanelsCovering","isHydrationAnimationComplete","shouldAutoFocus","extraClassNames","areModulesLoaded","mainWindowRef","botChatRef","homeScreenInputRef","disclaimerRef","brandingRef","animationContainerRef","iframePanelRef","viewSourcePanelRef","previousBodyVisibility","previousBodyPosition","onResize","appChatWidthBreakpoint","STANDARD","NARROW","onVisualViewportResize","updateFromVisualViewport","visualViewport","offsetTop","offsetLeft","setModalPortalHostElement","onSendInput","selectIsInputToAgent","sendMessageToAgent","onSendHomeButtonInput","createMessageRequestForChoice","HOME_SCREEN_STARTER","removeChatFromDom","doClose","getShowDisclaimer","getShowHomeScreen","takeFocus","requestInputFocus","onUserTyping","userTyping","onAcceptDisclaimer","coverBackground","onHydrationPanelClose","mainWindowObserver","disableCustomElementMobileEnhancements","updateBody","SCROLLBAR_WIDTH","loadPanels","unobserve","oldProps","oldState","newProps","useCustomHostElement","prevViewState","requestAnimationFrame","newLastItemID","lastMessageItem","componentDidCatch","errorInfo","createDidCatchErrorData","unmounting","getPropertyValue","fromCloseAndRestart","MAIN_WINDOW_CLOSED_AND_RESTARTED","DEFAULT_MINIMIZE","disclaimer","addClassNameToState","removeClassNameFromState","renderChat","showCovering","renderCustomPanel","renderHydrationPanel","renderDisclaimerPanel","renderResponsePanel","renderHomeScreenPanel","renderIFramePanel","renderViewSourcePanel","renderBotChat","headerAvatar","agentDisplayState","selectAgentDisplayState","showDisclaimer","hideBotContainer","Suspense","fallback","messageState","MESSAGE_INPUT","renderInnerHydrationPanel","shouldHide","renderCatastrophicPanel","CATASTROPHIC","showHeader","FADE_IN","FADE_OUT","DISCLAIMER","disclaimerHTML","disclaimerAcceptButtonRef","showHomeScreen","onSendBotInput","HOME_SCREEN_INPUT","onSendButtonInput","IFRAME","CONVERSATIONAL_SEARCH_CITATION","panelOptions","PANEL_RESPONSE","showAnimations","show_animations","renderWidget","localeClassName","showGlass","enableFocusTrap","trapActive","onScroll","scrollTop","MainWindow$1","connect","TourContainerLazy","App","hostElement","applicationStyles","fontStyles","combinedStyles","AppContainer","useDispatch","windowSize","setWindowSize","innerWidth","innerHeight","cssVariableOverrideString","useMemo","cssVariables","cssVariablesString","allValues","convertCSSVariablesToString","windowListener","visibilityListener","visibilityState","nonce","cspNonce","RawIntlProvider","MainContainer","tourContainerRef","showTour","showedTourOnce","languageKey","regionLabel","role","UserDefinedResponsePortalsContainer","chatInstance","renderUserDefinedResponse","userDefinedResponseEventsBySlot","slotState","UserDefinedResponseComponentPortal","ReactDOM","UserDefinedResponsePortalsContainerExport","WriteableElementsPortalsContainer","renderResponseMap","responseItem","WriteableElementsComponentPortal","WriteableElementsPortalsContainerExport","onBeforeRender","onAfterRender","renderWriteableElements","setParentInstance","setInstance","renderProps","setRenderProps","setApplicationStyles","setInstances","setUserDefinedResponseEventsBySlot","managedWebChatRef","previousConfigRef","previousConfig","managedWebChat","shouldDestroy","destroyWebChat","widget","pagePublicConfig","chatConstructorPromise","protocol","compatMode","instantiateWidget","webChatInstance","userDefinedEventsBySlot","itemChunk","partialItems","addUserDefinedResponseHandler","loadChat","carbonStyles","loadBaseStyles","loadCarbon","loadStyles","AppContainerExport","carbon","outer","visibility","overflow","appendChild","inner","scrollbarWidth","parentNode","removeChild","doScrollElementIntoView","boundary","compute","scrollMode","block","inline","el","top","doScrollElement","scrollLeft","scroll","behavior","doFocus","activeElement","tabbable","getShadowRoot","focus","defer","focusOnFirstFocusableItemInArrayOfElements","focusOnFirstFocusableElement","parentElement","focusableElements","isEnterKey","shiftKey","altKey","metaKey","ctrlKey","hasModifiers","isComposing","keyCode","getScrollBottom","scrollHeight","DATE","isTextItem","PAUSE","typing","OPTION","choice","relatedResponseID","createMessageRequestForButtonItemOption","buttonItem","createMessageRequestForFileUpload","upload","InternalMessageRequestType","FILE","FROM_USER","createMessageRequestForDate","inputString","userString","threadID","responseType","textItem","response","CONNECT_TO_AGENT","hasBodyOrFooter","IMAGE","VIDEO","AUDIO","CONVERSATIONAL_SEARCH","TABLE","renderAsTour","user_defined_type","serviceDeskFactory","USER_DEFINED","isSingleItemCarousel","getOptionType","preference","totalOptions","getMediaDimensions","dimensions","hasLiveAgentMessage","AnnounceOnMountComponent","isMounted","onceAnnounced","WriteableElement$1","ModalPortal","attachedToHost","modalElement","attachIfNeeded","contextType","onYesClick","onNoClick","getBotInputState","getAgentInputState","getAgentState","getPersistedAgent","persisted","isConnectingOrConnected","disableInput","inputPlaceholderKey","BotHeader","homeScreenIsOn","shallowEqual","hasChatHeaderObjects","allowHomeScreen","Home","getOwnPropertyNames","prop","hasOwnProperty","call","isFrozen","setIsConnecting","setIsReconnecting","setAgentLeftChat","setAgentAvailability","setAgentJoined","updateCapabilities","updateFilesUploadInProgress","setShowScreenShareRequest","setIsScreenSharing","setPersistedServiceDeskState","agentUpdateIsTyping"],"sourceRoot":""}