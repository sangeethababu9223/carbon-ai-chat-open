{"version":3,"file":"2288.bundle.js","mappings":"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","sources":["webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hooks/useUUID.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/contexts/AriaAnnouncerContext.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/settings.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/lang/UUIDType.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/lang/arrayUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/schema/outputItemToLocalItem.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/BasePanelComponent.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/actions.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/homeScreenUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/intlUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/ChatInstanceImpl.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/environmentVariables.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/config/LauncherConfig.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/reducerUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/colors.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/styleUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/viewStateUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/events/ChatActionsImpl.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/events/EventBus.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/CustomPanelInstance.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/HistoryService.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/schema/historyToMessages.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/messageServiceUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/MessageService.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/NamespaceService.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/ServiceManager.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/mockStorage.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/UserSessionStorageService.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/customizers.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/agentReducers.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/tourReducerUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/reducers.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/doCreateStore.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/chatEntryFunctions.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/Chat.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/loadServices.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/subscriptions.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/CustomPanelManager.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/aria/AriaAnnouncerProvider.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/launcherUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/Launcher.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/LauncherComplex.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/LauncherDesktopContainer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/animationUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/LauncherExtended.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/LauncherMobileContainer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/LauncherContainer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hooks/useEffectDidUpdate.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/HydrationPanel.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/panels/CustomPanel.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/containers/main/MainWindow.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/utilities/HasAddRemoveClassName.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/containers/App.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/UserDefinedResponsePortalsContainer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/WriteableElementsPortalsContainer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/AppContainer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hocs/withAriaAnnouncer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/PageObjectId.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/messaging/LocalMessageItem.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/utilities/Animation.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/OverlayPanel.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/contexts/HideComponentContext.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/languages/en.json.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/util/MountChildrenOnDelay.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/resolvablePromise.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/dynamic-imports/dynamic-imports.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/util/VisuallyHidden.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/browserUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hooks/usePrevious.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/config/ChatHeaderConfig.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderAvatar/src/chatHeaderAvatarElement.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderAvatar/src/chatHeaderAvatarElement.scss.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderAvatar/cds-aichat-chat-header-avatar.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderAvatar/src/chatHeaderAvatar.template.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderAvatar.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderLink/cds-aichat-chat-header-link.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderLink/src/chatHeaderLinkElement.template.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderLink.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderMenu.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderMenuButton.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderMenuItem.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderMenuItemRadioGroup.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderOverflowMenu.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderTitle/cds-aichat-chat-header-title.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderTitle/src/chatHeaderTitle.template.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderTitle/src/chatHeaderTitle.scss.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderTitle.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/header/AISlug.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/header/Header.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/aria/AriaAnnouncerComponent.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/homeScreen/HomeScreenHeader.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/languages.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hooks/useLanguagePack.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/util/HideComponent.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/contexts/WindowSizeContext.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/utilities/carbonTypes.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hooks/useServiceManager.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/contexts/ModalPortalRootContext.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/lang/uuid.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/aria/AriaLiveMessage.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/domUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/messageUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/util/AnnounceOnMountComponent.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/state/AppState.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/WriteableElement.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/contexts/ServiceManagerContext.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/containers/ModalPortal.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/modals/ConfirmModal.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/instance/ChatInstance.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/selectors.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/header/BotHeader.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/lang/objectUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/schema/inputItemToLocalItem.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hooks/useAriaAnnouncer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/agentActions.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/contexts/LanguagePackContext.js"],"sourcesContent":["import { useRef } from \"react\";\n\nimport { uuid } from \"../utils/lang/uuid.js\";\n\nimport { UUIDType } from \"../utils/lang/UUIDType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function useUUID() {\n  const ref = useRef();\n  if (ref.current === undefined) {\n    ref.current = uuid(UUIDType.COMPONENT);\n  }\n  return ref.current;\n}\n\nexport { useUUID };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const AriaAnnouncerContext = React.createContext(null);\n\nexport { AriaAnnouncerContext };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst CSS_CLASS_PREFIX = \"cds--aichat\";\n\nconst WEB_COMPONENT_PREFIX = \"cds-aichat\";\n\nexport { CSS_CLASS_PREFIX, WEB_COMPONENT_PREFIX };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar UUIDType;\n\n(function(UUIDType) {\n  UUIDType[UUIDType[\"MISCELLANEOUS\"] = 1] = \"MISCELLANEOUS\";\n  UUIDType[UUIDType[\"LOCAL_MESSAGE\"] = 2] = \"LOCAL_MESSAGE\";\n  UUIDType[UUIDType[\"MESSAGE\"] = 3] = \"MESSAGE\";\n  UUIDType[UUIDType[\"COMPONENT\"] = 4] = \"COMPONENT\";\n  UUIDType[UUIDType[\"USER\"] = 6] = \"USER\";\n  UUIDType[UUIDType[\"DEVICE_ID\"] = 8] = \"DEVICE_ID\";\n  UUIDType[UUIDType[\"FILE\"] = 9] = \"FILE\";\n})(UUIDType || (UUIDType = {}));\n\nexport { UUIDType };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction asArray(value) {\n  return Array.isArray(value) ? value : [ value ];\n}\n\nasync function asyncForEach(array, callbackFunction) {\n  for (let index = 0; index < array.length; index++) {\n    const value = array[index];\n    await callbackFunction(value, index, array);\n  }\n}\n\nfunction findLast(array, predicate, startAt) {\n  const lastIndex = findLastIndex(array, predicate);\n  return lastIndex === -1 ? undefined : array[lastIndex];\n}\n\nfunction findLastIndex(array, predicate, startAt) {\n  if (array) {\n    const startingIndex = array.length - 1;\n    for (let index = startingIndex; index >= 0; index--) {\n      const value = array[index];\n      if (predicate(value, index, array)) {\n        return index;\n      }\n    }\n  }\n  return -1;\n}\n\nfunction findLastWithMap(keys, map, predicate) {\n  for (let index = keys.length - 1; index >= 0; index--) {\n    const key = keys[index];\n    const value = map[key];\n    if (predicate(value, index, keys)) {\n      return value;\n    }\n  }\n  return undefined;\n}\n\nfunction arrayLastValue(array) {\n  return array && array.length ? array[array.length - 1] : null;\n}\n\nexport { arrayLastValue, asArray, asyncForEach, findLast, findLastWithMap };\n","import { MessageResponseTypes, ButtonItemType } from \"../../../types/messaging/Messages.js\";\n\nimport { uuid } from \"../utils/lang/uuid.js\";\n\nimport { streamItemID, isGridResponseType, isCarouselResponseType, isShowPanelButtonType, isResponseWithNestedItems, isItemSupportedInResponseBody, isCardResponseType, isButtonResponseType, createMessageResponseForItem } from \"../utils/messageUtils.js\";\n\nimport { consoleError } from \"../utils/miscUtils.js\";\n\nimport { UUIDType } from \"../utils/lang/UUIDType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function outputItemToLocalItem(messageItem, fullMessage, isLatestWelcomeNode = false, disableFadeAnimation = false) {\n  const id = streamItemID(fullMessage.id, messageItem) || uuid(UUIDType.LOCAL_MESSAGE);\n  const localMessage = {\n    ui_state: {\n      id: id,\n      needsAnnouncement: !fullMessage.history.from_history,\n      disableFadeAnimation: disableFadeAnimation\n    },\n    item: messageItem,\n    fullMessageID: fullMessage.id\n  };\n  if (isLatestWelcomeNode) {\n    localMessage.ui_state.isWelcomeResponse = true;\n  }\n  return localMessage;\n}\n\nfunction createLocalMessageForInlineError(text) {\n  const messageItem = {\n    response_type: MessageResponseTypes.INLINE_ERROR,\n    text: text\n  };\n  return createLocalMessageForItem(messageItem);\n}\n\nfunction createLocalMessageForItem(messageItem) {\n  const originalMessage = createMessageResponseForItem(messageItem);\n  const localMessage = outputItemToLocalItem(messageItem, originalMessage);\n  return {\n    originalMessage: originalMessage,\n    localMessage: localMessage\n  };\n}\n\nfunction createLocalMessageItemsForNestedMessageItems(localMessageItem, originalMessage, fromHistory, nestedLocalMessageItems, allowFooter) {\n  const {item: item} = localMessageItem;\n  if (isGridResponseType(item)) {\n    localMessageItem.ui_state.gridLocalMessageItemIDs = item.rows.map(row => row.cells.map(cell => {\n      const cellLocalMessageItemIDs = [];\n      createLocalMessageItemsForNestedType(\"items\", localMessageItem, cell.items, cellLocalMessageItemIDs, originalMessage, fromHistory, nestedLocalMessageItems, nestedMessageItem => isSupportedMessageItemInBody(localMessageItem.item, nestedMessageItem), false);\n      return cellLocalMessageItemIDs;\n    }));\n  } else if (isCarouselResponseType(item)) {\n    localMessageItem.ui_state.itemsLocalMessageItemIDs = [];\n    createLocalMessageItemsForNestedType(\"items\", localMessageItem, item.items, localMessageItem.ui_state.itemsLocalMessageItemIDs, originalMessage, fromHistory, nestedLocalMessageItems, nestedMessageItem => isSupportedMessageItemInBody(item, nestedMessageItem), allowFooter);\n  } else {\n    const bodyItems = item.body || item.panel?.body;\n    if (bodyItems) {\n      localMessageItem.ui_state.bodyLocalMessageItemIDs = [];\n      createLocalMessageItemsForNestedType(\"body\", localMessageItem, bodyItems, localMessageItem.ui_state.bodyLocalMessageItemIDs, originalMessage, fromHistory, nestedLocalMessageItems, nestedMessageItem => isSupportedMessageItemInBody(item, nestedMessageItem), !isShowPanelButtonType(item));\n    }\n    if (!allowFooter) {\n      return;\n    }\n    const footerItems = item.footer || item.panel?.footer;\n    if (footerItems) {\n      localMessageItem.ui_state.footerLocalMessageItemIDs = [];\n      createLocalMessageItemsForNestedType(\"footer\", localMessageItem, footerItems, localMessageItem.ui_state.footerLocalMessageItemIDs, originalMessage, fromHistory, nestedLocalMessageItems, nestedMessageItem => isSupportedMessageItemInFooter(item, nestedMessageItem), !isShowPanelButtonType(item));\n    }\n  }\n}\n\nfunction createLocalMessageItemsForNestedType(type, localMessageItem, items, nestedMessageItemIDs, originalMessage, fromHistory, nestedLocalMessageItems, isSupported, allowFooter) {\n  items.forEach(nestedMessageItem => {\n    if (isSupported(nestedMessageItem)) {\n      const nestedLocalMessageItem = outputItemToLocalItem(nestedMessageItem, originalMessage, false, true);\n      nestedMessageItemIDs.push(nestedLocalMessageItem.ui_state.id);\n      nestedLocalMessageItems.push(nestedLocalMessageItem);\n      if (isResponseWithNestedItems(nestedLocalMessageItem.item)) {\n        createLocalMessageItemsForNestedMessageItems(nestedLocalMessageItem, originalMessage, fromHistory, nestedLocalMessageItems, allowFooter);\n      }\n    } else {\n      consoleError(`The \"${localMessageItem.item.response_type}\" response type does not support \"${nestedMessageItem.response_type}\" in \"${type}\" array.`);\n    }\n  });\n}\n\nfunction isSupportedMessageItemInBody(rootMessageItem, nestedMessageItem) {\n  switch (rootMessageItem.response_type) {\n   case MessageResponseTypes.CARD:\n    return !isCardResponseType(nestedMessageItem) && isItemSupportedInResponseBody(nestedMessageItem);\n\n   case MessageResponseTypes.CAROUSEL:\n    return isCardResponseType(nestedMessageItem);\n\n   case MessageResponseTypes.BUTTON:\n    return rootMessageItem.button_type === ButtonItemType.SHOW_PANEL && isItemSupportedInResponseBody(nestedMessageItem);\n\n   case MessageResponseTypes.GRID:\n    return !isCardResponseType(nestedMessageItem) && isItemSupportedInResponseBody(nestedMessageItem);\n\n   default:\n    return false;\n  }\n}\n\nfunction isSupportedMessageItemInFooter(rootMessageItem, nestedMessageItem) {\n  if (isButtonResponseType(nestedMessageItem)) {\n    if (isShowPanelButtonType(rootMessageItem)) {\n      return !isShowPanelButtonType(nestedMessageItem);\n    }\n    return true;\n  }\n  return false;\n}\n\nexport { createLocalMessageForInlineError, createLocalMessageItemsForNestedMessageItems, outputItemToLocalItem };\n","import FocusTrap from \"focus-trap-react\";\n\nimport React, { useRef, useImperativeHandle } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { IS_MOBILE } from \"../utils/browserUtils.js\";\n\nimport { Header as HeaderExport } from \"./header/Header.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function BasePanelComponent({className: className, children: children, isOpen: isOpen, hidePanelHeader: hidePanelHeader, labelBackButton: labelBackButton, title: title, hideBackButton: hideBackButton, useAITheme: useAITheme, onClickCloseAndRestart: onClickCloseAndRestart, onClickRestart: onClickRestart, testIdPrefix: testIdPrefix, ...headerProps}, ref) {\n  const showRestartButton = useSelector(state => state.config.public.headerConfig?.showRestartButton);\n  const headerRef = useRef();\n  useImperativeHandle(ref, () => headerRef.current);\n  return React.createElement(FocusTrap, {\n    active: isOpen,\n    focusTrapOptions: {\n      clickOutsideDeactivates: true,\n      returnFocusOnDeactivate: !IS_MOBILE,\n      preventScroll: true\n    }\n  }, React.createElement(\"div\", {\n    className: className\n  }, !hidePanelHeader && React.createElement(HeaderExport, {\n    ...headerProps,\n    ref: headerRef,\n    showRestartButton: showRestartButton,\n    onClickRestart: onClickRestart,\n    onCloseAndRestart: onClickCloseAndRestart,\n    showBackButton: !hideBackButton,\n    labelBackButton: labelBackButton,\n    displayName: title,\n    useAITheme: useAITheme,\n    testIdPrefix: testIdPrefix,\n    showCenter: true\n  }), React.createElement(\"div\", {\n    className: \"WACPanelContent\"\n  }, children)));\n}\n\nconst BasePanelComponentExport = React.memo(React.forwardRef(BasePanelComponent));\n\nexport { BasePanelComponentExport as BasePanelComponent };\n","import { uuid } from \"../utils/lang/uuid.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const CHANGE_STATE = \"CHANGE_STATE\";\n\nconst UPDATE_BOT_NAME = \"UPDATE_BOT_NAME\";\n\nconst UPDATE_BOT_AVATAR_URL = \"UPDATE_BOT_AVATAR_URL\";\n\nconst UPDATE_LAUNCHER_AVATAR_URL = \"UPDATE_LAUNCHER_AVATAR_URL\";\n\nconst UPDATE_MAIN_HEADER_TITLE = \"UPDATE_MAIN_HEADER_TITLE\";\n\nconst HYDRATE_CHAT = \"HYDRATE_CHAT\";\n\nconst HYDRATE_MESSAGE_HISTORY = \"HYDRATE_MESSAGE_HISTORY\";\n\nconst ADD_LOCAL_MESSAGE_ITEM = \"ADD_LOCAL_MESSAGE_ITEM\";\n\nconst REMOVE_MESSAGES = \"REMOVE_MESSAGES\";\n\nconst UPDATE_LOCAL_MESSAGE_ITEM = \"UPDATE_LOCAL_MESSAGE_ITEM\";\n\nconst SET_APP_STATE_VALUE = \"SET_APP_STATE_VALUE\";\n\nconst ADD_IS_TYPING_COUNTER = \"ADD_IS_TYPING_COUNTER\";\n\nconst ADD_IS_LOADING_COUNTER = \"ADD_IS_LOADING_COUNTER\";\n\nconst ADD_IS_HYDRATING_COUNTER = \"ADD_IS_HYDRATING_COUNTER\";\n\nconst SET_VIEW_STATE = \"SET_VIEW_STATE\";\n\nconst SET_VIEW_CHANGING = \"SET_VIEW_CHANGING\";\n\nconst SET_INITIAL_VIEW_CHANGE_COMPLETE = \"SET_INITIAL_VIEW_CHANGE_COMPLETE\";\n\nconst UPDATE_CSS_VARIABLES = \"UPDATE_CSS_VARIABLES\";\n\nconst MESSAGE_SET_OPTION_SELECTED = \"MESSAGE_SET_OPTION_SELECTED\";\n\nconst SET_MESSAGE_UI_PROPERTY = \"SET_MESSAGE_UI_PROPERTY\";\n\nconst SET_MESSAGE_HISTORY_PROPERTY = \"SET_MESSAGE_HISTORY_PROPERTY\";\n\nconst MERGE_HISTORY = \"MERGE_HISTORY\";\n\nconst SET_LAUNCHER_PROPERTY = \"SET_LAUNCHER_PROPERTY\";\n\nconst SET_LAUNCHER_CONFIG_PROPERTY = \"SET_LAUNCHER_CONFIG_PROPERTY\";\n\nconst ANNOUNCE_MESSAGE = \"ANNOUNCE_MESSAGE\";\n\nconst SET_CHAT_MESSAGES_PROPERTY = \"SET_CHAT_MESSAGES_PROPERTY\";\n\nconst RESTART_CONVERSATION = \"RESTART_CONVERSATION\";\n\nconst ACCEPTED_DISCLAIMER = \"ACCEPTED_DISCLAIMER\";\n\nconst ADD_MESSAGE = \"ADD_MESSAGE\";\n\nconst UPDATE_HOME_SCREEN_CONFIG = \"UPDATE_HOME_SCREEN_CONFIG\";\n\nconst UPDATE_HAS_SENT_NON_WELCOME_MESSAGE = \"UPDATE_HAS_SENT_NON_WELCOME_MESSAGE\";\n\nconst UPDATE_PERSISTED_CHAT_STATE = \"UPDATE_PERSISTED_CHAT_STATE\";\n\nconst SET_TOUR_DATA = \"SET_TOUR_DATA\";\n\nconst CLEAR_TOUR_DATA = \"CLEAR_TOUR_DATA\";\n\nconst CHANGE_STEP_IN_TOUR = \"CHANGE_STEP_IN_TOUR\";\n\nconst SET_HOME_SCREEN_IS_OPEN = \"SET_HOME_SCREEN_IS_OPEN\";\n\nconst UPDATE_LAUNCHER_CONFIG = \"UPDATE_LAUNCHER_CONFIG\";\n\nconst UPDATE_MESSAGE = \"UPDATE_MESSAGE\";\n\nconst SET_LAUNCHER_MINIMIZED = \"SET_LAUNCHER_MINIMIZED\";\n\nconst CLOSE_IFRAME_PANEL = \"CLOSE_IFRAME_PANEL\";\n\nconst OPEN_IFRAME_CONTENT = \"OPEN_IFRAME_CONTENT\";\n\nconst SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN = \"SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN\";\n\nconst SET_CUSTOM_PANEL_OPTIONS = \"SET_CUSTOM_PANEL_OPTIONS\";\n\nconst SET_CUSTOM_PANEL_OPEN = \"SET_CUSTOM_PANEL_OPEN\";\n\nconst TOGGLE_HOME_SCREEN = \"GO_BACK_TO_HOME\";\n\nconst UPDATE_INPUT_STATE = \"UPDATE_INPUT_STATE\";\n\nconst SET_IS_BROWSER_PAGE_VISIBLE = \"SET_IS_PAGE_VISIBLE\";\n\nconst ADD_INPUT_FILE = \"ADD_INPUT_FILE\";\n\nconst CLEAR_INPUT_FILES = \"CLEAR_INPUT_FILES\";\n\nconst REMOVE_INPUT_FILE = \"REMOVE_INPUT_FILE\";\n\nconst REMOVE_LOCAL_MESSAGE_ITEM = \"REMOVE_LOCAL_MESSAGE_ITEM\";\n\nconst FILE_UPLOAD_INPUT_ERROR = \"FILE_UPLOAD_INPUT_ERROR\";\n\nconst ADD_NESTED_MESSAGES = \"ADD_NESTED_MESSAGES\";\n\nconst SET_RESPONSE_PANEL_IS_OPEN = \"SET_RESPONSE_PANEL_IS_OPEN\";\n\nconst SET_RESPONSE_PANEL_CONTENT = \"SET_PANEL_RESPONSE_CONTENT\";\n\nconst STREAMING_ADD_CHUNK = \"STREAMING_ADD_CHUNK\";\n\nconst STREAMING_START = \"STREAMING_START\";\n\nconst STREAMING_MERGE_HISTORY = \"STREAMING_MERGE_HISTORY\";\n\nconst ADD_NOTIFICATION = \"ADD_NOTIFICATION\";\n\nconst REMOVE_ALL_NOTIFICATIONS = \"REMOVE_ALL_NOTIFICATIONS\";\n\nconst REMOVE_NOTIFICATIONS = \"REMOVE_NOTIFICATIONS\";\n\nconst UPDATE_CHAT_HEADER_CONFIG = \"UPDATE_CHAT_HEADER_CONFIG\";\n\nconst UPDATE_MAX_VISIBLE_HEADER_OBJECTS = \"UPDATE_MAX_VISIBLE_HEADER_OBJECTS\";\n\nconst SET_STOP_STREAMING_BUTTON_VISIBLE = \"SET_STOP_STREAMING_BUTTON_VISIBLE\";\n\nconst SET_STOP_STREAMING_BUTTON_DISABLED = \"SET_STOP_STREAMING_BUTTON_DISABLED\";\n\nconst SET_STREAM_ID = \"SET_STREAM_ID\";\n\nconst UPDATE_MAIN_HEADER_AVATAR = \"UPDATE_MAIN_HEADER_AVATAR\";\n\nconst actions = {\n  changeState(partialState) {\n    return {\n      type: CHANGE_STATE,\n      partialState: partialState\n    };\n  },\n  chatWasHydrated() {\n    return {\n      type: HYDRATE_CHAT\n    };\n  },\n  hydrateMessageHistory(messageHistory) {\n    return {\n      type: HYDRATE_MESSAGE_HISTORY,\n      messageHistory: messageHistory\n    };\n  },\n  removeMessages(messageIDs) {\n    return {\n      type: REMOVE_MESSAGES,\n      messageIDs: messageIDs\n    };\n  },\n  restartConversation() {\n    return {\n      type: RESTART_CONVERSATION\n    };\n  },\n  addLocalMessageItem(messageItem, message, addMessage, addAfterID) {\n    return {\n      type: ADD_LOCAL_MESSAGE_ITEM,\n      messageItem: messageItem,\n      message: message,\n      addMessage: addMessage,\n      addAfterID: addAfterID\n    };\n  },\n  addMessage(message) {\n    return {\n      type: ADD_MESSAGE,\n      message: message\n    };\n  },\n  updateLocalMessageItem(messageItem) {\n    return {\n      type: UPDATE_LOCAL_MESSAGE_ITEM,\n      messageItem: messageItem\n    };\n  },\n  updateMessage(message) {\n    return {\n      type: UPDATE_MESSAGE,\n      message: message\n    };\n  },\n  messageSetOptionSelected(messageID, sentMessage) {\n    return {\n      type: MESSAGE_SET_OPTION_SELECTED,\n      messageID: messageID,\n      sentMessage: sentMessage\n    };\n  },\n  updatePersistedChatState(chatState) {\n    return {\n      type: UPDATE_PERSISTED_CHAT_STATE,\n      chatState: chatState\n    };\n  },\n  setTourData(newActiveTourMessageID) {\n    return {\n      type: SET_TOUR_DATA,\n      newActiveTourMessageID: newActiveTourMessageID\n    };\n  },\n  clearTourData() {\n    return {\n      type: CLEAR_TOUR_DATA\n    };\n  },\n  changeStepInTour(newStepNumber) {\n    return {\n      type: CHANGE_STEP_IN_TOUR,\n      newStepNumber: newStepNumber\n    };\n  },\n  updateHasSentNonWelcomeMessage(hasSentNonWelcomeMessage) {\n    return {\n      type: UPDATE_HAS_SENT_NON_WELCOME_MESSAGE,\n      hasSentNonWelcomeMessage: hasSentNonWelcomeMessage\n    };\n  },\n  setAppStateValue(key, value) {\n    return {\n      type: SET_APP_STATE_VALUE,\n      key: key,\n      value: value\n    };\n  },\n  addIsTypingCounter(addToIsTyping) {\n    return {\n      type: ADD_IS_TYPING_COUNTER,\n      addToIsTyping: addToIsTyping\n    };\n  },\n  addIsLoadingCounter(addToIsLoading) {\n    return {\n      type: ADD_IS_LOADING_COUNTER,\n      addToIsLoading: addToIsLoading\n    };\n  },\n  addIsHydratingCounter(addToIsHydrating) {\n    return {\n      type: ADD_IS_HYDRATING_COUNTER,\n      addToIsHydrating: addToIsHydrating\n    };\n  },\n  updateBotName(name) {\n    return {\n      type: UPDATE_BOT_NAME,\n      name: name\n    };\n  },\n  updateMainHeaderTitle(title) {\n    return {\n      type: UPDATE_MAIN_HEADER_TITLE,\n      title: title\n    };\n  },\n  updateBotAvatarURL(url) {\n    return {\n      type: UPDATE_BOT_AVATAR_URL,\n      url: url\n    };\n  },\n  updateCSSVariables(variables, publicVars, whiteLabelVariables) {\n    return {\n      type: UPDATE_CSS_VARIABLES,\n      variables: variables,\n      publicVars: publicVars,\n      whiteLabelVariables: whiteLabelVariables\n    };\n  },\n  updateHomeScreenConfig(homeScreenConfig) {\n    return {\n      type: UPDATE_HOME_SCREEN_CONFIG,\n      homeScreenConfig: homeScreenConfig\n    };\n  },\n  setViewState(viewState) {\n    return {\n      type: SET_VIEW_STATE,\n      viewState: viewState\n    };\n  },\n  setViewChanging(viewChanging) {\n    return {\n      type: SET_VIEW_CHANGING,\n      viewChanging: viewChanging\n    };\n  },\n  setInitialViewChangeComplete(changeComplete) {\n    return {\n      type: SET_INITIAL_VIEW_CHANGE_COMPLETE,\n      changeComplete: changeComplete\n    };\n  },\n  setMessageUIProperty(localMessageID, propertyName, propertyValue) {\n    return {\n      type: SET_MESSAGE_UI_PROPERTY,\n      localMessageID: localMessageID,\n      propertyName: propertyName,\n      propertyValue: propertyValue\n    };\n  },\n  setLauncherProperty(propertyName, propertyValue) {\n    return {\n      type: SET_LAUNCHER_PROPERTY,\n      propertyName: propertyName,\n      propertyValue: propertyValue\n    };\n  },\n  setLauncherConfigProperty(propertyName, propertyValue, launcherType) {\n    return {\n      type: SET_LAUNCHER_CONFIG_PROPERTY,\n      propertyName: propertyName,\n      propertyValue: propertyValue,\n      launcherType: launcherType\n    };\n  },\n  setMessageHistoryProperty(messageID, propertyName, propertyValue) {\n    return {\n      type: SET_MESSAGE_HISTORY_PROPERTY,\n      messageID: messageID,\n      propertyName: propertyName,\n      propertyValue: propertyValue\n    };\n  },\n  mergeMessageHistory(messageID, history) {\n    return {\n      type: MERGE_HISTORY,\n      messageID: messageID,\n      history: history\n    };\n  },\n  setMessageErrorState(messageID, errorState) {\n    return actions.setMessageHistoryProperty(messageID, \"error_state\", errorState);\n  },\n  setMessageWasAnnounced(messageID) {\n    return actions.setMessageUIProperty(messageID, \"needsAnnouncement\", false);\n  },\n  announceMessage(message) {\n    return {\n      type: ANNOUNCE_MESSAGE,\n      message: message\n    };\n  },\n  setChatMessagesStateProperty(propertyName, propertyValue) {\n    return {\n      type: SET_CHAT_MESSAGES_PROPERTY,\n      propertyName: propertyName,\n      propertyValue: propertyValue\n    };\n  },\n  addNotification(notification) {\n    const notificationID = uuid();\n    return {\n      type: ADD_NOTIFICATION,\n      notificationID: notificationID,\n      notification: notification\n    };\n  },\n  removeNotifications({groupID: groupID, notificationID: notificationID}) {\n    return {\n      type: REMOVE_NOTIFICATIONS,\n      groupID: groupID,\n      notificationID: notificationID\n    };\n  },\n  removeAllNotifications() {\n    return {\n      type: REMOVE_ALL_NOTIFICATIONS\n    };\n  },\n  acceptDisclaimer() {\n    return {\n      type: ACCEPTED_DISCLAIMER\n    };\n  },\n  setHomeScreenIsOpen(isOpen) {\n    return {\n      type: SET_HOME_SCREEN_IS_OPEN,\n      isOpen: isOpen\n    };\n  },\n  updateLauncherConfig(launcherConfig) {\n    return {\n      type: UPDATE_LAUNCHER_CONFIG,\n      launcherConfig: launcherConfig\n    };\n  },\n  setLauncherMinimized() {\n    return {\n      type: SET_LAUNCHER_MINIMIZED\n    };\n  },\n  closeIFramePanel() {\n    return {\n      type: CLOSE_IFRAME_PANEL\n    };\n  },\n  setIFrameContent(messageItem) {\n    return {\n      type: OPEN_IFRAME_CONTENT,\n      messageItem: messageItem\n    };\n  },\n  setViewSourcePanelIsOpen(isOpen, citationItem, relatedSearchResult) {\n    return {\n      type: SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN,\n      isOpen: isOpen,\n      citationItem: citationItem,\n      relatedSearchResult: relatedSearchResult\n    };\n  },\n  setCustomPanelConfigOptions(options) {\n    return {\n      type: SET_CUSTOM_PANEL_OPTIONS,\n      options: options\n    };\n  },\n  setCustomPanelOpen(isOpen) {\n    return {\n      type: SET_CUSTOM_PANEL_OPEN,\n      isOpen: isOpen\n    };\n  },\n  toggleHomeScreen() {\n    return {\n      type: TOGGLE_HOME_SCREEN\n    };\n  },\n  updateInputState(newState, isInputToAgent) {\n    return {\n      type: UPDATE_INPUT_STATE,\n      newState: newState,\n      isInputToAgent: isInputToAgent\n    };\n  },\n  setIsBrowserPageVisible(isVisible) {\n    return {\n      type: SET_IS_BROWSER_PAGE_VISIBLE,\n      isVisible: isVisible\n    };\n  },\n  addInputFile(file, isInputToAgent) {\n    return {\n      type: ADD_INPUT_FILE,\n      file: file,\n      isInputToAgent: isInputToAgent\n    };\n  },\n  removeFileUpload(fileID, isInputToAgent) {\n    return {\n      type: REMOVE_INPUT_FILE,\n      fileID: fileID,\n      isInputToAgent: isInputToAgent\n    };\n  },\n  removeLocalMessageItem(localMessageItemID) {\n    return {\n      type: REMOVE_LOCAL_MESSAGE_ITEM,\n      localMessageItemID: localMessageItemID\n    };\n  },\n  fileUploadInputError(fileID, errorMessage, isInputToAgent) {\n    return {\n      type: FILE_UPLOAD_INPUT_ERROR,\n      fileID: fileID,\n      errorMessage: errorMessage,\n      isInputToAgent: isInputToAgent\n    };\n  },\n  clearInputFiles(isInputToAgent) {\n    return {\n      type: CLEAR_INPUT_FILES,\n      isInputToAgent: isInputToAgent\n    };\n  },\n  addNestedMessages(localMessageItems) {\n    return {\n      type: ADD_NESTED_MESSAGES,\n      localMessageItems: localMessageItems\n    };\n  },\n  setResponsePanelIsOpen(isOpen) {\n    return {\n      type: SET_RESPONSE_PANEL_IS_OPEN,\n      isOpen: isOpen\n    };\n  },\n  setResponsePanelContent(localMessageItem, isMessageForInput = false) {\n    return {\n      type: SET_RESPONSE_PANEL_CONTENT,\n      localMessageItem: localMessageItem,\n      isMessageForInput: isMessageForInput\n    };\n  },\n  streamingStart(messageID) {\n    return {\n      type: STREAMING_START,\n      messageID: messageID\n    };\n  },\n  streamingMergeHistory(messageID, history) {\n    return {\n      type: STREAMING_MERGE_HISTORY,\n      messageID: messageID,\n      history: history\n    };\n  },\n  streamingAddChunk(fullMessageID, chunkItem, isCompleteItem, disableFadeAnimation) {\n    return {\n      type: STREAMING_ADD_CHUNK,\n      fullMessageID: fullMessageID,\n      chunkItem: chunkItem,\n      isCompleteItem: isCompleteItem,\n      disableFadeAnimation: disableFadeAnimation\n    };\n  },\n  updateChatHeaderConfig(chatHeaderConfig) {\n    return {\n      type: UPDATE_CHAT_HEADER_CONFIG,\n      chatHeaderConfig: chatHeaderConfig\n    };\n  },\n  setMaxVisibleHeaderObjects(maxTotal) {\n    return {\n      type: UPDATE_MAX_VISIBLE_HEADER_OBJECTS,\n      maxTotal: maxTotal\n    };\n  },\n  setStopStreamingButtonVisible(isVisible) {\n    return {\n      type: SET_STOP_STREAMING_BUTTON_VISIBLE,\n      isVisible: isVisible\n    };\n  },\n  setStopStreamingButtonDisabled(isDisabled) {\n    return {\n      type: SET_STOP_STREAMING_BUTTON_DISABLED,\n      isDisabled: isDisabled\n    };\n  },\n  setStreamID(currentStreamID) {\n    return {\n      type: SET_STREAM_ID,\n      currentStreamID: currentStreamID\n    };\n  },\n  updateMainHeaderAvatar(config) {\n    return {\n      type: UPDATE_MAIN_HEADER_AVATAR,\n      config: config\n    };\n  }\n};\n\nexport { ACCEPTED_DISCLAIMER, ADD_INPUT_FILE, ADD_IS_HYDRATING_COUNTER, ADD_IS_LOADING_COUNTER, ADD_IS_TYPING_COUNTER, ADD_LOCAL_MESSAGE_ITEM, ADD_MESSAGE, ADD_NESTED_MESSAGES, ADD_NOTIFICATION, ANNOUNCE_MESSAGE, CHANGE_STATE, CHANGE_STEP_IN_TOUR, CLEAR_INPUT_FILES, CLEAR_TOUR_DATA, CLOSE_IFRAME_PANEL, FILE_UPLOAD_INPUT_ERROR, HYDRATE_CHAT, HYDRATE_MESSAGE_HISTORY, MERGE_HISTORY, MESSAGE_SET_OPTION_SELECTED, OPEN_IFRAME_CONTENT, REMOVE_ALL_NOTIFICATIONS, REMOVE_INPUT_FILE, REMOVE_LOCAL_MESSAGE_ITEM, REMOVE_MESSAGES, REMOVE_NOTIFICATIONS, RESTART_CONVERSATION, SET_APP_STATE_VALUE, SET_CHAT_MESSAGES_PROPERTY, SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN, SET_CUSTOM_PANEL_OPEN, SET_CUSTOM_PANEL_OPTIONS, SET_HOME_SCREEN_IS_OPEN, SET_INITIAL_VIEW_CHANGE_COMPLETE, SET_IS_BROWSER_PAGE_VISIBLE, SET_LAUNCHER_CONFIG_PROPERTY, SET_LAUNCHER_MINIMIZED, SET_LAUNCHER_PROPERTY, SET_MESSAGE_HISTORY_PROPERTY, SET_MESSAGE_UI_PROPERTY, SET_RESPONSE_PANEL_CONTENT, SET_RESPONSE_PANEL_IS_OPEN, SET_STOP_STREAMING_BUTTON_DISABLED, SET_STOP_STREAMING_BUTTON_VISIBLE, SET_STREAM_ID, SET_TOUR_DATA, SET_VIEW_CHANGING, SET_VIEW_STATE, STREAMING_ADD_CHUNK, STREAMING_MERGE_HISTORY, STREAMING_START, TOGGLE_HOME_SCREEN, UPDATE_BOT_AVATAR_URL, UPDATE_BOT_NAME, UPDATE_CHAT_HEADER_CONFIG, UPDATE_CSS_VARIABLES, UPDATE_HAS_SENT_NON_WELCOME_MESSAGE, UPDATE_HOME_SCREEN_CONFIG, UPDATE_INPUT_STATE, UPDATE_LAUNCHER_AVATAR_URL, UPDATE_LAUNCHER_CONFIG, UPDATE_LOCAL_MESSAGE_ITEM, UPDATE_MAIN_HEADER_AVATAR, UPDATE_MAIN_HEADER_TITLE, UPDATE_MAX_VISIBLE_HEADER_OBJECTS, UPDATE_MESSAGE, UPDATE_PERSISTED_CHAT_STATE, actions as default };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction withoutEmptyStarters(config) {\n  let newConfig = config;\n  if (config?.starters?.buttons?.length) {\n    newConfig = {\n      allow_return: true,\n      ...config,\n      starters: {\n        ...config.starters,\n        buttons: config.starters.buttons.filter(button => Boolean(button.label?.trim()))\n      }\n    };\n    if (!newConfig?.starters?.buttons?.length) {\n      newConfig.starters.is_on = false;\n    }\n  }\n  return newConfig;\n}\n\nexport { withoutEmptyStarters };\n","import { createIntl } from \"react-intl\";\n\nimport actions from \"../store/actions.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function setIntl(serviceManager, locale, messages) {\n  serviceManager.intl = createIntl({\n    locale: locale,\n    messages: messages\n  });\n  serviceManager.store.dispatch(actions.setAppStateValue(\"languagePack\", messages));\n  serviceManager.store.dispatch(actions.setAppStateValue(\"locale\", locale));\n}\n\nexport { setIntl };\n","import dayjs from \"dayjs\";\n\nimport cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport actions from \"./store/actions.js\";\n\nimport { selectInputState } from \"./store/selectors.js\";\n\nimport \"../../types/state/AppState.js\";\n\nimport { withoutEmptyStarters } from \"./utils/homeScreenUtils.js\";\n\nimport { loadLocale, loadLanguagePack } from \"./utils/languages.js\";\n\nimport { consoleDebug, debugLog, consoleError, consoleWarn } from \"./utils/miscUtils.js\";\n\nimport { ViewChangeReason, MessageSendSource } from \"../../types/events/eventBusTypes.js\";\n\nimport { setIntl } from \"./utils/intlUtils.js\";\n\nimport { ViewType } from \"../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function createChatInstance({serviceManager: serviceManager, callRender: callRender}) {\n  let wasRendered = false;\n  function getMainWindow() {\n    return {\n      addClassName: name => serviceManager.mainWindow?.addClassName(name),\n      removeClassName: name => serviceManager.mainWindow?.removeClassName(name)\n    };\n  }\n  function getMessageInput() {\n    return {\n      getHTMLElement: () => serviceManager.mainWindow?.getMessageInput()?.getHTMLElement(),\n      setValue: value => serviceManager.mainWindow?.getMessageInput()?.setValue(value),\n      setEnableEnterKey: value => serviceManager.mainWindow?.getMessageInput()?.setEnableEnterKey(value),\n      addChangeListener: listener => serviceManager.mainWindow?.getMessageInput()?.addChangeListener(listener),\n      removeChangeListener: listener => serviceManager.mainWindow?.getMessageInput()?.removeChangeListener(listener)\n    };\n  }\n  function getHomeScreenInput() {\n    return {\n      getHTMLElement: () => serviceManager.mainWindow?.getHomeScreenInput()?.getHTMLElement(),\n      setValue: value => serviceManager.mainWindow?.getHomeScreenInput()?.setValue(value),\n      setEnableEnterKey: value => serviceManager.mainWindow?.getHomeScreenInput()?.setEnableEnterKey(value),\n      addChangeListener: listener => serviceManager.mainWindow?.getHomeScreenInput()?.addChangeListener(listener),\n      removeChangeListener: listener => serviceManager.mainWindow?.getHomeScreenInput()?.removeChangeListener(listener)\n    };\n  }\n  let instance = {\n    render: () => {\n      if (wasRendered) {\n        consoleError(\"The render function has already been called!\");\n        return Promise.resolve(instance);\n      }\n      wasRendered = true;\n      return callRender();\n    },\n    on: handlers => {\n      serviceManager.eventBus.on(handlers);\n      return instance;\n    },\n    off: handlers => {\n      serviceManager.eventBus.off(handlers);\n      return instance;\n    },\n    once: handlers => {\n      serviceManager.eventBus.once(handlers);\n      return instance;\n    },\n    updateLanguagePack: newPack => {\n      debugLog(\"Called instance.updateLanguagePack\", newPack);\n      return serviceManager.actions.updateLanguagePack(newPack);\n    },\n    updateLocale: newLocale => {\n      debugLog(\"Called instance.updateLocale\", newLocale);\n      const localePromise = loadLocale(newLocale);\n      const languagePackPromise = loadLanguagePack(serviceManager.store.getState().languagePack);\n      return Promise.all([ localePromise, languagePackPromise ]).then(([localePack, languagePack]) => {\n        dayjs.locale(localePack);\n        setIntl(serviceManager, localePack.name, languagePack);\n        serviceManager.messageService.pendingLocale = true;\n        serviceManager.messageService.localeIsExplicit = true;\n      });\n    },\n    updateCSSVariables: (variables, whiteLabelVariables) => {\n      debugLog(\"Called instance.updateCSSVariables\", variables);\n      return serviceManager.actions.updateCSSVariables(variables, whiteLabelVariables);\n    },\n    send: async (message, options) => {\n      debugLog(\"Called instance.send\", message, options);\n      if (selectInputState(serviceManager.store.getState()).isReadonly) {\n        throw new Error(\"You are unable to send messages in read only mode.\");\n      }\n      return serviceManager.actions.send(message, MessageSendSource.INSTANCE_SEND, options);\n    },\n    doAutoScroll: (options = {}) => {\n      debugLog(\"Called instance.doAutoScroll\", options);\n      serviceManager.mainWindow?.doAutoScroll?.(options);\n    },\n    destroy: () => {\n      debugLog(\"Called instance.destroy\");\n      serviceManager.store.dispatch(actions.setAppStateValue(\"isDestroyed\", true));\n      serviceManager.container?.remove();\n      instance = undefined;\n    },\n    updateAssistantInputFieldVisibility: isVisible => {\n      debugLog(\"Called instance.updateAssistantInputFieldVisibility\", isVisible);\n      serviceManager.store.dispatch(actions.updateInputState({\n        fieldVisible: isVisible\n      }, false));\n    },\n    updateInputIsDisabled: isDisabled => {\n      debugLog(\"Called instance.updateInputIsDisabled\", isDisabled);\n      serviceManager.store.dispatch(actions.updateInputState({\n        isReadonly: isDisabled\n      }, false));\n    },\n    updateBotUnreadIndicatorVisibility: isVisible => {\n      debugLog(\"Called instance.updateBotUnreadIndicatorVisibility\", isVisible);\n      serviceManager.store.dispatch(actions.setLauncherProperty(\"showUnreadIndicator\", isVisible));\n    },\n    changeView: async newView => {\n      debugLog(\"Called instance.changeView\", newView);\n      let issueWithNewView = false;\n      if (!wasRendered) {\n        consoleError(`You tried to call \"changeView\" without ever having called the \"render\" method. There is no view to change!`);\n        issueWithNewView = true;\n      }\n      const viewTypeValues = Object.values(ViewType);\n      if (typeof newView === \"string\") {\n        if (!viewTypeValues.includes(newView)) {\n          consoleError(`You tried to change the view but the view you specified is not a valid view name. Please use` + ` the valid view names; ${viewTypeValues.join(\", \")}.`);\n          issueWithNewView = true;\n        }\n      } else if (typeof newView === \"object\") {\n        Object.keys(newView).forEach(key => {\n          if (!viewTypeValues.includes(key)) {\n            consoleError(`You tried to change the state of multiple views by providing an object, however you included the key` + ` \"${key}\" within the object which is not a valid view name. Please use the valid view names; ` + `${viewTypeValues.join(\", \")}.`);\n            issueWithNewView = true;\n          }\n        });\n      } else {\n        consoleError(\"You tried to change the view but the view you provided was not a string or an object. You can either change\" + ' to one of the supported views by providing a string, ex. \"launcher\", \"mainWindow\", or \"tour\". Or you can' + ' change the state of multiple views by providing an object, ex. { \"launcher\": true, \"mainWindow\": false,' + ' \"tour\": true }. Please use one of these supported options.');\n        issueWithNewView = true;\n      }\n      if (!issueWithNewView) {\n        await serviceManager.actions.changeView(newView, {\n          viewChangeReason: ViewChangeReason.CALLED_CHANGE_VIEW\n        });\n      }\n    },\n    notifications: {\n      addNotification: notification => {\n        debugLog(\"Called instance.addNotification\", notification);\n        serviceManager.actions.addNotification(notification);\n      },\n      removeNotifications: groupID => {\n        debugLog(\"Called instance.removeNotifications\", groupID);\n        serviceManager.actions.removeNotification(groupID);\n      },\n      removeAllNotifications: () => {\n        debugLog(\"Called instance.removeAllNotifications\");\n        serviceManager.actions.removeAllNotifications();\n      }\n    },\n    updateMainHeaderTitle: title => {\n      debugLog(\"Called instance.updateMainHeaderTitle\", title);\n      if (!title) {\n        title = null;\n      }\n      serviceManager.actions.updateMainHeaderTitle(title);\n    },\n    updateHomeScreenConfig: homeScreenConfig => {\n      debugLog(\"Called instance.updateHomeScreenConfig\", homeScreenConfig);\n      const homeScreenConfigClone = cloneDeep(homeScreenConfig);\n      const isAIThemeEnabled = serviceManager.store.getState().theme.useAITheme;\n      if (isAIThemeEnabled) {\n        if (homeScreenConfig?.background) {\n          consoleWarn(\"The home screen background can not be changed when the AI theme is enabled.\");\n          delete homeScreenConfigClone.background;\n        }\n      }\n      serviceManager.actions.updateHomeScreenConfig(withoutEmptyStarters(homeScreenConfigClone));\n    },\n    getState: () => serviceManager.actions.getPublicWebChatState(),\n    writeableElements: createWriteableElementsProxy(serviceManager),\n    scrollToMessage: (messageID, animate) => {\n      debugLog(\"Called instance.scrollToMessage\", messageID, animate);\n      serviceManager.mainWindow?.doScrollToMessage(messageID, animate);\n    },\n    updateLauncherConfig: config => serviceManager.actions.updateLauncherConfig(config),\n    customPanels: serviceManager.customPanelManager,\n    updateCustomMenuOptions: options => {\n      debugLog(\"Called instance.updateCustomMenuOptions\", options);\n      serviceManager.store.dispatch(actions.setAppStateValue(\"customMenuOptions\", options));\n    },\n    restartConversation: async () => {\n      debugLog(\"Called instance.restartConversation\");\n      return serviceManager.actions.restartConversation();\n    },\n    agentEndConversation: () => {\n      debugLog(\"Called instance.agentEndConversation\");\n      consoleWarn(`The instance.agentEndConversation method is deprecated. Use instance.serviceDesk.endConversation instead.`);\n      return serviceManager.actions.agentEndConversation(false);\n    },\n    updateIsTypingCounter(direction) {\n      debugLog(\"Called instance.updateIsTypingCounter\", direction);\n      const {store: store} = serviceManager;\n      if (direction === \"increase\") {\n        store.dispatch(actions.addIsTypingCounter(1));\n      } else if (direction === \"decrease\") {\n        if (store.getState().botMessageState.isTypingCounter <= 0) {\n          consoleError(\"You cannot decrease the typing counter when it is already <= 0\");\n          return;\n        }\n        store.dispatch(actions.addIsTypingCounter(-1));\n      } else {\n        consoleError(`[updateIsTypingCounter] Invalid direction: ${direction}. Valid values are \"increase\" and \"decrease\".`);\n      }\n    },\n    updateIsLoadingCounter(direction) {\n      debugLog(\"Called instance.updateIsLoadingCounter\", direction);\n      const {store: store} = serviceManager;\n      if (direction === \"increase\") {\n        store.dispatch(actions.addIsLoadingCounter(1));\n      } else if (direction === \"decrease\") {\n        if (store.getState().botMessageState.isLoadingCounter <= 0) {\n          consoleError(\"You cannot decrease the loading counter when it is already <= 0\");\n          return;\n        }\n        store.dispatch(actions.addIsLoadingCounter(-1));\n      } else {\n        consoleError(`[updateIsLoadingCounter] Invalid direction: ${direction}. Valid values are \"increase\" and \"decrease\".`);\n      }\n    },\n    updateIsChatLoadingCounter(direction) {\n      debugLog(\"Called instance.updateIsChatLoadingCounter\", direction);\n      const {store: store} = serviceManager;\n      if (direction === \"increase\") {\n        store.dispatch(actions.addIsHydratingCounter(1));\n      } else if (direction === \"decrease\") {\n        if (store.getState().botMessageState.isHydratingCounter <= 0) {\n          consoleError(\"You cannot decrease the hydrating counter when it is already <= 0\");\n          return;\n        }\n        store.dispatch(actions.addIsHydratingCounter(-1));\n      } else {\n        consoleError(`[updateIsChatLoadingCounter] Invalid direction: ${direction}. Valid values are \"increase\" and \"decrease\".`);\n      }\n    },\n    updateHeaderConfig: config => {\n      const configCopy = cloneDeep(config);\n      serviceManager.store.dispatch(actions.updateChatHeaderConfig(configCopy));\n    },\n    updateMainHeaderAvatar: config => {\n      serviceManager.store.dispatch(actions.updateMainHeaderAvatar(config));\n    },\n    updateBotName: name => serviceManager.actions.updateBotName(name),\n    updateBotAvatarURL: url => serviceManager.actions.updateBotAvatarURL(url),\n    elements: {\n      getMainWindow: getMainWindow,\n      getMessageInput: getMessageInput,\n      getHomeScreenInput: getHomeScreenInput\n    },\n    tours: {\n      startTour: async message => {\n        debugLog(\"Called instance.tours.startTour\", message);\n        await serviceManager.actions.send(message, MessageSendSource.START_TOUR_METHOD, {\n          skipTourCard: true\n        });\n      },\n      endTour: async () => {\n        debugLog(\"Called instance.tours.endTour\");\n        serviceManager.actions.endTour({\n          viewChangeReason: ViewChangeReason.CALLED_END_TOUR\n        });\n      },\n      goToNextStep: async () => {\n        debugLog(\"Called instance.tours.goToNextStep\");\n        serviceManager.actions.changeStepInTour({\n          nextStep: true\n        });\n      },\n      goToStep: async stepId => {\n        debugLog(\"Called instance.tours.goToStep\", stepId);\n        serviceManager.actions.goToSpecificTourStep(stepId);\n      }\n    },\n    messaging: {\n      addMessage: (message, options = {}) => {\n        debugLog(\"Called instance.messaging.addMessage\", message, options);\n        serviceManager.messageService.messageLoadingManager.end();\n        return serviceManager.actions.receive(message, options?.isLatestWelcomeNode ?? false, null, {\n          disableFadeAnimation: options?.disableFadeAnimation\n        });\n      },\n      addMessageChunk: async (chunk, options = {}) => {\n        debugLog(\"Called instance.messaging.addMessageChunk\", chunk, options);\n        serviceManager.messageService.messageLoadingManager.end();\n        await serviceManager.actions.receiveChunk(chunk, null, options);\n      },\n      removeMessages: async messageIDs => {\n        debugLog(\"Called instance.messaging.removeMessages\", messageIDs);\n        return serviceManager.actions.removeMessages(messageIDs);\n      },\n      clearConversation: () => {\n        debugLog(\"Called instance.messaging.clearConversation\");\n        return serviceManager.actions.restartConversation({\n          skipHydration: true,\n          endAgentConversation: false,\n          fireEvents: false\n        });\n      },\n      insertHistory: messages => {\n        debugLog(\"Called instance.messaging.insertHistory\", messages);\n        return serviceManager.actions.insertHistory(messages);\n      }\n    },\n    requestFocus: () => {\n      debugLog(\"Called instance.requestFocus\");\n      serviceManager.appWindow?.requestFocus();\n    },\n    serviceDesk: {\n      endConversation: () => {\n        debugLog(\"Called instance.serviceDesk.endConversation\");\n        return serviceManager.actions.agentEndConversation(false);\n      },\n      updateIsSuspended: async isSuspended => {\n        debugLog(\"Called instance.serviceDesk.updateIsSuspended\", isSuspended);\n        return serviceManager.actions.agentUpdateIsSuspended(isSuspended);\n      }\n    }\n  };\n  if (serviceManager.store.getState().config.public.debug) {\n    consoleDebug(\"[ChatInstanceImpl] Created chat instance\", instance);\n  }\n  return instance;\n}\n\nfunction createWriteableElementsProxy(serviceManager) {\n  const elementSet = new Set;\n  const handler = {\n    get(target, element) {\n      if (!elementSet.has(element)) {\n        elementSet.add(element);\n      }\n      return target[element];\n    }\n  };\n  return new Proxy(serviceManager.writeableElements, handler);\n}\n\nexport { createChatInstance };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst NODE_ENV = \"production\";\n\nconst VERSION = \"0.3.3\";\n\nexport { NODE_ENV, VERSION };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar NotificationType;\n\n(function(NotificationType) {\n  NotificationType[\"TEXT_NOTIFICATION\"] = \"text_notification\";\n})(NotificationType || (NotificationType = {}));\n\nconst BOUNCING_ANIMATION_TIMEOUTS = [ 15e3, 6e4 ];\n\nconst TIME_TO_ENTRANCE_ANIMATION_START = 15e3;\n\nexport { BOUNCING_ANIMATION_TIMEOUTS, NotificationType, TIME_TO_ENTRANCE_ANIMATION_START };\n","import isEqual from \"lodash-es/isEqual.js\";\n\nimport { VERSION } from \"../environmentVariables.js\";\n\nimport { NotificationType, TIME_TO_ENTRANCE_ANIMATION_START } from \"../../../types/config/LauncherConfig.js\";\n\nimport { DEFAULT_CUSTOM_PANEL_ID } from \"../utils/constants.js\";\n\nimport { deepFreeze } from \"../utils/lang/objectUtils.js\";\n\nimport \"../../../types/utilities/carbonTypes.js\";\n\nimport { CarbonTheme } from \"../../../types/config/PublicConfig.js\";\n\nimport { CornersType } from \"../../../types/config/CornersType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const DEFAULT_LAUNCHER = {\n  config: {\n    is_on: true,\n    mobile: {\n      is_on: true,\n      title: \"\",\n      time_to_expand: TIME_TO_ENTRANCE_ANIMATION_START,\n      new_expand_time: false,\n      time_to_reduce: 1e4,\n      notification_type: NotificationType.TEXT_NOTIFICATION\n    },\n    desktop: {\n      is_on: true,\n      title: \"\",\n      new_expand_time: false,\n      time_to_expand: TIME_TO_ENTRANCE_ANIMATION_START,\n      notification_type: NotificationType.TEXT_NOTIFICATION\n    }\n  }\n};\n\ndeepFreeze(DEFAULT_LAUNCHER);\n\nconst DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS = {\n  title: null,\n  hideBackButton: false,\n  hidePanelHeader: false,\n  disableAnimation: false\n};\n\ndeepFreeze(DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS);\n\nconst DEFAULT_CUSTOM_PANEL_STATE = {\n  isOpen: false,\n  panelID: DEFAULT_CUSTOM_PANEL_ID,\n  options: DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS\n};\n\ndeepFreeze(DEFAULT_CUSTOM_PANEL_STATE);\n\nconst DEFAULT_IFRAME_PANEL_STATE = {\n  isOpen: false,\n  messageItem: null\n};\n\ndeepFreeze(DEFAULT_IFRAME_PANEL_STATE);\n\nconst DEFAULT_CITATION_PANEL_STATE = {\n  isOpen: false,\n  citationItem: null\n};\n\ndeepFreeze(DEFAULT_CITATION_PANEL_STATE);\n\nconst DEFAULT_TOUR_STATE = {\n  activeTourStepItems: null\n};\n\ndeepFreeze(DEFAULT_TOUR_STATE);\n\nconst DEFAULT_MESSAGE_PANEL_STATE = {\n  isOpen: false,\n  localMessageItem: null,\n  isMessageForInput: false\n};\n\ndeepFreeze(DEFAULT_MESSAGE_PANEL_STATE);\n\nconst VIEW_STATE_ALL_CLOSED = {\n  launcher: false,\n  mainWindow: false,\n  tour: false\n};\n\ndeepFreeze(VIEW_STATE_ALL_CLOSED);\n\nconst VIEW_STATE_LAUNCHER_OPEN = {\n  launcher: true,\n  mainWindow: false,\n  tour: false\n};\n\ndeepFreeze(VIEW_STATE_LAUNCHER_OPEN);\n\nconst VIEW_STATE_MAIN_WINDOW_OPEN = {\n  mainWindow: true,\n  launcher: false,\n  tour: false\n};\n\ndeepFreeze(VIEW_STATE_MAIN_WINDOW_OPEN);\n\nconst DEFAULT_PERSISTED_TO_BROWSER = {\n  chatState: {\n    version: VERSION,\n    disclaimersAccepted: {},\n    homeScreenState: {\n      isHomeScreenOpen: false,\n      showBackToBot: false\n    },\n    hasSentNonWelcomeMessage: false,\n    persistedTourState: {\n      activeTourID: null,\n      activeTourCurrentStepIndex: null\n    },\n    agentState: {\n      isConnected: false,\n      isSuspended: false,\n      agentProfiles: {}\n    }\n  },\n  launcherState: {\n    wasLoadedFromBrowser: false,\n    version: VERSION,\n    viewState: VIEW_STATE_ALL_CLOSED,\n    activeTour: false,\n    showUnreadIndicator: false,\n    mobileLauncherIsExtended: false,\n    mobileLauncherWasReduced: false,\n    mobileLauncherDisableBounce: false,\n    desktopLauncherIsExpanded: false,\n    desktopLauncherWasMinimized: false,\n    bounceTurn: 1,\n    hasSentNonWelcomeMessage: false\n  }\n};\n\ndeepFreeze(DEFAULT_PERSISTED_TO_BROWSER);\n\nconst DEFAULT_CHAT_MESSAGES_STATE = {\n  localMessageIDs: [],\n  messageIDs: [],\n  isTypingCounter: 0,\n  isLoadingCounter: 0,\n  isHydratingCounter: 0,\n  isScrollAnchored: false\n};\n\ndeepFreeze(DEFAULT_CHAT_MESSAGES_STATE);\n\nconst DEFAULT_MESSAGE_STATE = {\n  allMessageItemsByID: {},\n  allMessagesByID: {},\n  botMessageState: {\n    ...DEFAULT_CHAT_MESSAGES_STATE\n  }\n};\n\ndeepFreeze(DEFAULT_MESSAGE_STATE);\n\nconst DEFAULT_INPUT_STATE = () => ({\n  fieldVisible: true,\n  isReadonly: false,\n  files: [],\n  allowFileUploads: false,\n  allowMultipleFileUploads: false,\n  allowedFileUploadTypes: null,\n  stopStreamingButtonState: {\n    currentStreamID: null,\n    isVisible: false,\n    isDisabled: false\n  }\n});\n\nconst DEFAULT_AGENT_STATE = {\n  isConnecting: false,\n  isReconnecting: false,\n  numUnreadMessages: 0,\n  fileUploadInProgress: false,\n  showScreenShareRequest: false,\n  isScreenSharing: false,\n  isAgentTyping: false,\n  inputState: DEFAULT_INPUT_STATE()\n};\n\ndeepFreeze(DEFAULT_AGENT_STATE);\n\nconst DEFAULT_THEME_STATE = {\n  carbonTheme: CarbonTheme.G10,\n  useAITheme: false,\n  corners: CornersType.ROUND\n};\n\ndeepFreeze(DEFAULT_THEME_STATE);\n\nconst DEFAULT_LAYOUT_STATE = {\n  showFrame: true,\n  hasContentMaxWidth: true\n};\n\ndeepFreeze(DEFAULT_LAYOUT_STATE);\n\nfunction calcAnnouncementForWidgetOpen(previousState, newViewState) {\n  if (isEqual(previousState.persistedToBrowserStorage.launcherState.viewState, newViewState)) {\n    return previousState.announceMessage;\n  }\n  return {\n    messageID: newViewState.mainWindow ? \"window_ariaWindowOpened\" : \"window_ariaWindowClosed\"\n  };\n}\n\nfunction applyBotMessageState(state, newState) {\n  return {\n    ...state,\n    botMessageState: {\n      ...state.botMessageState,\n      ...newState\n    }\n  };\n}\n\nfunction handleViewStateChange(state, viewState) {\n  let {agentState: agentState} = state;\n  let {showUnreadIndicator: showUnreadIndicator} = state.persistedToBrowserStorage.launcherState;\n  if (viewState.mainWindow && state.isBrowserPageVisible) {\n    if (agentState.numUnreadMessages !== 0) {\n      agentState = {\n        ...agentState,\n        numUnreadMessages: 0\n      };\n    }\n    showUnreadIndicator = false;\n  }\n  return {\n    ...state,\n    announceMessage: calcAnnouncementForWidgetOpen(state, viewState),\n    agentState: agentState,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      launcherState: {\n        ...state.persistedToBrowserStorage.launcherState,\n        viewState: viewState,\n        showUnreadIndicator: showUnreadIndicator\n      }\n    }\n  };\n}\n\nfunction setHomeScreenOpenState(state, isOpen, showBackToBot) {\n  if (showBackToBot === undefined) {\n    showBackToBot = state.persistedToBrowserStorage.chatState.homeScreenState.showBackToBot;\n  }\n  return {\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        homeScreenState: {\n          ...state.persistedToBrowserStorage.chatState.homeScreenState,\n          isHomeScreenOpen: isOpen,\n          showBackToBot: showBackToBot\n        }\n      }\n    }\n  };\n}\n\nfunction applyLocalMessageUIState(state, localMessageID, propertyName, propertyValue) {\n  const oldMessage = state.allMessageItemsByID[localMessageID];\n  if (oldMessage) {\n    return {\n      ...state,\n      allMessageItemsByID: {\n        ...state.allMessageItemsByID,\n        [localMessageID]: {\n          ...oldMessage,\n          ui_state: {\n            ...oldMessage.ui_state,\n            [propertyName]: propertyValue\n          }\n        }\n      }\n    };\n  }\n  return state;\n}\n\nfunction applyFullMessage(state, message) {\n  const newState = {\n    ...state,\n    allMessagesByID: {\n      ...state.allMessagesByID,\n      [message.id]: message\n    }\n  };\n  if (!state.allMessagesByID[message.id]) {\n    const currentMessageIDs = state.botMessageState.messageIDs;\n    const newMessageIDs = [ ...currentMessageIDs, message.id ];\n    return applyBotMessageState(newState, {\n      messageIDs: newMessageIDs\n    });\n  }\n  return newState;\n}\n\nexport { DEFAULT_AGENT_STATE, DEFAULT_CHAT_MESSAGES_STATE, DEFAULT_CITATION_PANEL_STATE, DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS, DEFAULT_CUSTOM_PANEL_STATE, DEFAULT_IFRAME_PANEL_STATE, DEFAULT_INPUT_STATE, DEFAULT_LAUNCHER, DEFAULT_LAYOUT_STATE, DEFAULT_MESSAGE_PANEL_STATE, DEFAULT_MESSAGE_STATE, DEFAULT_PERSISTED_TO_BROWSER, DEFAULT_THEME_STATE, DEFAULT_TOUR_STATE, VIEW_STATE_ALL_CLOSED, VIEW_STATE_LAUNCHER_OPEN, VIEW_STATE_MAIN_WINDOW_OPEN, applyBotMessageState, applyFullMessage, applyLocalMessageUIState, handleViewStateChange, setHomeScreenOpenState };\n","import { gray100, white } from \"../../../node_modules/@carbon/colors/es/index.js\";\n\nimport Color from \"color\";\n\nimport { consoleError } from \"./miscUtils.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst MIN_CONTRAST = 4.5;\n\nfunction hexCodeToRGB(color) {\n  if (color.length === 7) {\n    const red = color.substring(1, 3);\n    const blue = color.substring(3, 5);\n    const green = color.substring(5, 7);\n    return [ parseInt(red, 16), parseInt(blue, 16), parseInt(green, 16) ];\n  }\n  if (color.length === 4) {\n    const red = color.substring(1, 2);\n    const blue = color.substring(2, 3);\n    const green = color.substring(3, 4);\n    return [ parseInt(red + red, 16), parseInt(blue + blue, 16), parseInt(green + green, 16) ];\n  }\n  consoleError(`Unsupported color code: \"${color}\"`);\n  return [ 0, 0, 0 ];\n}\n\nfunction calculateContrast(color1, color2) {\n  const rgb1 = hexCodeToRGB(color1);\n  const rgb2 = hexCodeToRGB(color2);\n  const luminance1 = calculateRelativeLuminance(rgb1);\n  const luminance2 = calculateRelativeLuminance(rgb2);\n  let contrast;\n  if (luminance1 > luminance2) {\n    contrast = (luminance1 + .05) / (luminance2 + .05);\n  } else {\n    contrast = (luminance2 + .05) / (luminance1 + .05);\n  }\n  return contrast;\n}\n\nfunction calculateRelativeLuminance([r8, g8, b8]) {\n  const rRGB = r8 / 255;\n  const gRGB = g8 / 255;\n  const bRGB = b8 / 255;\n  const R = rRGB <= .03928 ? rRGB / 12.92 : ((rRGB + .055) / 1.055) ** 2.4;\n  const G = gRGB <= .03928 ? gRGB / 12.92 : ((gRGB + .055) / 1.055) ** 2.4;\n  const B = bRGB <= .03928 ? bRGB / 12.92 : ((bRGB + .055) / 1.055) ** 2.4;\n  const luminance = .2126 * R + .7152 * G + .0722 * B;\n  return luminance;\n}\n\nfunction whiteOrBlackText(background) {\n  return calculateContrast(gray100, background) >= MIN_CONTRAST ? gray100 : white;\n}\n\nfunction adjustLightness(token, shift) {\n  const original = Color(token).hsl().object();\n  return Color({\n    ...original,\n    l: original.l + shift\n  }).round().hex().toLowerCase();\n}\n\nexport { MIN_CONTRAST, adjustLightness, calculateContrast, hexCodeToRGB, whiteOrBlackText };\n","import { white, gray100, gray10, blue60, gray80 } from \"../../../node_modules/@carbon/colors/es/index.js\";\n\nimport { whiteOrBlackText, adjustLightness, calculateContrast, MIN_CONTRAST, hexCodeToRGB } from \"./colors.js\";\n\nimport { WA_CONSOLE_PREFIX } from \"./constants.js\";\n\nimport { CarbonTheme } from \"../../../types/config/PublicConfig.js\";\n\nimport { CarbonThemeClassNames } from \"../../../types/utilities/carbonTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst CSS_VAR_PREFIX = \"--cds-\";\n\nconst CSS_CHAT_PREFIX = \"chat-\";\n\nconst HEXADECIMAL_REGEX = /#([a-f0-9]{3}){1,2}\\b/i;\n\nconst INTERNAL_OVERRIDES_LIGHT_THEME_MAP = {\n  \"$chat-button\": \"#000000\",\n  \"$chat-button-text-hover\": \"#525252\"\n};\n\nconst INTERNAL_OVERRIDES_DARK_THEME_MAP = {\n  \"$chat-button\": \"#ffffff\",\n  \"$chat-button-text-hover\": \"#f4f4f4\"\n};\n\nfunction convertCSSVariablesToString(cssVariables) {\n  const pieces = Object.keys(cssVariables).map(key => {\n    const value = cssVariables[key];\n    if (value === undefined) {\n      return \"\";\n    }\n    const fullName = key.startsWith(\"$\") ? `${CSS_VAR_PREFIX}${key.replace(/^\\$/, \"\")}` : `${CSS_VAR_PREFIX}${CSS_CHAT_PREFIX}${key}`;\n    return `${fullName}:${value};`;\n  });\n  let cssVariablesString = \"\";\n  const allValues = pieces.join(\"\");\n  const prefix = \"\";\n  if (allValues.length > 0) {\n    const rule = `${prefix}.WACContainer .cds--white, ${prefix}.WACContainer .cds--g10, ${prefix}.WACContainer .cds--g90, ${prefix}.WACContainer .cds--g100`;\n    cssVariablesString = `${rule}${`, :host`}{${allValues}}`;\n  }\n  return cssVariablesString;\n}\n\nfunction remoteStylesToCSSVars(whiteLabelVariables, carbonTheme) {\n  const cssOverrides = {};\n  const primaryColor = whiteLabelVariables[\"BASE-primary-color\"];\n  const secondaryColor = whiteLabelVariables[\"BASE-secondary-color\"];\n  const accentColor = whiteLabelVariables[\"BASE-accent-color\"];\n  if (primaryColor) {\n    cssOverrides[\"PRIMARY-color\"] = primaryColor;\n    cssOverrides[\"PRIMARY-color-text\"] = whiteOrBlackText(primaryColor);\n    cssOverrides[\"PRIMARY-color-hover\"] = adjustLightness(primaryColor, -8);\n    cssOverrides[\"PRIMARY-color-active\"] = adjustLightness(primaryColor, -10);\n    const useAccentColor = accentColor || blue60;\n    const tryFocusColor = carbonTheme === CarbonTheme.G90 || carbonTheme === CarbonTheme.G100 ? white : useAccentColor;\n    let useFocusColor;\n    if (calculateContrast(primaryColor, tryFocusColor) >= MIN_CONTRAST) {\n      useFocusColor = tryFocusColor;\n    } else if (tryFocusColor !== useAccentColor && calculateContrast(primaryColor, useAccentColor) >= MIN_CONTRAST) {\n      useFocusColor = useAccentColor;\n    } else if (tryFocusColor !== white && calculateContrast(primaryColor, white) >= MIN_CONTRAST) {\n      useFocusColor = white;\n    } else {\n      useFocusColor = gray100;\n    }\n    if (useFocusColor !== tryFocusColor) {\n      cssOverrides[\"PRIMARY-color-focus\"] = useFocusColor;\n    }\n  }\n  if (secondaryColor) {\n    cssOverrides[\"SECONDARY-color\"] = secondaryColor;\n    cssOverrides[\"SECONDARY-color-text\"] = whiteOrBlackText(secondaryColor);\n  } else if (carbonTheme === CarbonTheme.G90 || carbonTheme === CarbonTheme.G100) {\n    cssOverrides[\"SECONDARY-color\"] = `var(${CSS_VAR_PREFIX}layer-02)`;\n    cssOverrides[\"SECONDARY-color-text\"] = `var(${CSS_VAR_PREFIX}text-primary);`;\n  }\n  if (accentColor) {\n    const colorMap = ACCENT_COLOR_MAPS[carbonTheme];\n    const accentBlue20 = adjustLightness(accentColor, 40);\n    const accentBlue60Hover = adjustLightness(accentColor, -8);\n    const accentBlue80 = adjustLightness(accentColor, -20);\n    fillValues(cssOverrides, colorMap.blue20, accentBlue20);\n    fillValues(cssOverrides, colorMap.blue60, accentColor);\n    fillValues(cssOverrides, colorMap.blue60Hover, accentBlue60Hover);\n    fillValues(cssOverrides, colorMap.blue80, accentBlue80);\n    cssOverrides[\"LAUNCHER-color-background\"] = accentColor;\n    cssOverrides[\"LAUNCHER-color-background-hover\"] = accentBlue60Hover;\n    cssOverrides[\"LAUNCHER-color-background-active\"] = accentBlue80;\n    cssOverrides[\"LAUNCHER-EXPANDED-MESSAGE-color-background\"] = accentColor;\n    cssOverrides[\"LAUNCHER-EXPANDED-MESSAGE-color-hover\"] = accentBlue60Hover;\n    cssOverrides[\"LAUNCHER-EXPANDED-MESSAGE-color-active\"] = accentBlue80;\n    cssOverrides[\"ACCENT-color\"] = accentColor;\n    const accentColorRGB = hexCodeToRGB(accentColor);\n    cssOverrides[\"ACCENT-color-r\"] = accentColorRGB[0].toString();\n    cssOverrides[\"ACCENT-color-g\"] = accentColorRGB[1].toString();\n    cssOverrides[\"ACCENT-color-b\"] = accentColorRGB[2].toString();\n    cssOverrides[\"ACCENT-color-ghost-text\"] = accentColor;\n    const accentColorBW = whiteOrBlackText(accentColor);\n    cssOverrides[\"ACCENT-color-text\"] = accentColorBW;\n    cssOverrides[\"ACCENT-color-background-hover\"] = accentBlue60Hover;\n    cssOverrides[\"ACCENT-color-background-active\"] = accentBlue80;\n    cssOverrides[\"LAUNCHER-color-focus-border\"] = accentColorBW;\n    cssOverrides[\"LAUNCHER-color-avatar\"] = accentColorBW;\n    cssOverrides[\"LAUNCHER-EXPANDED-MESSAGE-color-text\"] = accentColorBW;\n    cssOverrides[\"LAUNCHER-EXPANDED-MESSAGE-color-focus-border\"] = accentColorBW;\n    cssOverrides[\"LAUNCHER-MOBILE-color-text\"] = accentColorBW;\n    cssOverrides[\"ACCENT-color-bw\"] = accentColorBW;\n    cssOverrides[\"ACCENT-color-bw-hover\"] = adjustLightness(accentColorBW, -8);\n    cssOverrides[\"ACCENT-color-bw-active\"] = adjustLightness(accentColorBW, -10);\n    cssOverrides[\"ACCENT-color-bw-inverse\"] = accentColorBW === gray100 ? white : gray100;\n    cssOverrides[\"ACCENT-color-bw-gray\"] = accentColorBW === gray100 ? gray80 : gray10;\n    cssOverrides[\"ACCENT-color-pastel\"] = accentColorBW === gray100 ? adjustLightness(accentColor, 20) : adjustLightness(accentColor, -15);\n  }\n  return cssOverrides;\n}\n\nconst ACCENT_COLOR_MAPS = {\n  white: {\n    blue20: [ \"$highlight\" ],\n    blue60: [ \"$background-brand\", \"$interactive\", \"$border-interactive\", \"$button-primary\", \"$button-tertiary\", \"$icon-interactive\", \"$focus\" ],\n    blue60Hover: [ \"$button-primary-hover\", \"$button-tertiary-hover\" ],\n    blue80: [ \"$button-primary-active\", \"$button-tertiary-active\" ]\n  },\n  g10: {\n    blue20: [ \"$highlight\" ],\n    blue60: [ \"$background-brand\", \"$interactive\", \"$border-interactive\", \"$button-primary\", \"$button-tertiary\", \"$icon-interactive\", \"$focus\" ],\n    blue60Hover: [ \"$button-primary-hover\", \"$button-tertiary-hover\" ],\n    blue80: [ \"$button-primary-active\", \"$button-tertiary-active\" ]\n  },\n  g90: {\n    blue20: [],\n    blue60: [ \"$background-brand\", \"$interactive\", \"$border-interactive\", \"$button-primary\", \"$button-tertiary\", \"$focus-inverse\" ],\n    blue60Hover: [ \"$button-primary-hover\", \"$button-tertiary-hover\" ],\n    blue80: [ \"$button-primary-active\", \"$highlight\", \"$button-tertiary-active\" ]\n  },\n  g100: {\n    blue20: [],\n    blue60: [ \"$background-brand\", \"$interactive\", \"$border-interactive\", \"$button-primary\", \"$button-tertiary\", \"$focus-inverse\" ],\n    blue60Hover: [ \"$button-primary-hover\", \"$button-tertiary-hover\" ],\n    blue80: [ \"$button-primary-active\", \"$highlight\", \"$button-tertiary-active\" ]\n  }\n};\n\nfunction fillValues(styles, propertyNames, value) {\n  propertyNames.forEach(propertyName => {\n    styles[propertyName] = value;\n  });\n}\n\nfunction mergeCSSVariables(publicVars, whiteLabelVariables, carbonTheme, useAITheme) {\n  carbonTheme = carbonTheme || CarbonTheme.G10;\n  useAITheme = useAITheme || false;\n  publicVars = publicVars || {};\n  const internalOverrides = createInternalCSSOverridesMap(carbonTheme, useAITheme);\n  const result = {\n    ...internalOverrides,\n    ...publicVars\n  };\n  Object.entries(result).forEach(([key, value]) => {\n    if (key.startsWith(\"$\") && !value.match(HEXADECIMAL_REGEX)) {\n      console.warn(`${WA_CONSOLE_PREFIX} You tried to call \"updateCSSVariables\" with an invalid value for \"${key}\": \"${publicVars[key]}\". You must use hexadecimal values for colors.`);\n      delete result[key];\n    }\n  });\n  const remoteVars = remoteStylesToCSSVars(whiteLabelVariables || {}, carbonTheme);\n  Object.entries(remoteVars).forEach(([key, value]) => {\n    if (value !== \"\" && publicVars[key] === undefined) {\n      result[key] = value;\n    }\n  });\n  return result;\n}\n\nfunction createInternalCSSOverridesMap(carbonTheme, useAITheme) {\n  let internalOverridesMap = {};\n  if (!useAITheme) {\n    if ([ CarbonTheme.G10, CarbonTheme.WHITE ].includes(carbonTheme)) {\n      internalOverridesMap = {\n        ...internalOverridesMap,\n        ...INTERNAL_OVERRIDES_LIGHT_THEME_MAP\n      };\n    } else if ([ CarbonTheme.G90, CarbonTheme.G100 ].includes(carbonTheme)) {\n      internalOverridesMap = {\n        ...internalOverridesMap,\n        ...INTERNAL_OVERRIDES_DARK_THEME_MAP\n      };\n    }\n  }\n  return internalOverridesMap;\n}\n\nfunction getThemeClassNames(themeState) {\n  let themeClassnames;\n  switch (themeState?.carbonTheme) {\n   case CarbonTheme.WHITE:\n    themeClassnames = CarbonThemeClassNames.WHITE;\n    break;\n\n   case CarbonTheme.G10:\n    themeClassnames = CarbonThemeClassNames.G10;\n    break;\n\n   case CarbonTheme.G90:\n    themeClassnames = CarbonThemeClassNames.G90;\n    break;\n\n   case CarbonTheme.G100:\n    themeClassnames = CarbonThemeClassNames.G100;\n    break;\n\n   default:\n    themeClassnames = CarbonThemeClassNames.G10;\n    break;\n  }\n  if (themeState?.useAITheme) {\n    themeClassnames += \" WAC--aiTheme\";\n  }\n  return themeClassnames;\n}\n\nexport { convertCSSVariablesToString, getThemeClassNames, mergeCSSVariables };\n","import { VIEW_STATE_ALL_CLOSED } from \"../store/reducerUtils.js\";\n\nimport { consoleError } from \"./miscUtils.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function constructViewState(newView, appState) {\n  const {viewState: viewState} = appState.persistedToBrowserStorage.launcherState;\n  let newViewState;\n  if (typeof newView === \"string\") {\n    newViewState = {\n      ...VIEW_STATE_ALL_CLOSED,\n      [newView]: true\n    };\n  } else {\n    newViewState = {\n      ...viewState,\n      ...newView\n    };\n  }\n  return newViewState;\n}\n\nfunction validateViewState(viewState, appState) {\n  const {activeTour: activeTour} = appState.persistedToBrowserStorage.launcherState;\n  if (viewState.tour && !activeTour) {\n    consoleError(\"Error changing the view. The new view was supposed to show a tour however there is no active tour to show.\" + \" Changing the view has been canceled.\");\n    return false;\n  }\n  return true;\n}\n\nexport { constructViewState, validateViewState };\n","import cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport isEqual from \"lodash-es/isEqual.js\";\n\nimport merge from \"lodash-es/merge.js\";\n\nimport inputItemToLocalItem from \"../schema/inputItemToLocalItem.js\";\n\nimport { outputItemToLocalItem, createLocalMessageItemsForNestedMessageItems } from \"../schema/outputItemToLocalItem.js\";\n\nimport { AgentsOnlineStatus } from \"../../../types/config/ServiceDeskConfig.js\";\n\nimport actions from \"../store/actions.js\";\n\nimport { agentUpdateIsSuspended } from \"../store/agentActions.js\";\n\nimport { DEFAULT_PERSISTED_TO_BROWSER, VIEW_STATE_LAUNCHER_OPEN } from \"../store/reducerUtils.js\";\n\nimport \"../../../types/state/AppState.js\";\n\nimport { arrayLastValue, asyncForEach } from \"../utils/lang/arrayUtils.js\";\n\nimport { deepFreeze } from \"../utils/lang/objectUtils.js\";\n\nimport { sleep } from \"../utils/lang/promiseUtils.js\";\n\nimport { uuid } from \"../utils/lang/uuid.js\";\n\nimport { createWelcomeRequest, isLiveAgentMessage, isRequest, createMessageRequestForText, addDefaultsToMessage, isResponse, createMessageResponseForText, isStreamCompleteItem, isStreamPartialItem, isStreamFinalResponse, renderAsUserDefinedMessage, isResponseWithNestedItems, streamItemID, isPause, isConnectToAgent, hasTourUserDefinedType, hasServiceDesk, isTyping } from \"../utils/messageUtils.js\";\n\nimport { debugLog, isEnableDebugLog, consoleError, consoleWarn, callOnError } from \"../utils/miscUtils.js\";\n\nimport { resolvablePromise } from \"../utils/resolvablePromise.js\";\n\nimport { mergeCSSVariables } from \"../utils/styleUtils.js\";\n\nimport { constructViewState, validateViewState } from \"../utils/viewStateUtils.js\";\n\nimport { MessageResponseTypes } from \"../../../types/messaging/Messages.js\";\n\nimport { BusEventType, MessageSendSource, TourStartReason, MainWindowCloseReason, ViewChangeReason, MainWindowOpenReason } from \"../../../types/events/eventBusTypes.js\";\n\nimport { CSSVariable } from \"../../../types/instance/ChatInstance.js\";\n\nimport { OnErrorType } from \"../../../types/config/PublicConfig.js\";\n\nimport { setIntl } from \"../utils/intlUtils.js\";\n\nimport { UUIDType } from \"../utils/lang/UUIDType.js\";\n\nimport { ViewType } from \"../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const VALID_PUBLIC_VARS_IN_AI_THEME_SET = new Set(Object.values(CSSVariable));\n\nconst UPDATE_CSS_VARS_AI_THEME_WARNING_MESSAGE = `[updateCSSVariables] The AI theme is enabled and only ${Object.values(CSSVariable).join(\", \")} can be updated.`;\n\nclass ChatActionsImpl {\n  constructor(serviceManager) {\n    this.hydrating = false;\n    this.restarting = false;\n    this.alreadyHydrated = false;\n    this.chunkQueue = [];\n    this.serviceManager = serviceManager;\n  }\n  async hydrateChat(alternateWelcomeRequest, alternateWelcomeRequestSource, alternateOptions) {\n    let fireReady = false;\n    try {\n      if (!this.hydrationPromise) {\n        this.hydrating = true;\n        this.hydrationPromise = this.doHydrateChat(alternateWelcomeRequest, alternateWelcomeRequestSource, alternateOptions);\n        fireReady = true;\n      }\n      await this.hydrationPromise;\n    } finally {\n      this.hydrating = false;\n    }\n    if (fireReady) {\n      await this.serviceManager.fire({\n        type: BusEventType.CHAT_READY\n      });\n    }\n  }\n  async doHydrateChat(alternateWelcomeRequest, alternateWelcomeRequestSource, alternateOptions) {\n    debugLog(\"Hydrating Carbon AI chat\", alternateWelcomeRequest, alternateWelcomeRequestSource, alternateOptions);\n    let history;\n    const {serviceManager: serviceManager} = this;\n    serviceManager.store.dispatch(actions.addIsHydratingCounter(1));\n    if (!this.alreadyHydrated) {\n      history = await this.serviceManager.historyService.loadHistory();\n      if (serviceManager.humanAgentService) {\n        debugLog(\"Initializing the human agent service\");\n        await serviceManager.humanAgentService.initialize();\n      } else {\n        debugLog(\"No service desk integrations present\");\n      }\n    }\n    const {config: config} = serviceManager.store.getState();\n    if (!history) {\n      if (!alternateWelcomeRequest) {\n        const state = serviceManager.store.getState();\n        if (state.homeScreenConfig?.is_on) {\n          serviceManager.store.dispatch(actions.setHomeScreenIsOpen(true));\n        } else if (!config.public.messaging?.skipWelcome) {\n          await serviceManager.actions.send(createWelcomeRequest(), MessageSendSource.WELCOME_REQUEST, {\n            returnBeforeStreaming: true\n          }, true);\n        }\n      }\n    } else {\n      serviceManager.store.dispatch(actions.hydrateMessageHistory(history.messageHistory));\n      await this.createElementsForUserDefinedResponses(history.messageHistory);\n      if (history.latestPanelLocalMessageItem) {\n        this.openResponsePanel(history.latestPanelLocalMessageItem, true);\n      }\n    }\n    if (alternateWelcomeRequest) {\n      serviceManager.store.dispatch(actions.setHomeScreenIsOpen(false));\n      await serviceManager.actions.send(alternateWelcomeRequest, alternateWelcomeRequestSource, alternateOptions, true);\n    }\n    serviceManager.store.dispatch(actions.chatWasHydrated());\n    serviceManager.store.dispatch(actions.addIsHydratingCounter(-1));\n    if (history) {\n      const lastMessageID = arrayLastValue(history.messageHistory.botMessageState.localMessageIDs);\n      const lastMessage = history.messageHistory.allMessageItemsByID[lastMessageID];\n      const lastOriginalMessage = history.messageHistory.allMessagesByID[lastMessage?.fullMessageID];\n      if (!isLiveAgentMessage(lastMessage) && isRequest(lastOriginalMessage)) {\n        serviceManager.messageService.resendMessage(lastOriginalMessage, lastMessage.ui_state.id);\n      }\n    }\n    const allowReconnect = config.public.serviceDesk.allowReconnect ?? true;\n    this.serviceManager?.humanAgentService?.handleHydration(allowReconnect, Boolean(history));\n    this.alreadyHydrated = true;\n  }\n  getPublicWebChatState() {\n    const state = this.serviceManager.store.getState();\n    const {persistedToBrowserStorage: persistedToBrowserStorage} = state;\n    const {chatState: chatState, launcherState: launcherState} = persistedToBrowserStorage;\n    const publicWebChatState = {\n      isConnectedWithHumanAgent: chatState.agentState.isConnected,\n      isWebChatOpen: launcherState.viewState.mainWindow,\n      isConnectingWithHumanAgent: state.agentState.isConnecting,\n      isHomeScreenOpen: chatState.homeScreenState.isHomeScreenOpen,\n      isDebugEnabled: isEnableDebugLog(),\n      hasUserSentMessage: chatState.hasSentNonWelcomeMessage,\n      isTourActive: launcherState.activeTour,\n      viewState: {\n        ...launcherState.viewState\n      },\n      serviceDesk: {\n        isConnected: chatState.agentState.isConnected,\n        isConnecting: state.agentState.isConnecting,\n        isSuspended: chatState.agentState.isSuspended ?? false\n      },\n      locale: this.serviceManager.store.getState().locale,\n      intl: this.serviceManager.intl\n    };\n    return publicWebChatState;\n  }\n  async sendWithCatch(message, source, options = {}, ignoreHydration = false) {\n    try {\n      await this.send(message, source, options, ignoreHydration);\n    } catch (error) {\n      consoleError(\"An error occurred sending the message\", error);\n    }\n  }\n  async send(message, source, options = {}, ignoreHydration = false) {\n    const messageRequest = typeof message === \"string\" ? createMessageRequestForText(message) : message;\n    if (this.serviceManager.store.getState().persistedToBrowserStorage.chatState.homeScreenState.isHomeScreenOpen) {\n      this.serviceManager.store.dispatch(actions.setHomeScreenIsOpen(false));\n    }\n    if (this.serviceManager.store.getState().responsePanelState.isOpen) {\n      this.serviceManager.store.dispatch(actions.setResponsePanelIsOpen(false));\n    }\n    if (this.hydrationPromise || ignoreHydration) {\n      if (!ignoreHydration) {\n        await this.hydrationPromise;\n      }\n      await this.doSend(messageRequest, source, options);\n    } else {\n      await this.hydrateChat(messageRequest, source, options);\n    }\n  }\n  async doSend(message, source, options = {}) {\n    const {store: store} = this.serviceManager;\n    addDefaultsToMessage(message);\n    const originalUserText = message.history?.label || message.input.text;\n    if (options.silent) {\n      message.history.silent = true;\n    }\n    const localMessage = inputItemToLocalItem(message, originalUserText);\n    if (!message.history.silent) {\n      store.dispatch(actions.addLocalMessageItem(localMessage, message, true));\n    } else {\n      store.dispatch(actions.addMessage(message));\n    }\n    if (options.setValueSelectedForMessageID) {\n      store.dispatch(actions.messageSetOptionSelected(options.setValueSelectedForMessageID, message));\n    }\n    deepFreeze(message);\n    await this.serviceManager.messageService.send(cloneDeep(message), source, localMessage.ui_state.id, options);\n  }\n  async receive(message, isLatestWelcomeNode = false, requestMessage, requestOptions) {\n    const {restartCount: initialRestartCount} = this.serviceManager;\n    if (!message.id) {\n      message.id = uuid(UUIDType.MESSAGE);\n    }\n    const preReceiveEvent = {\n      type: BusEventType.PRE_RECEIVE,\n      data: message\n    };\n    await this.serviceManager.fire(preReceiveEvent);\n    if (initialRestartCount !== this.serviceManager.restartCount) {\n      return;\n    }\n    if (!isLatestWelcomeNode) {\n      this.serviceManager.store.dispatch(actions.updateHasSentNonWelcomeMessage(true));\n    }\n    if (initialRestartCount !== this.serviceManager.restartCount) {\n      return;\n    }\n    const {languagePack: languagePack} = this.serviceManager.store.getState();\n    if (isResponse(message)) {\n      this.processMessageResponse(message, isLatestWelcomeNode, requestMessage, requestOptions).catch(error => {\n        consoleError(\"Error processing the message response\", error);\n      });\n    } else {\n      const inlineError = createMessageResponseForText(languagePack.errors_singleMessage, message.thread_id, MessageResponseTypes.INLINE_ERROR);\n      this.receive(inlineError, false);\n    }\n    deepFreeze(message);\n    await this.serviceManager.fire({\n      type: BusEventType.RECEIVE,\n      data: message\n    });\n  }\n  async removeMessages(messageIDs) {\n    this.serviceManager.store.dispatch(actions.removeMessages(messageIDs));\n  }\n  async insertHistory(messages) {\n    const scrollBottom = this.serviceManager.mainWindow?.getMessagesScrollBottom();\n    const state = this.serviceManager.store.getState();\n    const notes = {\n      notes: [ {\n        body: messages\n      } ]\n    };\n    const history = await this.serviceManager.historyService.loadHistory(notes);\n    const currentAppStateMessages = {\n      allMessageItemsByID: state.allMessageItemsByID,\n      allMessagesByID: state.allMessagesByID,\n      botMessageState: state.botMessageState\n    };\n    const newAppStateMessages = merge({}, history.messageHistory, currentAppStateMessages);\n    newAppStateMessages.botMessageState.messageIDs = [ ...history.messageHistory.botMessageState.messageIDs, ...currentAppStateMessages.botMessageState.messageIDs ];\n    newAppStateMessages.botMessageState.localMessageIDs = [ ...history.messageHistory.botMessageState.localMessageIDs, ...currentAppStateMessages.botMessageState.localMessageIDs ];\n    this.serviceManager.store.dispatch(actions.hydrateMessageHistory(newAppStateMessages));\n    await this.createElementsForUserDefinedResponses(history.messageHistory);\n    this.serviceManager.mainWindow?.doAutoScroll({\n      scrollToBottom: scrollBottom\n    });\n  }\n  async receiveChunk(chunk, messageID, options = {}) {\n    const chunkPromise = resolvablePromise();\n    this.chunkQueue.push({\n      chunk: chunk,\n      messageID: messageID,\n      options: options,\n      chunkPromise: chunkPromise\n    });\n    if (this.chunkQueue.length === 1) {\n      this.processChunkQueue();\n    }\n    return chunkPromise;\n  }\n  async processChunkQueue() {\n    const {chunk: chunk, options: options, chunkPromise: chunkPromise} = this.chunkQueue[0];\n    let {messageID: messageID} = this.chunkQueue[0];\n    const isCompleteItem = isStreamCompleteItem(chunk);\n    const isPartialItem = isStreamPartialItem(chunk);\n    const {store: store} = this.serviceManager;\n    const isStopGeneratingVisible = store.getState().botInputState.stopStreamingButtonState.isVisible;\n    if (isPartialItem) {\n      const streamingData = chunk.partial_item.streaming_metadata;\n      if (streamingData.cancellable && !isStopGeneratingVisible) {\n        store.dispatch(actions.setStopStreamingButtonVisible(true));\n      }\n    }\n    if (isCompleteItem || isPartialItem) {\n      if (!messageID) {\n        messageID = chunk.streaming_metadata.response_id;\n      }\n      if (!store.getState().allMessagesByID[messageID]) {\n        store.dispatch(actions.streamingStart(messageID));\n      }\n      const item = chunk.partial_item || chunk.complete_item;\n      store.dispatch(actions.streamingAddChunk(messageID, item, isCompleteItem, options.disableFadeAnimation ?? true));\n      if (chunk.partial_response?.history) {\n        if (Object.keys(chunk.partial_response).length > 1) {\n          throw new Error(`The partial_response object only supports the \"history\" property.`);\n        }\n        store.dispatch(actions.streamingMergeHistory(messageID, chunk.partial_response?.history));\n      }\n      await this.handleUserDefinedResponseItemsChunk(messageID, chunk, item);\n    } else if (isStreamFinalResponse(chunk)) {\n      this.receive(chunk.final_response, options.isLatestWelcomeNode, null, {\n        disableFadeAnimation: true\n      });\n    }\n    if ((isCompleteItem || isStreamFinalResponse(chunk)) && isStopGeneratingVisible) {\n      store.dispatch(actions.setStopStreamingButtonDisabled(false));\n      store.dispatch(actions.setStopStreamingButtonVisible(false));\n    }\n    this.chunkQueue.shift();\n    chunkPromise.doResolve();\n    if (this.chunkQueue[0]) {\n      this.processChunkQueue();\n    }\n  }\n  getOrCreateUserDefinedElement(messageItemID) {\n    let userDefinedItem = this.serviceManager.userDefinedElementRegistry.get(messageItemID);\n    if (!userDefinedItem) {\n      userDefinedItem = {\n        element: document.createElement(\"div\"),\n        slotName: `slot-user-defined-${uuid()}`\n      };\n      userDefinedItem.element.setAttribute(\"slot\", userDefinedItem.slotName);\n      this.serviceManager.userDefinedElementRegistry.set(messageItemID, userDefinedItem);\n    }\n    return userDefinedItem;\n  }\n  async handleUserDefinedResponseItems(localMessage, originalMessage) {\n    if (renderAsUserDefinedMessage(localMessage.item)) {\n      let element;\n      let slotName;\n      if (!localMessage.item.user_defined?.silent) {\n        ({element: element, slotName: slotName} = this.getOrCreateUserDefinedElement(localMessage.ui_state.id));\n      }\n      const userDefinedResponseEvent = {\n        type: BusEventType.USER_DEFINED_RESPONSE,\n        data: {\n          message: localMessage.item,\n          fullMessage: originalMessage,\n          element: element,\n          slot: slotName\n        }\n      };\n      await this.serviceManager.fire(userDefinedResponseEvent);\n    } else if (isResponseWithNestedItems(localMessage.item)) {\n      const {itemsLocalMessageItemIDs: itemsLocalMessageItemIDs, bodyLocalMessageItemIDs: bodyLocalMessageItemIDs, footerLocalMessageItemIDs: footerLocalMessageItemIDs, gridLocalMessageItemIDs: gridLocalMessageItemIDs} = localMessage.ui_state;\n      const {allMessageItemsByID: allMessageItemsByID} = this.serviceManager.store.getState();\n      const createElementForNestedUserDefinedResponse = localMessageItemID => {\n        const nestedLocalMessage = allMessageItemsByID[localMessageItemID];\n        return this.handleUserDefinedResponseItems(nestedLocalMessage, originalMessage);\n      };\n      if (gridLocalMessageItemIDs?.length) {\n        await asyncForEach(gridLocalMessageItemIDs, row => asyncForEach(row, cell => asyncForEach(cell, itemID => createElementForNestedUserDefinedResponse(itemID))));\n      }\n      if (itemsLocalMessageItemIDs?.length) {\n        await asyncForEach(itemsLocalMessageItemIDs, createElementForNestedUserDefinedResponse);\n      }\n      if (bodyLocalMessageItemIDs?.length) {\n        await asyncForEach(bodyLocalMessageItemIDs, createElementForNestedUserDefinedResponse);\n      }\n      if (footerLocalMessageItemIDs?.length) {\n        await asyncForEach(footerLocalMessageItemIDs, createElementForNestedUserDefinedResponse);\n      }\n    }\n  }\n  async handleUserDefinedResponseItemsChunk(messageID, chunk, messageItem) {\n    if (renderAsUserDefinedMessage(messageItem)) {\n      const {store: store} = this.serviceManager;\n      const itemID = streamItemID(messageID, messageItem);\n      let element;\n      let slotName;\n      if (!messageItem.user_defined?.silent) {\n        ({element: element, slotName: slotName} = this.getOrCreateUserDefinedElement(itemID));\n      }\n      const userDefinedResponseEvent = {\n        type: BusEventType.CHUNK_USER_DEFINED_RESPONSE,\n        data: {\n          messageItem: messageItem,\n          chunk: chunk,\n          element: element,\n          slot: slotName\n        }\n      };\n      await this.serviceManager.fire(userDefinedResponseEvent);\n    }\n  }\n  async processMessageResponse(fullMessage, isLatestWelcomeNode, requestMessage, requestOptions = {}) {\n    const {store: store} = this.serviceManager;\n    const {config: config} = store.getState();\n    const initialRestartCount = this.serviceManager.restartCount;\n    const output = fullMessage.output.generic;\n    fullMessage.request_id = requestMessage?.id;\n    addDefaultsToMessage(fullMessage);\n    store.dispatch(actions.addMessage(fullMessage));\n    let previousItemID = null;\n    for (let index = 0; index < output.length && initialRestartCount === this.serviceManager.restartCount; index++) {\n      const messageItem = output[index];\n      if (messageItem) {\n        const pause = isPause(messageItem);\n        const agent = isConnectToAgent(messageItem);\n        const tour = hasTourUserDefinedType(messageItem);\n        const localMessageItem = outputItemToLocalItem(messageItem, fullMessage, isLatestWelcomeNode, requestOptions.disableFadeAnimation);\n        if (tour && (requestOptions.skipTourCard || messageItem.user_defined?.skip_card)) {\n          const startTourReason = requestOptions.skipTourCard ? TourStartReason.START_TOUR_METHOD : TourStartReason.SKIP_CARD;\n          const {viewState: viewState} = store.getState().persistedToBrowserStorage.launcherState;\n          if (viewState.mainWindow) {\n            const mainWindowCloseReason = requestOptions.skipTourCard ? MainWindowCloseReason.CALLED_START_TOUR : MainWindowCloseReason.TOUR_SKIP_CARD;\n            this.startTour(localMessageItem, startTourReason, {\n              mainWindowCloseReason: mainWindowCloseReason\n            }).catch(error => {\n              consoleError(\"Error starting the tour\", error);\n            });\n          } else {\n            const viewChangeReason = requestOptions.skipTourCard ? ViewChangeReason.CALLED_START_TOUR : ViewChangeReason.TOUR_SKIP_CARD;\n            this.startTour(localMessageItem, startTourReason, {\n              viewChangeReason: viewChangeReason\n            }).catch(error => {\n              consoleError(\"Error starting the tour\", error);\n            });\n          }\n        } else if (!tour && requestOptions.skipTourCard) {\n          consoleError(\"The message response received was not a tour, so the tour card was not skipped nor was a tour started by the startTour() call.\");\n        }\n        const nestedLocalMessageItems = [];\n        createLocalMessageItemsForNestedMessageItems(localMessageItem, fullMessage, false, nestedLocalMessageItems, true);\n        store.dispatch(actions.addNestedMessages(nestedLocalMessageItems));\n        if (agent && isResponse(fullMessage)) {\n          store.dispatch(actions.addIsTypingCounter(1));\n          if (!hasServiceDesk(config)) {\n            const message = 'Web chat received a \"connect_to_agent\" message but there is no service desk configured. Check your chat configuration.';\n            this.errorOccurred({\n              errorType: OnErrorType.INTEGRATION_ERROR,\n              message: message\n            });\n            store.dispatch(actions.setMessageHistoryProperty(localMessageItem.fullMessageID, \"agent_no_service_desk\", true));\n          }\n          const agentAvailability = await (this.serviceManager.humanAgentService?.checkAreAnyAgentsOnline(fullMessage));\n          if (initialRestartCount === this.serviceManager.restartCount) {\n            store.dispatch(actions.setMessageHistoryProperty(localMessageItem.fullMessageID, \"agent_availability\", agentAvailability));\n            let shouldAutoRequestAgent = false;\n            if (config.public.serviceDesk?.skipConnectAgentCard) {\n              shouldAutoRequestAgent = true;\n            }\n            store.dispatch(actions.addIsTypingCounter(-1));\n            if (shouldAutoRequestAgent && agentAvailability === AgentsOnlineStatus.ONLINE) {\n              this.serviceManager.humanAgentService.startChat(localMessageItem, fullMessage);\n            }\n          }\n        }\n        if (pause) {\n          const showIsTyping = isTyping(messageItem);\n          if (showIsTyping) {\n            store.dispatch(actions.addIsTypingCounter(1));\n          }\n          await sleep(messageItem.time);\n          if (showIsTyping && initialRestartCount === this.serviceManager.restartCount) {\n            store.dispatch(actions.addIsTypingCounter(-1));\n          }\n        } else {\n          await this.handleUserDefinedResponseItems(localMessageItem, fullMessage);\n          if (!localMessageItem.item.user_defined?.silent && initialRestartCount === this.serviceManager.restartCount) {\n            this.serviceManager.store.dispatch(actions.addLocalMessageItem(localMessageItem, fullMessage, false, previousItemID));\n            previousItemID = localMessageItem.ui_state.id;\n          }\n        }\n      }\n    }\n  }\n  openResponsePanel(localMessageItem, isMessageForInput) {\n    this.serviceManager.store.dispatch(actions.setResponsePanelContent(localMessageItem, isMessageForInput));\n    this.serviceManager.store.dispatch(actions.setResponsePanelIsOpen(true));\n  }\n  async insertLocalMessageResponse(message) {\n    message.id = uuid(UUIDType.MESSAGE);\n    await this.processMessageResponse(message, false, null, {});\n  }\n  updateLanguagePack(changes) {\n    const {languagePack: languagePack, locale: locale} = this.serviceManager.store.getState();\n    const messages = {\n      ...languagePack,\n      ...changes\n    };\n    setIntl(this.serviceManager, locale, messages);\n  }\n  addNotification(notification) {\n    this.serviceManager.store.dispatch(actions.addNotification(notification));\n  }\n  removeNotification(groupID) {\n    this.serviceManager.store.dispatch(actions.removeNotifications({\n      groupID: groupID\n    }));\n  }\n  removeAllNotifications() {\n    this.serviceManager.store.dispatch(actions.removeAllNotifications());\n  }\n  updateCSSVariables(publicVars, whiteLabelVariables = {}) {\n    const {store: store} = this.serviceManager;\n    const {theme: theme} = store.getState();\n    const {carbonTheme: carbonTheme, useAITheme: useAITheme} = theme;\n    if (useAITheme) {\n      const usePublicVars = publicVars;\n      publicVars = {};\n      whiteLabelVariables = {};\n      usePublicVars && Object.entries(usePublicVars).forEach(([variable]) => {\n        if (VALID_PUBLIC_VARS_IN_AI_THEME_SET.has(variable)) {\n          publicVars[variable] = usePublicVars[variable];\n        } else {\n          consoleWarn(UPDATE_CSS_VARS_AI_THEME_WARNING_MESSAGE);\n        }\n      });\n    } else {\n      publicVars = {\n        ...publicVars\n      };\n      whiteLabelVariables = {\n        ...whiteLabelVariables\n      };\n    }\n    const allVariables = mergeCSSVariables(publicVars, whiteLabelVariables, carbonTheme, useAITheme);\n    store.dispatch(actions.updateCSSVariables(allVariables, publicVars, whiteLabelVariables));\n  }\n  updateBotName(name) {\n    this.serviceManager.store.dispatch(actions.updateBotName(name));\n  }\n  updateMainHeaderTitle(title) {\n    this.serviceManager.store.dispatch(actions.updateMainHeaderTitle(title));\n  }\n  updateBotAvatarURL(url) {\n    this.serviceManager.store.dispatch(actions.updateBotAvatarURL(url));\n  }\n  updateHomeScreenConfig(homeScreenConfig) {\n    this.serviceManager.store.dispatch(actions.updateHomeScreenConfig(homeScreenConfig));\n  }\n  updateLauncherConfig(launcherConfig) {\n    this.serviceManager.store.dispatch(actions.updateLauncherConfig(launcherConfig));\n  }\n  async changeView(newView, reason, tryHydrating = true, forceViewChange = false) {\n    const {store: store} = this.serviceManager;\n    const {viewState: viewState} = store.getState().persistedToBrowserStorage.launcherState;\n    let newViewState = constructViewState(newView, store.getState());\n    if (!validateViewState(newViewState, store.getState())) {\n      return viewState;\n    }\n    if (!isEqual(newViewState, viewState) || forceViewChange) {\n      await this.fireViewChangeEventsAndChangeView(newViewState, reason);\n      newViewState = store.getState().persistedToBrowserStorage.launcherState.viewState;\n      if (tryHydrating && (newViewState.mainWindow || newViewState.tour) && !store.getState().isHydrated) {\n        this.hydrateChat().catch(error => {\n          consoleError(\"Error hydrating the chat\", error);\n        });\n      }\n    }\n    return newViewState;\n  }\n  async fireViewChangeEventsAndChangeView(newViewState, reason) {\n    const {store: store} = this.serviceManager;\n    if (store.getState().viewChanging) {\n      throw new Error(\"The view may not be changed while a view change event is already running. Please make sure to resolve any promises from these events.\");\n    }\n    store.dispatch(actions.setViewChanging(true));\n    const {viewState: viewState} = store.getState().persistedToBrowserStorage.launcherState;\n    const {viewChangeReason: viewChangeReason} = reason;\n    const oldViewState = deepFreeze(viewState);\n    try {\n      const preViewChangeEvent = {\n        type: BusEventType.VIEW_PRE_CHANGE,\n        reason: viewChangeReason,\n        oldViewState: oldViewState,\n        newViewState: newViewState,\n        cancelViewChange: false\n      };\n      await this.serviceManager.fire(preViewChangeEvent);\n      if (preViewChangeEvent.cancelViewChange) {\n        debugLog(\"The view changing was cancelled by a view:pre:change event.\");\n        return;\n      }\n      if (!validateViewState(preViewChangeEvent.newViewState, store.getState())) {\n        return;\n      }\n      newViewState = preViewChangeEvent.newViewState;\n      store.dispatch(actions.setViewState(deepFreeze(newViewState)));\n      const viewChangeEvent = {\n        type: BusEventType.VIEW_CHANGE,\n        reason: viewChangeReason,\n        oldViewState: oldViewState,\n        newViewState: newViewState,\n        cancelViewChange: false\n      };\n      await this.serviceManager.fire(viewChangeEvent);\n      if (viewChangeEvent.cancelViewChange) {\n        store.dispatch(actions.setViewState(oldViewState));\n        debugLog(\"The view changing was cancelled by a view:change event.\");\n        return;\n      }\n      if (!validateViewState(viewChangeEvent.newViewState, store.getState())) {\n        store.dispatch(actions.setViewState(oldViewState));\n        return;\n      }\n      newViewState = viewChangeEvent.newViewState;\n      store.dispatch(actions.setViewState(deepFreeze(newViewState)));\n    } finally {\n      store.dispatch(actions.setViewChanging(false));\n    }\n  }\n  async startTour(message, startTourReason, changeViewReason) {\n    this.serviceManager.store.dispatch(actions.setTourData(message.fullMessageID));\n    const newViewState = await this.changeView(ViewType.TOUR, changeViewReason);\n    if (newViewState.tour) {\n      await this.serviceManager.fire({\n        type: BusEventType.TOUR_START,\n        reason: startTourReason\n      });\n      await this.serviceManager.fire({\n        type: BusEventType.TOUR_STEP,\n        step: this.serviceManager.store.getState().tourState.activeTourStepItems[0]\n      });\n    }\n  }\n  async endTour(reason) {\n    const {viewState: viewState} = this.serviceManager.store.getState().persistedToBrowserStorage.launcherState;\n    let newViewState = viewState;\n    if (viewState.tour) {\n      newViewState = await this.changeView(ViewType.LAUNCHER, reason);\n    }\n    if (!newViewState.tour) {\n      this.serviceManager.store.dispatch(actions.clearTourData());\n      return true;\n    }\n    return false;\n  }\n  goToSpecificTourStep(stepId) {\n    const {activeTourStepItems: activeTourStepItems} = this.serviceManager.store.getState().tourState;\n    const newStepIndex = activeTourStepItems.findIndex(stepItem => stepItem.step_id === stepId);\n    if (newStepIndex) {\n      this.changeStepInTour({\n        newStepIndex: newStepIndex\n      });\n    } else {\n      consoleError(`No step with the id \"${stepId}\" was found within the current tour. As a result, goToTourStep() did not change the current tour step.`);\n    }\n  }\n  async changeStepInTour(changeStepOptions) {\n    const {store: store} = this.serviceManager;\n    const {activeTourStepItems: activeTourStepItems} = store.getState().tourState;\n    const {activeTourCurrentStepIndex: activeTourCurrentStepIndex} = store.getState().persistedToBrowserStorage.chatState.persistedTourState;\n    let {newStepIndex: newStepIndex} = changeStepOptions;\n    if (changeStepOptions.nextStep) {\n      newStepIndex = activeTourCurrentStepIndex + 1;\n    } else if (changeStepOptions.previousStep) {\n      newStepIndex = activeTourCurrentStepIndex - 1;\n    }\n    store.dispatch(actions.changeStepInTour(newStepIndex));\n    const actualNewStepIndex = store.getState().persistedToBrowserStorage.chatState.persistedTourState.activeTourCurrentStepIndex;\n    if (actualNewStepIndex === newStepIndex) {\n      await this.serviceManager.fire({\n        type: BusEventType.TOUR_STEP,\n        step: activeTourStepItems[actualNewStepIndex]\n      });\n    } else {\n      consoleWarn(\"The tour tried to change to a step that was out of bounds for the step array, so no step change was made.\");\n    }\n  }\n  errorOccurred(error) {\n    consoleError(\"An error has occurred\", error);\n    if (error.catastrophicErrorType) {\n      this.serviceManager.store.dispatch(actions.setAppStateValue(\"catastrophicErrorType\", error.catastrophicErrorType));\n    }\n    callOnError(this.serviceManager.additionalChatParameters.onError, error);\n  }\n  async restartConversation(options = {}) {\n    const {skipHydration: skipHydration = false, endAgentConversation: endAgentConversation = true, fireEvents: fireEvents = true} = options;\n    debugLog(\"Restarting conversation\");\n    if (this.restarting) {\n      consoleWarn(\"You cannot restart a conversation while a previous restart is still pending.\");\n      return;\n    }\n    this.restarting = true;\n    try {\n      const {serviceManager: serviceManager} = this;\n      const {store: store} = serviceManager;\n      if (fireEvents) {\n        await serviceManager.fire({\n          type: BusEventType.PRE_RESTART_CONVERSATION\n        });\n      }\n      serviceManager.restartCount++;\n      if (this.hydrating) {\n        await this.hydrationPromise;\n      }\n      const currentState = store.getState();\n      const {persistedToBrowserStorage: persistedToBrowserStorage} = currentState;\n      const {viewState: viewState} = persistedToBrowserStorage.launcherState;\n      const {isConnecting: isConnecting} = currentState.agentState;\n      const {isConnected: isConnected} = currentState.persistedToBrowserStorage.chatState.agentState;\n      if ((isConnected || isConnecting) && endAgentConversation) {\n        await serviceManager.humanAgentService.endChat(true, false, false);\n      }\n      if (viewState.tour) {\n        await this.serviceManager.actions.changeView(ViewType.MAIN_WINDOW, {\n          mainWindowOpenReason: MainWindowOpenReason.CALLED_RESTART_CONVERSATION\n        }, false);\n      }\n      this.serviceManager.instance.updateAssistantInputFieldVisibility(true);\n      this.serviceManager.messageService.cancelAllMessageRequests();\n      store.dispatch(actions.restartConversation());\n      if (!skipHydration) {\n        this.hydrationPromise = null;\n      }\n      if (fireEvents) {\n        await serviceManager.fire({\n          type: BusEventType.RESTART_CONVERSATION\n        });\n      }\n      if (this.hydrating) {\n        await this.hydrationPromise;\n      }\n      if (!skipHydration && !serviceManager.store.getState().isHydrated) {\n        this.hydrationPromise = null;\n        if (store.getState().persistedToBrowserStorage.launcherState.viewState.mainWindow) {\n          await serviceManager.actions.hydrateChat();\n        }\n      } else {\n        store.dispatch(actions.chatWasHydrated());\n      }\n    } finally {\n      this.restarting = false;\n    }\n  }\n  async destroySession(keepOpenState) {\n    const {store: store} = this.serviceManager;\n    const {persistedToBrowserStorage: persistedToBrowserStorage} = store.getState();\n    const originalViewState = persistedToBrowserStorage.launcherState.viewState;\n    const newPersistedToBrowserStorage = cloneDeep(DEFAULT_PERSISTED_TO_BROWSER);\n    if (keepOpenState) {\n      newPersistedToBrowserStorage.launcherState.viewState = originalViewState;\n      if (originalViewState.tour) {\n        newPersistedToBrowserStorage.launcherState.viewState = {\n          ...originalViewState,\n          tour: false,\n          mainWindow: true\n        };\n      }\n    } else {\n      newPersistedToBrowserStorage.launcherState.viewState = VIEW_STATE_LAUNCHER_OPEN;\n    }\n    this.serviceManager.messageService.cancelAllMessageRequests();\n    this.serviceManager.userSessionStorageService.clearLauncherSession();\n    this.serviceManager.userSessionStorageService.clearChatSession();\n    this.serviceManager.store.dispatch(actions.setAppStateValue(\"persistedToBrowserStorage\", newPersistedToBrowserStorage));\n  }\n  agentEndConversation(endedByUser) {\n    return this.serviceManager.humanAgentService.endChat(endedByUser);\n  }\n  agentUpdateIsSuspended(isSuspended) {\n    this.serviceManager.store.dispatch(agentUpdateIsSuspended(isSuspended));\n  }\n  async createElementsForUserDefinedResponses(messages) {\n    await asyncForEach(Object.values(messages.allMessageItemsByID), localMessage => {\n      const originalMessage = messages.allMessagesByID[localMessage.fullMessageID];\n      return this.handleUserDefinedResponseItems(localMessage, originalMessage);\n    });\n  }\n}\n\nexport { ChatActionsImpl };\n","import cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport { asyncForEach, asArray } from \"../utils/lang/arrayUtils.js\";\n\nimport { debugStackTrace, consoleError, consoleLog, consoleWarn, isEnableDebugLog, debugLog } from \"../utils/miscUtils.js\";\n\nimport { resolvablePromise } from \"../utils/resolvablePromise.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const HANDLER_NOT_FUNCTION = \"The event handler is not a function.\";\n\nclass EventBus {\n  constructor() {\n    this.handlersByType = new Map;\n    this.eventsTypesRunning = new Set;\n    this.eventsRunningCount = 0;\n  }\n  async fire(busEvent, instance) {\n    logEvent(\"Before fire\", busEvent);\n    const {type: type} = busEvent;\n    if (!type) {\n      throw new Error(`Attempted to fire an event with no type! ${JSON.stringify(busEvent)}`);\n    }\n    function wrappedHandler(handler) {\n      const result = handler(busEvent, instance);\n      if (result && !(result instanceof Promise)) {\n        consoleWarn(`An event handler for event ${type} returned a non-promise. This might be a mistake.`, result);\n      }\n      return result;\n    }\n    if (this.eventsTypesRunning.has(type)) {\n      throw new Error(`An event of type ${type} is already running. Please make sure that you have resolved the Promises for any earlier events that were fired.`);\n    }\n    try {\n      this.eventsRunningCount++;\n      try {\n        this.eventsTypesRunning.add(type);\n        const handlersForType = this.handlersByType.get(type);\n        if (handlersForType && handlersForType.length) {\n          const handlersCopy = handlersForType.slice();\n          await asyncForEach(handlersCopy, wrappedHandler);\n        }\n      } finally {\n        this.eventsTypesRunning.delete(type);\n      }\n    } finally {\n      this.eventsRunningCount--;\n      if (this.waitForEmptyPromise && this.eventsRunningCount === 0) {\n        this.waitForEmptyPromise.doResolve();\n      }\n    }\n    logEvent(\"After fire\", busEvent);\n  }\n  fireSync(busEvent, instance) {\n    logEvent(\"Before fire\", busEvent);\n    const {type: type} = busEvent;\n    const handlersForType = this.handlersByType.get(type);\n    if (handlersForType && handlersForType.length) {\n      const handlersCopy = handlersForType.slice();\n      handlersCopy.forEach(handler => handler(busEvent, instance));\n    }\n    logEvent(\"After fire\", busEvent);\n  }\n  async waitForEmpty() {\n    if (this.eventsRunningCount === 0) {\n      return;\n    }\n    if (!this.waitForEmptyPromise) {\n      this.waitForEmptyPromise = resolvablePromise();\n    }\n    await this.waitForEmptyPromise;\n    this.waitForEmptyPromise = null;\n  }\n  on(handlers) {\n    const data = asArray(handlers);\n    data.forEach(({type: type, handler: handler}) => {\n      if (!type) {\n        throw new Error(`Attempted to listen to an event with no type: \"${type}\"!`);\n      }\n      if (typeof handler === \"function\") {\n        if (!this.handlersByType.has(type)) {\n          this.handlersByType.set(type, []);\n        }\n        const handlersForType = this.handlersByType.get(type);\n        debugStackTrace(`[EventBus] Adding ${type} event handler`, handler);\n        handlersForType.push(handler);\n      } else {\n        consoleError(HANDLER_NOT_FUNCTION, handler);\n      }\n    });\n    return this;\n  }\n  off(handlers) {\n    const data = asArray(handlers);\n    data.forEach(({type: type, handler: handler}) => {\n      const handlersForType = this.handlersByType.get(type);\n      if (handlersForType) {\n        if (handler) {\n          const index = handlersForType.indexOf(handler);\n          if (index !== -1) {\n            const removed = handlersForType.splice(index, 1);\n            debugStackTrace(`[EventBus] Removing ${type} event handlers`, removed);\n          }\n        } else {\n          debugStackTrace(`[EventBus] Removing all ${type} event handlers`);\n          this.handlersByType.set(type, []);\n        }\n      }\n    });\n    return this;\n  }\n  once(handlers) {\n    const data = asArray(handlers);\n    data.forEach(({type: type, handler: handler}) => {\n      if (typeof handler === \"function\") {\n        const onceHandler = (event, instance) => {\n          this.off({\n            type: type,\n            handler: onceHandler\n          });\n          return handler(event, instance);\n        };\n        this.on({\n          type: type,\n          handler: onceHandler\n        });\n      } else {\n        consoleError(HANDLER_NOT_FUNCTION, handler);\n      }\n    });\n    return this;\n  }\n  logListeners() {\n    this.handlersByType.forEach((listeners, type) => {\n      console.group(`Event ${type} (${listeners.length})`);\n      listeners.forEach(listener => {\n        consoleLog(\"Listener\", listener);\n      });\n      console.groupEnd();\n    });\n  }\n  clear() {\n    this.handlersByType.clear();\n    return this;\n  }\n}\n\nfunction logEvent(message, busEvent) {\n  if (isEnableDebugLog()) {\n    const eventCopy = cloneDeep(busEvent);\n    debugLog(`[EventBus] ${message}`, eventCopy);\n  }\n}\n\nexport { EventBus };\n","import actions from \"../store/actions.js\";\n\nimport { DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS } from \"../store/reducerUtils.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function createCustomPanelInstance(serviceManager) {\n  const customPanelInstance = {\n    open(options = DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS) {\n      const {store: store} = serviceManager;\n      store.dispatch(actions.setCustomPanelConfigOptions(options));\n      store.dispatch(actions.setCustomPanelOpen(true));\n    },\n    close() {\n      serviceManager.store.dispatch(actions.setCustomPanelOpen(false));\n    }\n  };\n  return Object.freeze(customPanelInstance);\n}\n\nexport { createCustomPanelInstance };\n","import { notesToLoadedHistory } from \"../schema/historyToMessages.js\";\n\nimport actions from \"../store/actions.js\";\n\nimport \"../../../types/state/AppState.js\";\n\nimport { consoleError } from \"../utils/miscUtils.js\";\n\nimport { MainWindowOpenReason } from \"../../../types/events/eventBusTypes.js\";\n\nimport { ViewType } from \"../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ class HistoryService {\n  constructor(serviceManager) {\n    this.serviceManager = serviceManager;\n  }\n  async loadHistory(useHistory) {\n    const state = this.serviceManager.store.getState();\n    const {config: config, persistedToBrowserStorage: persistedToBrowserStorage} = state;\n    const publicConfig = config.public;\n    const {viewState: viewState} = persistedToBrowserStorage.launcherState;\n    try {\n      let resultData;\n      if (useHistory) {\n        resultData = useHistory;\n      } else if (publicConfig.messaging?.customLoadHistory) {\n        const items = await publicConfig.messaging.customLoadHistory(this.serviceManager.instance);\n        const note = {\n          body: items\n        };\n        resultData = {\n          notes: [ note ]\n        };\n      }\n      if (resultData) {\n        const historyNotes = resultData?.notes;\n        return notesToLoadedHistory(historyNotes, this.serviceManager);\n      }\n      if (viewState.tour) {\n        await this.serviceManager.actions.changeView(ViewType.MAIN_WINDOW, {\n          mainWindowOpenReason: MainWindowOpenReason.SESSION_HISTORY\n        }, false);\n        this.serviceManager.store.dispatch(actions.clearTourData());\n      }\n    } catch (error) {\n      consoleError(\"An error occurred while attempting to load the conversation history\", error);\n    }\n    return null;\n  }\n}\n\nexport { HistoryService };\n","import { DEFAULT_CHAT_MESSAGES_STATE } from \"../store/reducerUtils.js\";\n\nimport { MessageErrorState } from \"../../../types/messaging/LocalMessageItem.js\";\n\nimport \"../utils/constants.js\";\n\nimport { findLast } from \"../utils/lang/arrayUtils.js\";\n\nimport { deepFreeze } from \"../utils/lang/objectUtils.js\";\n\nimport { isResponse, isRequest, isPause, isResponseWithNestedItems, THREAD_ID_MAIN, isOptionItem, isDateResponseType, isEventRequest } from \"../utils/messageUtils.js\";\n\nimport inputItemToLocalItem from \"./inputItemToLocalItem.js\";\n\nimport { outputItemToLocalItem, createLocalMessageItemsForNestedMessageItems } from \"./outputItemToLocalItem.js\";\n\nimport { BusEventType } from \"../../../types/events/eventBusTypes.js\";\n\nimport { FileStatusValue } from \"../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ async function notesToLoadedHistory(notes, serviceManager) {\n  const allLocalMessagesByID = {};\n  const allMessagesByID = {};\n  const loadingState = {\n    serviceManager: serviceManager,\n    allMessages: [],\n    allMessagesByID: allMessagesByID,\n    allLocalMessagesByID: allLocalMessagesByID,\n    threadMessagesByThreadID: {},\n    responsesByRequestID: {},\n    relatedMessageByID: {},\n    localMessagesByOriginalMessageID: {},\n    lastThreadID: null,\n    loadedHistory: {\n      messageHistory: {\n        allMessageItemsByID: allLocalMessagesByID,\n        allMessagesByID: allMessagesByID,\n        botMessageState: null\n      },\n      latestTransferToAgentResponse: null,\n      latestPanelLocalMessageItem: null\n    }\n  };\n  await notesToMessages(notes, loadingState);\n  if (!loadingState.allMessages.length) {\n    return null;\n  }\n  createLocalMessages(loadingState);\n  createChatStates(loadingState);\n  markIsLatestWelcomeNode(loadingState);\n  markSelectedOptions(loadingState);\n  return loadingState.loadedHistory;\n}\n\nasync function notesToMessages(notes, loadingState) {\n  const {allMessages: allMessages, allMessagesByID: allMessagesByID, responsesByRequestID: responsesByRequestID, relatedMessageByID: relatedMessageByID, serviceManager: serviceManager, localMessagesByOriginalMessageID: localMessagesByOriginalMessageID} = loadingState;\n  if (!notes?.length) {\n    return;\n  }\n  notes.forEach(note => {\n    const sessionHistory = note.body;\n    const pushAndPrepareMessage = historyItem => {\n      const {message: message} = historyItem;\n      if (!isEventRequest(message) && (isRequest(message) || isResponse(message))) {\n        addMessage(message, loadingState, historyItem);\n      }\n    };\n    sessionHistory.forEach(pushAndPrepareMessage);\n  });\n  for (let index = allMessages.length - 1; index >= 0; index--) {\n    const message = allMessages[index];\n    if (message.history?.file_upload_status === FileStatusValue.UPLOADING) {\n      message.history.file_upload_status = FileStatusValue.COMPLETE;\n      message.history.error_state = MessageErrorState.FAILED;\n    }\n    if (isResponse(message) && message.history.silent) {\n      allMessages.splice(index, 1);\n      delete allMessagesByID[message.id];\n    } else {\n      localMessagesByOriginalMessageID[message.id] = [];\n      if (isResponse(message) && message.request_id) {\n        responsesByRequestID[message.request_id] = message;\n      }\n      if (message.history.related_message_id) {\n        relatedMessageByID[message.history.related_message_id] = message;\n      }\n    }\n  }\n  if (!allMessages.length) {\n    return;\n  }\n  Object.freeze(allMessages);\n  const beginEvent = {\n    type: BusEventType.HISTORY_BEGIN,\n    messages: allMessages\n  };\n  await serviceManager.eventBus.fire(beginEvent, serviceManager.instance);\n  allMessages.forEach(deepFreeze);\n  await serviceManager.eventBus.fire({\n    type: BusEventType.HISTORY_END,\n    messages: allMessages\n  }, serviceManager.instance);\n}\n\nfunction addMessage(message, loadingState, historyItem) {\n  message.history = message.history || {};\n  message.history.from_history = true;\n  message.history.timestamp = new Date(historyItem.time).getTime();\n  if (message.thread_id !== THREAD_ID_MAIN) {\n    loadingState.lastThreadID = message.thread_id;\n  }\n  loadingState.allMessagesByID[message.id] = message;\n  loadingState.allMessages.push(message);\n}\n\nfunction createLocalMessages(loadingState) {\n  const {allMessages: allMessages, allLocalMessagesByID: allLocalMessagesByID, localMessagesByOriginalMessageID: localMessagesByOriginalMessageID} = loadingState;\n  allMessages.forEach(message => {\n    if (isRequest(message)) {\n      if (!message.history?.silent) {\n        const text = message.history?.label || message.input.text;\n        const localMessage = inputItemToLocalItem(message, text);\n        localMessagesByOriginalMessageID[message.id].push(localMessage);\n        allLocalMessagesByID[localMessage.ui_state.id] = localMessage;\n      }\n    } else {\n      const items = getResponseItems(message);\n      if (items?.length) {\n        items.forEach(messageItem => {\n          if (!isPause(messageItem)) {\n            const localMessage = outputItemToLocalItem(messageItem, message, false);\n            localMessagesByOriginalMessageID[message.id].push(localMessage);\n            allLocalMessagesByID[localMessage.ui_state.id] = localMessage;\n            if (isResponseWithNestedItems(localMessage.item)) {\n              const nestedLocalMessageItems = [];\n              createLocalMessageItemsForNestedMessageItems(localMessage, message, true, nestedLocalMessageItems, true);\n              nestedLocalMessageItems.forEach(localMessageItem => {\n                const localMessageID = localMessageItem.ui_state.id;\n                loadingState.loadedHistory.messageHistory.allMessageItemsByID[localMessageID] = localMessageItem;\n              });\n            }\n          }\n        });\n      }\n    }\n    addMessageToThread(message, loadingState);\n  });\n}\n\nfunction getResponseItems(message) {\n  if (isResponse(message)) {\n    return message.output.generic;\n  }\n  return null;\n}\n\nfunction addMessageToThread(message, loadingState) {\n  const {threadMessagesByThreadID: threadMessagesByThreadID} = loadingState;\n  let thread = threadMessagesByThreadID[THREAD_ID_MAIN];\n  if (!thread) {\n    thread = [];\n    threadMessagesByThreadID[THREAD_ID_MAIN] = thread;\n  }\n  thread.push(message);\n}\n\nfunction createChatStates(loadingState) {\n  const {loadedHistory: loadedHistory, threadMessagesByThreadID: threadMessagesByThreadID, localMessagesByOriginalMessageID: localMessagesByOriginalMessageID} = loadingState;\n  loadedHistory.messageHistory.botMessageState = toChatMessageState(threadMessagesByThreadID[THREAD_ID_MAIN], localMessagesByOriginalMessageID);\n}\n\nfunction toChatMessageState(messages, localMessagesByFullMessageID) {\n  const localMessageIDs = [];\n  const messageIDs = [];\n  if (messages) {\n    messages.forEach(message => {\n      messageIDs.push(message.id);\n      localMessagesByFullMessageID[message.id].forEach(localMessage => {\n        localMessageIDs.push(localMessage.ui_state.id);\n      });\n    });\n  }\n  return {\n    ...DEFAULT_CHAT_MESSAGES_STATE,\n    localMessageIDs: localMessageIDs,\n    messageIDs: messageIDs\n  };\n}\n\nfunction markIsLatestWelcomeNode(loadingState) {\n  const {responsesByRequestID: responsesByRequestID, threadMessagesByThreadID: threadMessagesByThreadID, localMessagesByOriginalMessageID: localMessagesByOriginalMessageID} = loadingState;\n  const mainThreadMessages = threadMessagesByThreadID[THREAD_ID_MAIN];\n  const welcomeRequest = findLast(mainThreadMessages, message => isRequest(message) && message.history.is_welcome_request);\n  if (welcomeRequest) {\n    const welcomeResponse = responsesByRequestID[welcomeRequest.id];\n    if (welcomeResponse) {\n      localMessagesByOriginalMessageID[welcomeResponse.id].forEach(localMessage => {\n        localMessage.ui_state.isWelcomeResponse = true;\n      });\n    }\n  }\n}\n\nfunction markSelectedOptions({allMessages: allMessages, relatedMessageByID: relatedMessageByID, localMessagesByOriginalMessageID: localMessagesByOriginalMessageID}) {\n  allMessages.forEach(message => {\n    if (isResponse(message)) {\n      localMessagesByOriginalMessageID[message.id].forEach(localMessage => {\n        if (isOptionItem(localMessage.item)) {\n          const relatedRequest = relatedMessageByID[message.id];\n          if (isRequest(relatedRequest)) {\n            localMessage.ui_state.optionSelected = relatedRequest;\n          }\n        } else if (isDateResponseType(localMessage)) {\n          const relatedRequest = relatedMessageByID[message.id];\n          if (isRequest(relatedRequest)) {\n            localMessage.ui_state.originalUserText = relatedRequest.history.label;\n          }\n        }\n      });\n    }\n  });\n}\n\nexport { notesToLoadedHistory };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nclass MessageLoadingManager {\n  start(onExceededMaxSilentLoading, onEnd, onTimeout, msMaxSilentLoading, msMaxAttempt) {\n    this.hasExceededMaxSilentLoading = false;\n    this.onEnd = onEnd;\n    this.onSilentLoading = setTimeout(() => {\n      this.hasExceededMaxSilentLoading = true;\n      onExceededMaxSilentLoading();\n    }, msMaxSilentLoading);\n    this.onMaxAttempt = setTimeout(() => {\n      onTimeout();\n    }, msMaxAttempt);\n  }\n  end() {\n    if (this.onMaxAttempt) {\n      clearTimeout(this.onMaxAttempt);\n    }\n    if (this.onSilentLoading) {\n      clearTimeout(this.onSilentLoading);\n    }\n    if (this.onEnd) {\n      this.onEnd(this.hasExceededMaxSilentLoading);\n    }\n    this.hasExceededMaxSilentLoading = null;\n    this.onEnd = null;\n  }\n}\n\nexport { MessageLoadingManager };\n","import cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport inputItemToLocalItem from \"../schema/inputItemToLocalItem.js\";\n\nimport { createLocalMessageForInlineError } from \"../schema/outputItemToLocalItem.js\";\n\nimport actions from \"../store/actions.js\";\n\nimport { MessageErrorState } from \"../../../types/messaging/LocalMessageItem.js\";\n\nimport { deepFreeze } from \"../utils/lang/objectUtils.js\";\n\nimport { MessageLoadingManager } from \"../utils/messageServiceUtils.js\";\n\nimport { getLastBotResponseWithContext, THREAD_ID_MAIN } from \"../utils/messageUtils.js\";\n\nimport { debugLog, consoleError, safeFetchTextWithTimeout } from \"../utils/miscUtils.js\";\n\nimport { resolvablePromise } from \"../utils/resolvablePromise.js\";\n\nimport { MessageInputType } from \"../../../types/messaging/Messages.js\";\n\nimport { MessageSendSource, BusEventType } from \"../../../types/events/eventBusTypes.js\";\n\nimport { OnErrorType } from \"../../../types/config/PublicConfig.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst MS_BETWEEN_RETRIES = [ 1e3, 3e3, 5e3 ];\n\nconst MS_MAX_ATTEMPT = 150 * 1e3;\n\nconst MS_MAX_SILENT_ERROR = 6e3;\n\nconst MS_MAX_SILENT_LOADING = 4e3;\n\nvar RetryType;\n\n(function(RetryType) {\n  RetryType[RetryType[\"SILENT\"] = 1] = \"SILENT\";\n  RetryType[RetryType[\"VISIBLE\"] = 2] = \"VISIBLE\";\n})(RetryType || (RetryType = {}));\n\nclass MessageService {\n  constructor(serviceManager, publicConfig) {\n    this.pendingLocale = false;\n    this.localeIsExplicit = false;\n    this.serviceManager = serviceManager;\n    this.messageLoadingManager = new MessageLoadingManager;\n    this.queue = {\n      waiting: [],\n      current: null\n    };\n    const timeoutOverride = publicConfig.messaging?.messageTimeoutSecs;\n    this.timeoutMS = timeoutOverride ? timeoutOverride * 1e3 : MS_MAX_ATTEMPT;\n  }\n  async processSuccess(current, received) {\n    const {requestOptions: requestOptions, isProcessed: isProcessed} = current;\n    const isWelcomeNode = Boolean(current.message.history.is_welcome_request);\n    if (isProcessed) {\n      return;\n    }\n    this.setMessageErrorState(current, MessageErrorState.NONE);\n    const {message: message} = current;\n    if (received) {\n      if (message.input.message_type !== MessageInputType.EVENT) {\n        if (!isWelcomeNode) {\n          this.messageLoadingManager.end();\n        }\n        received.history = received.history || {};\n        received.history.timestamp = received.history.timestamp || Date.now();\n        current.trackData.lastRequestTime = Date.now() - current.timeLastRequest;\n        current.trackData.totalRequestTime = Date.now() - current.timeFirstRequest;\n        await this.serviceManager.actions.receive(received, isWelcomeNode, message, requestOptions);\n      }\n      this.messageLoadingManager.end();\n    }\n    if (current.isProcessed) {\n      return;\n    }\n    {\n      current.sendMessagePromise.doResolve();\n      current.isProcessed = true;\n    }\n    this.moveToNextQueueItem();\n  }\n  addErrorMessage() {\n    const {store: store} = this.serviceManager;\n    const errorMessage = store.getState().languagePack.errors_singleMessage;\n    const {originalMessage: originalMessage, localMessage: localMessage} = createLocalMessageForInlineError(errorMessage);\n    store.dispatch(actions.addLocalMessageItem(localMessage, originalMessage, true));\n  }\n  async resendMessage(message, localMessageID) {\n    await this.send(cloneDeep(message), MessageSendSource.HYDRATE_RESEND, localMessageID, {\n      skipQueue: true,\n      silent: true\n    });\n  }\n  sendToAssistantAndUpdateErrorState(current) {\n    if (current.isProcessed) {\n      return;\n    }\n    this.sendToAssistant(current);\n    const now = Date.now();\n    const msSinceStarted = now - current.timeFirstRequest;\n    const isSilentErrorWindow = MS_MAX_SILENT_ERROR > msSinceStarted;\n    const type = isSilentErrorWindow ? RetryType.SILENT : RetryType.VISIBLE;\n    if (type === RetryType.VISIBLE) {\n      this.setMessageErrorState(current, MessageErrorState.RETRYING);\n      this.queue.waiting.forEach(waitingMessage => {\n        this.setMessageErrorState(waitingMessage, MessageErrorState.WAITING);\n      });\n    }\n  }\n  async processError(pendingRequest, resultText, allowRetry) {\n    const {message: message, timeFirstRequest: timeFirstRequest, timeLastRequest: timeLastRequest, tryCount: tryCount, isProcessed: isProcessed, trackData: trackData, requestOptions: requestOptions} = pendingRequest;\n    const isWelcome = message.history.is_welcome_request;\n    const now = Date.now();\n    const msSinceStarted = now - timeFirstRequest;\n    const isInAttemptWindow = this.timeoutMS > msSinceStarted && tryCount < MS_BETWEEN_RETRIES.length;\n    if (isProcessed) {\n      return;\n    }\n    trackData.lastRequestTime = Date.now() - timeLastRequest;\n    trackData.totalRequestTime = Date.now() - timeFirstRequest;\n    if (isInAttemptWindow && allowRetry) {\n      trackData.numErrors++;\n      const retryDelay = MS_BETWEEN_RETRIES[pendingRequest.tryCount++];\n      setTimeout(() => {\n        this.sendToAssistantAndUpdateErrorState(pendingRequest);\n      }, retryDelay);\n    } else {\n      let catastrophicErrorType = false;\n      if (isWelcome) {\n        catastrophicErrorType = true;\n      } else if (requestOptions.silent) {\n        this.addErrorMessage();\n      }\n      this.serviceManager.actions.errorOccurred({\n        errorType: OnErrorType.MESSAGE_COMMUNICATION,\n        message: \"An error occurred sending a message\",\n        otherData: resultText,\n        catastrophicErrorType: catastrophicErrorType\n      });\n      this.rejectFinalErrorOnMessage(pendingRequest, resultText);\n    }\n  }\n  rejectFinalErrorOnMessage(pendingRequest, resultText = \"An undefined error occurred trying to send your message.\") {\n    const {sendMessagePromise: sendMessagePromise} = pendingRequest;\n    this.setMessageErrorState(pendingRequest, MessageErrorState.FAILED);\n    const {message: message} = pendingRequest;\n    if (pendingRequest === this.queue.current && message.input.message_type !== MessageInputType.EVENT && !message.history.is_welcome_request) {\n      this.messageLoadingManager.end();\n    }\n    sendMessagePromise.doReject(new Error(resultText));\n    pendingRequest.isProcessed = true;\n    if (pendingRequest === this.queue.current) {\n      this.moveToNextQueueItem();\n    }\n  }\n  async sendToAssistant(current) {\n    const {store: store} = this.serviceManager;\n    const state = store.getState();\n    const {customSendMessage: customSendMessage} = state.config.public.messaging;\n    current.timeLastRequest = Date.now();\n    if (current.isProcessed) {\n      return;\n    }\n    try {\n      const message = cloneDeep(current.message);\n      current.message = message;\n      store.dispatch(actions.updateMessage(message));\n      const controller = new AbortController;\n      current.sendMessageController = controller;\n      debugLog(\"Called customSendMessage\", message);\n      await customSendMessage(message, {\n        signal: controller.signal\n      }, this.serviceManager.instance);\n      await this.processSuccess(current, null);\n    } catch (error) {\n      consoleError(\"An error occurred while sending a message\", error);\n      const resultText = error && (typeof error === \"string\" ? error : JSON.stringify(error)) || \"There was an unidentified error.\";\n      this.processError(current, resultText, !customSendMessage);\n    }\n  }\n  async runQueueIfReady() {\n    if (!this.queue.current && this.queue.waiting.length > 0) {\n      const {eventBus: eventBus, store: store} = this.serviceManager;\n      this.clearCurrentQueueItem();\n      this.queue.current = this.queue.waiting.shift();\n      const {current: current} = this.queue;\n      const {message: message, source: source} = current;\n      const state = store.getState();\n      const {config: config} = store.getState();\n      const {public: publicConfig} = config;\n      current.timeFirstRequest = Date.now();\n      if (message.input.message_type !== MessageInputType.EVENT) {\n        const lastResponse = getLastBotResponseWithContext(state);\n        if (lastResponse) {\n          message.thread_id = THREAD_ID_MAIN;\n        }\n        if (!message.history.is_welcome_request) {\n          const LOADING_INDICATOR_TIMER = !publicConfig.messaging?.messageLoadingIndicatorTimeoutSecs && publicConfig.messaging?.messageLoadingIndicatorTimeoutSecs !== 0 ? MS_MAX_SILENT_LOADING : publicConfig.messaging.messageLoadingIndicatorTimeoutSecs * 1e3;\n          this.messageLoadingManager.start(() => {\n            this.serviceManager.store.dispatch(actions.addIsLoadingCounter(1));\n          }, didExceedMaxLoading => {\n            if (didExceedMaxLoading) {\n              this.serviceManager.store.dispatch(actions.addIsLoadingCounter(-1));\n            }\n          }, () => {\n            this.cancelMessageRequestByID(message.id, true);\n          }, LOADING_INDICATOR_TIMER, this.timeoutMS);\n        }\n        if (current.isProcessed) {\n          return;\n        }\n        const originalUserText = message.history?.label || message.input.text;\n        await eventBus.fire({\n          type: BusEventType.PRE_SEND,\n          data: message,\n          source: source\n        }, this.serviceManager.instance);\n        if (current.isProcessed) {\n          return;\n        }\n        const localMessage = inputItemToLocalItem(message, originalUserText, current.localMessageID);\n        if (!message.history.silent) {\n          store.dispatch(actions.updateLocalMessageItem(localMessage));\n          store.dispatch(actions.updateMessage(message));\n        }\n        deepFreeze(message);\n        await eventBus.fire({\n          type: BusEventType.SEND,\n          data: message,\n          source: source\n        }, this.serviceManager.instance);\n      }\n      this.sendToAssistant(current);\n    }\n  }\n  addToMessageQueue(message, source, localMessageID, sendMessagePromise, requestOptions = {}) {\n    const newPendingMessage = {\n      localMessageID: localMessageID,\n      message: message,\n      sendMessagePromise: sendMessagePromise,\n      requestOptions: requestOptions || {},\n      timeFirstRequest: 0,\n      timeLastRequest: 0,\n      trackData: {\n        numErrors: 0,\n        lastRequestTime: 0,\n        totalRequestTime: 0\n      },\n      tryCount: 0,\n      isProcessed: false,\n      source: source\n    };\n    this.queue.waiting.push(newPendingMessage);\n    if (this.queue.current) {\n      if (message.history?.error_state === MessageErrorState.RETRYING) {\n        this.setMessageErrorState(newPendingMessage, MessageErrorState.WAITING);\n      }\n    }\n  }\n  clearCurrentQueueItem() {\n    if (this.queue.current) {\n      this.queue.current = null;\n    }\n  }\n  moveToNextQueueItem() {\n    this.clearCurrentQueueItem();\n    this.runQueueIfReady();\n  }\n  setMessageErrorState(pendingRequest, errorState) {\n    const {message: message} = pendingRequest;\n    const {allMessagesByID: allMessagesByID} = this.serviceManager.store.getState();\n    const messageToUpdate = allMessagesByID[message.id];\n    if (messageToUpdate) {\n      const currentState = messageToUpdate.history?.error_state;\n      const errorSame = currentState === errorState || errorState === MessageErrorState.NONE && !currentState;\n      if (!errorSame) {\n        let announceMessageID;\n        switch (errorState) {\n         case MessageErrorState.FAILED:\n          {\n            announceMessageID = \"errors_ariaMessageFailed\";\n            break;\n          }\n        }\n        if (announceMessageID) {\n          this.serviceManager.store.dispatch(actions.announceMessage({\n            messageID: announceMessageID\n          }));\n        }\n        this.serviceManager.store.dispatch(actions.setMessageErrorState(message.id, errorState));\n        const {allMessagesByID: allMessagesByID} = this.serviceManager.store.getState();\n        pendingRequest.message = allMessagesByID[message.id];\n      }\n    }\n  }\n  send(message, source, localMessageID, requestOptions) {\n    message.history.timestamp = message.history.timestamp || Date.now();\n    message.input = message.input || {};\n    message.input.message_type = message.input.message_type || MessageInputType.TEXT;\n    const sendMessagePromise = resolvablePromise();\n    this.addToMessageQueue(message, source, localMessageID, sendMessagePromise, requestOptions);\n    this.runQueueIfReady();\n    return sendMessagePromise;\n  }\n  cancelAllMessageRequests() {\n    while (this.queue.waiting.length) {\n      this.cancelMessageRequestByID(this.queue.waiting[0].message.id, false);\n    }\n    if (this.queue.current) {\n      this.cancelMessageRequestByID(this.queue.current.message.id, false);\n      this.clearCurrentQueueItem();\n    }\n  }\n  async cancelMessageRequestByID(messageID, logError) {\n    let pendingRequest;\n    if (this.queue.current?.message.id === messageID) {\n      pendingRequest = this.queue.current;\n    } else {\n      const index = this.queue.waiting.findIndex(item => item.message.id === messageID);\n      if (index !== -1) {\n        pendingRequest = this.queue.waiting[index];\n        this.queue.waiting.splice(index, 1);\n      }\n    }\n    if (pendingRequest) {\n      const {lastResponse: lastResponse, sendMessageController: sendMessageController} = pendingRequest;\n      sendMessageController?.abort(\"Message was cancelled\");\n      this.rejectFinalErrorOnMessage(pendingRequest, \"Message was cancelled\");\n      if (logError) {\n        this.serviceManager.actions.errorOccurred({\n          errorType: OnErrorType.MESSAGE_COMMUNICATION,\n          message: \"Message was cancelled\",\n          otherData: await safeFetchTextWithTimeout(lastResponse)\n        });\n      }\n    }\n  }\n}\n\nexport { MessageService as default };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nclass NamespaceService {\n  constructor(namespace) {\n    this.originalName = namespace;\n    this.attributeSafe = namespace;\n    this.suffix = getSuffix(namespace);\n  }\n}\n\nfunction getSuffix(namespace) {\n  const computedName = computeNamespaceName(namespace);\n  return computedName?.length ? `--${namespace}` : \"\";\n}\n\nfunction computeNamespaceName(namespace) {\n  return namespace ? namespace.trim() : \"\";\n}\n\nexport { NamespaceService };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nclass ServiceManager {\n  constructor() {\n    this.userDefinedElementRegistry = new Map;\n    this.restartCount = 0;\n  }\n  async fire(busEvent) {\n    return this.eventBus.fire(busEvent, this.instance);\n  }\n}\n\nexport { ServiceManager };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nlet innerStorage = {};\n\nconst storage = {\n  getItem(key) {\n    return innerStorage[key];\n  },\n  setItem(key, value) {\n    innerStorage[key] = value;\n  },\n  removeItem(key) {\n    delete innerStorage[key];\n  },\n  length: Object.keys(innerStorage).length,\n  clear() {\n    innerStorage = {};\n  },\n  key(index) {\n    return Object.keys(innerStorage)[index];\n  }\n};\n\nexport { storage as default };\n","import { VERSION } from \"../environmentVariables.js\";\n\nimport { IS_SESSION_STORAGE } from \"../utils/browserUtils.js\";\n\nimport { consoleError } from \"../utils/miscUtils.js\";\n\nimport storage$1 from \"./mockStorage.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst storage = IS_SESSION_STORAGE() ? window.sessionStorage : storage$1;\n\nclass UserSessionStorageService {\n  constructor(serviceManager) {\n    this.serviceManager = serviceManager;\n    this.prefix = `CARBON_CHAT_SESSION${this.serviceManager?.namespace?.suffix || \"\"}`;\n  }\n  loadChatSession() {\n    try {\n      const chatSessionString = storage.getItem(this.getChatSessionKey());\n      const chatSession = chatSessionString ? JSON.parse(chatSessionString) : null;\n      if (chatSession?.version === VERSION) {\n        return chatSession;\n      }\n      this.clearChatSession();\n      return null;\n    } catch (error) {\n      this.clearChatSession();\n      return null;\n    }\n  }\n  loadLauncherSession() {\n    try {\n      const launcherSessionString = storage.getItem(this.getLauncherSessionKey());\n      const launcherSession = launcherSessionString ? JSON.parse(launcherSessionString) : null;\n      if (launcherSession?.version === VERSION) {\n        launcherSession.wasLoadedFromBrowser = true;\n        return launcherSession;\n      }\n      this.clearLauncherSession();\n      return null;\n    } catch (error) {\n      this.clearLauncherSession();\n      return null;\n    }\n  }\n  persistChatSession(session) {\n    try {\n      storage.setItem(this.getChatSessionKey(), JSON.stringify(session));\n    } catch (error) {\n      consoleError(\"Error in persistChatSession\", error);\n    }\n  }\n  persistLauncherSession(session) {\n    try {\n      storage.setItem(this.getLauncherSessionKey(), JSON.stringify(session));\n    } catch (error) {\n      consoleError(\"Error in persistLauncherSession\", error);\n    }\n  }\n  clearChatSession() {\n    try {\n      storage.removeItem(this.getChatSessionKey());\n    } catch (error) {\n      consoleError(\"Error in clearChatSession\", error);\n    }\n  }\n  clearLauncherSession() {\n    try {\n      storage.removeItem(this.getLauncherSessionKey());\n    } catch (error) {\n      consoleError(\"Error in clearLauncherSession\", error);\n    }\n  }\n  getChatSessionKey() {\n    return this.prefix;\n  }\n  getLauncherSessionKey() {\n    return this.prefix;\n  }\n}\n\nexport { UserSessionStorageService };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction replaceCurrentArrayValue(currentValue, newValue) {\n  if (Array.isArray(newValue)) {\n    return newValue;\n  }\n  return undefined;\n}\n\nexport { replaceCurrentArrayValue };\n","import { HA_END_CHAT, HA_UPDATE_FILE_UPLOAD_IN_PROGRESS, HA_SET_IS_SCREEN_SHARING, HA_UPDATE_CAPABILITIES, HA_SET_AGENT_LEFT_CHAT, HA_UPDATE_IS_TYPING, HA_UPDATE_IS_SUSPENDED, HA_SET_PERSISTED_STATE, HA_SET_AGENT_JOINED, HA_SET_SHOW_SCREEN_SHARE_REQUEST, HA_SET_AGENT_AVAILABILITY, HA_SET_IS_RECONNECTING, HA_SET_IS_CONNECTING } from \"./agentActions.js\";\n\nimport { applyLocalMessageUIState } from \"./reducerUtils.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const agentReducers = {\n  [HA_SET_IS_CONNECTING]: (state, action) => {\n    const {isConnecting: isConnecting, localMessageID: localMessageID} = action;\n    return {\n      ...state,\n      agentState: {\n        ...state.agentState,\n        isConnecting: isConnecting,\n        activeLocalMessageID: localMessageID,\n        numUnreadMessages: isConnecting ? 0 : state.agentState.numUnreadMessages\n      },\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          agentState: {\n            ...state.persistedToBrowserStorage.chatState.agentState,\n            isSuspended: isConnecting ? state.persistedToBrowserStorage.chatState.agentState.isSuspended : false\n          }\n        }\n      }\n    };\n  },\n  [HA_SET_IS_RECONNECTING]: (state, action) => {\n    const {isReconnecting: isReconnecting} = action;\n    return {\n      ...state,\n      agentState: {\n        ...state.agentState,\n        isReconnecting: isReconnecting\n      }\n    };\n  },\n  [HA_SET_AGENT_AVAILABILITY]: (state, action) => {\n    if (!state.agentState.isConnecting) {\n      return state;\n    }\n    return {\n      ...state,\n      agentState: {\n        ...state.agentState,\n        availability: state.agentState.isConnecting ? action.availability : null\n      }\n    };\n  },\n  [HA_SET_SHOW_SCREEN_SHARE_REQUEST]: (state, {showRequest: showRequest}) => ({\n    ...state,\n    agentState: {\n      ...state.agentState,\n      showScreenShareRequest: showRequest\n    }\n  }),\n  [HA_SET_AGENT_JOINED]: (state, action) => {\n    const agentProfiles = {\n      ...state.persistedToBrowserStorage.chatState.agentState.agentProfiles\n    };\n    const {agentProfile: agentProfile} = action;\n    if (agentProfile) {\n      agentProfiles[agentProfile.id] = agentProfile;\n    }\n    return {\n      ...state,\n      agentState: {\n        ...state.agentState,\n        isConnecting: false,\n        isReconnecting: false,\n        availability: null\n      },\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          agentState: {\n            ...state.persistedToBrowserStorage.chatState.agentState,\n            isConnected: true,\n            agentProfile: agentProfile,\n            agentProfiles: agentProfiles\n          }\n        }\n      }\n    };\n  },\n  [HA_SET_PERSISTED_STATE]: (state, action) => ({\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        agentState: {\n          ...state.persistedToBrowserStorage.chatState.agentState,\n          serviceDeskState: action.state\n        }\n      }\n    }\n  }),\n  [HA_UPDATE_IS_SUSPENDED]: (state, action) => {\n    if (!state.agentState.isConnecting && !state.persistedToBrowserStorage.chatState.agentState.isConnected) {\n      return state;\n    }\n    return {\n      ...state,\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          agentState: {\n            ...state.persistedToBrowserStorage.chatState.agentState,\n            isSuspended: action.isSuspended\n          }\n        }\n      }\n    };\n  },\n  [HA_UPDATE_IS_TYPING]: (state, action) => ({\n    ...state,\n    agentState: {\n      ...state.agentState,\n      isAgentTyping: action.isTyping\n    }\n  }),\n  [HA_SET_AGENT_LEFT_CHAT]: state => ({\n    ...state,\n    botMessageState: {\n      ...state.botMessageState\n    },\n    agentState: {\n      ...state.agentState,\n      isAgentTyping: false\n    },\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        agentState: {\n          ...state.persistedToBrowserStorage.chatState.agentState,\n          agentProfile: null\n        }\n      }\n    }\n  }),\n  [HA_UPDATE_CAPABILITIES]: (state, action) => {\n    const newInputState = {\n      ...state.agentState.inputState,\n      ...action.capabilities\n    };\n    if (!newInputState.allowFileUploads) {\n      newInputState.files = [];\n    }\n    return {\n      ...state,\n      agentState: {\n        ...state.agentState,\n        inputState: newInputState\n      }\n    };\n  },\n  [HA_SET_IS_SCREEN_SHARING]: (state, {isSharing: isSharing}) => ({\n    ...state,\n    agentState: {\n      ...state.agentState,\n      isScreenSharing: isSharing\n    }\n  }),\n  [HA_UPDATE_FILE_UPLOAD_IN_PROGRESS]: (state, action) => ({\n    ...state,\n    agentState: {\n      ...state.agentState,\n      fileUploadInProgress: action.fileUploadInProgress\n    }\n  }),\n  [HA_END_CHAT]: state => {\n    let newState = applyLocalMessageUIState(state, state.agentState.activeLocalMessageID, \"wasAgentChatEnded\", true);\n    newState = {\n      ...newState,\n      agentState: {\n        ...newState.agentState,\n        isConnecting: false,\n        isReconnecting: false,\n        availability: null,\n        activeLocalMessageID: null,\n        isAgentTyping: false,\n        inputState: {\n          ...newState.agentState.inputState,\n          isReadonly: false\n        }\n      },\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          agentState: {\n            ...state.persistedToBrowserStorage.chatState.agentState,\n            isConnected: false,\n            isSuspended: false,\n            agentProfile: null\n          }\n        }\n      }\n    };\n    return newState;\n  }\n};\n\nexport { agentReducers };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction populateTourStepItems(state) {\n  const {activeTourID: activeTourID} = state.persistedToBrowserStorage.chatState.persistedTourState;\n  if (activeTourID) {\n    const originalMessage = state.allMessagesByID[activeTourID];\n    const tourMessageItem = originalMessage?.output?.generic?.find(message => Boolean(message.user_defined?.steps));\n    if (tourMessageItem) {\n      return {\n        ...state,\n        tourState: {\n          ...state.tourState,\n          activeTourStepItems: tourMessageItem.user_defined?.steps\n        }\n      };\n    }\n  }\n  return clearTourState(state);\n}\n\nfunction clearTourState(state) {\n  return {\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        persistedTourState: {\n          activeTourID: null,\n          activeTourCurrentStepIndex: null\n        }\n      },\n      launcherState: {\n        ...state.persistedToBrowserStorage.launcherState,\n        activeTour: false\n      }\n    },\n    tourState: {\n      ...state.tourState,\n      activeTourStepItems: null\n    }\n  };\n}\n\nexport { clearTourState, populateTourStepItems };\n","import merge from \"lodash-es/merge.js\";\n\nimport mergeWith from \"lodash-es/mergeWith.js\";\n\nimport { outputItemToLocalItem } from \"../schema/outputItemToLocalItem.js\";\n\nimport \"../utils/constants.js\";\n\nimport { replaceCurrentArrayValue } from \"../utils/customizers.js\";\n\nimport { streamItemID, isResponse, isRequest } from \"../utils/messageUtils.js\";\n\nimport { UPDATE_MAIN_HEADER_AVATAR, SET_STREAM_ID, SET_STOP_STREAMING_BUTTON_DISABLED, SET_STOP_STREAMING_BUTTON_VISIBLE, UPDATE_MAX_VISIBLE_HEADER_OBJECTS, UPDATE_CHAT_HEADER_CONFIG, STREAMING_ADD_CHUNK, STREAMING_MERGE_HISTORY, STREAMING_START, SET_RESPONSE_PANEL_CONTENT, SET_RESPONSE_PANEL_IS_OPEN, ADD_NESTED_MESSAGES, FILE_UPLOAD_INPUT_ERROR, CLEAR_INPUT_FILES, REMOVE_ALL_NOTIFICATIONS, REMOVE_NOTIFICATIONS, ADD_NOTIFICATION, REMOVE_LOCAL_MESSAGE_ITEM, REMOVE_INPUT_FILE, ADD_INPUT_FILE, SET_IS_BROWSER_PAGE_VISIBLE, UPDATE_INPUT_STATE, CHANGE_STEP_IN_TOUR, CLEAR_TOUR_DATA, SET_TOUR_DATA, SET_CUSTOM_PANEL_OPTIONS, SET_CUSTOM_PANEL_OPEN, SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN, CLOSE_IFRAME_PANEL, OPEN_IFRAME_CONTENT, SET_LAUNCHER_MINIMIZED, SET_CHAT_MESSAGES_PROPERTY, SET_LAUNCHER_CONFIG_PROPERTY, SET_LAUNCHER_PROPERTY, UPDATE_LAUNCHER_CONFIG, TOGGLE_HOME_SCREEN, SET_HOME_SCREEN_IS_OPEN, ACCEPTED_DISCLAIMER, ANNOUNCE_MESSAGE, MERGE_HISTORY, SET_MESSAGE_HISTORY_PROPERTY, SET_MESSAGE_UI_PROPERTY, UPDATE_HOME_SCREEN_CONFIG, UPDATE_CSS_VARIABLES, UPDATE_MAIN_HEADER_TITLE, UPDATE_LAUNCHER_AVATAR_URL, UPDATE_BOT_AVATAR_URL, UPDATE_BOT_NAME, SET_INITIAL_VIEW_CHANGE_COMPLETE, SET_VIEW_CHANGING, SET_VIEW_STATE, UPDATE_HAS_SENT_NON_WELCOME_MESSAGE, UPDATE_PERSISTED_CHAT_STATE, SET_APP_STATE_VALUE, ADD_IS_HYDRATING_COUNTER, ADD_IS_LOADING_COUNTER, ADD_IS_TYPING_COUNTER, MESSAGE_SET_OPTION_SELECTED, ADD_MESSAGE, UPDATE_MESSAGE, UPDATE_LOCAL_MESSAGE_ITEM, REMOVE_MESSAGES, ADD_LOCAL_MESSAGE_ITEM, HYDRATE_MESSAGE_HISTORY, RESTART_CONVERSATION, HYDRATE_CHAT, CHANGE_STATE } from \"./actions.js\";\n\nimport { agentReducers } from \"./agentReducers.js\";\n\nimport { setHomeScreenOpenState, applyFullMessage, applyBotMessageState, applyLocalMessageUIState, handleViewStateChange, DEFAULT_CUSTOM_PANEL_STATE, DEFAULT_CITATION_PANEL_STATE, DEFAULT_IFRAME_PANEL_STATE } from \"./reducerUtils.js\";\n\nimport { clearTourState, populateTourStepItems } from \"./tourReducerUtils.js\";\n\nimport { AgentMessageType } from \"../../../types/messaging/Messages.js\";\n\nimport { FileStatusValue, LauncherType } from \"../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst EXCLUDE_AGENT_UNREAD = new Set([ AgentMessageType.USER_ENDED_CHAT, AgentMessageType.CHAT_WAS_ENDED, AgentMessageType.RELOAD_WARNING ]);\n\nconst reducers = {\n  [CHANGE_STATE]: (state, action) => merge({}, state, action.partialState),\n  [HYDRATE_CHAT]: state => ({\n    ...state,\n    isHydrated: true\n  }),\n  [RESTART_CONVERSATION]: state => {\n    let newState = {\n      ...state,\n      botMessageState: {\n        ...state.botMessageState,\n        localMessageIDs: [],\n        messageIDs: [],\n        isTypingCounter: 0,\n        isScrollAnchored: false\n      },\n      allMessageItemsByID: {},\n      allMessagesByID: {},\n      iFramePanelState: {\n        ...DEFAULT_IFRAME_PANEL_STATE\n      },\n      viewSourcePanelState: {\n        ...DEFAULT_CITATION_PANEL_STATE\n      },\n      customPanelState: {\n        ...DEFAULT_CUSTOM_PANEL_STATE\n      },\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          homeScreenState: {\n            ...state.persistedToBrowserStorage.chatState.homeScreenState,\n            showBackToBot: false\n          }\n        }\n      },\n      isHydrated: false,\n      catastrophicErrorType: null\n    };\n    newState = clearTourState(newState);\n    if (newState.homeScreenConfig.is_on) {\n      newState = setHomeScreenOpenState(newState, true);\n    }\n    return newState;\n  },\n  [HYDRATE_MESSAGE_HISTORY]: (state, action) => {\n    let newState = {\n      ...state,\n      ...action.messageHistory\n    };\n    if (state.persistedToBrowserStorage.chatState.persistedTourState.activeTourID) {\n      newState = populateTourStepItems(newState);\n    }\n    return newState;\n  },\n  [ADD_LOCAL_MESSAGE_ITEM]: (state, action) => {\n    const {messageItem: messageItem, message: message, addMessage: addMessage, addAfterID: addAfterID} = action;\n    const {id: id} = messageItem.ui_state;\n    const isSilent = message.history.silent;\n    let newState = state;\n    if (addMessage) {\n      newState = applyFullMessage(newState, message);\n    }\n    const currentIndex = newState.botMessageState.localMessageIDs.findIndex(existingID => existingID === id);\n    const newLocalMessageIDs = [ ...newState.botMessageState.localMessageIDs ];\n    let insertAtIndex = currentIndex;\n    if (currentIndex !== -1) {\n      newLocalMessageIDs.splice(currentIndex, 1);\n    } else {\n      insertAtIndex = newLocalMessageIDs.length;\n    }\n    if (addAfterID) {\n      const afterIDIndex = newLocalMessageIDs.findIndex(existingID => existingID === addAfterID);\n      if (afterIDIndex !== -1) {\n        insertAtIndex = afterIDIndex + 1;\n      }\n    }\n    newLocalMessageIDs.splice(insertAtIndex, 0, id);\n    if (!isSilent) {\n      newState = {\n        ...newState,\n        allMessageItemsByID: {\n          ...newState.allMessageItemsByID,\n          [id]: messageItem\n        },\n        botMessageState: {\n          ...newState.botMessageState,\n          localMessageIDs: newLocalMessageIDs\n        }\n      };\n      if (newState.persistedToBrowserStorage.chatState.homeScreenState.isHomeScreenOpen) {\n        newState = setHomeScreenOpenState(newState, false);\n      }\n      const isBotMessage = !messageItem.item.agent_message_type;\n      const isMainWindowOpen = state.persistedToBrowserStorage.launcherState.viewState.mainWindow;\n      if (!isBotMessage && (!isMainWindowOpen || !state.isBrowserPageVisible)) {\n        const fromAgent = !isRequest(message);\n        if (fromAgent && !EXCLUDE_AGENT_UNREAD.has(messageItem.item.agent_message_type)) {\n          newState = {\n            ...newState,\n            agentState: {\n              ...newState.agentState,\n              numUnreadMessages: newState.agentState.numUnreadMessages + 1\n            }\n          };\n        }\n      }\n    }\n    return newState;\n  },\n  [REMOVE_MESSAGES]: (state, {messageIDs: messageIDs}) => {\n    const idsSet = new Set(messageIDs);\n    const newAllMessages = {\n      ...state.allMessagesByID\n    };\n    const newAllMessageItems = {\n      ...state.allMessageItemsByID\n    };\n    const newMessageIDs = state.botMessageState.messageIDs.filter(messageID => !idsSet.has(messageID));\n    const newMessageItemsIDs = state.botMessageState.localMessageIDs.filter(messageItemID => {\n      const messageItem = newAllMessageItems[messageItemID];\n      const removeItem = idsSet.has(messageItem?.fullMessageID);\n      if (removeItem) {\n        delete newAllMessageItems[messageItemID];\n      }\n      return !removeItem;\n    });\n    messageIDs.forEach(messageID => {\n      delete newAllMessages[messageID];\n    });\n    const newState = {\n      ...state,\n      allMessagesByID: newAllMessages,\n      allMessageItemsByID: newAllMessageItems,\n      botMessageState: {\n        ...state.botMessageState,\n        messageIDs: newMessageIDs,\n        localMessageIDs: newMessageItemsIDs\n      }\n    };\n    return newState;\n  },\n  [UPDATE_LOCAL_MESSAGE_ITEM]: (state, action) => {\n    const {messageItem: messageItem} = action;\n    return {\n      ...state,\n      allMessageItemsByID: {\n        ...state.allMessageItemsByID,\n        [messageItem.ui_state.id]: messageItem\n      }\n    };\n  },\n  [UPDATE_MESSAGE]: (state, action) => {\n    const {message: message} = action;\n    return {\n      ...state,\n      allMessagesByID: {\n        ...state.allMessagesByID,\n        [message.id]: message\n      }\n    };\n  },\n  [ADD_MESSAGE]: (state, action) => {\n    const {message: message} = action;\n    const messageID = message.id;\n    let newState = state;\n    if (isResponse(message)) {\n      const itemIDsInNewMessage = [];\n      message.output.generic.forEach(item => {\n        const id = streamItemID(messageID, item);\n        if (id) {\n          itemIDsInNewMessage.push(id);\n        }\n      });\n      const newAllMessageItemsByID = {\n        ...state.allMessageItemsByID\n      };\n      const existingItemIDs = [];\n      let firstFoundIndex;\n      const newLocalMessageIDs = state.botMessageState.localMessageIDs.filter((itemID, index) => {\n        const item = state.allMessageItemsByID[itemID];\n        const isItemInMessage = item.fullMessageID === messageID;\n        if (isItemInMessage) {\n          if (firstFoundIndex === undefined) {\n            firstFoundIndex = index;\n          }\n          if (!itemIDsInNewMessage.includes(itemID)) {\n            delete newAllMessageItemsByID[itemID];\n          } else {\n            existingItemIDs.push(itemID);\n          }\n        }\n        return !isItemInMessage;\n      });\n      if (existingItemIDs.length) {\n        const itemIDsToInsert = itemIDsInNewMessage.filter(itemID => existingItemIDs.includes(itemID));\n        if (itemIDsToInsert.length) {\n          newLocalMessageIDs.splice(firstFoundIndex, 0, ...itemIDsToInsert);\n        }\n      }\n      newState = {\n        ...newState,\n        allMessageItemsByID: newAllMessageItemsByID,\n        botMessageState: {\n          ...newState.botMessageState,\n          localMessageIDs: newLocalMessageIDs\n        }\n      };\n    }\n    return applyFullMessage(newState, message);\n  },\n  [MESSAGE_SET_OPTION_SELECTED]: (state, action) => {\n    const newMessagesByID = {\n      ...state.allMessageItemsByID\n    };\n    newMessagesByID[action.messageID] = {\n      ...state.allMessageItemsByID[action.messageID],\n      ui_state: {\n        ...state.allMessageItemsByID[action.messageID].ui_state,\n        optionSelected: action.sentMessage\n      }\n    };\n    return {\n      ...state,\n      allMessageItemsByID: newMessagesByID\n    };\n  },\n  [ADD_IS_TYPING_COUNTER]: (state, action) => ({\n    ...state,\n    botMessageState: {\n      ...state.botMessageState,\n      isTypingCounter: Math.max(state.botMessageState.isTypingCounter + action.addToIsTyping, 0)\n    }\n  }),\n  [ADD_IS_LOADING_COUNTER]: (state, action) => ({\n    ...state,\n    botMessageState: {\n      ...state.botMessageState,\n      isLoadingCounter: Math.max(state.botMessageState.isLoadingCounter + action.addToIsLoading, 0)\n    }\n  }),\n  [ADD_IS_HYDRATING_COUNTER]: (state, action) => ({\n    ...state,\n    botMessageState: {\n      ...state.botMessageState,\n      isHydratingCounter: Math.max(state.botMessageState.isHydratingCounter + action.addToIsHydrating, 0)\n    }\n  }),\n  [SET_APP_STATE_VALUE]: (state, action) => ({\n    ...state,\n    [action.key]: action.value\n  }),\n  [UPDATE_PERSISTED_CHAT_STATE]: (state, action) => ({\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        ...action.chatState\n      }\n    }\n  }),\n  [UPDATE_HAS_SENT_NON_WELCOME_MESSAGE]: (state, action) => {\n    if (state.persistedToBrowserStorage.chatState.hasSentNonWelcomeMessage === action.hasSentNonWelcomeMessage) {\n      return state;\n    }\n    return {\n      ...state,\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          hasSentNonWelcomeMessage: action.hasSentNonWelcomeMessage\n        },\n        launcherState: {\n          ...state.persistedToBrowserStorage.launcherState,\n          hasSentNonWelcomeMessage: action.hasSentNonWelcomeMessage\n        }\n      }\n    };\n  },\n  [SET_VIEW_STATE]: (state, action) => handleViewStateChange(state, action.viewState),\n  [SET_VIEW_CHANGING]: (state, action) => ({\n    ...state,\n    viewChanging: action.viewChanging\n  }),\n  [SET_INITIAL_VIEW_CHANGE_COMPLETE]: (state, action) => ({\n    ...state,\n    initialViewChangeComplete: action.changeComplete\n  }),\n  [UPDATE_BOT_NAME]: (state, action) => ({\n    ...state,\n    botName: action.name,\n    headerDisplayName: state.theme.useAITheme ? state.headerDisplayName : action.name\n  }),\n  [UPDATE_BOT_AVATAR_URL]: (state, action) => ({\n    ...state,\n    botAvatarURL: action.url\n  }),\n  [UPDATE_LAUNCHER_AVATAR_URL]: (state, action) => ({\n    ...state,\n    launcher: {\n      ...state.launcher,\n      config: {\n        ...state.launcher.config,\n        mobile: {\n          ...state.launcher.config.mobile,\n          avatar_url_override: action.source\n        },\n        desktop: {\n          ...state.launcher.config.desktop,\n          avatar_url_override: action.source\n        }\n      }\n    }\n  }),\n  [UPDATE_MAIN_HEADER_TITLE]: (state, action) => ({\n    ...state,\n    headerDisplayName: action.title\n  }),\n  [UPDATE_CSS_VARIABLES]: (state, action) => {\n    const {config: config} = state;\n    const {variables: variables} = action;\n    const newConfig = {\n      public: {\n        ...config.public\n      }\n    };\n    return {\n      ...state,\n      config: newConfig,\n      cssVariableOverrides: variables\n    };\n  },\n  [UPDATE_HOME_SCREEN_CONFIG]: (state, action) => {\n    const newHomeScreenConfig = action.homeScreenConfig;\n    return {\n      ...state,\n      homeScreenConfig: mergeWith({}, state.homeScreenConfig, newHomeScreenConfig, replaceCurrentArrayValue)\n    };\n  },\n  [SET_MESSAGE_UI_PROPERTY]: (state, action) => applyLocalMessageUIState(state, action.localMessageID, action.propertyName, action.propertyValue),\n  [SET_MESSAGE_HISTORY_PROPERTY]: (state, action) => {\n    const {messageID: messageID, propertyName: propertyName, propertyValue: propertyValue} = action;\n    const oldMessage = state.allMessagesByID[messageID];\n    if (oldMessage) {\n      return {\n        ...state,\n        allMessagesByID: {\n          ...state.allMessagesByID,\n          [messageID]: {\n            ...oldMessage,\n            history: {\n              ...oldMessage.history,\n              [propertyName]: propertyValue\n            }\n          }\n        }\n      };\n    }\n    return state;\n  },\n  [MERGE_HISTORY]: (state, action) => {\n    const oldMessage = state.allMessagesByID[action.messageID];\n    if (oldMessage) {\n      return {\n        ...state,\n        allMessagesByID: {\n          ...state.allMessagesByID,\n          [action.messageID]: {\n            ...oldMessage,\n            history: merge({}, oldMessage.history, action.history)\n          }\n        }\n      };\n    }\n    return state;\n  },\n  [ANNOUNCE_MESSAGE]: (state, action) => ({\n    ...state,\n    announceMessage: action.message\n  }),\n  [ACCEPTED_DISCLAIMER]: state => ({\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        disclaimersAccepted: {\n          ...state.persistedToBrowserStorage.chatState.disclaimersAccepted,\n          [window.location.hostname]: true\n        }\n      }\n    }\n  }),\n  [SET_HOME_SCREEN_IS_OPEN]: (state, {isOpen: isOpen}) => setHomeScreenOpenState(state, isOpen),\n  [TOGGLE_HOME_SCREEN]: state => setHomeScreenOpenState(state, !state.persistedToBrowserStorage.chatState.homeScreenState.isHomeScreenOpen, true),\n  [UPDATE_LAUNCHER_CONFIG]: (state, action) => {\n    const newConfig = merge({}, state.launcher.config, action.launcherConfig);\n    return {\n      ...state,\n      launcher: {\n        ...state.launcher,\n        config: newConfig\n      },\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        launcherState: {\n          ...state.persistedToBrowserStorage.launcherState,\n          desktopLauncherIsExpanded: newConfig.is_on && newConfig.desktop.is_on ? state.persistedToBrowserStorage.launcherState.desktopLauncherIsExpanded : false,\n          mobileLauncherIsExtended: newConfig.is_on && newConfig.mobile.is_on ? state.persistedToBrowserStorage.launcherState.mobileLauncherIsExtended : false\n        }\n      }\n    };\n  },\n  [SET_LAUNCHER_PROPERTY]: (state, action) => ({\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      launcherState: {\n        ...state.persistedToBrowserStorage.launcherState,\n        [action.propertyName]: action.propertyValue\n      }\n    }\n  }),\n  [SET_LAUNCHER_CONFIG_PROPERTY]: (state, action) => {\n    const newState = {\n      ...state,\n      launcher: {\n        ...state.launcher,\n        config: {\n          ...state.launcher.config\n        }\n      }\n    };\n    if (!action.launcherType || action.launcherType === LauncherType.DESKTOP) {\n      newState.launcher.config.desktop = {\n        ...state.launcher.config.desktop,\n        [action.propertyName]: action.propertyValue\n      };\n    }\n    if (!action.launcherType || action.launcherType === LauncherType.MOBILE) {\n      newState.launcher.config.mobile = {\n        ...state.launcher.config.mobile,\n        [action.propertyName]: action.propertyValue\n      };\n    }\n    return newState;\n  },\n  [SET_CHAT_MESSAGES_PROPERTY]: (state, action) => applyBotMessageState(state, {\n    [action.propertyName]: action.propertyValue\n  }),\n  [SET_LAUNCHER_MINIMIZED]: state => ({\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      launcherState: {\n        ...state.persistedToBrowserStorage.launcherState,\n        desktopLauncherIsExpanded: false,\n        desktopLauncherWasMinimized: true\n      }\n    }\n  }),\n  [OPEN_IFRAME_CONTENT]: (state, {messageItem: messageItem}) => ({\n    ...state,\n    iFramePanelState: {\n      ...state.iFramePanelState,\n      messageItem: messageItem,\n      isOpen: true\n    },\n    announceMessage: {\n      messageID: \"iframe_ariaOpenedPanel\"\n    }\n  }),\n  [CLOSE_IFRAME_PANEL]: state => ({\n    ...state,\n    iFramePanelState: {\n      ...state.iFramePanelState,\n      isOpen: false\n    },\n    announceMessage: {\n      messageID: \"iframe_ariaClosedPanel\"\n    }\n  }),\n  [SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN]: (state, action) => ({\n    ...state,\n    viewSourcePanelState: {\n      ...state.viewSourcePanelState,\n      citationItem: action.citationItem,\n      relatedSearchResult: action.relatedSearchResult,\n      isOpen: action.isOpen\n    }\n  }),\n  [SET_CUSTOM_PANEL_OPEN]: (state, action) => ({\n    ...state,\n    customPanelState: {\n      ...state.customPanelState,\n      isOpen: action.isOpen\n    }\n  }),\n  [SET_CUSTOM_PANEL_OPTIONS]: (state, action) => ({\n    ...state,\n    customPanelState: {\n      ...state.customPanelState,\n      options: action.options\n    }\n  }),\n  [SET_TOUR_DATA]: (state, action) => {\n    const newStateWithPersistedTourData = {\n      ...state,\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          persistedTourState: {\n            activeTourID: action.newActiveTourMessageID,\n            activeTourCurrentStepIndex: 0\n          }\n        },\n        launcherState: {\n          ...state.persistedToBrowserStorage.launcherState,\n          activeTour: true\n        }\n      }\n    };\n    return populateTourStepItems(newStateWithPersistedTourData);\n  },\n  [CLEAR_TOUR_DATA]: state => clearTourState(state),\n  [CHANGE_STEP_IN_TOUR]: (state, action) => ({\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        persistedTourState: {\n          ...state.persistedToBrowserStorage.chatState.persistedTourState,\n          activeTourCurrentStepIndex: Math.max(Math.min(action.newStepNumber, state.tourState.activeTourStepItems.length - 1), 0)\n        }\n      }\n    }\n  }),\n  [UPDATE_INPUT_STATE]: (state, action) => {\n    const currentInputState = getInputState(state, action.isInputToAgent);\n    const newInputState = {\n      ...currentInputState,\n      ...action.newState\n    };\n    const newState = applyInputState(state, newInputState, action.isInputToAgent);\n    return newState;\n  },\n  [SET_IS_BROWSER_PAGE_VISIBLE]: (state, action) => {\n    let numUnreadMessages;\n    const isMainWindowOpen = state.persistedToBrowserStorage.launcherState.viewState.mainWindow;\n    if (isMainWindowOpen && action.isVisible) {\n      numUnreadMessages = 0;\n    } else {\n      numUnreadMessages = state.agentState.numUnreadMessages;\n    }\n    return {\n      ...state,\n      isBrowserPageVisible: action.isVisible,\n      agentState: {\n        ...state.agentState,\n        numUnreadMessages: numUnreadMessages\n      }\n    };\n  },\n  [ADD_INPUT_FILE]: (state, {file: file, isInputToAgent: isInputToAgent}) => {\n    const currentInputState = getInputState(state, isInputToAgent);\n    return applyInputState(state, {\n      ...currentInputState,\n      files: [ ...currentInputState.files, file ]\n    }, isInputToAgent);\n  },\n  [REMOVE_INPUT_FILE]: (state, {fileID: fileID, isInputToAgent: isInputToAgent}) => {\n    const currentInputState = getInputState(state, isInputToAgent);\n    const newUploads = [ ...currentInputState.files ];\n    const index = newUploads.findIndex(file => file.id === fileID);\n    if (index !== -1) {\n      newUploads.splice(index, 1);\n    }\n    return applyInputState(state, {\n      ...currentInputState,\n      files: newUploads\n    }, isInputToAgent);\n  },\n  [REMOVE_LOCAL_MESSAGE_ITEM]: (state, {localMessageItemID: localMessageItemID}) => {\n    const newLocalMessageIDs = state.botMessageState.localMessageIDs.filter(id => id !== localMessageItemID);\n    const allMessageItemsByID = {\n      ...state.allMessageItemsByID\n    };\n    if (allMessageItemsByID[localMessageItemID]) {\n      delete allMessageItemsByID[localMessageItemID];\n    }\n    return {\n      ...state,\n      allMessageItemsByID: allMessageItemsByID,\n      botMessageState: {\n        ...state.botMessageState,\n        localMessageIDs: newLocalMessageIDs\n      }\n    };\n  },\n  [ADD_NOTIFICATION]: (state, {notification: notification, notificationID: notificationID}) => ({\n    ...state,\n    notifications: state.notifications.concat({\n      id: notificationID,\n      notification: notification\n    })\n  }),\n  [REMOVE_NOTIFICATIONS]: (state, {groupID: groupID, notificationID: notificationID}) => ({\n    ...state,\n    notifications: state.notifications.filter(notification => {\n      if (notificationID) {\n        return notification.id !== notificationID;\n      }\n      return notification.notification.groupID !== groupID;\n    })\n  }),\n  [REMOVE_ALL_NOTIFICATIONS]: state => ({\n    ...state,\n    notifications: []\n  }),\n  [CLEAR_INPUT_FILES]: (state, {isInputToAgent: isInputToAgent}) => {\n    const currentInputState = getInputState(state, isInputToAgent);\n    return applyInputState(state, {\n      ...currentInputState,\n      files: []\n    }, isInputToAgent);\n  },\n  [FILE_UPLOAD_INPUT_ERROR]: (state, {fileID: fileID, errorMessage: errorMessage, isInputToAgent: isInputToAgent}) => {\n    const currentInputSate = getInputState(state, isInputToAgent);\n    const newUploads = [ ...currentInputSate.files ];\n    const index = newUploads.findIndex(file => file.id === fileID);\n    if (index !== -1) {\n      newUploads[index] = {\n        ...newUploads[index],\n        isError: true,\n        errorMessage: errorMessage,\n        status: FileStatusValue.COMPLETE\n      };\n    }\n    return applyInputState(state, {\n      ...currentInputSate,\n      files: newUploads\n    }, isInputToAgent);\n  },\n  [ADD_NESTED_MESSAGES]: (state, {localMessageItems: localMessageItems}) => {\n    const allMessageItemsByID = {\n      ...state.allMessageItemsByID\n    };\n    localMessageItems.forEach(localMessageItem => {\n      allMessageItemsByID[localMessageItem.ui_state.id] = localMessageItem;\n    });\n    return {\n      ...state,\n      allMessageItemsByID: allMessageItemsByID\n    };\n  },\n  [SET_RESPONSE_PANEL_IS_OPEN]: (state, {isOpen: isOpen}) => ({\n    ...state,\n    responsePanelState: {\n      ...state.responsePanelState,\n      isOpen: isOpen\n    }\n  }),\n  [SET_RESPONSE_PANEL_CONTENT]: (state, {localMessageItem: localMessageItem, isMessageForInput: isMessageForInput}) => ({\n    ...state,\n    responsePanelState: {\n      ...state.responsePanelState,\n      localMessageItem: localMessageItem,\n      isMessageForInput: isMessageForInput\n    }\n  }),\n  [STREAMING_START]: (state, {messageID: messageID}) => {\n    const streamIntoResponse = {\n      id: messageID,\n      output: {\n        generic: []\n      },\n      history: {\n        timestamp: Date.now()\n      }\n    };\n    return applyFullMessage(state, streamIntoResponse);\n  },\n  [STREAMING_MERGE_HISTORY]: (state, {messageID: messageID, history: history}) => {\n    const existingMessage = state.allMessagesByID[messageID];\n    const newMessage = merge({}, existingMessage, {\n      history: history\n    });\n    if (existingMessage) {\n      return {\n        ...state,\n        allMessagesByID: {\n          ...state.allMessagesByID,\n          [messageID]: newMessage\n        }\n      };\n    }\n    return state;\n  },\n  [STREAMING_ADD_CHUNK]: (state, {chunkItem: chunkItem, fullMessageID: fullMessageID, isCompleteItem: isCompleteItem, disableFadeAnimation: disableFadeAnimation}) => {\n    const message = state.allMessagesByID[fullMessageID];\n    const localItemID = streamItemID(fullMessageID, chunkItem);\n    const existingLocalMessageItem = state.allMessageItemsByID[localItemID];\n    let {localMessageIDs: localMessageIDs} = state.botMessageState;\n    let newItem;\n    if (!existingLocalMessageItem) {\n      newItem = outputItemToLocalItem(chunkItem, message, false);\n      newItem.ui_state.needsAnnouncement = false;\n      newItem.ui_state.disableFadeAnimation = disableFadeAnimation;\n      newItem.ui_state.isIntermediateStreaming = true;\n      if (isCompleteItem) {\n        newItem.ui_state.streamingState = {\n          chunks: [],\n          isDone: true\n        };\n      } else {\n        newItem.ui_state.streamingState = {\n          chunks: [ chunkItem ],\n          isDone: false\n        };\n      }\n      localMessageIDs = [ ...localMessageIDs, localItemID ];\n      if (!newItem.item.response_type) {\n        throw new Error(`New chunk item does not have a response_type: ${JSON.stringify(chunkItem)}`);\n      }\n    } else if (isCompleteItem) {\n      newItem = outputItemToLocalItem(chunkItem, message, false);\n      newItem.ui_state.needsAnnouncement = false;\n      newItem.ui_state.disableFadeAnimation = disableFadeAnimation;\n      newItem.ui_state.streamingState = {\n        chunks: [],\n        isDone: true\n      };\n    } else {\n      newItem = {\n        ...existingLocalMessageItem,\n        ui_state: {\n          ...existingLocalMessageItem?.ui_state,\n          streamingState: {\n            ...existingLocalMessageItem?.ui_state.streamingState,\n            chunks: [ ...existingLocalMessageItem?.ui_state.streamingState?.chunks || [], chunkItem ]\n          }\n        }\n      };\n    }\n    return {\n      ...state,\n      allMessageItemsByID: {\n        ...state.allMessageItemsByID,\n        [localItemID]: newItem\n      },\n      botMessageState: {\n        ...state.botMessageState,\n        localMessageIDs: localMessageIDs\n      }\n    };\n  },\n  [UPDATE_CHAT_HEADER_CONFIG]: (state, {chatHeaderConfig: chatHeaderConfig}) => ({\n    ...state,\n    chatHeaderState: {\n      ...state.chatHeaderState,\n      config: {\n        ...state.chatHeaderState.config,\n        ...chatHeaderConfig\n      }\n    }\n  }),\n  [UPDATE_MAX_VISIBLE_HEADER_OBJECTS]: (state, {maxTotal: maxTotal}) => ({\n    ...state,\n    chatHeaderState: {\n      ...state.chatHeaderState,\n      maxVisibleHeaderObjects: maxTotal\n    }\n  }),\n  [SET_STOP_STREAMING_BUTTON_VISIBLE]: (state, {isVisible: isVisible}) => ({\n    ...state,\n    botInputState: {\n      ...state.botInputState,\n      stopStreamingButtonState: {\n        ...state.botInputState.stopStreamingButtonState,\n        isVisible: isVisible\n      }\n    }\n  }),\n  [SET_STOP_STREAMING_BUTTON_DISABLED]: (state, {isDisabled: isDisabled}) => ({\n    ...state,\n    botInputState: {\n      ...state.botInputState,\n      stopStreamingButtonState: {\n        ...state.botInputState.stopStreamingButtonState,\n        isDisabled: isDisabled\n      }\n    }\n  }),\n  [SET_STREAM_ID]: (state, {currentStreamID: currentStreamID}) => ({\n    ...state,\n    botInputState: {\n      ...state.botInputState,\n      stopStreamingButtonState: {\n        ...state.botInputState.stopStreamingButtonState,\n        currentStreamID: currentStreamID\n      }\n    }\n  }),\n  [UPDATE_MAIN_HEADER_AVATAR]: (state, {config: config}) => ({\n    ...state,\n    headerAvatarConfig: config\n  })\n};\n\nfunction applyInputState(state, newInputState, isInputToAgent) {\n  if (isInputToAgent) {\n    return {\n      ...state,\n      agentState: {\n        ...state.agentState,\n        inputState: newInputState\n      }\n    };\n  }\n  return {\n    ...state,\n    botInputState: newInputState\n  };\n}\n\nfunction getInputState(state, isInputToAgent) {\n  return isInputToAgent ? state.agentState.inputState : state.botInputState;\n}\n\nObject.assign(reducers, agentReducers);\n\nexport { reducers };\n","import merge from \"lodash-es/merge.js\";\n\nimport { createStore } from \"redux\";\n\nimport { NODE_ENV } from \"../environmentVariables.js\";\n\nimport { IS_PHONE } from \"../utils/browserUtils.js\";\n\nimport \"../utils/constants.js\";\n\nimport { withoutEmptyStarters } from \"../utils/homeScreenUtils.js\";\n\nimport { getBotName } from \"../utils/miscUtils.js\";\n\nimport { mergeCSSVariables } from \"../utils/styleUtils.js\";\n\nimport { reducers } from \"./reducers.js\";\n\nimport { DEFAULT_THEME_STATE, VIEW_STATE_MAIN_WINDOW_OPEN, VIEW_STATE_LAUNCHER_OPEN, DEFAULT_LAUNCHER, DEFAULT_PERSISTED_TO_BROWSER, DEFAULT_INPUT_STATE, VIEW_STATE_ALL_CLOSED, DEFAULT_TOUR_STATE, DEFAULT_MESSAGE_PANEL_STATE, DEFAULT_CUSTOM_PANEL_STATE, DEFAULT_CITATION_PANEL_STATE, DEFAULT_IFRAME_PANEL_STATE, DEFAULT_AGENT_STATE, DEFAULT_MESSAGE_STATE, DEFAULT_LAYOUT_STATE } from \"./reducerUtils.js\";\n\nimport \"../../../types/instance/apiTypes.js\";\n\nimport enLanguagePack from \"../../languages/en.json.js\";\n\nimport { CornersType } from \"../../../types/config/CornersType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function doCreateStore(config, serviceManager) {\n  let useAITheme;\n  if (config.public.themeConfig?.useAITheme !== undefined) {\n    useAITheme = config.public.themeConfig?.useAITheme;\n  } else {\n    useAITheme = DEFAULT_THEME_STATE.useAITheme;\n  }\n  const themeState = {\n    carbonTheme: config.public.themeConfig?.carbonTheme || DEFAULT_THEME_STATE.carbonTheme,\n    useAITheme: useAITheme,\n    corners: getThemeCornersType(config)\n  };\n  const botName = getBotName(themeState.useAITheme, config);\n  const initialState = {\n    ...DEFAULT_MESSAGE_STATE,\n    notifications: [],\n    botInputState: {\n      ...DEFAULT_INPUT_STATE(),\n      isReadonly: config.public.isReadonly,\n      fieldVisible: !config.public.isReadonly\n    },\n    agentState: {\n      ...DEFAULT_AGENT_STATE\n    },\n    botName: botName,\n    headerDisplayName: null,\n    botAvatarURL: config.public.botAvatarURL || null,\n    headerAvatarConfig: null,\n    chatWidthBreakpoint: null,\n    chatWidth: null,\n    chatHeight: null,\n    cssVariableOverrides: mergeCSSVariables({}, {}, themeState.carbonTheme, themeState.useAITheme),\n    isHydrated: false,\n    languagePack: enLanguagePack,\n    locale: \"en\",\n    config: config,\n    originalConfig: config,\n    suspendScrollDetection: false,\n    homeScreenConfig: withoutEmptyStarters({}),\n    persistedToBrowserStorage: {\n      ...DEFAULT_PERSISTED_TO_BROWSER,\n      chatState: {\n        ...DEFAULT_PERSISTED_TO_BROWSER.chatState,\n        homeScreenState: {\n          ...DEFAULT_PERSISTED_TO_BROWSER.chatState.homeScreenState\n        }\n      }\n    },\n    launcher: merge({}, DEFAULT_LAUNCHER, {\n      config: merge({}, {}, {\n        mobile: {}\n      }, {\n        is_on: config.public.showLauncher\n      })\n    }),\n    iFramePanelState: DEFAULT_IFRAME_PANEL_STATE,\n    viewSourcePanelState: DEFAULT_CITATION_PANEL_STATE,\n    isDestroyed: false,\n    customPanelState: DEFAULT_CUSTOM_PANEL_STATE,\n    viewChanging: false,\n    initialViewChangeComplete: false,\n    targetViewState: config.public.openChatByDefault ? VIEW_STATE_MAIN_WINDOW_OPEN : VIEW_STATE_LAUNCHER_OPEN,\n    responsePanelState: DEFAULT_MESSAGE_PANEL_STATE,\n    customMenuOptions: null,\n    tourState: DEFAULT_TOUR_STATE,\n    isBrowserPageVisible: true,\n    showNonHeaderBackgroundCover: false,\n    theme: themeState,\n    layout: getLayoutState(config),\n    chatHeaderState: {\n      config: null,\n      maxVisibleHeaderObjects: 0\n    }\n  };\n  const sessionStorageLauncherState = serviceManager.userSessionStorageService?.loadLauncherSession();\n  if (sessionStorageLauncherState) {\n    initialState.targetViewState = sessionStorageLauncherState.viewState;\n    sessionStorageLauncherState.viewState = VIEW_STATE_ALL_CLOSED;\n    initialState.persistedToBrowserStorage.launcherState = sessionStorageLauncherState;\n  }\n  const enhancer = config.public.debug || NODE_ENV === \"development\" ? window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__({\n    name: \"CarbonAIChat\",\n    instanceId: `Chat${serviceManager.namespace.suffix}`\n  }) : undefined;\n  return createStore(reducerFunction, initialState, enhancer);\n}\n\nfunction getThemeCornersType(config) {\n  if (getLayoutState(config).showFrame === false || IS_PHONE || config.public.themeConfig?.corners === CornersType.SQUARE) {\n    return CornersType.SQUARE;\n  }\n  return DEFAULT_THEME_STATE.corners;\n}\n\nfunction getLayoutState(config) {\n  if (config.public.themeConfig?.useAITheme) {\n    return {\n      showFrame: config.public.layout?.showFrame ?? true,\n      hasContentMaxWidth: config.public.layout?.hasContentMaxWidth ?? true\n    };\n  }\n  return merge({}, DEFAULT_LAYOUT_STATE, config.public.layout);\n}\n\nfunction reducerFunction(state, action) {\n  return action && reducers[action.type] ? reducers[action.type](state, action) : state;\n}\n\nexport { doCreateStore };\n","import cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport { consoleDebug, consoleWarn } from \"./utils/miscUtils.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const DEFAULT_PUBLIC_CONFIG = {\n  openChatByDefault: false,\n  showLauncher: true,\n  shouldTakeFocusIfOpensAutomatically: true,\n  serviceDesk: {},\n  messaging: {},\n  themeConfig: {\n    useAITheme: true\n  }\n};\n\nasync function instantiateWidget(pagePublicConfig, chatConstructorPromise, render, element) {\n  const config = cloneDeep(pagePublicConfig);\n  if (!config.messaging?.customSendMessage) {\n    throw new Error(`You must set messaging.customSendMessage in your configuration object.`);\n  }\n  if (config?.debug) {\n    consoleDebug(\"[ChatEntry] Called instantiateWidget\", config);\n  }\n  if (document.location.protocol !== \"https:\") {\n    consoleWarn('Your page is not running with \"https\"; your data will not be sent  securely.');\n  }\n  if (document.compatMode !== \"CSS1Compat\") {\n    consoleWarn('Your page is running in quirks mode; you may experience layout issues with the chat. Add \"<!DOCTYPE html>\" to the page to run in standards mode.');\n  }\n  const {onError: onError, ...publicConfig} = config;\n  const Chat = await chatConstructorPromise(publicConfig);\n  const additionalChatParameters = {\n    onError: onError,\n    render: render\n  };\n  return new Chat(publicConfig, element, additionalChatParameters);\n}\n\nexport { DEFAULT_PUBLIC_CONFIG, instantiateWidget };\n","import dayjs from \"dayjs\";\n\nimport LocalizedFormat from \"dayjs/plugin/localizedFormat.js\";\n\nimport isEqual from \"lodash-es/isEqual.js\";\n\nimport merge from \"lodash-es/merge.js\";\n\nimport { createChatInstance } from \"./ChatInstanceImpl.js\";\n\nimport { createServiceManager } from \"./loadServices.js\";\n\nimport actions from \"./store/actions.js\";\n\nimport { VIEW_STATE_ALL_CLOSED } from \"./store/reducerUtils.js\";\n\nimport { loadLanguagePack, loadLocale } from \"./utils/languages.js\";\n\nimport { hasServiceDesk } from \"./utils/messageUtils.js\";\n\nimport { consoleDebug, consoleError } from \"./utils/miscUtils.js\";\n\nimport { DEFAULT_PUBLIC_CONFIG } from \"./chatEntryFunctions.js\";\n\nimport { MainWindowOpenReason, ViewChangeReason } from \"../../types/events/eventBusTypes.js\";\n\nimport { setIntl } from \"./utils/intlUtils.js\";\n\nimport { loadHAA } from \"../dynamic-imports/dynamic-imports.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\ndayjs.extend(LocalizedFormat);\n\nclass Chat {\n  constructor(publicConfigProvided, customHostElement, additionalChatParametersProvided) {\n    if (publicConfigProvided?.debug) {\n      consoleDebug(\"Constructed chat widget\", publicConfigProvided);\n    }\n    const publicConfig = merge({}, DEFAULT_PUBLIC_CONFIG, publicConfigProvided);\n    this.additionalChatParameters = additionalChatParametersProvided || {};\n    this.appConfig = {\n      public: publicConfig\n    };\n    this.customHostElement = customHostElement;\n  }\n  async start() {\n    try {\n      const result = await this.startInternal();\n      return result.instance;\n    } catch (error) {\n      consoleError(\"There was an error starting your chat\", error);\n      return null;\n    }\n  }\n  async startInternal() {\n    const doesHaveServiceDesk = hasServiceDesk(this.appConfig);\n    this.serviceManager = await createServiceManager(this.appConfig, this.additionalChatParameters);\n    const [languagePack, localePack, render, createHumanAgentService] = await Promise.all([ loadLanguagePack(this.serviceManager.store.getState().languagePack), loadLocale(this.serviceManager.store.getState().locale), Promise.resolve(this.additionalChatParameters.render), doesHaveServiceDesk ? loadHAA() : Promise.resolve(null) ]);\n    this.serviceManager.customHostElement = this.customHostElement;\n    if (createHumanAgentService) {\n      this.serviceManager.humanAgentService = createHumanAgentService(this.serviceManager);\n    }\n    setIntl(this.serviceManager, localePack.name, languagePack);\n    dayjs.locale(localePack);\n    const reallyRenderAndReturnInstance = async () => {\n      await render({\n        serviceManager: this.serviceManager\n      });\n      const initialState = this.serviceManager.store.getState();\n      const {wasLoadedFromBrowser: wasLoadedFromBrowser} = initialState.persistedToBrowserStorage.launcherState;\n      const {targetViewState: targetViewState} = initialState;\n      const {openChatByDefault: openChatByDefault} = initialState.config.public;\n      if (targetViewState.mainWindow) {\n        let mainWindowOpenReason = MainWindowOpenReason.SESSION_HISTORY;\n        if (openChatByDefault && !wasLoadedFromBrowser) {\n          mainWindowOpenReason = MainWindowOpenReason.OPEN_BY_DEFAULT;\n        }\n        await this.serviceManager.actions.changeView(targetViewState, {\n          mainWindowOpenReason: mainWindowOpenReason\n        });\n      } else {\n        const viewChangeReason = ViewChangeReason.WEB_CHAT_LOADED;\n        const tryHydrating = targetViewState.tour;\n        const forceViewChange = isEqual(targetViewState, VIEW_STATE_ALL_CLOSED);\n        await this.serviceManager.actions.changeView(targetViewState, {\n          viewChangeReason: viewChangeReason\n        }, tryHydrating, forceViewChange);\n      }\n      this.serviceManager.store.dispatch(actions.setInitialViewChangeComplete(true));\n      return this.serviceManager.instance;\n    };\n    const renderAndReturnInstance = () => {\n      const promise = reallyRenderAndReturnInstance();\n      this.serviceManager.renderPromise = promise;\n      return promise;\n    };\n    this.serviceManager.instance = createChatInstance({\n      serviceManager: this.serviceManager,\n      callRender: renderAndReturnInstance\n    });\n    return {\n      instance: this.serviceManager.instance,\n      serviceManager: this.serviceManager\n    };\n  }\n}\n\nexport { Chat as default };\n","import { ChatActionsImpl } from \"./events/ChatActionsImpl.js\";\n\nimport { EventBus } from \"./events/EventBus.js\";\n\nimport { createCustomPanelManager } from \"./services/CustomPanelManager.js\";\n\nimport { HistoryService } from \"./services/HistoryService.js\";\n\nimport MessageService from \"./services/MessageService.js\";\n\nimport { NamespaceService } from \"./services/NamespaceService.js\";\n\nimport { ServiceManager } from \"./services/ServiceManager.js\";\n\nimport { UserSessionStorageService } from \"./services/UserSessionStorageService.js\";\n\nimport { doCreateStore } from \"./store/doCreateStore.js\";\n\nimport { copyToSessionStorage, createHandleWindowTitle } from \"./store/subscriptions.js\";\n\nimport \"./utils/constants.js\";\n\nimport { setEnableDebugLog, setEnableDebugStackTracesLog } from \"./utils/miscUtils.js\";\n\nimport { setIntl } from \"./utils/intlUtils.js\";\n\nimport { WriteableElementName } from \"../../types/instance/ChatInstance.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ async function createServiceManager(appConfig, additionalChatParameters) {\n  const publicConfig = appConfig.public;\n  const serviceManager = new ServiceManager;\n  serviceManager.additionalChatParameters = additionalChatParameters;\n  serviceManager.namespace = new NamespaceService(publicConfig.namespace);\n  serviceManager.userSessionStorageService = new UserSessionStorageService(serviceManager);\n  serviceManager.actions = new ChatActionsImpl(serviceManager);\n  serviceManager.eventBus = new EventBus;\n  serviceManager.store = doCreateStore(appConfig, serviceManager);\n  serviceManager.historyService = new HistoryService(serviceManager);\n  serviceManager.messageService = new MessageService(serviceManager, publicConfig);\n  serviceManager.store.subscribe(copyToSessionStorage(serviceManager));\n  if (!publicConfig.disableWindowTitleChanges) {\n    serviceManager.store.subscribe(createHandleWindowTitle(serviceManager));\n  }\n  serviceManager.customPanelManager = createCustomPanelManager(serviceManager);\n  setIntl(serviceManager, serviceManager.store.getState().locale, serviceManager.store.getState().languagePack);\n  serviceManager.writeableElements = {\n    [WriteableElementName.AI_TOOLTIP_AFTER_DESCRIPTION_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.WELCOME_NODE_BEFORE_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.HEADER_BOTTOM_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.BEFORE_INPUT_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.HOME_SCREEN_HEADER_BOTTOM_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.HOME_SCREEN_AFTER_STARTERS_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.HOME_SCREEN_BEFORE_INPUT_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.CUSTOM_PANEL_ELEMENT]: document.createElement(\"div\")\n  };\n  if (publicConfig.debug) {\n    setEnableDebugLog(true);\n  }\n  if (publicConfig.debugStackTraces) {\n    setEnableDebugStackTracesLog(true);\n  }\n  return serviceManager;\n}\n\nexport { createServiceManager };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst UNREAD_COUNT_TITLE_TIME = 1e4;\n\nfunction copyToSessionStorage(serviceManager) {\n  let previousPersistedToBrowserStorage = serviceManager.store.getState().persistedToBrowserStorage;\n  return () => {\n    const {persistedToBrowserStorage: persistedToBrowserStorage} = serviceManager.store.getState();\n    const persistChatSession = previousPersistedToBrowserStorage !== persistedToBrowserStorage;\n    if (persistChatSession) {\n      previousPersistedToBrowserStorage = persistedToBrowserStorage;\n      serviceManager.userSessionStorageService.persistChatSession(persistedToBrowserStorage.chatState);\n      serviceManager.userSessionStorageService.persistLauncherSession(persistedToBrowserStorage.launcherState);\n    }\n  };\n}\n\nfunction createHandleWindowTitle(serviceManager) {\n  const {store: store} = serviceManager;\n  let originalTitle;\n  let changeTitleTimer;\n  let previousState = store.getState();\n  return () => {\n    const state = store.getState();\n    const {agentState: agentState} = store.getState();\n    const {numUnreadMessages: numUnreadMessages} = agentState;\n    if (numUnreadMessages !== previousState.agentState.numUnreadMessages) {\n      if (!numUnreadMessages) {\n        clearTimeout(changeTitleTimer);\n        if (originalTitle) {\n          window.document.title = originalTitle;\n          originalTitle = null;\n        }\n      } else {\n        clearTimeout(changeTitleTimer);\n        if (!originalTitle) {\n          originalTitle = window.document.title;\n        }\n        window.document.title = state.languagePack.agent_newMessage;\n        changeTitleTimer = setTimeout(() => {\n          window.document.title = `(${numUnreadMessages}) ${originalTitle}`;\n        }, UNREAD_COUNT_TITLE_TIME);\n      }\n    }\n    previousState = state;\n  };\n}\n\nexport { copyToSessionStorage, createHandleWindowTitle };\n","import { DEFAULT_CUSTOM_PANEL_ID } from \"../utils/constants.js\";\n\nimport { createCustomPanelInstance } from \"./CustomPanelInstance.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function createCustomPanelManager(serviceManger) {\n  const panels = {\n    [DEFAULT_CUSTOM_PANEL_ID]: createCustomPanelInstance(serviceManger)\n  };\n  return Object.freeze({\n    getPanel() {\n      return panels[DEFAULT_CUSTOM_PANEL_ID];\n    }\n  });\n}\n\nexport { createCustomPanelManager };\n","import React, { useRef, useCallback, useEffect } from \"react\";\n\nimport { useIntl } from \"react-intl\";\n\nimport { AriaAnnouncerContext } from \"../../contexts/AriaAnnouncerContext.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport { AriaAnnouncerComponent } from \"./AriaAnnouncerComponent.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function AriaAnnouncerProvider(props) {\n  const intl = useIntl();\n  const {store: store} = useServiceManager();\n  const announcerRef = useRef();\n  const announcerFunction = useCallback(value => {\n    if (!announcerRef.current) {\n      setTimeout(() => announcerRef.current.announceValue(value));\n    } else {\n      announcerRef.current.announceValue(value);\n    }\n  }, []);\n  const previousAnnounceMessageRef = useRef();\n  useEffect(() => {\n    const unsubscribe = store.subscribe(() => {\n      const currentAnnounceMessage = store.getState().announceMessage;\n      if (currentAnnounceMessage !== previousAnnounceMessageRef.current) {\n        announcerFunction(currentAnnounceMessage);\n        previousAnnounceMessageRef.current = currentAnnounceMessage;\n      }\n    });\n    return unsubscribe;\n  }, [ store, announcerFunction ]);\n  return React.createElement(AriaAnnouncerContext.Provider, {\n    value: announcerFunction\n  }, props.children, React.createElement(AriaAnnouncerComponent, {\n    intl: intl,\n    ref: announcerRef\n  }));\n}\n\nexport { AriaAnnouncerProvider };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction getLauncherButtonAriaLabel(languagePack, isLauncherHidden, isTourActive) {\n  if (isTourActive) {\n    return isLauncherHidden ? languagePack.launcher_isTourOpen : languagePack.launcher_isTourClosed;\n  }\n  return isLauncherHidden ? languagePack.launcher_isOpen : languagePack.launcher_isClosed;\n}\n\nexport { getLauncherButtonAriaLabel };\n","import AiLaunch from \"@carbon/icons-react/es/AiLaunch.js\";\n\nimport ArrowUpLeft from \"@carbon/icons-react/es/ArrowUpLeft.js\";\n\nimport ChatLaunch from \"@carbon/icons-react/es/ChatLaunch.js\";\n\nimport { Button } from \"@carbon/react\";\n\nimport cx from \"classnames\";\n\nimport React, { forwardRef, useImperativeHandle } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { doFocusRef } from \"../../utils/domUtils.js\";\n\nimport { getLauncherButtonAriaLabel } from \"./launcherUtils.js\";\n\nimport { ButtonKindEnum } from \"../../../../types/utilities/carbonTypes.js\";\n\nimport { PageObjectId } from \"../../utils/PageObjectId.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function Launcher(props, ref) {\n  const {onToggleOpen: onToggleOpen, languagePack: languagePack, unreadAgentCount: unreadAgentCount, intl: intl, showUnreadIndicator: showUnreadIndicator, className: className, tabIndex: tabIndex, launcherHidden: launcherHidden, activeTour: activeTour} = props;\n  const launcherAvatarURL = useSelector(state => state.theme.useAITheme ? undefined : state.launcher.config.desktop.avatar_url_override);\n  const useAITheme = useSelector(state => state.theme.useAITheme);\n  const buttonRef = React.createRef();\n  useImperativeHandle(ref, () => ({\n    requestFocus: () => {\n      doFocusRef(buttonRef);\n    }\n  }));\n  let ariaLabel = getLauncherButtonAriaLabel(languagePack, launcherHidden, activeTour);\n  if (unreadAgentCount !== 0) {\n    ariaLabel += `. ${intl.formatMessage({\n      id: \"icon_ariaUnreadMessages\"\n    }, {\n      count: unreadAgentCount\n    })}`;\n  }\n  let launcherAvatar = useAITheme ? React.createElement(AiLaunch, {\n    size: 24,\n    className: \"WACLauncher_svg\"\n  }) : React.createElement(ChatLaunch, {\n    size: 24,\n    className: \"WACLauncher__svg\"\n  });\n  if (launcherAvatarURL) {\n    launcherAvatar = React.createElement(\"img\", {\n      className: \"WACLauncher__Avatar\",\n      src: launcherAvatarURL,\n      alt: \"\",\n      \"aria-hidden\": true\n    });\n  }\n  return React.createElement(\"div\", {\n    className: cx(\"WACLauncher__ButtonContainer\", \"WACLauncher__ButtonContainer--round\", className, {\n      \"WACLauncher__ButtonContainer--hidden\": launcherHidden\n    })\n  }, React.createElement(Button, {\n    \"aria-label\": ariaLabel,\n    className: cx(\"WACLauncher__Button\", {\n      WACLauncher__TourButton: activeTour\n    }),\n    \"data-testid\": PageObjectId.LAUNCHER,\n    kind: ButtonKindEnum.PRIMARY,\n    type: \"button\",\n    onClick: onToggleOpen,\n    ref: buttonRef,\n    tabIndex: tabIndex\n  }, activeTour ? React.createElement(ArrowUpLeft, {\n    size: 24,\n    className: \"WACLauncher__svg\"\n  }) : launcherAvatar, (unreadAgentCount !== 0 || showUnreadIndicator) && React.createElement(\"div\", {\n    className: \"WAC__countIndicator\"\n  }, unreadAgentCount !== 0 ? unreadAgentCount : \"\")));\n}\n\nconst LauncherExport = forwardRef(Launcher);\n\nexport { LauncherExport as Launcher };\n","import Close from \"@carbon/icons-react/es/Close.js\";\n\nimport { Tag } from \"@carbon/react\";\n\nimport cx from \"classnames\";\n\nimport React from \"react\";\n\nimport { Launcher as LauncherExport } from \"./Launcher.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function LauncherComplex(props) {\n  const {languagePack: languagePack, intl: intl, launcherConfig: launcherConfig, launcherComplexRef: launcherComplexRef, launcherRef: launcherRef, onOpen: onOpen, onMinimize: onMinimize, unreadAgentCount: unreadAgentCount, showUnreadIndicator: showUnreadIndicator, desktopLauncherIsExpanded: desktopLauncherIsExpanded, launcherHidden: launcherHidden, activeTour: activeTour, className: className} = props;\n  const {launcher_desktopGreeting: launcher_desktopGreeting, launcher_closeButton: launcher_closeButton, launcher_ariaIsExpanded: launcher_ariaIsExpanded} = languagePack;\n  function getLauncherContent() {\n    if (launcherConfig.desktop.title) {\n      return launcherConfig.desktop.title;\n    }\n    return launcher_desktopGreeting;\n  }\n  return React.createElement(\"div\", {\n    className: cx(\"WACLauncher__ButtonContainer\", \"WACLauncherComplex__Container\", className, {\n      \"WACLauncher__ButtonContainer--hidden\": launcherHidden\n    }),\n    ref: launcherComplexRef\n  }, React.createElement(\"button\", {\n    className: \"WACLauncherComplex__ContentButton\",\n    type: \"button\",\n    onClick: onOpen,\n    disabled: !desktopLauncherIsExpanded\n  }, React.createElement(\"div\", {\n    className: cx(\"WACWidget__textEllipsis\", {\n      WACLauncherComplex__Text: !launcherHidden\n    })\n  }, getLauncherContent())), React.createElement(LauncherExport, {\n    languagePack: languagePack,\n    intl: intl,\n    ref: launcherRef,\n    onToggleOpen: onOpen,\n    className: \"WACLauncherComplex__SmallLauncherContainer\",\n    unreadAgentCount: unreadAgentCount,\n    showUnreadIndicator: showUnreadIndicator,\n    launcherHidden: launcherHidden,\n    activeTour: activeTour\n  }), React.createElement(Tag, {\n    className: \"WACLauncher__CloseButton\",\n    \"aria-label\": launcher_ariaIsExpanded,\n    onClick: onMinimize,\n    disabled: !desktopLauncherIsExpanded\n  }, React.createElement(\"div\", {\n    className: \"WACLauncher__CloseButtonInnerWrapper\"\n  }, React.createElement(Close, {\n    className: \"WACLauncher__CloseButtonIcon\"\n  }), launcher_closeButton)));\n}\n\nexport { LauncherComplex };\n","import React, { useState, useRef, useCallback, useEffect } from \"react\";\n\nimport { useIntl } from \"react-intl\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { useLanguagePack } from \"../../hooks/useLanguagePack.js\";\n\nimport { useOnMount } from \"../../hooks/useOnMount.js\";\n\nimport { usePrevious } from \"../../hooks/usePrevious.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport actions from \"../../store/actions.js\";\n\nimport { BOUNCING_ANIMATION_TIMEOUTS } from \"../../../../types/config/LauncherConfig.js\";\n\nimport { Launcher as LauncherExport } from \"./Launcher.js\";\n\nimport { LauncherComplex } from \"./LauncherComplex.js\";\n\nimport { LauncherType } from \"../../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst TIME_FOR_MINIMIZE_ANIMATION = 400;\n\nconst TIME_FOR_BOUNCE_ANIMATION = 500;\n\nconst LauncherDesktopContainer = props => {\n  const {launcherRef: launcherRef, onDoToggle: onDoToggle, requestFocus: requestFocus, launcherHidden: launcherHidden, activeTour: activeTour} = props;\n  const serviceManager = useServiceManager();\n  const languagePack = useLanguagePack();\n  const intl = useIntl();\n  const browserLauncherState = useSelector(state => state.persistedToBrowserStorage.launcherState);\n  const {desktopLauncherWasMinimized: desktopLauncherWasMinimized, desktopLauncherIsExpanded: desktopLauncherIsExpanded, bounceTurn: bounceTurn, showUnreadIndicator: showUnreadIndicator, viewState: viewState} = browserLauncherState;\n  const launcherState = useSelector(state => state.launcher);\n  const launcherConfig = launcherState.config;\n  const {time_to_expand: time_to_expand, new_expand_time: new_expand_time} = launcherConfig.desktop;\n  const isExpandedLauncherEnabled = launcherConfig.desktop.is_on;\n  const unreadAgentCount = useSelector(state => state.agentState.numUnreadMessages);\n  const [smallLauncherClassName, setSmallLauncherClassName] = useState(\"\");\n  const [complexLauncherClassName, setComplexLauncherClassName] = useState(\"\");\n  const launcherComplexRef = useRef();\n  const launcherHiddenRef = useRef();\n  launcherHiddenRef.current = launcherHidden;\n  const animateOnceVisible = useRef(false);\n  const bounceTurnRef = useRef();\n  bounceTurnRef.current = bounceTurn;\n  const animationStartTimerRef = useRef();\n  const animationFinishedTimerRef = useRef();\n  const firstBounceAnimationStartTimerRef = useRef();\n  const firstBounceAnimationFinishedTimerRef = useRef();\n  const secondBounceAnimationStartTimerRef = useRef();\n  const secondBounceAnimationFinishedTimerRef = useRef();\n  const determineLauncherHeight = useCallback(() => {\n    const expandedLauncherHeight = `${launcherComplexRef.current?.offsetHeight}px`;\n    if (launcherComplexRef.current?.style?.setProperty) {\n      launcherComplexRef.current.style.setProperty(\"--cds-chat-LAUNCHER-desktop-expanded-height\", expandedLauncherHeight);\n    }\n  }, []);\n  const startExpandLauncher = useCallback(() => {\n    if (!launcherHiddenRef.current) {\n      serviceManager.store.dispatch(actions.setLauncherProperty(\"desktopLauncherIsExpanded\", true));\n      determineLauncherHeight();\n      setComplexLauncherClassName(\"WACLauncherComplex__Container--introAnimation\");\n    }\n  }, [ determineLauncherHeight, serviceManager.store ]);\n  const setExpandAnimationTimers = useCallback(() => {\n    animationStartTimerRef.current = setTimeout(() => {\n      startExpandLauncher();\n    }, time_to_expand);\n  }, [ time_to_expand, startExpandLauncher ]);\n  const clearExpandAnimationTimers = useCallback(() => {\n    clearTimeout(animationStartTimerRef.current);\n    clearTimeout(animationFinishedTimerRef.current);\n  }, []);\n  const startBounceAnimation = useCallback(() => {\n    if (!launcherHiddenRef.current) {\n      setSmallLauncherClassName(\"WACLauncher__ButtonContainer--bounceAnimation\");\n    }\n  }, []);\n  const finishBounceAnimation = useCallback(() => {\n    if (!launcherHiddenRef.current) {\n      setSmallLauncherClassName(\"WACLauncher__ButtonContainer--noAnimation\");\n      bounceTurnRef.current++;\n      serviceManager.store.dispatch(actions.setLauncherProperty(\"bounceTurn\", bounceTurnRef.current));\n    }\n  }, [ serviceManager.store ]);\n  const setBounceAnimationTimers = useCallback(() => {\n    if (bounceTurnRef.current === 1) {\n      firstBounceAnimationStartTimerRef.current = setTimeout(() => {\n        startBounceAnimation();\n      }, BOUNCING_ANIMATION_TIMEOUTS[0]);\n      firstBounceAnimationFinishedTimerRef.current = setTimeout(() => {\n        finishBounceAnimation();\n      }, BOUNCING_ANIMATION_TIMEOUTS[0] + TIME_FOR_BOUNCE_ANIMATION);\n      secondBounceAnimationStartTimerRef.current = setTimeout(() => {\n        startBounceAnimation();\n      }, BOUNCING_ANIMATION_TIMEOUTS[0] + BOUNCING_ANIMATION_TIMEOUTS[1]);\n      secondBounceAnimationFinishedTimerRef.current = setTimeout(() => {\n        finishBounceAnimation();\n      }, BOUNCING_ANIMATION_TIMEOUTS[0] + BOUNCING_ANIMATION_TIMEOUTS[1] + TIME_FOR_BOUNCE_ANIMATION);\n    } else if (bounceTurnRef.current === 2) {\n      secondBounceAnimationStartTimerRef.current = setTimeout(() => {\n        startBounceAnimation();\n      }, BOUNCING_ANIMATION_TIMEOUTS[1]);\n      secondBounceAnimationFinishedTimerRef.current = setTimeout(() => {\n        finishBounceAnimation();\n      }, BOUNCING_ANIMATION_TIMEOUTS[1] + TIME_FOR_BOUNCE_ANIMATION);\n    }\n  }, [ finishBounceAnimation, startBounceAnimation ]);\n  const clearBounceAnimationTimers = useCallback(() => {\n    clearTimeout(firstBounceAnimationStartTimerRef.current);\n    clearTimeout(firstBounceAnimationFinishedTimerRef.current);\n    clearTimeout(secondBounceAnimationStartTimerRef.current);\n    clearTimeout(secondBounceAnimationFinishedTimerRef.current);\n  }, []);\n  const setDefaultLauncherState = useCallback(() => {\n    clearExpandAnimationTimers();\n    serviceManager.store.dispatch(actions.setLauncherMinimized());\n    clearBounceAnimationTimers();\n    serviceManager.store.dispatch(actions.setLauncherProperty(\"bounceTurn\", 3));\n    animateOnceVisible.current = false;\n    setSmallLauncherClassName(\"WACLauncher__ButtonContainer--noAnimation\");\n  }, [ clearBounceAnimationTimers, clearExpandAnimationTimers, serviceManager.store ]);\n  useOnMount(() => {\n    if (desktopLauncherIsExpanded) {\n      animateOnceVisible.current = true;\n    } else if (!desktopLauncherWasMinimized && isExpandedLauncherEnabled) {\n      setExpandAnimationTimers();\n      return () => {\n        clearExpandAnimationTimers();\n      };\n    } else if (desktopLauncherWasMinimized && bounceTurn !== 3) {\n      setBounceAnimationTimers();\n      return () => {\n        clearBounceAnimationTimers();\n      };\n    }\n    return undefined;\n  });\n  useEffect(() => {\n    if (viewState.launcher && animateOnceVisible.current) {\n      determineLauncherHeight();\n      setComplexLauncherClassName(\"WACLauncherComplex__Container--simpleAnimation\");\n      animateOnceVisible.current = false;\n    }\n  }, [ determineLauncherHeight, viewState.launcher ]);\n  useEffect(() => {\n    if (viewState.mainWindow || viewState.tour) {\n      setDefaultLauncherState();\n    }\n  }, [ viewState, setDefaultLauncherState ]);\n  useEffect(() => {\n    if (new_expand_time) {\n      clearBounceAnimationTimers();\n      clearExpandAnimationTimers();\n      setExpandAnimationTimers();\n      serviceManager.store.dispatch(actions.setLauncherConfigProperty(\"new_expand_time\", false, LauncherType.DESKTOP));\n    }\n  }, [ animationFinishedTimerRef, animationStartTimerRef, new_expand_time, setExpandAnimationTimers, clearExpandAnimationTimers, clearBounceAnimationTimers, serviceManager.store ]);\n  const prevLauncherTitle = usePrevious(launcherConfig.desktop.title);\n  useEffect(() => {\n    if (prevLauncherTitle !== launcherConfig.desktop.title && (launcherConfig.desktop.title || prevLauncherTitle)) {\n      determineLauncherHeight();\n    }\n  }, [ determineLauncherHeight, launcherConfig, prevLauncherTitle ]);\n  const onMinimize = useCallback(() => {\n    setComplexLauncherClassName(\"WACLauncherComplex__Container--closeAnimation\");\n    setTimeout(() => {\n      setSmallLauncherClassName(\"WACLauncher__ButtonContainer--noAnimation\");\n      serviceManager.store.dispatch(actions.setLauncherMinimized());\n      setTimeout(requestFocus);\n    }, TIME_FOR_MINIMIZE_ANIMATION);\n  }, [ requestFocus, serviceManager.store ]);\n  const onOpen = useCallback(() => {\n    setDefaultLauncherState();\n    onDoToggle();\n  }, [ onDoToggle, setDefaultLauncherState ]);\n  let launcher;\n  if (desktopLauncherIsExpanded) {\n    launcher = React.createElement(LauncherComplex, {\n      languagePack: languagePack,\n      intl: intl,\n      launcherComplexRef: launcherComplexRef,\n      launcherRef: launcherRef,\n      launcherConfig: launcherConfig,\n      onOpen: onOpen,\n      onMinimize: onMinimize,\n      unreadAgentCount: unreadAgentCount,\n      showUnreadIndicator: showUnreadIndicator,\n      desktopLauncherIsExpanded: desktopLauncherIsExpanded,\n      launcherHidden: launcherHidden,\n      activeTour: activeTour,\n      className: complexLauncherClassName\n    });\n  } else {\n    launcher = React.createElement(LauncherExport, {\n      languagePack: languagePack,\n      intl: intl,\n      ref: launcherRef,\n      onToggleOpen: onOpen,\n      unreadAgentCount: unreadAgentCount,\n      showUnreadIndicator: showUnreadIndicator,\n      className: smallLauncherClassName,\n      launcherHidden: launcherHidden,\n      activeTour: activeTour\n    });\n  }\n  return launcher;\n};\n\nexport { LauncherDesktopContainer };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction animateWithClass(element, className, endAnimationNameOrDelay, endAnimationCallback) {\n  if (element) {\n    element.classList.add(className);\n    if (typeof endAnimationNameOrDelay === \"number\") {\n      setTimeout(() => {\n        element.classList.remove(className);\n        if (endAnimationCallback) {\n          endAnimationCallback();\n        }\n      }, endAnimationNameOrDelay);\n    } else {\n      const listener = event => {\n        if (!endAnimationNameOrDelay || event.animationName === endAnimationNameOrDelay) {\n          element.removeEventListener(\"animationend\", listener);\n          element.removeEventListener(\"animationcancel\", listener);\n          element.classList.remove(className);\n          if (endAnimationCallback) {\n            endAnimationCallback();\n          }\n        }\n      };\n      element.addEventListener(\"animationend\", listener);\n      element.addEventListener(\"animationcancel\", listener);\n    }\n  }\n}\n\nfunction setAnimationTimeouts(element, animation, timeouts, options) {\n  const {startingIndex: startingIndex, beforeAll: beforeAll, afterAll: afterAll, beforeEach: beforeEach, afterEach: afterEach} = options;\n  let index = startingIndex || 0;\n  let terminate = false;\n  let timeoutID = null;\n  function playAnimation() {\n    if (beforeAll && index === 0) {\n      beforeAll();\n    }\n    const isComplete = index === timeouts.length;\n    if (!isComplete && !terminate) {\n      timeoutID = setTimeout(setAnimationListener, timeouts[index]);\n    } else if (isComplete && afterAll) {\n      afterAll();\n    }\n  }\n  function replayAnimation() {\n    if (afterEach) {\n      afterEach();\n    }\n    index++;\n    element.removeEventListener(\"animationend\", replayAnimation);\n    element.classList.remove(animation);\n    playAnimation();\n  }\n  function setAnimationListener() {\n    if (beforeEach) {\n      beforeEach();\n    }\n    element.addEventListener(\"animationend\", replayAnimation);\n    element.classList.add(animation);\n  }\n  playAnimation();\n  return () => {\n    terminate = true;\n    clearTimeout(timeoutID);\n    element.classList.remove(animation);\n    element.removeEventListener(\"animationend\", replayAnimation);\n  };\n}\n\nexport { animateWithClass, setAnimationTimeouts };\n","import ArrowUpLeft from \"@carbon/icons-react/es/ArrowUpLeft.js\";\n\nimport ChatLaunch from \"@carbon/icons-react/es/ChatLaunch.js\";\n\nimport { Button } from \"@carbon/react\";\n\nimport cx from \"classnames\";\n\nimport React, { forwardRef, useState, useRef, useImperativeHandle, useEffect } from \"react\";\n\nimport { useIntl } from \"react-intl\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { useAriaAnnouncer } from \"../../hooks/useAriaAnnouncer.js\";\n\nimport { useLanguagePack } from \"../../hooks/useLanguagePack.js\";\n\nimport { usePrevious } from \"../../hooks/usePrevious.js\";\n\nimport { animateWithClass } from \"../../utils/animationUtils.js\";\n\nimport { IS_MOBILE } from \"../../utils/browserUtils.js\";\n\nimport { doFocusRef } from \"../../utils/domUtils.js\";\n\nimport { getLauncherButtonAriaLabel } from \"./launcherUtils.js\";\n\nimport { ButtonKindEnum } from \"../../../../types/utilities/carbonTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const MAX_EXTENDED_LAUNCHER_WIDTH = 400;\n\nfunction LauncherExtended(props, ref) {\n  const {unreadAgentCount: unreadAgentCount, showUnreadIndicator: showUnreadIndicator, launcherConfig: launcherConfig, isExtended: isExtended, playExtendAnimation: playExtendAnimation, onToggleOpen: onToggleOpen, onSwipeRight: onSwipeRight, onReduceEnd: onReduceEnd, className: className, launcherHidden: launcherHidden, activeTour: activeTour} = props;\n  const ariaAnnouncer = useAriaAnnouncer();\n  const languagePack = useLanguagePack();\n  const intl = useIntl();\n  const launcherAvatarURL = useSelector(state => state.theme.useAITheme ? undefined : state.launcher.config.mobile.avatar_url_override);\n  const [animateExtendedState, setAnimateExtendedState] = useState(playExtendAnimation);\n  const [showGreetingMessage, setShowGreetingMessage] = useState(false);\n  const prevIsExtended = usePrevious(isExtended);\n  const buttonRef = useRef();\n  const extendedContainerRef = useRef();\n  const greetingMessageRef = useRef();\n  const textHolderRef = useRef();\n  const touchStartRef = useRef({\n    touchStartX: null,\n    touchStartY: null\n  });\n  const shouldReduceExtendedLauncher = !isExtended && prevIsExtended;\n  const extendWithAnimation = isExtended && animateExtendedState;\n  const extendWithoutAnimation = isExtended && !animateExtendedState;\n  const launcherGreetingMessage = launcherConfig.mobile.title || languagePack.launcher_mobileGreeting;\n  let ariaLabel = getLauncherButtonAriaLabel(languagePack, launcherHidden, activeTour);\n  if (unreadAgentCount !== 0) {\n    ariaLabel += `. ${intl.formatMessage({\n      id: \"icon_ariaUnreadMessages\"\n    }, {\n      count: unreadAgentCount\n    })}`;\n  }\n  let launcherAvatar = React.createElement(ChatLaunch, {\n    size: 24,\n    className: \"WACLauncher__svg\"\n  });\n  if (launcherAvatarURL) {\n    launcherAvatar = React.createElement(\"img\", {\n      className: \"WACLauncher__Avatar\",\n      src: launcherAvatarURL,\n      \"aria-hidden\": true,\n      alt: \"\"\n    });\n  }\n  useImperativeHandle(ref, () => ({\n    requestFocus: () => {\n      doFocusRef(buttonRef);\n    },\n    launcherContainerElement: () => extendedContainerRef.current\n  }));\n  useEffect(() => {\n    const textHolderElement = textHolderRef.current;\n    const greetingMessageElement = greetingMessageRef.current;\n    const extendedContainerElement = extendedContainerRef.current;\n    calculateAndSetMaxExtendedLauncherWidth(textHolderElement, greetingMessageElement, extendedContainerElement);\n  }, [ ariaAnnouncer, extendWithoutAnimation, launcherGreetingMessage ]);\n  useEffect(() => {\n    if (isExtended) {\n      if (animateExtendedState) {\n        doFadeAnimationForElements({\n          fadeInElement: greetingMessageRef.current,\n          fadeInTime: 300\n        }, () => {\n          setAnimateExtendedState(false);\n        });\n      } else {\n        setShowGreetingMessage(true);\n      }\n      const buttonEl = buttonRef.current;\n      const handleTouchMove = event => {\n        checkIfUserSwipedRight(event.touches[0], touchStartRef.current, onSwipeRight);\n      };\n      const handleTouchStart = event => {\n        const {clientX: clientX, clientY: clientY} = event.touches[0];\n        const touchStart = touchStartRef.current;\n        touchStart.touchStartX = clientX;\n        touchStart.touchStartY = clientY;\n        buttonRef.current.addEventListener(\"touchmove\", handleTouchMove);\n      };\n      buttonEl.addEventListener(\"touchstart\", handleTouchStart);\n      return () => {\n        buttonEl.removeEventListener(\"touchmove\", handleTouchMove);\n        buttonEl.removeEventListener(\"touchstart\", handleTouchStart);\n      };\n    } else if (shouldReduceExtendedLauncher) {\n      const reduceAnimationEndListener = () => {\n        onReduceEnd();\n        setAnimateExtendedState(true);\n        extendedContainerRef.current.removeEventListener(\"animationend\", reduceAnimationEndListener);\n      };\n      extendedContainerRef.current.addEventListener(\"animationend\", reduceAnimationEndListener);\n      doFadeAnimationForElements({\n        fadeOutElement: greetingMessageRef.current\n      });\n    }\n    return undefined;\n  }, [ animateExtendedState, ariaAnnouncer, isExtended, launcherGreetingMessage, onReduceEnd, onSwipeRight, shouldReduceExtendedLauncher ]);\n  return React.createElement(\"div\", {\n    className: cx(\"WACLauncher__ButtonContainer WACLauncher__ButtonContainer--round WACLauncherExtended__Container\", className, {\n      \"WACLauncher__ButtonContainer--hidden\": launcherHidden,\n      \"WACLauncherExtended__Button--extended\": extendWithoutAnimation,\n      \"WACLauncherExtended__Button--extendedAnimation\": extendWithAnimation,\n      \"WACLauncherExtended__Button--reducedAnimation\": shouldReduceExtendedLauncher\n    }),\n    ref: extendedContainerRef\n  }, React.createElement(Button, {\n    \"aria-label\": ariaLabel,\n    className: cx(\"WACLauncher__Button\", \"WACLauncherExtended__Button\", {\n      WACLauncher__TourButton: activeTour\n    }),\n    kind: activeTour ? ButtonKindEnum.GHOST : ButtonKindEnum.PRIMARY,\n    type: \"button\",\n    ref: buttonRef,\n    onClick: onToggleOpen\n  }, React.createElement(\"div\", {\n    className: \"WACLauncherExtended__WrapperContainer\"\n  }, React.createElement(\"div\", {\n    className: \"WACLauncherExtended__Wrapper\"\n  }, React.createElement(\"div\", {\n    className: \"WACLauncherExtended__TextHolder\",\n    ref: textHolderRef\n  }, React.createElement(\"div\", {\n    className: cx(\"WACLauncherExtended__Greeting\", {\n      \"WACLauncherExtended__Element--hidden\": !showGreetingMessage\n    }),\n    ref: greetingMessageRef\n  }, React.createElement(\"div\", {\n    className: \"WACLauncherExtended__GreetingText\",\n    \"aria-hidden\": !isExtended\n  }, launcherGreetingMessage))), React.createElement(\"div\", {\n    className: \"WACLauncher__IconHolder\"\n  }, activeTour ? React.createElement(ArrowUpLeft, {\n    size: 24,\n    className: \"WACLauncher__svg\"\n  }) : launcherAvatar))), (unreadAgentCount !== 0 || showUnreadIndicator) && React.createElement(\"div\", {\n    className: \"WAC__countIndicator\"\n  }, unreadAgentCount !== 0 ? unreadAgentCount : \"\")));\n}\n\nfunction calculateAndSetMaxExtendedLauncherWidth(textHolderEl, greetingMessageEl, extendedContainerEl) {\n  const nonTextSpace = 68;\n  const maxLauncherExtendedWidth = getMaxLauncherExtendedWidth();\n  const maxTextHolderWidth = maxLauncherExtendedWidth - nonTextSpace + 12;\n  textHolderEl.style.setProperty(\"width\", `${maxTextHolderWidth}px`);\n  greetingMessageEl.style.setProperty(\"width\", `${maxTextHolderWidth - 12}px`);\n  greetingMessageEl.style.setProperty(\"display\", \"flex\");\n  const {clientWidth: clientWidth} = greetingMessageEl.querySelector(\".WACLauncherExtended__GreetingText\");\n  let launcherExtendedWidth = clientWidth + nonTextSpace + 1;\n  if (launcherExtendedWidth > MAX_EXTENDED_LAUNCHER_WIDTH) {\n    launcherExtendedWidth = MAX_EXTENDED_LAUNCHER_WIDTH;\n  }\n  greetingMessageEl.removeAttribute(\"style\");\n  textHolderEl.removeAttribute(\"style\");\n  extendedContainerEl.style.setProperty(\"--cds-chat--LAUNCHER-EXTENDED-width\", `${launcherExtendedWidth}px`);\n}\n\nfunction doFadeAnimationForElements({fadeOutElement: fadeOutElement, fadeInElement: fadeInElement, fadeInTime: fadeInTime = 600}, callback) {\n  if (fadeOutElement) {\n    fadeOutElement.classList.remove(\"WACLauncherExtended__Element--hidden\");\n    animateWithClass(fadeOutElement, \"WACLauncherExtended__Element--FadeOut\", 500, () => {\n      fadeOutElement.classList.add(\"WACLauncherExtended__Element--hidden\");\n      fadeOutElement.classList.remove(\"WACLauncherExtended__Element--FadeOut\");\n      if (!fadeInElement && callback) {\n        callback();\n      }\n    });\n  }\n  if (fadeInElement) {\n    setTimeout(() => {\n      fadeInElement.classList.remove(\"WACLauncherExtended__Element--hidden\");\n      animateWithClass(fadeInElement, \"WACLauncherExtended__Element--FadeIn\", 600, () => {\n        fadeInElement.classList.remove(\"WACLauncherExtended__Element--FadeIn\");\n        if (callback) {\n          callback();\n        }\n      });\n    }, fadeInTime);\n  }\n}\n\nfunction checkIfUserSwipedRight(touchList, touchStartCoordinates, callback) {\n  const {touchStartX: touchStartX, touchStartY: touchStartY} = touchStartCoordinates;\n  if (touchStartX === null || touchStartY === null) {\n    return;\n  }\n  const {clientX: touchEndX, clientY: touchEndY} = touchList;\n  const differenceX = touchEndX - touchStartX;\n  const differenceY = touchEndY - touchStartY;\n  if (Math.abs(differenceX) > Math.abs(differenceY)) {\n    if (differenceX > 0) {\n      callback();\n    }\n  }\n  touchStartCoordinates.touchStartX = null;\n  touchStartCoordinates.touchStartY = null;\n}\n\nfunction getMaxLauncherExtendedWidth() {\n  const launcherPosition = IS_MOBILE ? 32 : 64;\n  const {width: width, height: height} = window.screen;\n  const lowestValue = Math.min(height, width);\n  const extendedWidth = lowestValue - launcherPosition;\n  return Math.min(extendedWidth, MAX_EXTENDED_LAUNCHER_WIDTH);\n}\n\nconst LauncherExtendedExport = React.memo(forwardRef(LauncherExtended));\n\nexport { LauncherExtendedExport as LauncherExtended };\n","import cx from \"classnames\";\n\nimport React, { useState, useRef, useCallback, useEffect } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { useOnMount } from \"../../hooks/useOnMount.js\";\n\nimport { usePrevious } from \"../../hooks/usePrevious.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport actions from \"../../store/actions.js\";\n\nimport { BOUNCING_ANIMATION_TIMEOUTS } from \"../../../../types/config/LauncherConfig.js\";\n\nimport { setAnimationTimeouts } from \"../../utils/animationUtils.js\";\n\nimport { LauncherExtended as LauncherExtendedExport } from \"./LauncherExtended.js\";\n\nimport { LauncherType } from \"../../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function LauncherMobileContainer(props) {\n  const {launcherRef: launcherRef, onToggleOpen: onToggleOpen, launcherHidden: launcherHidden, activeTour: activeTour} = props;\n  const serviceManager = useServiceManager();\n  const {config: launcherConfig} = useSelector(state => state.launcher);\n  const unreadAgentCount = useSelector(state => state.agentState.numUnreadMessages);\n  const {mobileLauncherIsExtended: isExtended, mobileLauncherWasReduced: wasReduced, mobileLauncherDisableBounce: disableBounce, bounceTurn: bounceTurn, showUnreadIndicator: showUnreadIndicator, viewState: viewState} = useSelector(state => state.persistedToBrowserStorage.launcherState);\n  const [isStartingBounceAnimation, setIsStartingBounceAnimation] = useState(false);\n  const prevIsExtended = usePrevious(isExtended);\n  const prevWasReduced = usePrevious(wasReduced);\n  const initialBounceTurn = useRef(bounceTurn).current;\n  const previouslyPlayedExtendAnimation = useRef(wasReduced).current;\n  const extendLauncherTimeoutIDRef = useRef(null);\n  const reduceLauncherTimeoutIDRef = useRef(null);\n  const endBounceAnimationRef = useRef(null);\n  const shouldBounceRef = useRef(previouslyPlayedExtendAnimation && !disableBounce);\n  const {time_to_expand: time_to_expand, new_expand_time: new_expand_time, time_to_reduce: time_to_reduce} = launcherConfig.mobile;\n  const isExpandedLauncherEnabled = launcherConfig.mobile.is_on;\n  const playExtendAnimation = prevIsExtended === undefined && !isExtended;\n  const isExtending = prevIsExtended !== undefined && !prevIsExtended && isExtended;\n  const hasReduced = prevWasReduced !== undefined && !prevWasReduced && wasReduced;\n  const disableIntroAnimation = isExtending || hasReduced || isStartingBounceAnimation;\n  const setLauncherStateAsReduced = useCallback(() => {\n    if (!wasReduced) {\n      serviceManager.store.dispatch(actions.setLauncherProperty(\"mobileLauncherWasReduced\", true));\n    }\n  }, [ wasReduced, serviceManager ]);\n  const reduceLauncher = useCallback(() => {\n    clearTimeouts();\n    if (isExtended) {\n      document.removeEventListener(\"scroll\", reduceLauncher);\n      serviceManager.store.dispatch(actions.setLauncherProperty(\"mobileLauncherIsExtended\", false));\n    }\n  }, [ isExtended, serviceManager ]);\n  const setExpandAnimationTimeout = useCallback(() => {\n    extendLauncherTimeoutIDRef.current = setTimeout(() => {\n      if (!isExtended && !isExtending) {\n        serviceManager.store.dispatch(actions.setLauncherProperty(\"mobileLauncherWasReduced\", false));\n        serviceManager.store.dispatch(actions.setLauncherProperty(\"mobileLauncherIsExtended\", true));\n      }\n    }, time_to_expand);\n  }, [ isExtended, isExtending, serviceManager.store, time_to_expand ]);\n  const setDefaultLauncherState = useCallback(() => {\n    const endBounceAnimation = endBounceAnimationRef.current;\n    if (endBounceAnimation) {\n      endBounceAnimation();\n      endBounceAnimationRef.current = null;\n    }\n    serviceManager.store.dispatch(actions.setLauncherProperty(\"mobileLauncherDisableBounce\", true));\n    reduceLauncher();\n    setLauncherStateAsReduced();\n  }, [ reduceLauncher, serviceManager.store, setLauncherStateAsReduced ]);\n  useOnMount(() => {\n    if (!wasReduced && playExtendAnimation && isExpandedLauncherEnabled) {\n      setExpandAnimationTimeout();\n    } else if (shouldBounceRef.current) {\n      const launcherContainerElement = launcherRef?.current?.launcherContainerElement();\n      if (launcherContainerElement) {\n        const startRecurringBounceAnimation = () => {\n          if (shouldBounceRef.current) {\n            let turnCounter = initialBounceTurn;\n            launcherContainerElement.removeEventListener(\"animationend\", startRecurringBounceAnimation);\n            setIsStartingBounceAnimation(true);\n            endBounceAnimationRef.current = setAnimationTimeouts(launcherContainerElement, \"WACLauncher__ButtonContainer--bounceAnimation\", BOUNCING_ANIMATION_TIMEOUTS, {\n              startingIndex: initialBounceTurn - 1,\n              afterEach: () => {\n                turnCounter++;\n                serviceManager.store.dispatch(actions.setLauncherProperty(\"bounceTurn\", turnCounter));\n              },\n              afterAll: () => {\n                serviceManager.store.dispatch(actions.setLauncherProperty(\"mobileLauncherDisableBounce\", true));\n              }\n            });\n          }\n        };\n        launcherContainerElement.addEventListener(\"animationend\", startRecurringBounceAnimation);\n      }\n    }\n  });\n  useEffect(() => {\n    if (viewState.mainWindow || viewState.tour) {\n      setDefaultLauncherState();\n    }\n  }, [ viewState, setDefaultLauncherState ]);\n  useEffect(() => {\n    if (new_expand_time) {\n      if (shouldBounceRef.current) {\n        shouldBounceRef.current = false;\n      }\n      const endBounceAnimation = endBounceAnimationRef.current;\n      if (endBounceAnimation) {\n        endBounceAnimation();\n        endBounceAnimationRef.current = null;\n      }\n      if (extendLauncherTimeoutIDRef.current) {\n        clearTimeout(extendLauncherTimeoutIDRef.current);\n      }\n      setExpandAnimationTimeout();\n      serviceManager.store.dispatch(actions.setLauncherConfigProperty(\"new_expand_time\", false, LauncherType.MOBILE));\n    }\n  }, [ setExpandAnimationTimeout, new_expand_time, serviceManager.store, shouldBounceRef ]);\n  function clearTimeouts() {\n    const extendLauncherTimeoutID = extendLauncherTimeoutIDRef.current;\n    const reduceLauncherTimeoutID = reduceLauncherTimeoutIDRef.current;\n    if (reduceLauncherTimeoutID) {\n      clearTimeout(reduceLauncherTimeoutID);\n      reduceLauncherTimeoutIDRef.current = null;\n    }\n    if (extendLauncherTimeoutID) {\n      clearTimeout(extendLauncherTimeoutID);\n      extendLauncherTimeoutIDRef.current = null;\n    }\n  }\n  const handleToggleOpen = useCallback(() => {\n    setDefaultLauncherState();\n    onToggleOpen();\n  }, [ onToggleOpen, setDefaultLauncherState ]);\n  const handleSwipeRight = useCallback(() => {\n    reduceLauncher();\n  }, [ reduceLauncher ]);\n  useEffect(() => {\n    if (isExtended) {\n      reduceLauncherTimeoutIDRef.current = setTimeout(() => {\n        reduceLauncher();\n      }, time_to_reduce);\n      document.addEventListener(\"scroll\", reduceLauncher);\n    }\n  }, [ isExtended, reduceLauncher, time_to_reduce, serviceManager ]);\n  return React.createElement(LauncherExtendedExport, {\n    className: cx({\n      \"WACLauncher__ButtonContainer--noAnimation\": disableIntroAnimation\n    }),\n    ref: launcherRef,\n    launcherConfig: launcherConfig,\n    showUnreadIndicator: showUnreadIndicator,\n    unreadAgentCount: unreadAgentCount,\n    isExtended: isExtended,\n    playExtendAnimation: playExtendAnimation,\n    onToggleOpen: handleToggleOpen,\n    onSwipeRight: handleSwipeRight,\n    onReduceEnd: setLauncherStateAsReduced,\n    launcherHidden: launcherHidden,\n    activeTour: activeTour\n  });\n}\n\nexport { LauncherMobileContainer };\n","import React, { useRef, useCallback } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { useEffectDidUpdate } from \"../../hooks/useEffectDidUpdate.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport \"../../../../types/state/AppState.js\";\n\nimport { IS_PHONE } from \"../../utils/browserUtils.js\";\n\nimport { LauncherDesktopContainer } from \"./LauncherDesktopContainer.js\";\n\nimport { LauncherMobileContainer } from \"./LauncherMobileContainer.js\";\n\nimport { ViewChangeReason, MainWindowOpenReason } from \"../../../../types/events/eventBusTypes.js\";\n\nimport { ViewType } from \"../../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function LauncherContainer() {\n  const serviceManager = useServiceManager();\n  const launcherRef = useRef();\n  const viewState = useSelector(state => state.persistedToBrowserStorage.launcherState.viewState);\n  const initialViewChangeComplete = useSelector(state => state.initialViewChangeComplete);\n  const launcherHidden = !viewState.launcher;\n  const activeTour = useSelector(state => state.persistedToBrowserStorage.launcherState.activeTour);\n  const requestFocus = useCallback(() => {\n    launcherRef.current?.requestFocus();\n  }, [ launcherRef ]);\n  const onDoToggle = useCallback(() => {\n    if (activeTour) {\n      return serviceManager.actions.changeView(ViewType.TOUR, {\n        viewChangeReason: ViewChangeReason.LAUNCHER_CLICKED\n      });\n    }\n    return serviceManager.actions.changeView(ViewType.MAIN_WINDOW, {\n      mainWindowOpenReason: MainWindowOpenReason.DEFAULT_LAUNCHER\n    });\n  }, [ activeTour, serviceManager.actions ]);\n  useEffectDidUpdate(() => {\n    if (viewState.launcher && !viewState.mainWindow && !viewState.tour && initialViewChangeComplete) {\n      launcherRef.current?.requestFocus();\n    }\n  }, [ viewState ]);\n  let launcherContainer;\n  if (IS_PHONE) {\n    launcherContainer = React.createElement(LauncherMobileContainer, {\n      launcherRef: launcherRef,\n      onToggleOpen: onDoToggle,\n      launcherHidden: launcherHidden,\n      activeTour: activeTour\n    });\n  } else {\n    launcherContainer = React.createElement(LauncherDesktopContainer, {\n      launcherRef: launcherRef,\n      onDoToggle: onDoToggle,\n      requestFocus: requestFocus,\n      launcherHidden: launcherHidden,\n      activeTour: activeTour\n    });\n  }\n  return launcherContainer;\n}\n\nexport { LauncherContainer };\n","import { useRef, useEffect } from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function useEffectDidUpdate(effect, deps) {\n  const hasRunRef = useRef(false);\n  useEffect(() => {\n    if (hasRunRef.current) {\n      return effect();\n    }\n    hasRunRef.current = true;\n    return undefined;\n  }, deps);\n}\n\nexport { useEffectDidUpdate };\n","import { Loading } from \"@carbon/react\";\n\nimport cx from \"classnames\";\n\nimport React, { useContext } from \"react\";\n\nimport { HideComponentContext } from \"../contexts/HideComponentContext.js\";\n\nimport { BotHeader as BotHeaderExport } from \"./header/BotHeader.js\";\n\nimport { HomeScreenHeader as HomeScreenHeaderExport } from \"./homeScreen/HomeScreenHeader.js\";\n\nimport { AnnounceOnMountComponent as AnnounceOnMountComponentExport } from \"./util/AnnounceOnMountComponent.js\";\n\nimport { MountChildrenOnDelay } from \"./util/MountChildrenOnDelay.js\";\n\nimport { OverlayPanelName } from \"./OverlayPanel.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function HydrationPanel({onClose: onClose, languagePack: languagePack, isHydrated: isHydrated, headerDisplayName: headerDisplayName, useHomeScreenVersion: useHomeScreenVersion}) {\n  const isHidden = useContext(HideComponentContext);\n  let header;\n  if (useHomeScreenVersion) {\n    header = React.createElement(HomeScreenHeaderExport, {\n      onClose: onClose\n    });\n  } else {\n    header = React.createElement(BotHeaderExport, {\n      onClose: onClose,\n      headerDisplayName: headerDisplayName,\n      onToggleHomeScreen: null,\n      includeWriteableElement: false,\n      testIdPrefix: OverlayPanelName.HYDRATING\n    });\n  }\n  return React.createElement(\"div\", {\n    className: \"WAC WAC__hydratingContainer\"\n  }, header, React.createElement(\"div\", {\n    className: cx(\"WAC__hydrating\", \"WACPanelContent\", {\n      \"WAC__hydrating--homeScreen\": useHomeScreenVersion\n    })\n  }, !isHidden && React.createElement(MountChildrenOnDelay, {\n    delay: 400\n  }, !isHydrated && React.createElement(AnnounceOnMountComponentExport, {\n    announceOnce: languagePack.window_ariaWindowLoading\n  }), React.createElement(Loading, {\n    withOverlay: false,\n    \"aria-label\": languagePack.window_ariaWindowLoading\n  }))));\n}\n\nexport { HydrationPanel };\n","import React, { useEffect, useCallback } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { BusEventType } from \"../../../../types/events/eventBusTypes.js\";\n\nimport { useAriaAnnouncer } from \"../../hooks/useAriaAnnouncer.js\";\n\nimport { useLanguagePack } from \"../../hooks/useLanguagePack.js\";\n\nimport { usePrevious } from \"../../hooks/usePrevious.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport actions from \"../../store/actions.js\";\n\nimport { DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS } from \"../../store/reducerUtils.js\";\n\nimport { AnimationInType, AnimationOutType } from \"../../../../types/utilities/Animation.js\";\n\nimport { consoleError } from \"../../utils/miscUtils.js\";\n\nimport { BasePanelComponent as BasePanelComponentExport } from \"../BasePanelComponent.js\";\n\nimport { OverlayPanel, OverlayPanelName } from \"../OverlayPanel.js\";\n\nimport WriteableElement from \"../WriteableElement.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function CustomPanel(props) {\n  const {useAITheme: useAITheme, onPanelOpenEnd: onPanelOpenEnd, onPanelCloseEnd: onPanelCloseEnd, onPanelOpenStart: onPanelOpenStart, onPanelCloseStart: onPanelCloseStart, onClose: onClose, onCloseAndRestart: onCloseAndRestart, onClickRestart: onClickRestart} = props;\n  const languagePack = useLanguagePack();\n  const {isOpen: isOpen, options: options} = useSelector(state => state.customPanelState);\n  const {title: title, hidePanelHeader: hidePanelHeader, disableDefaultCloseAction: disableDefaultCloseAction, disableAnimation: disableAnimation, onClickBack: onClickBack, onClickClose: onClickClose, onClickCloseAndRestart: onClickCloseAndRestart} = options;\n  const serviceManager = useServiceManager();\n  const ariaAnnouncer = useAriaAnnouncer();\n  const prevIsOpen = usePrevious(isOpen);\n  const openAnimation = disableAnimation ? AnimationInType.NONE : AnimationInType.SLIDE_IN_FROM_BOTTOM;\n  const closeAnimation = disableAnimation ? AnimationOutType.NONE : AnimationOutType.SLIDE_OUT_TO_BOTTOM;\n  useEffect(() => {\n    if (prevIsOpen !== isOpen && isOpen) {\n      if (!hidePanelHeader && title) {\n        ariaAnnouncer(title);\n      }\n    }\n  }, [ ariaAnnouncer, hidePanelHeader, isOpen, prevIsOpen, title ]);\n  const onClickBackLocal = useCallback(() => {\n    serviceManager.store.dispatch(actions.setCustomPanelOpen(false));\n    onClickBack?.();\n  }, [ serviceManager, onClickBack ]);\n  const onClickCloseLocal = useCallback(() => {\n    if (!disableDefaultCloseAction) {\n      checkAllowClose(serviceManager.store.getState().viewChanging);\n      onClose();\n    }\n    onClickClose?.();\n  }, [ disableDefaultCloseAction, onClickClose, onClose, serviceManager ]);\n  const onCloseAndRestartLocal = useCallback(() => {\n    if (!disableDefaultCloseAction) {\n      checkAllowClose(serviceManager.store.getState().viewChanging);\n      onCloseAndRestart();\n    }\n    onClickCloseAndRestart?.();\n  }, [ disableDefaultCloseAction, onClickCloseAndRestart, onCloseAndRestart, serviceManager ]);\n  return React.createElement(OverlayPanel, {\n    className: \"WAC__overlay--covering\",\n    onOpenStart: () => {\n      serviceManager.eventBus.fire({\n        type: BusEventType.CUSTOM_PANEL_PRE_OPEN\n      }, serviceManager.instance);\n      onPanelOpenStart();\n    },\n    onOpenEnd: () => {\n      serviceManager.eventBus.fire({\n        type: BusEventType.CUSTOM_PANEL_OPEN\n      }, serviceManager.instance);\n      onPanelOpenEnd();\n    },\n    onCloseStart: () => {\n      serviceManager.eventBus.fire({\n        type: BusEventType.CUSTOM_PANEL_PRE_CLOSE\n      }, serviceManager.instance);\n      onPanelCloseStart();\n    },\n    onCloseEnd: () => {\n      serviceManager.eventBus.fire({\n        type: BusEventType.CUSTOM_PANEL_CLOSE\n      }, serviceManager.instance);\n      onPanelCloseEnd();\n      serviceManager.store.dispatch(actions.setCustomPanelConfigOptions(DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS));\n    },\n    animationOnOpen: openAnimation,\n    animationOnClose: closeAnimation,\n    shouldOpen: isOpen,\n    serviceManager: serviceManager,\n    overlayPanelName: OverlayPanelName.CUSTOM\n  }, React.createElement(BasePanelComponentExport, {\n    className: \"WACCustomPanel\",\n    eventName: \"Custom panel opened\",\n    eventDescription: \"A user opened a custom panel.\",\n    labelBackButton: languagePack.general_returnToAssistant,\n    isOpen: isOpen,\n    title: title,\n    useAITheme: useAITheme,\n    onClickBack: onClickBackLocal,\n    onClickClose: onClickCloseLocal,\n    onClickCloseAndRestart: onCloseAndRestartLocal,\n    onClickRestart: onClickRestart,\n    hidePanelHeader: hidePanelHeader,\n    hideBackButton: options.hideBackButton,\n    hideCloseButton: options.hideCloseButton,\n    hideCloseAndRestartButton: options.hideCloseAndRestartButton,\n    testIdPrefix: OverlayPanelName.CUSTOM\n  }, React.createElement(WriteableElement, {\n    slotName: \"customPanelElement\",\n    className: \"WACCustomPanel__ContentContainer\"\n  })));\n}\n\nfunction checkAllowClose(viewChanging) {\n  if (viewChanging) {\n    const message = \"You are attempting to close Carbon AI chat from a custom panel while Carbon AI chat is currently running a view\" + \" change event which is not permitted. Please use the disableDefaultCloseAction option to disable\" + \" this behavior for the custom panel and then use onClickClose to resolve your Promise that is handling\" + \" the event; that Promise will allow you to close Carbon AI chat.\";\n    consoleError(message);\n    throw new Error(message);\n  }\n}\n\nconst CustomPanelExport = React.memo(CustomPanel);\n\nexport { CustomPanelExport as CustomPanel };\n","import \"intl-pluralrules\";\n\nimport cx from \"classnames\";\n\nimport FocusTrap from \"focus-trap-react\";\n\nimport React, { Component, Suspense } from \"react\";\n\nimport { connect } from \"react-redux\";\n\nimport { HydrationPanel } from \"../../components/HydrationPanel.js\";\n\nimport { OverlayPanel, OverlayPanelName } from \"../../components/OverlayPanel.js\";\n\nimport { CustomPanel as CustomPanelExport } from \"../../components/panels/CustomPanel.js\";\n\nimport { HideComponent } from \"../../components/util/HideComponent.js\";\n\nimport VisuallyHidden from \"../../components/util/VisuallyHidden.js\";\n\nimport { ModalPortalRootContext } from \"../../contexts/ModalPortalRootContext.js\";\n\nimport actions from \"../../store/actions.js\";\n\nimport { selectIsInputToAgent, selectInputState, selectAgentDisplayState } from \"../../store/selectors.js\";\n\nimport { AnimationOutType, AnimationInType } from \"../../../../types/utilities/Animation.js\";\n\nimport { ChatWidthBreakpoint } from \"../../../../types/state/AppState.js\";\n\nimport { addClassNameToState, removeClassNameFromState } from \"../../../../types/utilities/HasAddRemoveClassName.js\";\n\nimport { IS_MOBILE, IS_IOS } from \"../../utils/browserUtils.js\";\n\nimport \"../../utils/constants.js\";\n\nimport { doFocusRef, SCROLLBAR_WIDTH } from \"../../utils/domUtils.js\";\n\nimport { arrayLastValue } from \"../../utils/lang/arrayUtils.js\";\n\nimport { createMessageRequestForText, createMessageRequestForChoice } from \"../../utils/messageUtils.js\";\n\nimport { consoleError, createDidCatchErrorData } from \"../../utils/miscUtils.js\";\n\nimport { MessageSendSource, MainWindowCloseReason } from \"../../../../types/events/eventBusTypes.js\";\n\nimport { lazyChat, lazyCatastrophicError, lazyDisclaimer, lazyHomeScreenContainer, lazyIFramePanel, lazyViewSourcePanel, lazyBodyAndFooterPanelComponent } from \"../../../dynamic-imports/dynamic-imports.js\";\n\nimport { ViewType } from \"../../../../types/instance/apiTypes.js\";\n\nimport { CornersType } from \"../../../../types/config/CornersType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const Chat = lazyChat();\n\nconst CatastrophicError = lazyCatastrophicError();\n\nconst Disclaimer = lazyDisclaimer();\n\nconst HomeScreenContainer = lazyHomeScreenContainer();\n\nconst IFramePanel = lazyIFramePanel();\n\nconst ViewSourcePanel = lazyViewSourcePanel();\n\nconst BodyAndFooterPanelComponent = lazyBodyAndFooterPanelComponent();\n\nconst WIDTH_BREAKPOINT_STANDARD = \"WAC--standardWidth\";\n\nconst WIDTH_BREAKPOINT_NARROW = \"WAC--narrowWidth\";\n\nconst WIDTH_BREAKPOINT_WIDE = \"WAC--wideWidth\";\n\nclass MainWindow extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      closing: false,\n      open: this.props.persistedToBrowserStorage.launcherState.viewState.mainWindow,\n      modalPortalHostElement: null,\n      numPanelsOpen: 0,\n      numPanelsAnimating: 0,\n      numPanelsCovering: 0,\n      isHydrationAnimationComplete: this.props.isHydrated,\n      shouldAutoFocus: this.props.config.public.shouldTakeFocusIfOpensAutomatically,\n      extraClassNames: [],\n      areModulesLoaded: false\n    };\n    this.mainWindowRef = React.createRef();\n    this.containerRef = React.createRef();\n    this.botChatRef = React.createRef();\n    this.homeScreenInputRef = React.createRef();\n    this.disclaimerRef = React.createRef();\n    this.brandingRef = React.createRef();\n    this.animationContainerRef = React.createRef();\n    this.iframePanelRef = React.createRef();\n    this.viewSourcePanelRef = React.createRef();\n    this.previousBodyVisibility = undefined;\n    this.previousBodyPosition = undefined;\n    this.onResize = () => {\n      let appChatWidthBreakpoint;\n      const height = this.containerRef?.current?.offsetHeight;\n      const width = this.containerRef?.current?.offsetWidth;\n      if (width >= 672 + 16 + 16) {\n        appChatWidthBreakpoint = ChatWidthBreakpoint.WIDE;\n      } else if (width >= 360) {\n        appChatWidthBreakpoint = ChatWidthBreakpoint.STANDARD;\n      } else {\n        appChatWidthBreakpoint = ChatWidthBreakpoint.NARROW;\n      }\n      this.props.serviceManager.store.dispatch(actions.setAppStateValue(\"chatWidth\", width));\n      this.props.serviceManager.store.dispatch(actions.setAppStateValue(\"chatHeight\", height));\n      this.props.serviceManager.store.dispatch(actions.setAppStateValue(\"chatWidthBreakpoint\", appChatWidthBreakpoint));\n    };\n    this.onVisualViewportResize = () => {\n      this.updateFromVisualViewport();\n    };\n    this.updateFromVisualViewport = () => {\n      const element = this.props.serviceManager.container;\n      const {visualViewport: visualViewport} = window;\n      if (visualViewport) {\n        element.style.setProperty(\"--cds-chat-viewport-height\", `${visualViewport.height}px`);\n        element.style.setProperty(\"--cds-chat-viewport-width\", `${visualViewport.width}px`);\n        element.style.setProperty(\"--cds-chat-viewport-offsetTop\", `${visualViewport.offsetTop}px`);\n        element.style.setProperty(\"--cds-chat-viewport-offsetLeft\", `${visualViewport.offsetLeft}px`);\n      } else {\n        const height = \"100vh\";\n        element.style.setProperty(\"--cds-chat-viewport-height\", height);\n        element.style.setProperty(\"--cds-chat-viewport-width\", \"100vw\");\n        element.style.setProperty(\"--cds-chat-viewport-offsetTop\", \"0\");\n        element.style.setProperty(\"--cds-chat-viewport-offsetLeft\", \"0\");\n      }\n    };\n    this.setModalPortalHostElement = ref => {\n      if (this.state.modalPortalHostElement !== ref) {\n        this.setState({\n          modalPortalHostElement: ref\n        });\n      }\n    };\n    this.onSendInput = async (text, source, options) => {\n      const isInputToAgent = selectIsInputToAgent(this.props);\n      const {serviceManager: serviceManager} = this.props;\n      const state = serviceManager.store.getState();\n      const {files: files} = selectInputState(state);\n      if (isInputToAgent) {\n        serviceManager.humanAgentService.sendMessageToAgent(text, files);\n      } else {\n        const messageRequest = createMessageRequestForText(text);\n        serviceManager.actions.sendWithCatch(messageRequest, source, {\n          ...options\n        });\n      }\n      if (files.length) {\n        serviceManager.store.dispatch(actions.clearInputFiles(isInputToAgent));\n      }\n    };\n    this.onSendHomeButtonInput = input => {\n      const messageRequest = createMessageRequestForChoice(input);\n      this.props.serviceManager.actions.sendWithCatch(messageRequest, MessageSendSource.HOME_SCREEN_STARTER);\n    };\n    this.removeChatFromDom = () => {\n      this.containerRef.current.removeEventListener(\"animationend\", this.removeChatFromDom);\n      this.setState({\n        open: false,\n        closing: false\n      });\n    };\n    this.onRestart = async () => {\n      await this.props.serviceManager.actions.restartConversation();\n      this.requestFocus();\n    };\n    this.onClose = async () => this.doClose(false);\n    this.onCloseAndRestart = async () => this.doClose(true);\n    this.onToggleHomeScreen = () => {\n      this.props.serviceManager.store.dispatch(actions.toggleHomeScreen());\n    };\n    this.requestFocus = () => {\n      try {\n        if (this.state.shouldAutoFocus && !IS_MOBILE) {\n          if (this.getShowDisclaimer()) {\n            if (this.disclaimerRef.current) {\n              doFocusRef(this.disclaimerRef);\n            }\n          } else if (this.getShowHomeScreen()) {\n            if (this.homeScreenInputRef.current) {\n              this.homeScreenInputRef.current.takeFocus();\n            }\n          } else if (this.props.iFramePanelState.isOpen) {\n            if (this.iframePanelRef.current) {\n              this.iframePanelRef.current.requestFocus();\n            }\n          } else if (this.botChatRef.current) {\n            this.botChatRef.current.requestInputFocus();\n          }\n        }\n      } catch (error) {\n        consoleError(\"An error occurred in MainWindow.requestFocus\", error);\n      }\n    };\n    this.onUserTyping = isTyping => {\n      if (this.props.serviceManager.store.getState().persistedToBrowserStorage.chatState.agentState.isConnected) {\n        this.props.serviceManager.humanAgentService.userTyping(isTyping);\n      }\n    };\n    this.onAcceptDisclaimer = () => {\n      this.props.serviceManager.store.dispatch(actions.acceptDisclaimer());\n    };\n    this.onPanelOpenStart = coverBackground => {\n      this.setState(prevState => ({\n        numPanelsOpen: prevState.numPanelsOpen + 1,\n        numPanelsAnimating: prevState.numPanelsAnimating + 1,\n        numPanelsCovering: prevState.numPanelsCovering + (coverBackground ? 1 : 0)\n      }), this.requestFocus);\n    };\n    this.onPanelOpenEnd = () => {\n      this.setState(prevState => ({\n        numPanelsAnimating: prevState.numPanelsAnimating - 1\n      }));\n    };\n    this.onPanelCloseStart = () => {\n      this.setState(prevState => ({\n        numPanelsAnimating: prevState.numPanelsAnimating + 1\n      }), this.requestFocus);\n    };\n    this.onPanelCloseEnd = coverBackground => {\n      this.setState(prevState => ({\n        numPanelsOpen: prevState.numPanelsOpen - 1,\n        numPanelsAnimating: prevState.numPanelsAnimating - 1,\n        numPanelsCovering: prevState.numPanelsCovering - (coverBackground ? 1 : 0)\n      }));\n    };\n    this.onHydrationPanelClose = () => {\n      this.setState({\n        isHydrationAnimationComplete: true\n      }, this.requestFocus);\n    };\n  }\n  componentDidMount() {\n    const {persistedToBrowserStorage: persistedToBrowserStorage, config: config, serviceManager: serviceManager, mainWindowRef: mainWindowRef} = this.props;\n    const {viewState: viewState} = persistedToBrowserStorage.launcherState;\n    const {public: publicConfig} = config;\n    serviceManager.mainWindow = this;\n    mainWindowRef.current = this;\n    this.mainWindowObserver = new ResizeObserver(this.onResize);\n    this.mainWindowObserver.observe(this.containerRef.current);\n    if (IS_MOBILE && !publicConfig.disableCustomElementMobileEnhancements) {\n      const {visualViewport: visualViewport} = window;\n      if (visualViewport) {\n        visualViewport.addEventListener(\"resize\", this.onVisualViewportResize);\n        visualViewport.addEventListener(\"scroll\", this.updateFromVisualViewport);\n      }\n      this.updateFromVisualViewport();\n      this.updateBody(false);\n    }\n    this.containerRef.current.style.setProperty(\"--cds-chat-scrollbar-width\", `${SCROLLBAR_WIDTH()}px`);\n    if (viewState.mainWindow) {\n      this.loadPanels();\n    }\n  }\n  componentWillUnmount() {\n    this.mainWindowObserver.unobserve(this.containerRef.current);\n  }\n  destroy() {\n    if (IS_MOBILE && !this.props.config.public.disableCustomElementMobileEnhancements) {\n      const {visualViewport: visualViewport} = window;\n      if (visualViewport) {\n        visualViewport.removeEventListener(\"resize\", this.onVisualViewportResize);\n        visualViewport.removeEventListener(\"scroll\", this.updateFromVisualViewport);\n      }\n    }\n    this.updateBody(true);\n  }\n  componentDidUpdate(oldProps, oldState) {\n    const newProps = this.props;\n    const newState = this.state;\n    const {persistedToBrowserStorage: persistedToBrowserStorage, useCustomHostElement: useCustomHostElement, isDestroyed: isDestroyed} = newProps;\n    const {viewState: viewState} = persistedToBrowserStorage.launcherState;\n    const {open: open} = newState;\n    const prevViewState = oldProps.persistedToBrowserStorage.launcherState.viewState;\n    if (viewState.mainWindow !== prevViewState.mainWindow) {\n      this.updateBody(false);\n      this.updateFromVisualViewport();\n    }\n    if (isDestroyed && !oldProps.isDestroyed) {\n      this.destroy();\n    }\n    if ((oldState.areModulesLoaded !== newState.areModulesLoaded || oldProps.isHydrated !== newProps.isHydrated) && newProps.isHydrated && newState.areModulesLoaded) {\n      this.setState({\n        isHydrationAnimationComplete: true\n      }, () => {\n        requestAnimationFrame(() => {\n          this.requestFocus();\n        });\n      });\n    }\n    if (viewState.mainWindow && (!prevViewState.mainWindow || !open)) {\n      this.setState({\n        open: true\n      }, () => {\n        this.requestFocus();\n      });\n      this.loadPanels();\n    } else if (!viewState.mainWindow && prevViewState.mainWindow && oldState.open && open) {\n      this.setState({\n        closing: true\n      });\n      if (useCustomHostElement) {\n        this.removeChatFromDom();\n      } else {\n        this.containerRef.current.addEventListener(\"animationend\", this.removeChatFromDom);\n        this.requestFocus();\n      }\n    }\n    if (newProps.config.public.shouldTakeFocusIfOpensAutomatically) {\n      if (!oldProps.persistedToBrowserStorage.chatState.hasSentNonWelcomeMessage && newProps.persistedToBrowserStorage.chatState.hasSentNonWelcomeMessage && !this.state.shouldAutoFocus) {\n        this.setState({\n          shouldAutoFocus: true\n        });\n      } else if (oldProps.botMessageState.localMessageIDs.length > newProps.botMessageState.localMessageIDs.length && this.state.shouldAutoFocus) {\n        this.setState({\n          shouldAutoFocus: false\n        });\n      } else if (oldProps.botMessageState.localMessageIDs.length < newProps.botMessageState.localMessageIDs.length && !this.state.shouldAutoFocus) {\n        this.setState({\n          shouldAutoFocus: true\n        });\n      }\n    }\n    const newLastItemID = arrayLastValue(newProps.botMessageState.localMessageIDs);\n    const oldLastItemID = arrayLastValue(oldProps.botMessageState.localMessageIDs);\n    if (newLastItemID !== oldLastItemID && newState.shouldAutoFocus) {\n      const lastMessageItem = newProps.allMessageItemsByID[newLastItemID];\n      const lastMessage = newProps.allMessagesByID[lastMessageItem?.fullMessageID];\n      if (!lastMessage?.history?.from_history) {\n        this.requestFocus();\n      }\n    }\n  }\n  componentDidCatch(error, errorInfo) {\n    this.props.serviceManager.actions.errorOccurred(createDidCatchErrorData(\"MainWindow\", error, errorInfo, true));\n  }\n  loadPanels() {\n    Promise.all([ Chat.preload(), CatastrophicError.preload(), Disclaimer.preload(), HomeScreenContainer.preload(), IFramePanel.preload(), ViewSourcePanel.preload(), BodyAndFooterPanelComponent.preload() ]).then(() => {\n      this.setState({\n        areModulesLoaded: true\n      });\n    });\n  }\n  updateBody(unmounting) {\n    if (IS_IOS && !this.props.config.public.disableCustomElementMobileEnhancements) {\n      if ((window.screen.width <= 500 || window.screen.height <= 500) && this.props.persistedToBrowserStorage.launcherState.viewState.mainWindow && !unmounting) {\n        this.previousBodyVisibility = document.body.style.getPropertyValue(\"visibility\");\n        this.previousBodyPosition = document.body.style.getPropertyValue(\"position\");\n        document.body.style.setProperty(\"visibility\", \"hidden\", \"important\");\n        document.body.style.setProperty(\"position\", \"fixed\", \"important\");\n      } else {\n        document.body.style.setProperty(\"visibility\", this.previousBodyVisibility);\n        document.body.style.setProperty(\"position\", this.previousBodyPosition);\n      }\n    }\n  }\n  async doClose(fromCloseAndRestart) {\n    const {serviceManager: serviceManager} = this.props;\n    const {activeTour: activeTour} = serviceManager.store.getState().persistedToBrowserStorage.launcherState;\n    if (fromCloseAndRestart) {\n      const newViewState = await serviceManager.actions.changeView(ViewType.LAUNCHER, {\n        mainWindowCloseReason: MainWindowCloseReason.MAIN_WINDOW_CLOSED_AND_RESTARTED\n      });\n      if (!newViewState.mainWindow) {\n        await serviceManager.actions.restartConversation();\n      }\n    } else {\n      await serviceManager.actions.changeView(activeTour ? ViewType.TOUR : ViewType.LAUNCHER, {\n        mainWindowCloseReason: MainWindowCloseReason.DEFAULT_MINIMIZE\n      });\n    }\n  }\n  getShowHomeScreen() {\n    return this.props.homeScreenConfig.is_on && this.props.persistedToBrowserStorage.chatState.homeScreenState.isHomeScreenOpen && !this.getShowDisclaimer();\n  }\n  getShowDisclaimer() {\n    return this.props.config.public.disclaimer?.is_on && !this.props.persistedToBrowserStorage.chatState.disclaimersAccepted[window.location.hostname];\n  }\n  doAutoScroll(options) {\n    this.botChatRef?.current?.doAutoScroll(options);\n  }\n  getMessagesScrollBottom() {\n    return this.botChatRef?.current?.getMessagesScrollBottom();\n  }\n  doScrollToMessage(messageID, animate = true) {\n    this.botChatRef.current?.doScrollToMessage(messageID, animate);\n  }\n  getMessageInput() {\n    return this.botChatRef.current?.getMessageInput();\n  }\n  getHomeScreenInput() {\n    return this.homeScreenInputRef.current?.getMessageInput();\n  }\n  addClassName(name) {\n    this.setState(addClassNameToState(name));\n  }\n  removeClassName(name) {\n    this.setState(removeClassNameFromState(name));\n  }\n  renderChat() {\n    const {isHydrated: isHydrated, config: config, chatWidthBreakpoint: chatWidthBreakpoint} = this.props;\n    const {areModulesLoaded: areModulesLoaded} = this.state;\n    const showCovering = this.state.numPanelsCovering > 0 && config.public.layout?.hasContentMaxWidth && chatWidthBreakpoint === ChatWidthBreakpoint.WIDE;\n    return React.createElement(\"div\", {\n      className: \"WACWidget--content\"\n    }, this.renderCustomPanel(), this.renderHydrationPanel(), isHydrated && areModulesLoaded && React.createElement(React.Fragment, null, this.renderDisclaimerPanel(), this.renderResponsePanel(), this.renderHomeScreenPanel(), this.renderIFramePanel(), this.renderViewSourcePanel(), showCovering && React.createElement(\"div\", {\n      className: \"WACBackgroundCover\"\n    }), this.renderBotChat()));\n  }\n  renderBotChat() {\n    const {botName: botName, languagePack: languagePack, config: config, serviceManager: serviceManager, botMessageState: botMessageState, agentState: agentState, allMessageItemsByID: allMessageItemsByID, isHydrated: isHydrated, locale: locale, theme: theme, headerDisplayName: headerDisplayName, headerAvatarConfig: headerAvatar} = this.props;\n    const {numPanelsAnimating: numPanelsAnimating, numPanelsOpen: numPanelsOpen, isHydrationAnimationComplete: isHydrationAnimationComplete} = this.state;\n    const inputState = selectInputState(this.props);\n    const agentDisplayState = selectAgentDisplayState(this.props);\n    const showDisclaimer = this.getShowDisclaimer();\n    let hideBotContainer;\n    if (!isHydrationAnimationComplete) {\n      hideBotContainer = true;\n    } else if (numPanelsAnimating > 0) {\n      hideBotContainer = false;\n    } else if (numPanelsOpen > 0) {\n      hideBotContainer = true;\n    }\n    return React.createElement(HideComponent, {\n      className: \"WACBotContainer\",\n      hidden: hideBotContainer\n    }, React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(Chat, {\n      botName: botName,\n      headerDisplayName: headerDisplayName,\n      headerAvatarConfig: headerAvatar,\n      ref: this.botChatRef,\n      languagePack: languagePack,\n      config: config,\n      serviceManager: serviceManager,\n      onClose: this.onClose,\n      onCloseAndRestart: this.onCloseAndRestart,\n      messageState: botMessageState,\n      onSendInput: text => this.onSendInput(text, MessageSendSource.MESSAGE_INPUT),\n      agentState: agentState,\n      agentDisplayState: agentDisplayState,\n      allMessageItemsByID: allMessageItemsByID,\n      onRestart: this.onRestart,\n      isHydrated: isHydrated,\n      isHydrationAnimationComplete: isHydrationAnimationComplete && !showDisclaimer,\n      inputState: inputState,\n      onToggleHomeScreen: this.onToggleHomeScreen,\n      onUserTyping: this.onUserTyping,\n      locale: locale,\n      useAITheme: theme.useAITheme,\n      carbonTheme: theme.carbonTheme\n    })));\n  }\n  renderInnerHydrationPanel() {\n    const {botMessageState: botMessageState, serviceManager: serviceManager, languagePack: languagePack, headerDisplayName: headerDisplayName, persistedToBrowserStorage: persistedToBrowserStorage, homeScreenConfig: homeScreenConfig} = this.props;\n    const {areModulesLoaded: areModulesLoaded} = this.state;\n    const useHomeScreenVersion = homeScreenConfig.is_on && !persistedToBrowserStorage.launcherState.hasSentNonWelcomeMessage;\n    return React.createElement(HydrationPanel, {\n      headerDisplayName: headerDisplayName,\n      isHydrated: botMessageState.isHydratingCounter === 0 && areModulesLoaded,\n      serviceManager: serviceManager,\n      onClose: this.onClose,\n      languagePack: languagePack,\n      useHomeScreenVersion: useHomeScreenVersion\n    });\n  }\n  renderHydrationPanel() {\n    const {botMessageState: botMessageState, serviceManager: serviceManager, catastrophicErrorType: catastrophicErrorType, persistedToBrowserStorage: persistedToBrowserStorage} = this.props;\n    const {viewState: viewState} = persistedToBrowserStorage.launcherState;\n    const {areModulesLoaded: areModulesLoaded} = this.state;\n    return React.createElement(OverlayPanel, {\n      onOpenStart: () => this.onPanelOpenStart(false),\n      onCloseStart: this.onPanelCloseStart,\n      onOpenEnd: this.onPanelOpenEnd,\n      onCloseEnd: () => {\n        this.onHydrationPanelClose();\n        this.onPanelCloseEnd(false);\n      },\n      animationOnOpen: AnimationInType.NONE,\n      animationOnClose: AnimationOutType.NONE,\n      shouldOpen: (botMessageState.isHydratingCounter > 0 || !areModulesLoaded) && !catastrophicErrorType && viewState.mainWindow,\n      shouldHide: false,\n      serviceManager: serviceManager,\n      overlayPanelName: OverlayPanelName.HYDRATING\n    }, this.renderInnerHydrationPanel());\n  }\n  renderCatastrophicPanel() {\n    const {serviceManager: serviceManager, botName: botName, languagePack: languagePack, headerDisplayName: headerDisplayName} = this.props;\n    return React.createElement(OverlayPanel, {\n      animationOnOpen: AnimationInType.NONE,\n      animationOnClose: AnimationOutType.NONE,\n      shouldOpen: true,\n      serviceManager: serviceManager,\n      overlayPanelName: OverlayPanelName.CATASTROPHIC\n    }, React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(CatastrophicError, {\n      onClose: this.onClose,\n      headerDisplayName: headerDisplayName,\n      languagePack: languagePack,\n      onRestart: this.onRestart,\n      showHeader: true,\n      botName: botName\n    })));\n  }\n  renderDisclaimerPanel() {\n    const {serviceManager: serviceManager, config: config} = this.props;\n    const showDisclaimer = this.getShowDisclaimer();\n    return config.public.disclaimer?.is_on ? React.createElement(OverlayPanel, {\n      onOpenStart: () => this.onPanelOpenStart(false),\n      onCloseStart: this.onPanelCloseStart,\n      onOpenEnd: this.onPanelOpenEnd,\n      onCloseEnd: () => this.onPanelCloseEnd(false),\n      animationOnOpen: AnimationInType.FADE_IN,\n      animationOnClose: AnimationOutType.FADE_OUT,\n      shouldOpen: showDisclaimer,\n      serviceManager: serviceManager,\n      overlayPanelName: OverlayPanelName.DISCLAIMER\n    }, React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(Disclaimer, {\n      onAcceptDisclaimer: this.onAcceptDisclaimer,\n      onClose: this.onClose,\n      disclaimerHTML: config.public.disclaimer?.disclaimerHTML,\n      disclaimerAcceptButtonRef: this.disclaimerRef\n    }))) : null;\n  }\n  renderHomeScreenPanel() {\n    const {isHydrationAnimationComplete: isHydrationAnimationComplete} = this.state;\n    const showHomeScreen = this.getShowHomeScreen();\n    return React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(HomeScreenContainer, {\n      onPanelOpenStart: () => this.onPanelOpenStart(false),\n      onPanelOpenEnd: this.onPanelOpenEnd,\n      onPanelCloseStart: this.onPanelCloseStart,\n      onPanelCloseEnd: () => this.onPanelCloseEnd(false),\n      onClose: this.onClose,\n      onCloseAndRestart: this.onCloseAndRestart,\n      onSendBotInput: text => this.onSendInput(text, MessageSendSource.HOME_SCREEN_INPUT),\n      onSendButtonInput: this.onSendHomeButtonInput,\n      onRestart: this.onRestart,\n      showHomeScreen: showHomeScreen,\n      isHydrationAnimationComplete: isHydrationAnimationComplete,\n      homeScreenInputRef: this.homeScreenInputRef,\n      onToggleHomeScreen: this.onToggleHomeScreen,\n      requestFocus: this.requestFocus\n    }));\n  }\n  renderIFramePanel() {\n    const {serviceManager: serviceManager, iFramePanelState: iFramePanelState} = this.props;\n    return React.createElement(OverlayPanel, {\n      className: \"WAC__overlay--covering\",\n      onOpenStart: () => this.onPanelOpenStart(true),\n      onCloseStart: this.onPanelCloseStart,\n      onOpenEnd: this.onPanelOpenEnd,\n      onCloseEnd: () => this.onPanelCloseEnd(true),\n      animationOnOpen: AnimationInType.SLIDE_IN_FROM_BOTTOM,\n      animationOnClose: AnimationOutType.SLIDE_OUT_TO_BOTTOM,\n      shouldOpen: iFramePanelState.isOpen,\n      serviceManager: serviceManager,\n      overlayPanelName: OverlayPanelName.IFRAME\n    }, React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(IFramePanel, {\n      useAITheme: this.props.theme.useAITheme,\n      ref: this.iframePanelRef,\n      onClickClose: this.onClose,\n      onClickRestart: this.onRestart,\n      onClickCloseAndRestart: this.onCloseAndRestart\n    })));\n  }\n  renderViewSourcePanel() {\n    const {serviceManager: serviceManager, viewSourcePanelState: viewSourcePanelState} = this.props;\n    return React.createElement(OverlayPanel, {\n      className: \"WAC__overlay--covering\",\n      onOpenStart: () => this.onPanelOpenStart(true),\n      onCloseStart: this.onPanelCloseStart,\n      onOpenEnd: this.onPanelOpenEnd,\n      onCloseEnd: () => this.onPanelCloseEnd(true),\n      animationOnOpen: AnimationInType.SLIDE_IN_FROM_BOTTOM,\n      animationOnClose: AnimationOutType.SLIDE_OUT_TO_BOTTOM,\n      shouldOpen: viewSourcePanelState.isOpen,\n      serviceManager: serviceManager,\n      overlayPanelName: OverlayPanelName.CONVERSATIONAL_SEARCH_CITATION\n    }, React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(ViewSourcePanel, {\n      ref: this.viewSourcePanelRef,\n      onClickClose: this.onClose,\n      onClickRestart: this.onRestart,\n      onClickCloseAndRestart: this.onCloseAndRestart\n    })));\n  }\n  renderCustomPanel() {\n    return React.createElement(CustomPanelExport, {\n      useAITheme: this.props.theme.useAITheme,\n      onClose: this.onClose,\n      onClickRestart: this.onRestart,\n      onCloseAndRestart: this.onCloseAndRestart,\n      onPanelOpenStart: () => this.onPanelOpenStart(true),\n      onPanelOpenEnd: this.onPanelOpenEnd,\n      onPanelCloseStart: this.onPanelCloseStart,\n      onPanelCloseEnd: () => this.onPanelCloseEnd(true)\n    });\n  }\n  renderResponsePanel() {\n    if (!this.props.responsePanelState.localMessageItem) {\n      return null;\n    }\n    const {isOpen: isOpen, localMessageItem: localMessageItem, isMessageForInput: isMessageForInput} = this.props.responsePanelState;\n    const panelOptions = (localMessageItem?.item).panel;\n    const eventName = `\"Show panel\" opened`;\n    const eventDescription = \"Panel opened through panel response type\";\n    const overlayPanelName = OverlayPanelName.PANEL_RESPONSE;\n    return React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(BodyAndFooterPanelComponent, {\n      eventName: eventName,\n      eventDescription: eventDescription,\n      overlayPanelName: overlayPanelName,\n      testIdPrefix: overlayPanelName,\n      isOpen: isOpen,\n      isMessageForInput: isMessageForInput,\n      localMessageItem: localMessageItem,\n      title: panelOptions?.title,\n      showAnimations: panelOptions?.show_animations,\n      useAITheme: this.props.theme.useAITheme,\n      requestFocus: this.requestFocus,\n      onClose: this.onClose,\n      onClickRestart: this.onRestart,\n      onCloseAndRestart: this.onCloseAndRestart,\n      onClickBack: () => this.props.serviceManager.store.dispatch(actions.setResponsePanelIsOpen(false)),\n      onPanelOpenStart: () => this.onPanelOpenStart(true),\n      onPanelOpenEnd: this.onPanelOpenEnd,\n      onPanelCloseStart: this.onPanelCloseStart,\n      onPanelCloseEnd: () => {\n        this.onPanelCloseEnd(true);\n        this.props.serviceManager.store.dispatch(actions.setResponsePanelContent(null, false));\n      }\n    }));\n  }\n  renderWidget() {\n    const {serviceManager: serviceManager, useCustomHostElement: useCustomHostElement, locale: locale, catastrophicErrorType: catastrophicErrorType, config: config, isHydrated: isHydrated, theme: theme, chatWidthBreakpoint: chatWidthBreakpoint, layout: layout, languagePack: languagePack} = this.props;\n    const {closing: closing, open: open, extraClassNames: extraClassNames} = this.state;\n    const localeClassName = `WACLocale-${locale || \"en\"}`;\n    const showGlass = config.public.enableFocusTrap && open && !config.public.hideCloseButton && !config.public.headerConfig.hideMinimizeButton;\n    const trapActive = Boolean(showGlass && isHydrated);\n    const isWideWidth = chatWidthBreakpoint === ChatWidthBreakpoint.WIDE;\n    return React.createElement(FocusTrap, {\n      active: trapActive\n    }, React.createElement(\"div\", {\n      className: cx(\"WACMainWindow\", \"WACWidget__FocusTrapContainer\", ...extraClassNames),\n      ref: this.mainWindowRef\n    }, showGlass && React.createElement(\"div\", {\n      className: \"WACWidget__FocusTrapGlass\"\n    }), React.createElement(\"div\", {\n      id: `WACWidget${serviceManager.namespace.suffix}`,\n      className: cx(`WACWidget ${localeClassName}`, {\n        \"WACWidget--rounded\": theme.corners === CornersType.ROUND,\n        \"WACWidget--defaultElement\": !useCustomHostElement,\n        \"WACWidget--launched\": !closing,\n        \"WACWidget--closing\": closing,\n        \"WACWidget--closed\": !open,\n        \"WACWidget--maxWidth\": isWideWidth && layout.hasContentMaxWidth,\n        [WIDTH_BREAKPOINT_NARROW]: chatWidthBreakpoint === ChatWidthBreakpoint.NARROW,\n        [WIDTH_BREAKPOINT_STANDARD]: chatWidthBreakpoint === ChatWidthBreakpoint.STANDARD,\n        [WIDTH_BREAKPOINT_WIDE]: isWideWidth\n      }),\n      ref: this.containerRef\n    }, React.createElement(VisuallyHidden, null, React.createElement(\"h1\", null, languagePack.window_title)), catastrophicErrorType && this.renderCatastrophicPanel(), !catastrophicErrorType && React.createElement(\"div\", {\n      ref: this.animationContainerRef,\n      className: \"WACWidget__animationContainer\",\n      onScroll: () => {\n        if (this.animationContainerRef.current.scrollTop !== 0) {\n          this.animationContainerRef.current.scrollTop = 0;\n        }\n      }\n    }, this.renderChat()), React.createElement(\"div\", {\n      className: \"WACMainWindowModalHost\",\n      ref: this.setModalPortalHostElement\n    }))));\n  }\n  render() {\n    return React.createElement(ModalPortalRootContext.Provider, {\n      value: this.state.modalPortalHostElement\n    }, this.renderWidget());\n  }\n}\n\nvar MainWindow$1 = connect(state => state, null, null, {\n  forwardRef: true\n})(MainWindow);\n\nexport { MainWindow$1 as default };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction addClassNameToState(name) {\n  return previousState => {\n    const currentIndex = previousState.extraClassNames.indexOf(name);\n    if (currentIndex === -1) {\n      return {\n        extraClassNames: [ ...previousState.extraClassNames, name ]\n      };\n    }\n    return null;\n  };\n}\n\nfunction removeClassNameFromState(name) {\n  return previousState => ({\n    extraClassNames: previousState.extraClassNames.filter(value => value !== name)\n  });\n}\n\nexport { addClassNameToState, removeClassNameFromState };\n","import \"intl-pluralrules\";\n\nimport cx from \"classnames\";\n\nimport React, { useState, useMemo, useRef, Suspense } from \"react\";\n\nimport { RawIntlProvider, useIntl } from \"react-intl\";\n\nimport { Provider, useSelector, useDispatch } from \"react-redux\";\n\nimport { AriaAnnouncerProvider } from \"../components/aria/AriaAnnouncerProvider.js\";\n\nimport { LauncherContainer } from \"../components/launcher/LauncherContainer.js\";\n\nimport { LanguagePackContext } from \"../contexts/LanguagePackContext.js\";\n\nimport { WindowSizeContext } from \"../contexts/WindowSizeContext.js\";\n\nimport { ServiceManagerContext } from \"../contexts/ServiceManagerContext.js\";\n\nimport { useOnMount } from \"../hooks/useOnMount.js\";\n\nimport actions from \"../store/actions.js\";\n\nimport { IS_PHONE_IN_PORTRAIT_MODE, IS_PHONE } from \"../utils/browserUtils.js\";\n\nimport { consoleDebug, consoleError } from \"../utils/miscUtils.js\";\n\nimport { convertCSSVariablesToString, getThemeClassNames } from \"../utils/styleUtils.js\";\n\nimport MainWindow from \"./main/MainWindow.js\";\n\nimport { lazyTourComponent } from \"../../dynamic-imports/dynamic-imports.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const TourContainerLazy = lazyTourComponent();\n\nfunction App({serviceManager: serviceManager, hostElement: hostElement, applicationStyles: applicationStyles, fontStyles: fontStyles}) {\n  const {store: store} = serviceManager;\n  const {config: config} = store.getState();\n  if (config.public.debug) {\n    consoleDebug(\"[render] Called render\");\n  }\n  const combinedStyles = `${fontStyles ? `${fontStyles} ` : \"\"}${applicationStyles}`;\n  return React.createElement(Provider, {\n    store: store\n  }, React.createElement(AppContainer, {\n    serviceManager: serviceManager,\n    hostElement: hostElement,\n    applicationStyles: combinedStyles\n  }));\n}\n\nfunction AppContainer({serviceManager: serviceManager, hostElement: hostElement, applicationStyles: applicationStyles}) {\n  const languagePack = useSelector(state => state.languagePack);\n  const cssVariableOverrides = useSelector(state => state.cssVariableOverrides);\n  const theme = useSelector(state => state.theme);\n  const config = useSelector(state => state.config);\n  const layout = useSelector(state => state.layout);\n  const {namespace: namespace} = serviceManager;\n  const {originalName: originalName} = namespace;\n  const dispatch = useDispatch();\n  const [windowSize, setWindowSize] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight\n  });\n  const cssVariableOverrideString = useMemo(() => convertCSSVariablesToString(cssVariableOverrides), [ cssVariableOverrides ]);\n  const dir = document.dir || \"auto\";\n  useOnMount(() => {\n    const windowListener = () => {\n      setWindowSize({\n        width: window.innerWidth,\n        height: window.innerHeight\n      });\n    };\n    window.addEventListener(\"resize\", windowListener);\n    const visibilityListener = () => {\n      dispatch(actions.setIsBrowserPageVisible(document.visibilityState === \"visible\"));\n    };\n    document.addEventListener(\"visibilitychange\", visibilityListener);\n    return () => {\n      window.removeEventListener(\"resize\", windowListener);\n      document.removeEventListener(\"visibilitychange\", visibilityListener);\n    };\n  });\n  return React.createElement(\"div\", {\n    className: \"WACContainer\",\n    \"data-namespace\": originalName,\n    ref: node => {\n      if (node && hostElement) {\n        node.style.setProperty(\"height\", \"100%\", \"important\");\n        node.style.setProperty(\"width\", \"100%\", \"important\");\n      }\n    }\n  }, React.createElement(\"div\", {\n    className: \"WACContainer--styles\"\n  }, React.createElement(\"style\", {\n    \"data-base-styles\": \"true\",\n    nonce: config.public.cspNonce\n  }, applicationStyles || `.WACContainer { visibility: hidden; }`), React.createElement(\"style\", {\n    \"data-variables-custom\": \"true\",\n    nonce: config.public.cspNonce\n  }, cssVariableOverrideString)), React.createElement(\"div\", {\n    className: cx(`WACContainer--render`, getThemeClassNames(theme), {\n      \"WACContainer-disableMobileEnhancements\": hostElement && config.public.disableCustomElementMobileEnhancements,\n      \"WAC-isPhone\": IS_PHONE && !config.public.disableCustomElementMobileEnhancements,\n      \"WAC-isPhonePortraitMode\": IS_PHONE_IN_PORTRAIT_MODE && !config.public.disableCustomElementMobileEnhancements,\n      \"WAC--frameless\": !layout?.showFrame\n    }),\n    dir: dir\n  }, React.createElement(WindowSizeContext.Provider, {\n    value: windowSize\n  }, React.createElement(ServiceManagerContext.Provider, {\n    value: serviceManager\n  }, React.createElement(RawIntlProvider, {\n    value: serviceManager.intl\n  }, React.createElement(LanguagePackContext.Provider, {\n    value: languagePack\n  }, React.createElement(AriaAnnouncerProvider, null, React.createElement(MainContainer, {\n    serviceManager: serviceManager,\n    hostElement: hostElement\n  }))))))));\n}\n\nfunction MainContainer(props) {\n  const {hostElement: hostElement, serviceManager: serviceManager} = props;\n  const showLauncher = useSelector(state => state.launcher.config.is_on);\n  const {viewState: viewState} = useSelector(state => state.persistedToBrowserStorage.launcherState);\n  const tourContainerRef = useRef();\n  const mainWindowRef = useRef();\n  const showTour = viewState.tour;\n  const showedTourOnce = useRef(showTour);\n  showedTourOnce.current = showTour || showedTourOnce.current;\n  const intl = useIntl();\n  const namespace = serviceManager.namespace.originalName;\n  const languageKey = namespace ? \"window_ariaChatRegionNamespace\" : \"window_ariaChatRegion\";\n  const regionLabel = intl.formatMessage({\n    id: languageKey\n  }, {\n    namespace: namespace\n  });\n  useOnMount(() => {\n    function requestFocus() {\n      try {\n        const {persistedToBrowserStorage: persistedToBrowserStorage} = serviceManager.store.getState();\n        const {viewState: viewState} = persistedToBrowserStorage.launcherState;\n        if (viewState.tour) {\n          tourContainerRef.current?.requestFocus();\n        } else if (viewState.mainWindow) {\n          mainWindowRef.current?.requestFocus();\n        }\n      } catch (error) {\n        consoleError(\"An error occurred in App.requestFocus\", error);\n      }\n    }\n    serviceManager.appWindow = {\n      requestFocus: requestFocus\n    };\n  });\n  return React.createElement(\"div\", {\n    className: \"WACWidget__regionContainer\",\n    role: \"region\",\n    \"aria-label\": regionLabel\n  }, React.createElement(MainWindow, {\n    mainWindowRef: mainWindowRef,\n    useCustomHostElement: Boolean(hostElement),\n    serviceManager: serviceManager\n  }), showedTourOnce.current && React.createElement(Suspense, {\n    fallback: null\n  }, React.createElement(TourContainerLazy, {\n    ref: tourContainerRef\n  })), showLauncher && React.createElement(LauncherContainer, null));\n}\n\nexport { App as default };\n","import React from \"react\";\n\nimport ReactDOM from \"react-dom\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function UserDefinedResponsePortalsContainer({chatInstance: chatInstance, renderUserDefinedResponse: renderUserDefinedResponse, userDefinedResponseEventsBySlot: userDefinedResponseEventsBySlot}) {\n  return renderUserDefinedResponse ? Object.entries(userDefinedResponseEventsBySlot).map(([slot, slotState]) => {\n    const {element: element} = slotState;\n    if (!element) {\n      return null;\n    }\n    return React.createElement(UserDefinedResponseComponentPortal, {\n      key: slot,\n      hostElement: element\n    }, renderUserDefinedResponse(slotState, chatInstance));\n  }) : null;\n}\n\nfunction UserDefinedResponseComponentPortal({hostElement: hostElement, children: children}) {\n  return ReactDOM.createPortal(children, hostElement);\n}\n\nconst UserDefinedResponsePortalsContainerExport = React.memo(UserDefinedResponsePortalsContainer);\n\nexport { UserDefinedResponsePortalsContainerExport as UserDefinedResponsePortalsContainer };\n","import React from \"react\";\n\nimport ReactDOM from \"react-dom\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function WriteableElementsPortalsContainer({chatInstance: chatInstance, renderResponseMap: renderResponseMap}) {\n  return React.createElement(React.Fragment, null, Object.keys(chatInstance.writeableElements).map(key => {\n    const responseItem = renderResponseMap[key];\n    return responseItem ? React.createElement(WriteableElementsComponentPortal, {\n      key: key,\n      hostElement: chatInstance.writeableElements[key]\n    }, responseItem) : null;\n  }));\n}\n\nfunction WriteableElementsComponentPortal({hostElement: hostElement, children: children}) {\n  return ReactDOM.createPortal(children, hostElement);\n}\n\nconst WriteableElementsPortalsContainerExport = React.memo(WriteableElementsPortalsContainer);\n\nexport { WriteableElementsPortalsContainerExport as WriteableElementsPortalsContainer };\n","import isEqual from \"lodash-es/isEqual.js\";\n\nimport React, { useState, useRef, useEffect } from \"react\";\n\nimport Chat from \"../../shared/Chat.js\";\n\nimport { instantiateWidget } from \"../../shared/chatEntryFunctions.js\";\n\nimport App from \"../../shared/containers/App.js\";\n\nimport { sleep } from \"../../shared/utils/lang/promiseUtils.js\";\n\nimport { UserDefinedResponsePortalsContainer as UserDefinedResponsePortalsContainerExport } from \"./UserDefinedResponsePortalsContainer.js\";\n\nimport { WriteableElementsPortalsContainer as WriteableElementsPortalsContainerExport } from \"./WriteableElementsPortalsContainer.js\";\n\nimport { BusEventType } from \"../../../types/events/eventBusTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function AppContainer({config: config, onBeforeRender: onBeforeRender, onAfterRender: onAfterRender, renderUserDefinedResponse: renderUserDefinedResponse, renderWriteableElements: renderWriteableElements, container: container, setParentInstance: setParentInstance, element: element}) {\n  const [instance, setInstance] = useState(null);\n  const [renderProps, setRenderProps] = useState(null);\n  const [applicationStyles, setApplicationStyles] = useState(null);\n  const setInstances = instance => {\n    setInstance(instance);\n    setParentInstance?.(instance);\n  };\n  const [userDefinedResponseEventsBySlot, setUserDefinedResponseEventsBySlot] = useState({});\n  const managedWebChatRef = useRef(null);\n  const previousConfigRef = useRef(null);\n  useEffect(() => {\n    const previousConfig = previousConfigRef.current;\n    previousConfigRef.current = config;\n    async function render({serviceManager: serviceManager}) {\n      const applicationStyles = await loadStyles();\n      serviceManager.container = container;\n      if (serviceManager.customHostElement) {\n        container.style.setProperty(\"width\", \"100%\", \"important\");\n        container.style.setProperty(\"height\", \"100%\", \"important\");\n      } else {\n        container.style.setProperty(\"width\", \"0\", \"important\");\n        container.style.setProperty(\"height\", \"0\", \"important\");\n      }\n      setApplicationStyles(applicationStyles);\n      setRenderProps({\n        serviceManager: serviceManager\n      });\n      await sleep(0);\n    }\n    if (!isEqual(previousConfig, config)) {\n      const managedWebChat = {\n        instance: null,\n        shouldDestroy: false,\n        config: config\n      };\n      if (config) {\n        loadChat({\n          managedWebChatRef: managedWebChatRef,\n          managedWebChat: managedWebChat,\n          render: render,\n          setInstance: setInstances,\n          onBeforeRender: onBeforeRender,\n          onAfterRender: onAfterRender,\n          setUserDefinedResponseEventsBySlot: setUserDefinedResponseEventsBySlot,\n          element: element\n        });\n      }\n      return () => {\n        destroyWebChat(managedWebChat, setInstances);\n        previousConfigRef.current = null;\n      };\n    }\n    return undefined;\n  }, [ config, container ]);\n  if (renderProps && instance) {\n    return React.createElement(React.Fragment, null, React.createElement(App, {\n      serviceManager: renderProps.serviceManager,\n      hostElement: renderProps.serviceManager.customHostElement,\n      applicationStyles: applicationStyles\n    }), renderUserDefinedResponse && React.createElement(UserDefinedResponsePortalsContainerExport, {\n      chatInstance: instance,\n      renderUserDefinedResponse: renderUserDefinedResponse,\n      userDefinedResponseEventsBySlot: userDefinedResponseEventsBySlot\n    }), renderWriteableElements && React.createElement(WriteableElementsPortalsContainerExport, {\n      chatInstance: instance,\n      renderResponseMap: renderWriteableElements\n    }));\n  }\n  return null;\n}\n\nasync function destroyWebChat(managedWebChat, setInstance) {\n  if (managedWebChat) {\n    if (managedWebChat.instance) {\n      managedWebChat.instance.destroy();\n      await sleep(0);\n    }\n    managedWebChat.shouldDestroy = true;\n    managedWebChat.instance = null;\n  }\n  setInstance(null);\n  await sleep(0);\n}\n\nfunction addUserDefinedResponseHandler(webChatInstance, setUserDefinedResponseEventsBySlot) {\n  function userDefinedResponseHandler(event) {\n    setUserDefinedResponseEventsBySlot(userDefinedEventsBySlot => ({\n      ...userDefinedEventsBySlot,\n      [event.data.slot]: {\n        fullMessage: event.data.fullMessage,\n        messageItem: event.data.message,\n        element: event.data.element\n      }\n    }));\n  }\n  function userDefinedChunkHandler(event) {\n    if (\"complete_item\" in event.data.chunk) {\n      const messageItem = event.data.chunk.complete_item;\n      setUserDefinedResponseEventsBySlot(userDefinedEventsBySlot => ({\n        ...userDefinedEventsBySlot,\n        [event.data.slot]: {\n          messageItem: messageItem,\n          element: event.data.element\n        }\n      }));\n    } else if (\"partial_item\" in event.data.chunk) {\n      const itemChunk = event.data.chunk.partial_item;\n      setUserDefinedResponseEventsBySlot(userDefinedEventsBySlot => ({\n        ...userDefinedEventsBySlot,\n        [event.data.slot]: {\n          partialItems: [ ...userDefinedEventsBySlot[event.data.slot]?.partialItems || [], itemChunk ],\n          element: event.data.element\n        }\n      }));\n    }\n  }\n  function restartHandler() {\n    setUserDefinedResponseEventsBySlot({});\n  }\n  webChatInstance.on({\n    type: BusEventType.CHUNK_USER_DEFINED_RESPONSE,\n    handler: userDefinedChunkHandler\n  });\n  webChatInstance.on({\n    type: BusEventType.USER_DEFINED_RESPONSE,\n    handler: userDefinedResponseHandler\n  });\n  webChatInstance.on({\n    type: BusEventType.RESTART_CONVERSATION,\n    handler: restartHandler\n  });\n}\n\nasync function loadChat({managedWebChatRef: managedWebChatRef, managedWebChat: managedWebChat, render: render, setInstance: setInstance, onBeforeRender: onBeforeRender, onAfterRender: onAfterRender, setUserDefinedResponseEventsBySlot: setUserDefinedResponseEventsBySlot, element: element}) {\n  await destroyWebChat(managedWebChatRef.current, setInstance);\n  managedWebChatRef.current = managedWebChat;\n  if (managedWebChat.shouldDestroy) {\n    await destroyWebChat(managedWebChat, setInstance);\n    return;\n  }\n  const widget = await instantiateWidget(managedWebChat.config, () => Promise.resolve(Chat), Promise.resolve(render), element);\n  const instance = await widget.start();\n  addUserDefinedResponseHandler(instance, setUserDefinedResponseEventsBySlot);\n  onBeforeRender?.(instance);\n  await instance.render();\n  onAfterRender?.(instance);\n  setInstance(instance);\n  managedWebChat.instance = instance;\n  if (managedWebChat.shouldDestroy) {\n    await destroyWebChat(managedWebChat, setInstance);\n  }\n}\n\nconst AppContainerExport = React.memo(AppContainer);\n\nconst loadBaseStyles = async () => {\n  const {default: styles} = await import(\"../../shared/styles/export.scss.js\");\n  return styles;\n};\n\nconst loadCarbon = async () => {\n  const {default: carbon} = await import(\"../../shared/styles/export.carbon.scss.js\");\n  return carbon;\n};\n\nasync function loadStyles() {\n  const [styles, carbonStyles] = await Promise.all([ loadBaseStyles(), loadCarbon() ]);\n  return carbonStyles + styles;\n}\n\nexport { AppContainerExport as AppContainer };\n","import React, { useContext } from \"react\";\n\nimport { AriaAnnouncerContext } from \"../contexts/AriaAnnouncerContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function withAriaAnnouncer(Component) {\n  const Wrapped = React.forwardRef((props, ref) => {\n    const ariaAnnouncer = useContext(AriaAnnouncerContext);\n    return React.createElement(Component, {\n      ...props,\n      ref: ref,\n      ariaAnnouncer: ariaAnnouncer\n    });\n  });\n  Wrapped.displayName = `withAriaAnnouncer(${Component.displayName || Component.name || \"Component\"})`;\n  return Wrapped;\n}\n\nexport { withAriaAnnouncer };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar PageObjectId;\n\n(function(PageObjectId) {\n  PageObjectId[\"CLOSE_CHAT\"] = \"close_chat\";\n  PageObjectId[\"LAUNCHER\"] = \"launcher_open_chat\";\n  PageObjectId[\"INPUT\"] = \"input_field\";\n  PageObjectId[\"INPUT_SEND\"] = \"input_send\";\n})(PageObjectId || (PageObjectId = {}));\n\nfunction makeTestId(id, panel) {\n  if (panel) {\n    return `${panel}-${id}`;\n  }\n  return id;\n}\n\nexport { PageObjectId, makeTestId };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar MessageErrorState;\n\n(function(MessageErrorState) {\n  MessageErrorState[MessageErrorState[\"NONE\"] = 1] = \"NONE\";\n  MessageErrorState[MessageErrorState[\"FAILED\"] = 2] = \"FAILED\";\n  MessageErrorState[MessageErrorState[\"RETRYING\"] = 3] = \"RETRYING\";\n  MessageErrorState[MessageErrorState[\"WAITING\"] = 4] = \"WAITING\";\n})(MessageErrorState || (MessageErrorState = {}));\n\nexport { MessageErrorState };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar AnimationInType;\n\n(function(AnimationInType) {\n  AnimationInType[\"NONE\"] = \"none\";\n  AnimationInType[\"FADE_IN\"] = \"fadeIn\";\n  AnimationInType[\"SLIDE_IN_FROM_LEFT\"] = \"slideInFromLeft\";\n  AnimationInType[\"SLIDE_IN_FROM_RIGHT\"] = \"slideInFromRight\";\n  AnimationInType[\"SLIDE_IN_FROM_BOTTOM\"] = \"slideInFromBottom\";\n  AnimationInType[\"BRANDING_SLIDE_IN_FROM_BOTTOM\"] = \"brandingSlideInFromBottom\";\n})(AnimationInType || (AnimationInType = {}));\n\nvar AnimationOutType;\n\n(function(AnimationOutType) {\n  AnimationOutType[\"NONE\"] = \"none\";\n  AnimationOutType[\"FADE_OUT\"] = \"fadeOut\";\n  AnimationOutType[\"SLIDE_OUT_TO_LEFT\"] = \"slideOutToLeft\";\n  AnimationOutType[\"SLIDE_OUT_TO_RIGHT\"] = \"slideOutToRight\";\n  AnimationOutType[\"SLIDE_OUT_TO_TOP\"] = \"slideOutToTop\";\n  AnimationOutType[\"SLIDE_OUT_TO_BOTTOM\"] = \"slideOutToBottom\";\n})(AnimationOutType || (AnimationOutType = {}));\n\nexport { AnimationInType, AnimationOutType };\n","import cx from \"classnames\";\n\nimport React, { PureComponent } from \"react\";\n\nimport { AnimationInType, AnimationOutType } from \"../../../types/utilities/Animation.js\";\n\nimport { conditionalSetTimeout } from \"../utils/browserUtils.js\";\n\nimport { HideComponent } from \"./util/HideComponent.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ var OverlayPanelName;\n\n(function(OverlayPanelName) {\n  OverlayPanelName[\"MAIN\"] = \"main\";\n  OverlayPanelName[\"DISCLAIMER\"] = \"disclaimer\";\n  OverlayPanelName[\"HOME_SCREEN\"] = \"home_screen\";\n  OverlayPanelName[\"HYDRATING\"] = \"hydrating\";\n  OverlayPanelName[\"CATASTROPHIC\"] = \"catastrophic\";\n  OverlayPanelName[\"IFRAME\"] = \"iframe\";\n  OverlayPanelName[\"CONVERSATIONAL_SEARCH_CITATION\"] = \"conversational_search_citation\";\n  OverlayPanelName[\"CUSTOM\"] = \"custom\";\n  OverlayPanelName[\"SHOW_PANEL\"] = \"show_panel\";\n  OverlayPanelName[\"PANEL_RESPONSE\"] = \"panel_response\";\n})(OverlayPanelName || (OverlayPanelName = {}));\n\nconst ANIMATION_DURATION_IN_MS = 240;\n\nclass OverlayPanel extends PureComponent {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      isClosing: false,\n      isOpening: false\n    };\n    this.openPanelTimeout = null;\n    this.closePanelTimeout = null;\n    this.openPanel = () => {\n      const {onOpenEnd: onOpenEnd, onOpenStart: onOpenStart, animationOnOpen: animationOnOpen, animationDurationOpen: animationDurationOpen} = this.props;\n      onOpenStart?.();\n      this.setState({\n        isClosing: false,\n        isOpening: true\n      });\n      const durationInMS = animationOnOpen === AnimationInType.NONE ? 0 : animationDurationOpen || ANIMATION_DURATION_IN_MS;\n      this.openPanelTimeout = conditionalSetTimeout(() => {\n        this.setState({\n          isClosing: false,\n          isOpening: false\n        });\n        onOpenEnd?.();\n      }, durationInMS);\n    };\n    this.closePanel = () => {\n      const {onCloseEnd: onCloseEnd, onCloseStart: onCloseStart, animationOnClose: animationOnClose, animationDurationClose: animationDurationClose} = this.props;\n      onCloseStart?.();\n      this.setState({\n        isClosing: true,\n        isOpening: false\n      });\n      const durationInMS = animationOnClose === AnimationOutType.NONE ? 0 : animationDurationClose || ANIMATION_DURATION_IN_MS;\n      this.closePanelTimeout = conditionalSetTimeout(() => {\n        this.setState({\n          isClosing: false,\n          isOpening: false\n        });\n        onCloseEnd?.();\n      }, durationInMS);\n    };\n  }\n  componentDidMount() {\n    const {shouldOpen: shouldOpen} = this.props;\n    if (shouldOpen) {\n      this.openPanel();\n    }\n  }\n  componentDidUpdate(prevProps) {\n    const {shouldOpen: shouldOpen} = this.props;\n    if (shouldOpen !== prevProps.shouldOpen) {\n      if (shouldOpen) {\n        this.openPanel();\n      } else {\n        this.closePanel();\n      }\n    }\n  }\n  componentWillUnmount() {\n    if (this.openPanelTimeout) {\n      clearTimeout(this.openPanelTimeout);\n    }\n    if (this.closePanelTimeout) {\n      clearTimeout(this.closePanelTimeout);\n    }\n    if (this.props.shouldOpen) {\n      if (this.props.onCloseStart) {\n        this.props.onCloseStart();\n      }\n      if (this.props.onCloseEnd) {\n        this.props.onCloseEnd();\n      }\n    }\n  }\n  render() {\n    const {children: children, className: className, shouldOpen: shouldOpen, animationOnClose: animationOnClose, animationOnOpen: animationOnOpen, overlayPanelName: overlayPanelName} = this.props;\n    const {isClosing: isClosing, isOpening: isOpening} = this.state;\n    return React.createElement(HideComponent, {\n      hidden: !isClosing && !shouldOpen,\n      className: cx(\"WAC__overlay-panelContainer\", `WAC__overlay--${overlayPanelName}`, className, {\n        \"WAC__overlay-panelContainer--animating\": isOpening || isClosing\n      })\n    }, React.createElement(\"div\", {\n      className: cx(\"WAC__overlay-panel\", `WAC__overlay-panel--${overlayPanelName}`, {\n        [`WAC__overlay-panel--closing--${animationOnClose}`]: isClosing,\n        \"WAC__overlay-panel--closed\": !isClosing && !shouldOpen,\n        [`WAC__overlay-panel--opening--${animationOnOpen}`]: isOpening,\n        \"WAC__overlay-panel--open\": !isOpening && shouldOpen\n      })\n    }, children));\n  }\n}\n\nexport { OverlayPanel, OverlayPanelName };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const HideComponentContext = React.createContext(false);\n\nexport { HideComponentContext };\n","var ai_slug_title = \"Powered by IBM watsonx\";\n\nvar ai_slug_description = \"IBM watsonx is powered by the latest AI models to intelligently process conversations and provide help whenever and wherever you may need it.\";\n\nvar components_overflow_ariaLabel = \"Open and close list of options\";\n\nvar components_swiper_currentLabel = \"{currentSlideNumber}/{totalSlideCount}\";\n\nvar errors_communicating = \"{botName} isn't available right now. Problems with a related system are preventing the data from being supplied.\";\n\nvar errors_imageSource = \"Image is not available.\";\n\nvar errors_videoSource = \"Video is not available.\";\n\nvar errors_audioSource = \"Audio is not available.\";\n\nvar errors_iframeSource = \"The web page is not available.\";\n\nvar errors_singleMessage = \"There is an error with the message you just sent, but feel free to ask me something else.\";\n\nvar errors_ariaMessageRetrying = \"We are having some trouble sending your message but are still trying\";\n\nvar errors_ariaMessageFailed = \"Your message failed to be sent\";\n\nvar errors_noAgentsAvailable = \"No agents are available.\";\n\nvar errors_noAgentsJoined = \"No agents accepted the chat\";\n\nvar errors_connectingToAgent = \"I'm sorry. Something went wrong and I cannot connect you to an agent right now.\";\n\nvar errors_busy = \"I'm sorry, but I can't help you right now. I'm answering questions from lots of people at the moment. Please try again later.\";\n\nvar errors_agentAppSessionExpired = \"I'm sorry, but access to the chat history has expired.\";\n\nvar errors_generalContent = \"There was an error displaying this content\";\n\nvar errors_somethingWrong = \"Something went wrong\";\n\nvar input_ariaLabel = \"Message to send\";\n\nvar input_placeholder = \"Type something...\";\n\nvar input_buttonLabel = \"Click to send message\";\n\nvar input_uploadButtonLabel = \"Add files to upload\";\n\nvar window_title = \"Chat window\";\n\nvar window_ariaTourRegion = \"Tour\";\n\nvar window_ariaTourRegionNamespace = \"Tour {namespace}\";\n\nvar window_ariaChatRegion = \"Chat\";\n\nvar window_ariaChatRegionNamespace = \"Chat {namespace}\";\n\nvar window_ariaWindowOpened = \"The chat window has been opened\";\n\nvar window_ariaWindowClosed = \"The chat window has been closed\";\n\nvar window_ariaWindowLoading = \"The chat is loading.\";\n\nvar launcher_isOpen = \"Close the chat window\";\n\nvar launcher_isClosed = \"Open the chat window\";\n\nvar launcher_isTourOpen = \"Close the tour window\";\n\nvar launcher_isTourClosed = \"Open the tour window\";\n\nvar launcher_desktopGreeting = \"Hi! Im a virtual assistant. How can I help you today?\";\n\nvar launcher_mobileGreeting = \"Hi! How can I help you today?\";\n\nvar launcher_ariaIsExpanded = \"Close the chat launcher\";\n\nvar launcher_closeButton = \"Close\";\n\nvar messages_youSaid = \"You said\";\n\nvar messages_botSaid = \"{botName} said\";\n\nvar messages_agentSaid = \"The live agent said\";\n\nvar messages_searchResults = \"Search results\";\n\nvar messages_searchResultsLink = \"Open this search result in a new window\";\n\nvar messages_searchResultsOpenDocument = \"Open document\";\n\nvar messages_searchResultsOpenDocumentWithLabel = 'Open document \"{documentName}\"';\n\nvar messages_searchResultsExpand = \"Expand\";\n\nvar messages_searchResultsCollapse = \"Collapse\";\n\nvar messages_botIsLoading = \"{botName} is loading\";\n\nvar messages_botIsTyping = \"{botName} is typing\";\n\nvar messages_agentIsTyping = \"The live agent is typing\";\n\nvar messages_scrollHandle = \"Chat history begin\";\n\nvar messages_scrollHandleDetailed = \"Chat history begin. Activate to focus the first message then use the arrow, home, and end keys to move between messages. Press escape to exit.\";\n\nvar messages_scrollHandleEnd = \"Chat history end\";\n\nvar messages_scrollHandleEndDetailed = \"Chat history end. Activate to focus the last message then use the arrow, home, and end keys to move between messages. Press escape to exit.\";\n\nvar message_labelBot = \"{actorName} {timestamp}\";\n\nvar message_labelYou = \"You {timestamp}\";\n\nvar notifications_toastClose = \"Close notification\";\n\nvar buttons_restart = \"Restart conversation\";\n\nvar buttons_cancel = \"Cancel\";\n\nvar buttons_retry = \"Retry\";\n\nvar options_select = \"Select an option\";\n\nvar options_ariaOptionsDisabled = \"These options are disabled and cannot be selected\";\n\nvar header_previewLinkTitle = \"Assistant preview\";\n\nvar header_ariaCloseRestart = \"End chat and close the window\";\n\nvar header_ariaBotAvatar = \"{botName} avatar image\";\n\nvar header_overflowMenu_options = \"Options\";\n\nvar homeScreen_returnToAssistant = \"Return to assistant\";\n\nvar homeScreen_returnToHome = \"Return to the home screen\";\n\nvar homeScreen_overflowMenuHomeScreen = \"Home screen\";\n\nvar homeScreen_ariaQuickStartListButton = \"Quick start menu\";\n\nvar homeScreen_ariaQuickStartListOpened = \"The quick start menu has been opened.\";\n\nvar homeScreen_ariaQuickStartListClosed = \"The quick start menu has been closed.\";\n\nvar default_agent_availableMessage = \"Request an agent, and I'll notify you when they're ready. Your wait time may vary based on availability.\";\n\nvar default_agent_unavailableMessage = \"Sorry, no agents are available right now.\";\n\nvar agent_reason_error = \"Hmmm... I'm experiencing some difficulties. I need a human agent to manually continue the chat.\";\n\nvar agent_sdMissingWarning = 'No service desk is configured. Unless you have a custom service desk implemented, users will see an error instead of the message below. See the <a href=\"https://cloud.ibm.com/docs/watson-assistant?topic=watson-assistant-deploy-web-chat-haa\" rel=\"noreferrer noopener\" target=\"_blank\">documentation</a> for more information.';\n\nvar agent_noName = \"Live agent\";\n\nvar agent_chatTitle = \"Live agent support\";\n\nvar agent_startChat = \"Connect to agent\";\n\nvar agent_connecting = \"Request for agent sent...\";\n\nvar agent_agentNoNameTitle = \"Agent\";\n\nvar agent_agentJoinedName = \"{personName} connected.\";\n\nvar agent_agentJoinedNoName = \"A live agent connected.\";\n\nvar agent_youConnectedWarning = \"If you refresh or leave the current page, you'll have to request a new agent.\";\n\nvar agent_connectingMinutes = \"Current wait time is <b>{time, number} {time, plural, one {minute} other {minutes}}</b>.\";\n\nvar agent_connectingQueue = \"You're number <b>{position, number}</b> in line.\";\n\nvar agent_ariaAgentAvatar = \"Live agent avatar image\";\n\nvar agent_ariaGenericAvatar = \"Avatar image\";\n\nvar agent_ariaGenericBotAvatar = \"Avatar image\";\n\nvar agent_youEndedChat = \"You disconnected from the live agent.\";\n\nvar agent_conversationWasEnded = \"You disconnected from the live agent.\";\n\nvar agent_disconnected = \"Something went wrong and your connection to the live agent was lost. Check your internet connection and then try again to connect to an agent.\";\n\nvar agent_reconnected = \"The agent reconnected.\";\n\nvar agent_agentLeftChat = \"{personName} disconnected.\";\n\nvar agent_agentLeftChatNoName = \"The live agent disconnected.\";\n\nvar agent_agentEndedChat = \"{personName} ended the chat.\";\n\nvar agent_agentEndedChatNoName = \"The live agent ended the chat.\";\n\nvar agent_transferring = \"You're being transferred.\";\n\nvar agent_transferringNoName = \"You're being transferred.\";\n\nvar agent_endChat = \"Disconnect from live agent?\";\n\nvar agent_confirmSuspendedEndChatTitle = \"Disconnect from previous agent?\";\n\nvar agent_confirmSuspendedEndChatMessage = \"You are currently connected to an agent. Continuing will disconnect you from the agent and connect you to a new one. Do you want to continue?\";\n\nvar agent_confirmCancelRequestTitle = \"Cancel request?\";\n\nvar agent_confirmCancelRequestMessage = \"If you continue, you'll cancel your request for an agent.\";\n\nvar agent_confirmCancelRequestNo = \"Go back\";\n\nvar agent_confirmCancelRequestYes = \"Cancel request\";\n\nvar agent_confirmEndChat = \"If you disconnect, you'll have to request a new live agent.\";\n\nvar agent_confirmEndChatNo = \"Go back\";\n\nvar agent_confirmEndChatYes = \"Disconnect\";\n\nvar agent_confirmEndSuspendedYes = \"Continue\";\n\nvar agent_botReturned = \"Can I help you with anything else?\";\n\nvar agent_newMessage = \"New message\";\n\nvar agent_cardButtonChatRequested = \"Connecting...\";\n\nvar agent_cardButtonConnected = \"Connected\";\n\nvar agent_cardButtonChatEnded = \"Disconnected\";\n\nvar agent_cardMessageChatEnded = \"You disconnected from the live agent.\";\n\nvar agent_cardMessageConnected = \"You're now connected.\";\n\nvar agent_connectButtonCancel = \"Cancel\";\n\nvar agent_connectedButtonEndChat = \"Disconnect\";\n\nvar agent_connectWaiting = \"Waiting...\";\n\nvar agent_defaultMessageToAgent = \"Begin conversation\";\n\nvar agent_inputPlaceholderConnecting = \"Waiting for agent...\";\n\nvar agent_inputPlaceholderReconnecting = \"Reconnecting to agent...\";\n\nvar agent_sharingStopSharingButton = \"Stop sharing screen\";\n\nvar agent_sharingRequestTitle = \"Screen sharing\";\n\nvar agent_sharingRequestMessage = \"The agent has requested you share your screen. You can stop sharing at any time.\";\n\nvar agent_sharingAcceptButton = \"Share screen\";\n\nvar agent_sharingDeclineButton = \"Decline\";\n\nvar agent_sharingRequested = \"You were requested to share your screen.\";\n\nvar agent_sharingAccepted = \"You shared your screen.\";\n\nvar agent_sharingDeclined = \"You declined to share your screen.\";\n\nvar agent_sharingCancelled = \"The screen sharing request was cancelled.\";\n\nvar agent_sharingEnded = \"You stopped sharing your screen.\";\n\nvar agent_suspendedWarning = \"You are currently connected to an agent.\";\n\nvar icon_ariaUnreadMessages = \"There {count, plural, one {is} other {are}} {count, number} unread {count, plural, one {message} other {messages}}\";\n\nvar showMore = \"See more\";\n\nvar showMoreResults = \"See more\";\n\nvar disclaimer_title = \"Disclaimer\";\n\nvar disclaimer_accept = \"I accept\";\n\nvar general_ariaCloseInformationOverlay = \"Close information panel.\";\n\nvar general_ariaAnnounceOpenedInformationOverlay = \"An information panel has been opened.\";\n\nvar general_ariaAnnounceClosedInformationOverlay = \"An information panel has been closed.\";\n\nvar general_ariaAnnounceEscapeOverlay = \"Press escape or click the close button to close.\";\n\nvar general_returnToAssistant = \"Return to assistant\";\n\nvar conversationalSearch_streamingIncomplete = \"This message was not completed. Please try again.\";\n\nvar conversationalSearch_viewSourceDocument = \"View source\";\n\nvar conversationalSearch_citationsLabel = \"Sources\";\n\nvar conversationalSearch_toggleCitations = \"Open or close the list of sources\";\n\nvar conversationalSearch_responseStopped = \"Response stopped\";\n\nvar launcher_chatNow = \"Chat now\";\n\nvar iframe_ariaSourceLoaded = \"The web page has loaded.\";\n\nvar iframe_ariaImageAltText = \"Preview image for the web page panel.\";\n\nvar iframe_ariaClosePanel = \"Close the web page panel.\";\n\nvar iframe_ariaOpenedPanel = \"Web page panel has opened.\";\n\nvar iframe_ariaClosedPanel = \"Web page panel has closed.\";\n\nvar iframe_ariaClickPreviewCard = \"Click to open the web page panel and visit {source}.\";\n\nvar closeAndRestartModal_title = \"End chat\";\n\nvar closeAndRestartModal_message = \"Are you sure you want to end your chat?\";\n\nvar closeAndRestartModal_confirm = \"Yes\";\n\nvar closeAndRestartModal_cancel = \"No\";\n\nvar datePicker_chooseDate = \"Choose a date ({format})\";\n\nvar datePicker_confirmDate = \"Confirm date\";\n\nvar tour_resumeButton = \"Resume\";\n\nvar tour_restartButton = \"Restart\";\n\nvar tour_startButton = \"Get started\";\n\nvar tour_doneButton = \"Done\";\n\nvar tour_ariaMinimizeButton = \"Hide tour window\";\n\nvar tour_ariaCloseButton = \"Close tour window\";\n\nvar tour_ariaChatButton = \"Open the chat window\";\n\nvar tour_ariaPreviousButton = \"Go to previous step\";\n\nvar tour_ariaNextButton = \"Go to next step\";\n\nvar tour_instructions = \"Use the previous and next buttons to navigate between steps of the tour. Use the {chatButtonText} button to open that chat window.\";\n\nvar tour_errorFetchingStep = \"There was a problem fetching the next step.\";\n\nvar tour_errorTitle = \"Unable to continue\";\n\nvar tour_errorBody = \"The content failed to load. Please try again.\";\n\nvar fileSharing_fileTooLarge = \"The maximum file size allowed is {maxSize}.\";\n\nvar fileSharing_ariaAnnounceSuccess = \"The file was uploaded successfully.\";\n\nvar fileSharing_fileIcon = \"File icon\";\n\nvar fileSharing_removeButtonTitle = \"Remove file\";\n\nvar fileSharing_statusUploading = \"Uploading file\";\n\nvar fileSharing_uploadFailed = \"There was an error uploading the file.\";\n\nvar fileSharing_agentMessageText = \"File upload\";\n\nvar fileSharing_request = \"The agent has requested you upload a file.\";\n\nvar carousel_prevNavButton = \"Go to previous slide.\";\n\nvar carousel_nextNavButton = \"Go to next slide.\";\n\nvar input_completionsTagApp = \"App\";\n\nvar input_completionsTagAssistant = \"Assistant\";\n\nvar table_filterPlaceholder = \"Filter table\";\n\nvar table_previousPage = \"Previous page\";\n\nvar table_nextPage = \"Next page\";\n\nvar table_itemsPerPage = \"Items per page:\";\n\nvar table_paginationSupplementalText = \"of {pagesCount, number} {pagesCount, plural, one {page} other {pages}}\";\n\nvar table_paginationStatus = \"{start, number}{end, number} of {count, number} {count, plural, one {item} other {items}}\";\n\nvar feedback_positiveLabel = \"Good response\";\n\nvar feedback_negativeLabel = \"Bad response\";\n\nvar feedback_defaultTitle = \"Additional feedback\";\n\nvar feedback_defaultPrompt = \"Why did you choose this rating?\";\n\nvar feedback_defaultPlaceholder = \"Add a comment\";\n\nvar feedback_submitLabel = \"Submit\";\n\nvar feedback_cancelLabel = \"Cancel\";\n\nvar input_stopResponse = \"Stop response\";\n\nvar messages_responseStopped = \"Response stopped\";\n\nvar chainOfThought_stepTitle = \"{stepNumber, number}: {stepTitle}\";\n\nvar chainOfThought_inputLabel = \"Input\";\n\nvar chainOfThought_outputLabel = \"Output\";\n\nvar chainOfThought_toolLabel = \"Tool\";\n\nvar chainOfThought_statusSucceededLabel = \"Succeeded\";\n\nvar chainOfThought_statusFailedLabel = \"Failed\";\n\nvar chainOfThought_statusProcessingLabel = \"Processing\";\n\nvar chainOfThought_explainabilityLabel = \"How did I get this answer?\";\n\nvar enLanguagePack = {\n  ai_slug_title: ai_slug_title,\n  ai_slug_description: ai_slug_description,\n  components_overflow_ariaLabel: components_overflow_ariaLabel,\n  components_swiper_currentLabel: components_swiper_currentLabel,\n  errors_communicating: errors_communicating,\n  errors_imageSource: errors_imageSource,\n  errors_videoSource: errors_videoSource,\n  errors_audioSource: errors_audioSource,\n  errors_iframeSource: errors_iframeSource,\n  errors_singleMessage: errors_singleMessage,\n  errors_ariaMessageRetrying: errors_ariaMessageRetrying,\n  errors_ariaMessageFailed: errors_ariaMessageFailed,\n  errors_noAgentsAvailable: errors_noAgentsAvailable,\n  errors_noAgentsJoined: errors_noAgentsJoined,\n  errors_connectingToAgent: errors_connectingToAgent,\n  errors_busy: errors_busy,\n  errors_agentAppSessionExpired: errors_agentAppSessionExpired,\n  errors_generalContent: errors_generalContent,\n  errors_somethingWrong: errors_somethingWrong,\n  input_ariaLabel: input_ariaLabel,\n  input_placeholder: input_placeholder,\n  input_buttonLabel: input_buttonLabel,\n  input_uploadButtonLabel: input_uploadButtonLabel,\n  window_title: window_title,\n  window_ariaTourRegion: window_ariaTourRegion,\n  window_ariaTourRegionNamespace: window_ariaTourRegionNamespace,\n  window_ariaChatRegion: window_ariaChatRegion,\n  window_ariaChatRegionNamespace: window_ariaChatRegionNamespace,\n  window_ariaWindowOpened: window_ariaWindowOpened,\n  window_ariaWindowClosed: window_ariaWindowClosed,\n  window_ariaWindowLoading: window_ariaWindowLoading,\n  launcher_isOpen: launcher_isOpen,\n  launcher_isClosed: launcher_isClosed,\n  launcher_isTourOpen: launcher_isTourOpen,\n  launcher_isTourClosed: launcher_isTourClosed,\n  launcher_desktopGreeting: launcher_desktopGreeting,\n  launcher_mobileGreeting: launcher_mobileGreeting,\n  launcher_ariaIsExpanded: launcher_ariaIsExpanded,\n  launcher_closeButton: launcher_closeButton,\n  messages_youSaid: messages_youSaid,\n  messages_botSaid: messages_botSaid,\n  messages_agentSaid: messages_agentSaid,\n  messages_searchResults: messages_searchResults,\n  messages_searchResultsLink: messages_searchResultsLink,\n  messages_searchResultsOpenDocument: messages_searchResultsOpenDocument,\n  messages_searchResultsOpenDocumentWithLabel: messages_searchResultsOpenDocumentWithLabel,\n  messages_searchResultsExpand: messages_searchResultsExpand,\n  messages_searchResultsCollapse: messages_searchResultsCollapse,\n  messages_botIsLoading: messages_botIsLoading,\n  messages_botIsTyping: messages_botIsTyping,\n  messages_agentIsTyping: messages_agentIsTyping,\n  messages_scrollHandle: messages_scrollHandle,\n  messages_scrollHandleDetailed: messages_scrollHandleDetailed,\n  messages_scrollHandleEnd: messages_scrollHandleEnd,\n  messages_scrollHandleEndDetailed: messages_scrollHandleEndDetailed,\n  message_labelBot: message_labelBot,\n  message_labelYou: message_labelYou,\n  notifications_toastClose: notifications_toastClose,\n  buttons_restart: buttons_restart,\n  buttons_cancel: buttons_cancel,\n  buttons_retry: buttons_retry,\n  options_select: options_select,\n  options_ariaOptionsDisabled: options_ariaOptionsDisabled,\n  header_previewLinkTitle: header_previewLinkTitle,\n  header_ariaCloseRestart: header_ariaCloseRestart,\n  header_ariaBotAvatar: header_ariaBotAvatar,\n  header_overflowMenu_options: header_overflowMenu_options,\n  homeScreen_returnToAssistant: homeScreen_returnToAssistant,\n  homeScreen_returnToHome: homeScreen_returnToHome,\n  homeScreen_overflowMenuHomeScreen: homeScreen_overflowMenuHomeScreen,\n  homeScreen_ariaQuickStartListButton: homeScreen_ariaQuickStartListButton,\n  homeScreen_ariaQuickStartListOpened: homeScreen_ariaQuickStartListOpened,\n  homeScreen_ariaQuickStartListClosed: homeScreen_ariaQuickStartListClosed,\n  default_agent_availableMessage: default_agent_availableMessage,\n  default_agent_unavailableMessage: default_agent_unavailableMessage,\n  agent_reason_error: agent_reason_error,\n  agent_sdMissingWarning: agent_sdMissingWarning,\n  agent_noName: agent_noName,\n  agent_chatTitle: agent_chatTitle,\n  agent_startChat: agent_startChat,\n  agent_connecting: agent_connecting,\n  agent_agentNoNameTitle: agent_agentNoNameTitle,\n  agent_agentJoinedName: agent_agentJoinedName,\n  agent_agentJoinedNoName: agent_agentJoinedNoName,\n  agent_youConnectedWarning: agent_youConnectedWarning,\n  agent_connectingMinutes: agent_connectingMinutes,\n  agent_connectingQueue: agent_connectingQueue,\n  agent_ariaAgentAvatar: agent_ariaAgentAvatar,\n  agent_ariaGenericAvatar: agent_ariaGenericAvatar,\n  agent_ariaGenericBotAvatar: agent_ariaGenericBotAvatar,\n  agent_youEndedChat: agent_youEndedChat,\n  agent_conversationWasEnded: agent_conversationWasEnded,\n  agent_disconnected: agent_disconnected,\n  agent_reconnected: agent_reconnected,\n  agent_agentLeftChat: agent_agentLeftChat,\n  agent_agentLeftChatNoName: agent_agentLeftChatNoName,\n  agent_agentEndedChat: agent_agentEndedChat,\n  agent_agentEndedChatNoName: agent_agentEndedChatNoName,\n  agent_transferring: agent_transferring,\n  agent_transferringNoName: agent_transferringNoName,\n  agent_endChat: agent_endChat,\n  agent_confirmSuspendedEndChatTitle: agent_confirmSuspendedEndChatTitle,\n  agent_confirmSuspendedEndChatMessage: agent_confirmSuspendedEndChatMessage,\n  agent_confirmCancelRequestTitle: agent_confirmCancelRequestTitle,\n  agent_confirmCancelRequestMessage: agent_confirmCancelRequestMessage,\n  agent_confirmCancelRequestNo: agent_confirmCancelRequestNo,\n  agent_confirmCancelRequestYes: agent_confirmCancelRequestYes,\n  agent_confirmEndChat: agent_confirmEndChat,\n  agent_confirmEndChatNo: agent_confirmEndChatNo,\n  agent_confirmEndChatYes: agent_confirmEndChatYes,\n  agent_confirmEndSuspendedYes: agent_confirmEndSuspendedYes,\n  agent_botReturned: agent_botReturned,\n  agent_newMessage: agent_newMessage,\n  agent_cardButtonChatRequested: agent_cardButtonChatRequested,\n  agent_cardButtonConnected: agent_cardButtonConnected,\n  agent_cardButtonChatEnded: agent_cardButtonChatEnded,\n  agent_cardMessageChatEnded: agent_cardMessageChatEnded,\n  agent_cardMessageConnected: agent_cardMessageConnected,\n  agent_connectButtonCancel: agent_connectButtonCancel,\n  agent_connectedButtonEndChat: agent_connectedButtonEndChat,\n  agent_connectWaiting: agent_connectWaiting,\n  agent_defaultMessageToAgent: agent_defaultMessageToAgent,\n  agent_inputPlaceholderConnecting: agent_inputPlaceholderConnecting,\n  agent_inputPlaceholderReconnecting: agent_inputPlaceholderReconnecting,\n  agent_sharingStopSharingButton: agent_sharingStopSharingButton,\n  agent_sharingRequestTitle: agent_sharingRequestTitle,\n  agent_sharingRequestMessage: agent_sharingRequestMessage,\n  agent_sharingAcceptButton: agent_sharingAcceptButton,\n  agent_sharingDeclineButton: agent_sharingDeclineButton,\n  agent_sharingRequested: agent_sharingRequested,\n  agent_sharingAccepted: agent_sharingAccepted,\n  agent_sharingDeclined: agent_sharingDeclined,\n  agent_sharingCancelled: agent_sharingCancelled,\n  agent_sharingEnded: agent_sharingEnded,\n  agent_suspendedWarning: agent_suspendedWarning,\n  icon_ariaUnreadMessages: icon_ariaUnreadMessages,\n  showMore: showMore,\n  showMoreResults: showMoreResults,\n  disclaimer_title: disclaimer_title,\n  disclaimer_accept: disclaimer_accept,\n  general_ariaCloseInformationOverlay: general_ariaCloseInformationOverlay,\n  general_ariaAnnounceOpenedInformationOverlay: general_ariaAnnounceOpenedInformationOverlay,\n  general_ariaAnnounceClosedInformationOverlay: general_ariaAnnounceClosedInformationOverlay,\n  general_ariaAnnounceEscapeOverlay: general_ariaAnnounceEscapeOverlay,\n  general_returnToAssistant: general_returnToAssistant,\n  conversationalSearch_streamingIncomplete: conversationalSearch_streamingIncomplete,\n  conversationalSearch_viewSourceDocument: conversationalSearch_viewSourceDocument,\n  conversationalSearch_citationsLabel: conversationalSearch_citationsLabel,\n  conversationalSearch_toggleCitations: conversationalSearch_toggleCitations,\n  conversationalSearch_responseStopped: conversationalSearch_responseStopped,\n  launcher_chatNow: launcher_chatNow,\n  iframe_ariaSourceLoaded: iframe_ariaSourceLoaded,\n  iframe_ariaImageAltText: iframe_ariaImageAltText,\n  iframe_ariaClosePanel: iframe_ariaClosePanel,\n  iframe_ariaOpenedPanel: iframe_ariaOpenedPanel,\n  iframe_ariaClosedPanel: iframe_ariaClosedPanel,\n  iframe_ariaClickPreviewCard: iframe_ariaClickPreviewCard,\n  closeAndRestartModal_title: closeAndRestartModal_title,\n  closeAndRestartModal_message: closeAndRestartModal_message,\n  closeAndRestartModal_confirm: closeAndRestartModal_confirm,\n  closeAndRestartModal_cancel: closeAndRestartModal_cancel,\n  datePicker_chooseDate: datePicker_chooseDate,\n  datePicker_confirmDate: datePicker_confirmDate,\n  tour_resumeButton: tour_resumeButton,\n  tour_restartButton: tour_restartButton,\n  tour_startButton: tour_startButton,\n  tour_doneButton: tour_doneButton,\n  tour_ariaMinimizeButton: tour_ariaMinimizeButton,\n  tour_ariaCloseButton: tour_ariaCloseButton,\n  tour_ariaChatButton: tour_ariaChatButton,\n  tour_ariaPreviousButton: tour_ariaPreviousButton,\n  tour_ariaNextButton: tour_ariaNextButton,\n  tour_instructions: tour_instructions,\n  tour_errorFetchingStep: tour_errorFetchingStep,\n  tour_errorTitle: tour_errorTitle,\n  tour_errorBody: tour_errorBody,\n  fileSharing_fileTooLarge: fileSharing_fileTooLarge,\n  fileSharing_ariaAnnounceSuccess: fileSharing_ariaAnnounceSuccess,\n  fileSharing_fileIcon: fileSharing_fileIcon,\n  fileSharing_removeButtonTitle: fileSharing_removeButtonTitle,\n  fileSharing_statusUploading: fileSharing_statusUploading,\n  fileSharing_uploadFailed: fileSharing_uploadFailed,\n  fileSharing_agentMessageText: fileSharing_agentMessageText,\n  fileSharing_request: fileSharing_request,\n  carousel_prevNavButton: carousel_prevNavButton,\n  carousel_nextNavButton: carousel_nextNavButton,\n  input_completionsTagApp: input_completionsTagApp,\n  input_completionsTagAssistant: input_completionsTagAssistant,\n  table_filterPlaceholder: table_filterPlaceholder,\n  table_previousPage: table_previousPage,\n  table_nextPage: table_nextPage,\n  table_itemsPerPage: table_itemsPerPage,\n  table_paginationSupplementalText: table_paginationSupplementalText,\n  table_paginationStatus: table_paginationStatus,\n  feedback_positiveLabel: feedback_positiveLabel,\n  feedback_negativeLabel: feedback_negativeLabel,\n  feedback_defaultTitle: feedback_defaultTitle,\n  feedback_defaultPrompt: feedback_defaultPrompt,\n  feedback_defaultPlaceholder: feedback_defaultPlaceholder,\n  feedback_submitLabel: feedback_submitLabel,\n  feedback_cancelLabel: feedback_cancelLabel,\n  input_stopResponse: input_stopResponse,\n  messages_responseStopped: messages_responseStopped,\n  chainOfThought_stepTitle: chainOfThought_stepTitle,\n  chainOfThought_inputLabel: chainOfThought_inputLabel,\n  chainOfThought_outputLabel: chainOfThought_outputLabel,\n  chainOfThought_toolLabel: chainOfThought_toolLabel,\n  chainOfThought_statusSucceededLabel: chainOfThought_statusSucceededLabel,\n  chainOfThought_statusFailedLabel: chainOfThought_statusFailedLabel,\n  chainOfThought_statusProcessingLabel: chainOfThought_statusProcessingLabel,\n  chainOfThought_explainabilityLabel: chainOfThought_explainabilityLabel\n};\n\nexport { agent_agentEndedChat, agent_agentEndedChatNoName, agent_agentJoinedName, agent_agentJoinedNoName, agent_agentLeftChat, agent_agentLeftChatNoName, agent_agentNoNameTitle, agent_ariaAgentAvatar, agent_ariaGenericAvatar, agent_ariaGenericBotAvatar, agent_botReturned, agent_cardButtonChatEnded, agent_cardButtonChatRequested, agent_cardButtonConnected, agent_cardMessageChatEnded, agent_cardMessageConnected, agent_chatTitle, agent_confirmCancelRequestMessage, agent_confirmCancelRequestNo, agent_confirmCancelRequestTitle, agent_confirmCancelRequestYes, agent_confirmEndChat, agent_confirmEndChatNo, agent_confirmEndChatYes, agent_confirmEndSuspendedYes, agent_confirmSuspendedEndChatMessage, agent_confirmSuspendedEndChatTitle, agent_connectButtonCancel, agent_connectWaiting, agent_connectedButtonEndChat, agent_connecting, agent_connectingMinutes, agent_connectingQueue, agent_conversationWasEnded, agent_defaultMessageToAgent, agent_disconnected, agent_endChat, agent_inputPlaceholderConnecting, agent_inputPlaceholderReconnecting, agent_newMessage, agent_noName, agent_reason_error, agent_reconnected, agent_sdMissingWarning, agent_sharingAcceptButton, agent_sharingAccepted, agent_sharingCancelled, agent_sharingDeclineButton, agent_sharingDeclined, agent_sharingEnded, agent_sharingRequestMessage, agent_sharingRequestTitle, agent_sharingRequested, agent_sharingStopSharingButton, agent_startChat, agent_suspendedWarning, agent_transferring, agent_transferringNoName, agent_youConnectedWarning, agent_youEndedChat, ai_slug_description, ai_slug_title, buttons_cancel, buttons_restart, buttons_retry, carousel_nextNavButton, carousel_prevNavButton, chainOfThought_explainabilityLabel, chainOfThought_inputLabel, chainOfThought_outputLabel, chainOfThought_statusFailedLabel, chainOfThought_statusProcessingLabel, chainOfThought_statusSucceededLabel, chainOfThought_stepTitle, chainOfThought_toolLabel, closeAndRestartModal_cancel, closeAndRestartModal_confirm, closeAndRestartModal_message, closeAndRestartModal_title, components_overflow_ariaLabel, components_swiper_currentLabel, conversationalSearch_citationsLabel, conversationalSearch_responseStopped, conversationalSearch_streamingIncomplete, conversationalSearch_toggleCitations, conversationalSearch_viewSourceDocument, datePicker_chooseDate, datePicker_confirmDate, enLanguagePack as default, default_agent_availableMessage, default_agent_unavailableMessage, disclaimer_accept, disclaimer_title, errors_agentAppSessionExpired, errors_ariaMessageFailed, errors_ariaMessageRetrying, errors_audioSource, errors_busy, errors_communicating, errors_connectingToAgent, errors_generalContent, errors_iframeSource, errors_imageSource, errors_noAgentsAvailable, errors_noAgentsJoined, errors_singleMessage, errors_somethingWrong, errors_videoSource, feedback_cancelLabel, feedback_defaultPlaceholder, feedback_defaultPrompt, feedback_defaultTitle, feedback_negativeLabel, feedback_positiveLabel, feedback_submitLabel, fileSharing_agentMessageText, fileSharing_ariaAnnounceSuccess, fileSharing_fileIcon, fileSharing_fileTooLarge, fileSharing_removeButtonTitle, fileSharing_request, fileSharing_statusUploading, fileSharing_uploadFailed, general_ariaAnnounceClosedInformationOverlay, general_ariaAnnounceEscapeOverlay, general_ariaAnnounceOpenedInformationOverlay, general_ariaCloseInformationOverlay, general_returnToAssistant, header_ariaBotAvatar, header_ariaCloseRestart, header_overflowMenu_options, header_previewLinkTitle, homeScreen_ariaQuickStartListButton, homeScreen_ariaQuickStartListClosed, homeScreen_ariaQuickStartListOpened, homeScreen_overflowMenuHomeScreen, homeScreen_returnToAssistant, homeScreen_returnToHome, icon_ariaUnreadMessages, iframe_ariaClickPreviewCard, iframe_ariaClosePanel, iframe_ariaClosedPanel, iframe_ariaImageAltText, iframe_ariaOpenedPanel, iframe_ariaSourceLoaded, input_ariaLabel, input_buttonLabel, input_completionsTagApp, input_completionsTagAssistant, input_placeholder, input_stopResponse, input_uploadButtonLabel, launcher_ariaIsExpanded, launcher_chatNow, launcher_closeButton, launcher_desktopGreeting, launcher_isClosed, launcher_isOpen, launcher_isTourClosed, launcher_isTourOpen, launcher_mobileGreeting, message_labelBot, message_labelYou, messages_agentIsTyping, messages_agentSaid, messages_botIsLoading, messages_botIsTyping, messages_botSaid, messages_responseStopped, messages_scrollHandle, messages_scrollHandleDetailed, messages_scrollHandleEnd, messages_scrollHandleEndDetailed, messages_searchResults, messages_searchResultsCollapse, messages_searchResultsExpand, messages_searchResultsLink, messages_searchResultsOpenDocument, messages_searchResultsOpenDocumentWithLabel, messages_youSaid, notifications_toastClose, options_ariaOptionsDisabled, options_select, showMore, showMoreResults, table_filterPlaceholder, table_itemsPerPage, table_nextPage, table_paginationStatus, table_paginationSupplementalText, table_previousPage, tour_ariaChatButton, tour_ariaCloseButton, tour_ariaMinimizeButton, tour_ariaNextButton, tour_ariaPreviousButton, tour_doneButton, tour_errorBody, tour_errorFetchingStep, tour_errorTitle, tour_instructions, tour_restartButton, tour_resumeButton, tour_startButton, window_ariaChatRegion, window_ariaChatRegionNamespace, window_ariaTourRegion, window_ariaTourRegionNamespace, window_ariaWindowClosed, window_ariaWindowLoading, window_ariaWindowOpened, window_title };\n","import { PureComponent } from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ class MountChildrenOnDelay extends PureComponent {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      showChildren: false\n    };\n  }\n  componentDidMount() {\n    this.onComponentDidMount = setTimeout(() => {\n      this.setState({\n        showChildren: true\n      });\n    }, this.props.delay);\n  }\n  componentWillUnmount() {\n    clearTimeout(this.onComponentDidMount);\n    this.onComponentDidMount = undefined;\n  }\n  render() {\n    if (!this.state.showChildren) {\n      return false;\n    }\n    return this.props.children;\n  }\n}\n\nMountChildrenOnDelay.defaultProps = {\n  delay: 500\n};\n\nexport { MountChildrenOnDelay };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction resolvablePromise() {\n  let resolveFunction;\n  let rejectFunction;\n  const promise = new Promise((resolve, reject) => {\n    resolveFunction = resolve;\n    rejectFunction = reject;\n  });\n  promise.doResolve = resolveValue => {\n    promise.isResolved = true;\n    promise.isComplete = true;\n    resolveFunction(resolveValue);\n  };\n  promise.doReject = rejectValue => {\n    promise.isRejected = true;\n    promise.isComplete = true;\n    rejectFunction(rejectValue);\n  };\n  promise.isResolved = false;\n  promise.isRejected = false;\n  promise.isComplete = false;\n  return promise;\n}\n\nexport { resolvablePromise };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ async function loadHAA() {\n  const {createService: createService} = await import(\"../shared/services/haa/HumanAgentServiceImpl.js\");\n  return createService;\n}\n\nfunction lazyWithPreload(factory) {\n  const Component = React.lazy(factory);\n  Component.preload = factory;\n  return Component;\n}\n\nfunction lazyChat() {\n  return lazyWithPreload(() => import(\"../shared/components/Chat.js\"));\n}\n\nfunction lazyCatastrophicError() {\n  return lazyWithPreload(() => import(\"../shared/components/CatastrophicError.js\").then(mod => ({\n    default: mod.CatastrophicError\n  })));\n}\n\nfunction lazyDisclaimer() {\n  return lazyWithPreload(() => import(\"../shared/components/Disclaimer.js\").then(mod => ({\n    default: mod.Disclaimer\n  })));\n}\n\nfunction lazyHomeScreenContainer() {\n  return lazyWithPreload(() => import(\"../shared/components/homeScreen/HomeScreenContainer.js\").then(mod => ({\n    default: mod.HomeScreenContainer\n  })));\n}\n\nfunction lazyIFramePanel() {\n  return lazyWithPreload(() => import(\"../shared/components/responseTypes/iframe/IFramePanel.js\").then(mod => ({\n    default: mod.IFramePanel\n  })));\n}\n\nfunction lazyViewSourcePanel() {\n  return lazyWithPreload(() => import(\"../shared/components/responseTypes/util/citations/ViewSourcePanel.js\").then(mod => ({\n    default: mod.ViewSourcePanel\n  })));\n}\n\nfunction lazyBodyAndFooterPanelComponent() {\n  return lazyWithPreload(() => import(\"../shared/components/panels/BodyAndFooterPanelComponent.js\").then(mod => ({\n    default: mod.BodyAndFooterPanelComponent\n  })));\n}\n\nfunction lazyTourComponent() {\n  return React.lazy(() => import(\"../shared/components/tour/TourContainer.js\"));\n}\n\nfunction lazyMediaPlayer() {\n  return React.lazy(() => import(\"react-player/lazy/index.js\").then(mod => {\n    let exported = mod.default ?? mod;\n    if (exported && typeof exported === \"object\" && \"default\" in exported) {\n      exported = exported.default;\n    }\n    return {\n      default: exported\n    };\n  }));\n}\n\nfunction lazyCarousel() {\n  return React.lazy(() => import(\"../shared/components/responseTypes/carousel/Carousel.js\"));\n}\n\nexport { lazyBodyAndFooterPanelComponent, lazyCarousel, lazyCatastrophicError, lazyChat, lazyDisclaimer, lazyHomeScreenContainer, lazyIFramePanel, lazyMediaPlayer, lazyTourComponent, lazyViewSourcePanel, loadHAA };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const VisuallyHidden = React.forwardRef((props, ref) => React.createElement(\"div\", {\n  ref: ref,\n  ...props,\n  className: `WACVisuallyHidden ${props.className || \"\"}`\n}, props.children));\n\nVisuallyHidden.displayName = \"VisuallyHidden\";\n\nexport { VisuallyHidden as default };\n","import { detect } from \"detect-browser\";\n\nimport memoizeOne from \"memoize-one\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const isClient = typeof window !== \"undefined\" && typeof navigator !== \"undefined\";\n\nconst browser = isClient ? detect() : undefined;\n\nlet screenWidth = 0;\n\nlet screenHeight = 0;\n\nif (isClient) {\n  screenWidth = window.screen.width;\n  screenHeight = window.screen.height;\n}\n\nconst IS_IOS = browser?.os === \"iOS\";\n\nconst IS_ANDROID = browser?.os === \"Android OS\";\n\nconst IS_MOBILE = IS_IOS || IS_ANDROID;\n\nconst IS_PHONE = IS_MOBILE && (screenWidth < 500 || screenHeight < 500);\n\nconst IS_PHONE_IN_PORTRAIT_MODE = IS_PHONE && screenWidth < 500;\n\nfunction isSessionStorageAvailable() {\n  if (!isClient || !window.sessionStorage) {\n    return false;\n  }\n  try {\n    window.sessionStorage.setItem(\"web-chat-test-item\", \"true\");\n    window.sessionStorage.getItem(\"web-chat-test-item\");\n    window.sessionStorage.removeItem(\"web-chat-test-item\");\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nconst IS_SESSION_STORAGE = memoizeOne(isSessionStorageAvailable);\n\nfunction getURLHostName(url) {\n  try {\n    return new URL(url).hostname;\n  } catch {\n    return url;\n  }\n}\n\nfunction conditionalSetTimeout(operation, timeout) {\n  if (timeout) {\n    return setTimeout(operation, timeout);\n  }\n  operation();\n  return null;\n}\n\nexport { IS_IOS, IS_MOBILE, IS_PHONE, IS_PHONE_IN_PORTRAIT_MODE, IS_SESSION_STORAGE, conditionalSetTimeout, getURLHostName };\n","import { useRef, useEffect } from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function usePrevious(value) {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}\n\nexport { usePrevious };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar ChatHeaderObjectType;\n\n(function(ChatHeaderObjectType) {\n  ChatHeaderObjectType[\"LINK\"] = \"link\";\n  ChatHeaderObjectType[\"MENU\"] = \"menu\";\n  ChatHeaderObjectType[\"BUTTON\"] = \"button\";\n  ChatHeaderObjectType[\"RADIO_GROUP\"] = \"radio-group\";\n})(ChatHeaderObjectType || (ChatHeaderObjectType = {}));\n\nexport { ChatHeaderObjectType };\n","import { __decorate } from \"tslib\";\n\nimport { bind } from \"bind-decorator\";\n\nimport { LitElement, unsafeCSS, css } from \"lit\";\n\nimport { property, state } from \"lit/decorators.js\";\n\nimport css_248z from \"./chatHeaderAvatarElement.scss.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ class ChatHeaderAvatarElement extends LitElement {\n  constructor() {\n    super(...arguments);\n    this.isLoaded = false;\n  }\n  _handleOnError() {\n    this.onError?.();\n  }\n}\n\nChatHeaderAvatarElement.styles = css`\n    ${unsafeCSS(css_248z)}\n  `;\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderAvatarElement.prototype, \"url\", void 0);\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderAvatarElement.prototype, \"corners\", void 0);\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderAvatarElement.prototype, \"alt\", void 0);\n\n__decorate([ property({\n  type: Object\n}) ], ChatHeaderAvatarElement.prototype, \"onError\", void 0);\n\n__decorate([ state() ], ChatHeaderAvatarElement.prototype, \"isLoaded\", void 0);\n\n__decorate([ bind ], ChatHeaderAvatarElement.prototype, \"_handleOnError\", null);\n\nexport { ChatHeaderAvatarElement };\n","var css_248z = \".cds--aichat-chat-header-avatar{\\n  display:block;\\n  block-size:20px;\\n  max-block-size:20px;\\n}\\n\\n.cds--aichat-chat-header-avatar--round{\\n  border-radius:10px;\\n}\";\n\nexport { css_248z as default };\n","import { __decorate } from \"tslib\";\n\nimport { carbonElement } from \"../../../decorators/customElement.js\";\n\nimport { chatHeaderAvatarTemplate } from \"./src/chatHeaderAvatar.template.js\";\n\nimport { ChatHeaderAvatarElement } from \"./src/chatHeaderAvatarElement.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const CHAT_HEADER_AVATAR_TAG_NAME = \"cds-aichat-chat-header-avatar\";\n\nlet CDSChatHeaderAvatarElement = class CDSChatHeaderAvatarElement extends ChatHeaderAvatarElement {\n  render() {\n    return chatHeaderAvatarTemplate(this);\n  }\n};\n\nCDSChatHeaderAvatarElement = __decorate([ carbonElement(CHAT_HEADER_AVATAR_TAG_NAME) ], CDSChatHeaderAvatarElement);\n\nexport { CHAT_HEADER_AVATAR_TAG_NAME, CDSChatHeaderAvatarElement as default };\n","import \"@carbon/web-components/es-custom/components/skeleton-icon/index.js\";\n\nimport cx from \"classnames\";\n\nimport { html } from \"lit\";\n\nimport { CSS_CLASS_PREFIX } from \"../../../../settings.js\";\n\nimport { CornersType } from \"../../../../../../types/config/CornersType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function chatHeaderAvatarTemplate(classElement) {\n  const {url: url, corners: corners, alt: alt, onError: onError} = classElement;\n  return html`\n    <img\n      class=\"${cx(`${CSS_CLASS_PREFIX}-chat-header-avatar`, {\n    [`${CSS_CLASS_PREFIX}-chat-header-avatar--round`]: corners === CornersType.ROUND\n  })}\"\n      src=\"${url}\"\n      alt=\"${alt}\"\n      @error=\"${onError}\"\n    />\n  `;\n}\n\nexport { chatHeaderAvatarTemplate };\n","import { createComponent } from \"@lit/react\";\n\nimport React from \"react\";\n\nimport CDSChatHeaderAvatarElement, { CHAT_HEADER_AVATAR_TAG_NAME } from \"../../../web-components/components/chatHeader/chatHeaderAvatar/cds-aichat-chat-header-avatar.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const ChatHeaderAvatar = createComponent({\n  tagName: CHAT_HEADER_AVATAR_TAG_NAME,\n  elementClass: CDSChatHeaderAvatarElement,\n  react: React\n});\n\nexport { ChatHeaderAvatar };\n","import { __decorate } from \"tslib\";\n\nimport { LitElement } from \"lit\";\n\nimport { property } from \"lit/decorators.js\";\n\nimport { carbonElement } from \"../../../decorators/customElement.js\";\n\nimport { WEB_COMPONENT_PREFIX } from \"../../../settings.js\";\n\nimport { chatHeaderLinkTemplate } from \"./src/chatHeaderLinkElement.template.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ let ChatHeaderLinkElement = class ChatHeaderLinkElement extends LitElement {\n  constructor() {\n    super(...arguments);\n    this.isNewTab = true;\n  }\n  render() {\n    return chatHeaderLinkTemplate(this);\n  }\n};\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderLinkElement.prototype, \"url\", void 0);\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderLinkElement.prototype, \"label\", void 0);\n\n__decorate([ property({\n  type: Boolean\n}) ], ChatHeaderLinkElement.prototype, \"isNewTab\", void 0);\n\nChatHeaderLinkElement = __decorate([ carbonElement(`${WEB_COMPONENT_PREFIX}-chat-header-link`) ], ChatHeaderLinkElement);\n\nexport { ChatHeaderLinkElement };\n","import \"@carbon/web-components/es-custom/components/button/index.js\";\n\nimport \"@carbon/web-components/es-custom/components/overflow-menu/index.js\";\n\nimport { html } from \"lit\";\n\nimport { ButtonKindEnum } from \"../../../../../../types/utilities/carbonTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function chatHeaderLinkTemplate(customElementClass) {\n  const {label: label, url: url, isNewTab: isNewTab} = customElementClass;\n  return html`<cds-custom-button\n    class=\"WACChatHeaderLink\"\n    href=\"${url}\"\n    target=\"${isNewTab ? \"_blank\" : \"_self\"}\"\n    kind=\"${ButtonKindEnum.GHOST}\"\n    size=\"md\"\n    >${label}</cds-custom-button\n  >`;\n}\n\nexport { chatHeaderLinkTemplate };\n","import { createComponent } from \"@lit/react\";\n\nimport React from \"react\";\n\nimport { ChatHeaderLinkElement } from \"../../../web-components/components/chatHeader/chatHeaderLink/cds-aichat-chat-header-link.js\";\n\nimport { WEB_COMPONENT_PREFIX } from \"../../../web-components/settings.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const ChatHeaderLink = createComponent({\n  tagName: `${WEB_COMPONENT_PREFIX}-chat-header-link`,\n  elementClass: ChatHeaderLinkElement,\n  react: React\n});\n\nexport { ChatHeaderLink };\n","import { Menu } from \"@carbon/react\";\n\nimport React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function ChatHeaderMenu({id: id, className: className, label: label, isOpen: isOpen, target: target, children: children, menuAlignment: menuAlignment, containerRef: containerRef}) {\n  return React.createElement(Menu, {\n    id: id,\n    className: className,\n    open: isOpen,\n    target: target,\n    label: label,\n    size: \"md\",\n    menuAlignment: menuAlignment,\n    mode: \"full\",\n    legacyAutoalign: false,\n    containerRef: containerRef\n  }, children);\n}\n\nexport { ChatHeaderMenu };\n","import ChevronDown from \"@carbon/icons-react/es/ChevronDown.js\";\n\nimport ChevronUp from \"@carbon/icons-react/es/ChevronUp.js\";\n\nimport { Button } from \"@carbon/react\";\n\nimport { useFloating, useInteractions, useClick, useDismiss } from \"@floating-ui/react\";\n\nimport React, { useState } from \"react\";\n\nimport { useUUID } from \"../../../shared/hooks/useUUID.js\";\n\nimport { ChatHeaderMenu } from \"./ChatHeaderMenu.js\";\n\nimport { ButtonKindEnum, ButtonSizeEnum } from \"../../../../types/utilities/carbonTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function ChatHeaderMenuButton(props) {\n  const [isOpen, setIsOpen] = useState(false);\n  const {refs: menuRefs, context: menuContext} = useFloating({\n    open: isOpen,\n    onOpenChange: setIsOpen\n  });\n  const {getReferenceProps: getMenuReferenceProps, getFloatingProps: getMenuFloatingProps} = useInteractions([ useClick(menuContext), useDismiss(menuContext) ]);\n  const id = useUUID();\n  return React.createElement(\"div\", {\n    ref: menuRefs.setReference,\n    \"aria-owns\": id,\n    ...getMenuReferenceProps()\n  }, React.createElement(Button, {\n    size: ButtonSizeEnum.MEDIUM,\n    kind: ButtonKindEnum.GHOST,\n    onClick: () => setIsOpen(!isOpen),\n    renderIcon: isOpen ? ChevronUp : ChevronDown,\n    onMouseDown: event => event.preventDefault(),\n    \"aria-label\": props.ariaLabel,\n    \"aria-haspopup\": true,\n    \"aria-expanded\": isOpen,\n    \"aria-controls\": id\n  }, props.label), React.createElement(ChatHeaderMenu, {\n    id: id,\n    isOpen: isOpen,\n    target: menuRefs.floating.current,\n    label: props.label,\n    containerRef: props.containerRef,\n    menuAlignment: props.menuAlignment\n  }, props.children), React.createElement(\"div\", {\n    ref: menuRefs.setFloating,\n    className: \"WAChatHeaderMenuButton_HostElement\",\n    ...getMenuFloatingProps()\n  }));\n}\n\nexport { ChatHeaderMenuButton };\n","import { MenuItem } from \"@carbon/react\";\n\nimport React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function ChatHeaderMenuItem({label: label, url: url, isNewTab: isNewTab = true, onClick: onClick, children: children}) {\n  return React.createElement(MenuItem, {\n    label: label,\n    onClick: () => {\n      onClick?.();\n      if (url) {\n        window.open(url, isNewTab ? \"_blank\" : \"_self\");\n      }\n    }\n  }, children);\n}\n\nexport { ChatHeaderMenuItem };\n","import { MenuItemRadioGroup } from \"@carbon/react\";\n\nimport React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function ChatHeaderMenuItemRadioGroup(props) {\n  const {label: label, items: items, defaultSelectedItem: defaultSelectedItem, selectedItem: selectedItem, onChange: onChange} = props;\n  return React.createElement(MenuItemRadioGroup, {\n    label: label,\n    items: items,\n    defaultSelectedItem: defaultSelectedItem,\n    selectedItem: selectedItem,\n    onChange: selectedItem => {\n      if (!selectedItem.preventDefault) {\n        onChange(selectedItem);\n      }\n    },\n    itemToString: menuItem => typeof menuItem === \"string\" ? menuItem : menuItem.label || menuItem.value\n  });\n}\n\nexport { ChatHeaderMenuItemRadioGroup };\n","import { Button } from \"@carbon/react\";\n\nimport { useFloating, useInteractions, useClick, useDismiss } from \"@floating-ui/react\";\n\nimport cx from \"classnames\";\n\nimport React, { useState } from \"react\";\n\nimport { useUUID } from \"../../../shared/hooks/useUUID.js\";\n\nimport { ChatHeaderMenu } from \"./ChatHeaderMenu.js\";\n\nimport { ButtonKindEnum, ButtonSizeEnum } from \"../../../../types/utilities/carbonTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function ChatHeaderOverflowMenu(props) {\n  const [isOpen, setIsOpen] = useState(false);\n  const {refs: menuRefs, context: menuContext} = useFloating({\n    open: isOpen,\n    onOpenChange: isOpen => {\n      setIsOpen(isOpen);\n      if (isOpen) {\n        props.onOpen?.();\n      } else {\n        props.onClose?.();\n      }\n    }\n  });\n  const {getReferenceProps: getMenuReferenceProps, getFloatingProps: getMenuFloatingProps} = useInteractions([ useClick(menuContext), useDismiss(menuContext) ]);\n  const id = useUUID();\n  return React.createElement(\"div\", {\n    ref: menuRefs.setReference,\n    \"aria-owns\": id,\n    ...getMenuReferenceProps()\n  }, React.createElement(Button, {\n    className: cx(\"WACChatHeaderOverflowMenu__Button\", props.className),\n    size: ButtonSizeEnum.MEDIUM,\n    kind: ButtonKindEnum.GHOST,\n    onClick: () => setIsOpen(!isOpen),\n    tooltipPosition: props.tooltipPosition,\n    renderIcon: props.renderIcon,\n    onMouseDown: event => event.preventDefault(),\n    iconDescription: props.iconDescription,\n    hasIconOnly: true,\n    \"aria-label\": props.ariaLabel,\n    \"aria-haspopup\": true,\n    \"aria-expanded\": isOpen,\n    \"aria-controls\": id\n  }), React.createElement(ChatHeaderMenu, {\n    id: id,\n    label: props.ariaLabel,\n    isOpen: isOpen,\n    target: menuRefs.floating.current,\n    containerRef: props.containerRef,\n    menuAlignment: props.menuAlignment\n  }, props.children), React.createElement(\"div\", {\n    ref: menuRefs.setFloating,\n    className: \"WACChatHeaderOverflowMenu__HostElement\",\n    ...getMenuFloatingProps()\n  }));\n}\n\nexport { ChatHeaderOverflowMenu };\n","import { __decorate } from \"tslib\";\n\nimport { LitElement, unsafeCSS, css } from \"lit\";\n\nimport { property } from \"lit/decorators.js\";\n\nimport { carbonElement } from \"../../../decorators/customElement.js\";\n\nimport { WEB_COMPONENT_PREFIX } from \"../../../settings.js\";\n\nimport css_248z from \"./src/chatHeaderTitle.scss.js\";\n\nimport { chatHeaderTitleTemplate } from \"./src/chatHeaderTitle.template.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ let ChatHeaderTitleElement = class ChatHeaderTitleElement extends LitElement {\n  render() {\n    return chatHeaderTitleTemplate(this);\n  }\n};\n\nChatHeaderTitleElement.styles = css`\n    ${unsafeCSS(css_248z)}\n  `;\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderTitleElement.prototype, \"title\", void 0);\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderTitleElement.prototype, \"name\", void 0);\n\nChatHeaderTitleElement = __decorate([ carbonElement(`${WEB_COMPONENT_PREFIX}-chat-header-title`) ], ChatHeaderTitleElement);\n\nexport { ChatHeaderTitleElement };\n","import { html } from \"lit\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function chatHeaderTitleTemplate(customElementClass) {\n  const {title: title, name: name} = customElementClass;\n  return html`<div class=\"WACChatHeaderTitle\">\n    <span className=\"WACChatHeaderTitle__Title\" ?hidden=\"${!title}\"\n      >${title}</span\n    >\n    <span class=\"WACChatHeaderTitle__Name\">${name}</span>\n  </div>`;\n}\n\nexport { chatHeaderTitleTemplate };\n","var css_248z = \"cds-chat-header-title{\\n  text-align:center;\\n}\\n\\n.WACChatHeaderTitle{\\n  overflow:hidden;\\n  font-size:var(--cds-chat-BASE-font-size-med);\\n  font-weight:400;\\n  line-height:var(--cds-chat-BASE-line-height-med);\\n  overflow-wrap:break-word;\\n  text-overflow:ellipsis;\\n  white-space:nowrap;\\n  word-wrap:break-word;\\n}\\n\\n.WACChatHeaderTitle .WACChatHeaderTitle__Title:only-child{\\n  padding-inline-end:0.25rem;\\n}\\n\\n.WACChatHeaderTitle__Name{\\n  font-weight:var(--cds-chat-BASE-weight-semibold);\\n}\";\n\nexport { css_248z as default };\n","import { createComponent } from \"@lit/react\";\n\nimport React from \"react\";\n\nimport { ChatHeaderTitleElement } from \"../../../web-components/components/chatHeader/chatHeaderTitle/cds-aichat-chat-header-title.js\";\n\nimport { WEB_COMPONENT_PREFIX } from \"../../../web-components/settings.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const ChatHeaderTitle = createComponent({\n  tagName: `${WEB_COMPONENT_PREFIX}-chat-header-title`,\n  elementClass: ChatHeaderTitleElement,\n  react: React\n});\n\nexport { ChatHeaderTitle };\n","import \"@carbon/web-components/es-custom/components/ai-label/ai-label-action-button.js\";\n\nimport CDSAILabel from \"@carbon/web-components/es-custom/components/ai-label/ai-label.js\";\n\nimport { createComponent } from \"@lit/react\";\n\nimport React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const AISlug = createComponent({\n  tagName: \"cds-custom-ai-label\",\n  elementClass: CDSAILabel,\n  react: React\n});\n\nexport { AISlug };\n","import \"@carbon/web-components/es-custom/components/slug/index.js\";\n\nimport Close from \"@carbon/icons-react/es/Close.js\";\n\nimport CloseLarge from \"@carbon/icons-react/es/CloseLarge.js\";\n\nimport DownToBottom from \"@carbon/icons-react/es/DownToBottom.js\";\n\nimport Menu from \"@carbon/icons-react/es/Menu.js\";\n\nimport Restart from \"@carbon/icons-react/es/Restart.js\";\n\nimport SidePanelClose from \"@carbon/icons-react/es/SidePanelClose.js\";\n\nimport SubtractLarge from \"@carbon/icons-react/es/SubtractLarge.js\";\n\nimport { MenuItem, Button, MenuItemDivider } from \"@carbon/react\";\n\nimport { AI_LABEL_SIZE } from \"@carbon/web-components/es-custom/components/ai-label/defs.js\";\n\nimport { POPOVER_ALIGNMENT } from \"@carbon/web-components/es-custom/components/popover/defs.js\";\n\nimport cx from \"classnames\";\n\nimport React, { forwardRef, useRef, useState, useContext, useCallback, useImperativeHandle, useEffect, Fragment } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { ChatHeaderObjectType } from \"../../../../types/config/ChatHeaderConfig.js\";\n\nimport { ChatHeaderAvatar } from \"../../../react/components/chatHeader/ChatHeaderAvatar.js\";\n\nimport { ChatHeaderLink } from \"../../../react/components/chatHeader/ChatHeaderLink.js\";\n\nimport { ChatHeaderMenuButton } from \"../../../react/components/chatHeader/ChatHeaderMenuButton.js\";\n\nimport { ChatHeaderMenuItem } from \"../../../react/components/chatHeader/ChatHeaderMenuItem.js\";\n\nimport { ChatHeaderMenuItemRadioGroup } from \"../../../react/components/chatHeader/ChatHeaderMenuItemRadioGroup.js\";\n\nimport { ChatHeaderOverflowMenu } from \"../../../react/components/chatHeader/ChatHeaderOverflowMenu.js\";\n\nimport { ChatHeaderTitle } from \"../../../react/components/chatHeader/ChatHeaderTitle.js\";\n\nimport { HideComponentContext } from \"../../contexts/HideComponentContext.js\";\n\nimport { useLanguagePack } from \"../../hooks/useLanguagePack.js\";\n\nimport { usePrevious } from \"../../hooks/usePrevious.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport actions from \"../../store/actions.js\";\n\nimport { ChatWidthBreakpoint } from \"../../../../types/state/AppState.js\";\n\nimport \"../../utils/constants.js\";\n\nimport { doFocusRef } from \"../../utils/domUtils.js\";\n\nimport { ConfirmModal } from \"../modals/ConfirmModal.js\";\n\nimport WriteableElement from \"../WriteableElement.js\";\n\nimport { AISlug } from \"./AISlug.js\";\n\nimport { ButtonSizeEnum, ButtonKindEnum } from \"../../../../types/utilities/carbonTypes.js\";\n\nimport { MinimizeButtonIconType } from \"../../../../types/config/PublicConfig.js\";\n\nimport { makeTestId, PageObjectId } from \"../../utils/PageObjectId.js\";\n\nimport { WriteableElementName } from \"../../../../types/instance/ChatInstance.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst HEADER_OBJECTS_GAP_MIN_SIZE = 100;\n\nfunction Header(props, ref) {\n  const {displayName: displayName, backContent: backContent, showRestartButton: showRestartButton, showBackButton: showBackButton, useAITheme: useAITheme, labelBackButton: labelBackButton, onClickClose: onClickClose, onClickRestart: onClickRestart, onCloseAndRestart: onCloseAndRestart, onClickBack: onClickBack, overflowItems: overflowItems, overflowClicked: overflowClicked, backButtonType: backButtonType, showCenter: showCenter, hideCloseButton: hideCloseButton, hideCloseAndRestartButton: hideCloseAndRestartButton, brandColor: brandColor = \"primary\", enableChatHeaderConfig: enableChatHeaderConfig, headerAvatarConfig: headerAvatarConfig, testIdPrefix: testIdPrefix} = props;\n  const backButtonRef = useRef();\n  const restartButtonRef = useRef();\n  const closeAndRestartButtonRef = useRef();\n  const closeButtonRef = useRef();\n  const centerObjectsRef = useRef();\n  const centerGapRef = useRef();\n  const overflowRef = useRef();\n  const serviceManager = useServiceManager();\n  const languagePack = useLanguagePack();\n  const publicConfig = useSelector(state => state.config.public);\n  const chatHeaderConfig = useSelector(state => state.chatHeaderState.config);\n  const chatWidthBreakpoint = useSelector(state => state.chatWidthBreakpoint);\n  const maxVisibleHeaderObjects = useSelector(state => state.chatHeaderState.maxVisibleHeaderObjects);\n  const [overflowIsOpen, setOverflowIsOpen] = useState(false);\n  const [confirmModelOpen, setConfirmModelOpen] = useState(false);\n  const [selectedGroupMenuitems, setSelectedGroupMenuItems] = useState({});\n  const [isImageError, setIsImageError] = useState(false);\n  const hasHeaderAvatar = Boolean(headerAvatarConfig) && !isImageError;\n  const isHidden = useContext(HideComponentContext);\n  const prevChatHeaderAvatarURL = usePrevious(headerAvatarConfig?.url);\n  const {headerConfig: headerConfig} = publicConfig;\n  const isWideWidth = chatWidthBreakpoint === ChatWidthBreakpoint.WIDE;\n  const chatHeaderTitle = enableChatHeaderConfig ? chatHeaderConfig?.headerTitle?.title : undefined;\n  const chatHeaderName = enableChatHeaderConfig ? chatHeaderConfig?.headerTitle?.name : undefined;\n  const chatHeaderDisplayName = chatHeaderName || displayName;\n  const closeConfirmModel = useCallback(() => {\n    setConfirmModelOpen(false);\n  }, []);\n  const showCloseAndRestartButton = headerConfig?.showCloseAndRestartButton && !hideCloseAndRestartButton && onCloseAndRestart;\n  const useHideCloseButton = headerConfig?.hideMinimizeButton || hideCloseButton;\n  let closeIcon;\n  let closeReverseIcon = false;\n  let closeIsReversible = true;\n  const minimizeButtonIconType = headerConfig?.minimizeButtonIconType;\n  switch (minimizeButtonIconType) {\n   case MinimizeButtonIconType.CLOSE:\n    closeIcon = React.createElement(CloseLarge, {\n      className: \"WACIcon__Close\",\n      size: 16\n    });\n    break;\n\n   case MinimizeButtonIconType.MINIMIZE:\n    closeIcon = React.createElement(SubtractLarge, {\n      className: \"WACIcon__Subtract\",\n      size: 16\n    });\n    break;\n\n   case MinimizeButtonIconType.SIDE_PANEL_LEFT:\n    closeIsReversible = false;\n    closeIcon = React.createElement(SidePanelClose, {\n      className: \"WACIcon__SidePanelClose\"\n    });\n    break;\n\n   case MinimizeButtonIconType.SIDE_PANEL_RIGHT:\n    closeIsReversible = false;\n    closeReverseIcon = true;\n    closeIcon = React.createElement(SidePanelClose, {\n      className: \"WACIcon__SidePanelClose\"\n    });\n    break;\n\n   default:\n    {\n      closeIcon = React.createElement(SubtractLarge, {\n        className: \"WACIcon__Subtract\",\n        size: 16\n      });\n      break;\n    }\n  }\n  if (showCloseAndRestartButton && showRestartButton) {\n    throw new Error(\"You cannot enable both the restart button and the close-and-restart buttons.\");\n  }\n  const onConfirm = useCallback(() => {\n    setConfirmModelOpen(false);\n    onCloseAndRestart();\n  }, [ onCloseAndRestart ]);\n  useImperativeHandle(ref, () => ({\n    requestFocus: () => {\n      if (closeButtonRef.current) {\n        doFocusRef(closeButtonRef, false, true);\n        return true;\n      }\n      if (backButtonRef.current) {\n        doFocusRef(backButtonRef, false, true);\n        return true;\n      }\n      if (restartButtonRef.current) {\n        doFocusRef(restartButtonRef, false, true);\n        return true;\n      }\n      return false;\n    }\n  }));\n  function getComponentInMenu(item, index, list) {\n    switch (item.type) {\n     case ChatHeaderObjectType.LINK:\n      return React.createElement(ChatHeaderMenuItem, {\n        key: index,\n        label: item.label,\n        url: item.url,\n        isNewTab: item.isNewTab,\n        onClick: () => {\n          doFocusRef(overflowRef);\n        }\n      });\n\n     case ChatHeaderObjectType.BUTTON:\n      return React.createElement(ChatHeaderMenuItem, {\n        key: index,\n        label: item.label,\n        onClick: () => {\n          item.onClick?.();\n          doFocusRef(overflowRef);\n        }\n      });\n\n     case ChatHeaderObjectType.RADIO_GROUP:\n      {\n        const nextObject = list[index + 1];\n        return React.createElement(Fragment, {\n          key: index\n        }, index !== 0 && React.createElement(MenuItemDivider, null), React.createElement(ChatHeaderMenuItemRadioGroup, {\n          label: item.label,\n          items: item.items,\n          defaultSelectedItem: item.defaultSelectedItem,\n          selectedItem: selectedGroupMenuitems[item.label],\n          onChange: selectedItem => {\n            setSelectedGroupMenuItems(prevState => ({\n              ...prevState,\n              [item.label]: selectedItem\n            }));\n            item.onChange?.(selectedItem);\n          }\n        }), Boolean(nextObject) && nextObject.type !== ChatHeaderObjectType.RADIO_GROUP && React.createElement(MenuItemDivider, null));\n      }\n\n     case ChatHeaderObjectType.MENU:\n      return React.createElement(ChatHeaderMenuItem, {\n        key: index,\n        label: item.label\n      }, item.items.filter(menuItem => menuItem.type !== ChatHeaderObjectType.MENU).map(getComponentInMenu));\n\n     default:\n      return null;\n    }\n  }\n  function getComponentInChatHeader(headerObject, index) {\n    switch (headerObject.type) {\n     case ChatHeaderObjectType.LINK:\n      return React.createElement(ChatHeaderLink, {\n        key: index,\n        label: headerObject.label,\n        url: headerObject.url,\n        isNewTab: headerObject.isNewTab\n      });\n\n     case ChatHeaderObjectType.MENU:\n      return React.createElement(ChatHeaderMenuButton, {\n        key: index,\n        label: headerObject.label,\n        menuAlignment: \"bottom-start\"\n      }, headerObject.items.map(getComponentInMenu));\n\n     case ChatHeaderObjectType.BUTTON:\n      return React.createElement(Button, {\n        key: index,\n        kind: ButtonKindEnum.GHOST,\n        size: ButtonSizeEnum.MEDIUM,\n        onClick: headerObject.onClick\n      }, headerObject.label);\n\n     default:\n      return null;\n    }\n  }\n  let leftObjectsLength = 0;\n  let rightObjectsLength = 0;\n  if (enableChatHeaderConfig) {\n    leftObjectsLength = chatHeaderConfig?.left?.length ?? 0;\n    rightObjectsLength = chatHeaderConfig?.right?.length ?? 0;\n  }\n  const isLeftObjectsInOverflow = leftObjectsLength > maxVisibleHeaderObjects;\n  const isRightObjectsInOverflow = rightObjectsLength > maxVisibleHeaderObjects;\n  const hasChatHeaderObjects = leftObjectsLength || rightObjectsLength;\n  const renderChatHeaderObjectsInOverflow = hasChatHeaderObjects && (!isWideWidth || isLeftObjectsInOverflow || isRightObjectsInOverflow);\n  const hasOverflow = Boolean(overflowItems?.length) || renderChatHeaderObjectsInOverflow;\n  const isRTL = document.dir === \"rtl\";\n  let leftChatHeaderComponents = null;\n  let rightChatHeaderComponents = null;\n  let leftChatHeaderMenuComponents = null;\n  let rightChatHeaderMenuComponents = null;\n  if (enableChatHeaderConfig) {\n    leftChatHeaderComponents = chatHeaderConfig?.left?.slice(0, isLeftObjectsInOverflow ? maxVisibleHeaderObjects : undefined).map(getComponentInChatHeader);\n    rightChatHeaderComponents = chatHeaderConfig?.right?.slice(0, isRightObjectsInOverflow ? maxVisibleHeaderObjects : undefined).map(getComponentInChatHeader);\n    leftChatHeaderMenuComponents = isLeftObjectsInOverflow && chatHeaderConfig?.left?.slice(maxVisibleHeaderObjects).map(getComponentInMenu);\n    rightChatHeaderMenuComponents = isRightObjectsInOverflow && chatHeaderConfig?.right?.slice(maxVisibleHeaderObjects).map(getComponentInMenu);\n  }\n  let leftContent;\n  if (hasOverflow) {\n    leftContent = React.createElement(ChatHeaderOverflowMenu, {\n      className: \"WACHeader__OverflowMenu\",\n      renderIcon: overflowIsOpen ? Close : Menu,\n      iconDescription: languagePack.header_overflowMenu_options,\n      ariaLabel: languagePack.components_overflow_ariaLabel,\n      containerRef: overflowRef,\n      tooltipPosition: isRTL ? \"left\" : \"right\",\n      menuAlignment: \"bottom-start\",\n      onOpen: () => {\n        setTimeout(() => {\n          setOverflowIsOpen(true);\n        });\n      },\n      onClose: () => {\n        setOverflowIsOpen(false);\n      }\n    }, overflowItems?.map((item, index) => React.createElement(MenuItem, {\n      key: item,\n      label: item,\n      onClick: () => {\n        doFocusRef(overflowRef);\n        overflowClicked(index);\n      }\n    })), leftChatHeaderMenuComponents, rightChatHeaderMenuComponents);\n  } else if (showBackButton) {\n    leftContent = React.createElement(HeaderButton, {\n      className: \"WACHeader__BackButton\",\n      label: labelBackButton,\n      onClick: onClickBack,\n      buttonRef: backButtonRef,\n      buttonKind: backButtonType,\n      tooltipPosition: isRTL ? \"left\" : \"right\"\n    }, backContent || React.createElement(DownToBottom, null));\n  }\n  useEffect(() => {\n    if (!isWideWidth) {\n      serviceManager.store.dispatch(actions.setMaxVisibleHeaderObjects(0));\n      return undefined;\n    }\n    if (!enableChatHeaderConfig) {\n      return undefined;\n    }\n    const centerResizeObserver = new ResizeObserver(() => {\n      const centerGapElement = centerGapRef.current;\n      if (centerGapElement) {\n        if (centerGapElement.offsetWidth > HEADER_OBJECTS_GAP_MIN_SIZE || centerGapElement.offsetWidth === 0) {\n          let newTotal = Math.floor((centerObjectsRef.current.offsetWidth - HEADER_OBJECTS_GAP_MIN_SIZE) / (HEADER_OBJECTS_GAP_MIN_SIZE * 2));\n          if (newTotal < 0) {\n            newTotal = 0;\n          }\n          setTimeout(() => {\n            serviceManager.store.dispatch(actions.setMaxVisibleHeaderObjects(newTotal));\n          });\n        }\n      }\n    });\n    centerResizeObserver.observe(centerObjectsRef.current);\n    return () => {\n      centerResizeObserver.disconnect();\n    };\n  }, [ isWideWidth, enableChatHeaderConfig, serviceManager ]);\n  useEffect(() => {\n    if (isImageError && prevChatHeaderAvatarURL !== headerAvatarConfig?.url) {\n      setIsImageError(false);\n    }\n  }, [ prevChatHeaderAvatarURL, headerAvatarConfig?.url, isImageError ]);\n  return React.createElement(\"div\", {\n    className: cx(\"WACHeader\", `WAC--${brandColor}Color`, {\n      \"WACHeader--withAvatar\": hasHeaderAvatar\n    })\n  }, React.createElement(\"div\", {\n    className: cx(\"WACHeader--content\", `WAC--${brandColor}Color`),\n    \"data-floating-menu-container\": true\n  }, leftContent && React.createElement(\"div\", {\n    className: \"WACHeader__Buttons WACHeader__LeftButtons\"\n  }, leftContent), showCenter && React.createElement(\"div\", {\n    className: \"WACHeader__CenterContainer\"\n  }, hasHeaderAvatar && React.createElement(ChatHeaderAvatar, {\n    url: headerAvatarConfig.url,\n    corners: headerAvatarConfig.corners,\n    alt: languagePack.header_ariaBotAvatar,\n    onError: () => setIsImageError(true)\n  }), (chatHeaderTitle || chatHeaderDisplayName) && React.createElement(\"div\", {\n    className: \"WACHeader__TitleContainer\"\n  }, React.createElement(ChatHeaderTitle, {\n    title: chatHeaderTitle,\n    name: chatHeaderDisplayName\n  })), isWideWidth && Boolean(leftObjectsLength) && React.createElement(\"div\", {\n    className: \"WACHeader__Separator\"\n  }), React.createElement(\"div\", {\n    ref: centerObjectsRef,\n    className: \"WACHeader__HeaderObjects\"\n  }, isWideWidth && Boolean(leftObjectsLength) && React.createElement(\"div\", {\n    className: \"WACHeader__LeftItems\"\n  }, leftChatHeaderComponents), React.createElement(\"div\", {\n    ref: centerGapRef,\n    className: \"WACHeader__CenterGap\"\n  }), isWideWidth && Boolean(rightObjectsLength) && React.createElement(\"div\", {\n    className: \"WACHeader__RightItems\"\n  }, rightChatHeaderComponents))), React.createElement(\"div\", {\n    className: \"WACHeader__Buttons WACHeader__RightButtons\"\n  }, useAITheme && React.createElement(AISlug, {\n    className: \"WACHeader__Slug\",\n    size: AI_LABEL_SIZE.EXTRA_SMALL,\n    alignment: isRTL ? POPOVER_ALIGNMENT.BOTTOM_LEFT : POPOVER_ALIGNMENT.BOTTOM_RIGHT\n  }, React.createElement(\"div\", {\n    slot: \"body-text\"\n  }, React.createElement(\"h4\", {\n    className: \"WACHeader__Slug-title\"\n  }, languagePack.ai_slug_title), React.createElement(\"div\", {\n    className: \"WACHeader__Slug-description\"\n  }, React.createElement(\"div\", null, languagePack.ai_slug_description), !isHidden && React.createElement(WriteableElement, {\n    slotName: WriteableElementName.AI_TOOLTIP_AFTER_DESCRIPTION_ELEMENT,\n    id: `aiTooltipAfterDescription${serviceManager.namespace.suffix}`\n  })))), showRestartButton && React.createElement(HeaderButton, {\n    className: \"WACHeader__RestartButton\",\n    label: languagePack.buttons_restart,\n    onClick: onClickRestart,\n    buttonRef: restartButtonRef,\n    tooltipPosition: isRTL ? \"right\" : \"left\"\n  }, React.createElement(Restart, null)), !useHideCloseButton && React.createElement(HeaderButton, {\n    className: cx(\"WACHeader__CloseButton\", {\n      WACReverseIcon: closeReverseIcon\n    }),\n    isReversible: closeIsReversible,\n    label: languagePack.launcher_isOpen,\n    onClick: async () => {\n      onClickClose();\n    },\n    buttonRef: closeButtonRef,\n    tooltipPosition: isRTL ? \"right\" : \"left\",\n    testId: makeTestId(PageObjectId.CLOSE_CHAT, testIdPrefix)\n  }, closeIcon), showCloseAndRestartButton && React.createElement(HeaderButton, {\n    className: \"WACHeader__CloseAndRestartButton\",\n    label: languagePack.header_ariaCloseRestart,\n    onClick: () => setConfirmModelOpen(true),\n    buttonRef: closeAndRestartButtonRef,\n    tooltipPosition: isRTL ? \"right\" : \"left\"\n  }, React.createElement(CloseLarge, {\n    className: \"WACIcon__Close\"\n  }))), confirmModelOpen && React.createElement(ConfirmModal, {\n    title: languagePack.closeAndRestartModal_title,\n    message: languagePack.closeAndRestartModal_message,\n    onConfirm: onConfirm,\n    onCancel: closeConfirmModel,\n    cancelButtonLabel: languagePack.closeAndRestartModal_cancel,\n    confirmButtonLabel: languagePack.closeAndRestartModal_confirm,\n    modalAnnounceMessage: languagePack.closeAndRestartModal_message,\n    serviceManager: serviceManager\n  })));\n}\n\nfunction HeaderButton({onClick: onClick, buttonRef: buttonRef, label: label, className: className, children: children, buttonKind: buttonKind, isReversible: isReversible = true, tooltipPosition: tooltipPosition, testId: testId}) {\n  return React.createElement(Button, {\n    ref: buttonRef,\n    className: cx(className, {\n      WACDirectionHasReversibleSVG: isReversible\n    }),\n    onClick: onClick,\n    hasIconOnly: true,\n    iconDescription: label,\n    size: ButtonSizeEnum.MEDIUM,\n    kind: buttonKind || ButtonKindEnum.GHOST,\n    tooltipPosition: tooltipPosition,\n    \"data-testid\": testId\n  }, children);\n}\n\nconst HeaderExport = React.memo(forwardRef(Header));\n\nexport { HeaderExport as Header };\n","import React from \"react\";\n\nimport { isElement, isInputNode, isTextAreaNode, isImageNode, isTextNode } from \"../../utils/domUtils.js\";\n\nimport VisuallyHidden from \"../util/VisuallyHidden.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst ANNOUNCE_INPUT_TYPES = new Set([ \"button\", \"date\", \"datetime-local\", \"email\", \"file\", \"month\", \"number\", \"range\", \"reset\", \"search\", \"submit\", \"tel\", \"text\", \"time\", \"url\", \"week\" ]);\n\nconst ANNOUNCE_NODE_EXCLUDE_ATTRIBUTE = \"data-wac-exclude-node-read\";\n\nclass AriaAnnouncerComponent extends React.PureComponent {\n  constructor() {\n    super(...arguments);\n    this.ref1 = React.createRef();\n    this.ref2 = React.createRef();\n    this.useRef1 = true;\n    this.doAnnouncements = () => {\n      const strings = [];\n      this.pendingValues.forEach(elementToAnnounce => {\n        if (typeof elementToAnnounce === \"string\") {\n          strings.push(elementToAnnounce);\n        } else {\n          nodeToText(elementToAnnounce, strings);\n        }\n      });\n      const useElement = this.useRef1 ? this.ref1.current : this.ref2.current;\n      if (useElement) {\n        useElement.innerText = strings.join(\" \");\n        const clearElement = this.useRef1 ? this.ref2.current : this.ref1.current;\n        clearElement.innerHTML = \"\";\n      }\n      this.useRef1 = !this.useRef1;\n      this.pendingValues = null;\n    };\n  }\n  announceValue(value) {\n    if (!value) {\n      return;\n    }\n    if (!this.pendingValues) {\n      this.pendingValues = [];\n      setTimeout(this.doAnnouncements, 250);\n    }\n    if (typeof value === \"string\" || hasNodeType(value)) {\n      this.pendingValues.push(value);\n    } else if (value.messageID) {\n      const formattedMessage = this.props.intl.formatMessage({\n        id: value.messageID\n      }, value.messageValues);\n      this.pendingValues.push(formattedMessage);\n    } else {\n      this.pendingValues.push(value.messageText);\n    }\n  }\n  render() {\n    return React.createElement(VisuallyHidden, {\n      className: \"WACAriaAnnouncer\"\n    }, React.createElement(\"div\", {\n      ref: this.ref1,\n      \"aria-live\": \"polite\"\n    }), React.createElement(\"div\", {\n      ref: this.ref2,\n      \"aria-live\": \"polite\"\n    }));\n  }\n}\n\nfunction nodeToText(node, strings) {\n  if (isElement(node)) {\n    if (window.getComputedStyle(node).display !== \"none\" && node.getAttribute(\"aria-hidden\") !== \"true\" && !node.hasAttribute(ANNOUNCE_NODE_EXCLUDE_ATTRIBUTE)) {\n      trimAndPush(node.getAttribute(\"aria-label\"), strings);\n      if (isInputNode(node) && ANNOUNCE_INPUT_TYPES.has(node.type.toLowerCase())) {\n        if (node.value === \"\") {\n          trimAndPush(node.placeholder, strings);\n        } else {\n          trimAndPush(node.value, strings);\n        }\n      } else if (isTextAreaNode(node)) {\n        if (node.value === \"\") {\n          trimAndPush(node.placeholder, strings);\n        }\n      } else if (isImageNode(node)) {\n        trimAndPush(node.alt, strings);\n      }\n      if (node.shadowRoot) {\n        node.shadowRoot.childNodes?.forEach(childNode => {\n          nodeToText(childNode, strings);\n        });\n      }\n      if (node.childNodes) {\n        node.childNodes.forEach(childNode => {\n          nodeToText(childNode, strings);\n        });\n      }\n    }\n  } else if (isTextNode(node)) {\n    trimAndPush(node.data, strings);\n  }\n}\n\nfunction trimAndPush(value, strings) {\n  if (value) {\n    value = value.trim();\n    if (value) {\n      strings.push(value.replaceAll(\"\\n\", \" \"));\n    }\n  }\n}\n\nfunction hasNodeType(value) {\n  return value.nodeType !== undefined;\n}\n\nexport { AriaAnnouncerComponent, nodeToText };\n","import React, { forwardRef, useRef, useImperativeHandle, useCallback } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { Header as HeaderExport } from \"../header/Header.js\";\n\nimport { OverlayPanelName } from \"../OverlayPanel.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function HomeScreenHeader(props, ref) {\n  const {brandColor: brandColor, onClose: onClose, onRestart: onRestart, onCloseAndRestart: onCloseAndRestart} = props;\n  const showRestartButton = useSelector(state => state.config.public.showRestartButton || state.config.public.headerConfig?.showRestartButton);\n  const showBackButton = useSelector(state => state.persistedToBrowserStorage.chatState.homeScreenState.showBackToBot);\n  const displayName = useSelector(state => state.headerDisplayName);\n  const customMenuOptions = useSelector(state => state.customMenuOptions);\n  const useAITheme = useSelector(state => state.theme.useAITheme);\n  const headerRef = useRef();\n  useImperativeHandle(ref, () => headerRef.current);\n  const hideCloseAndRestartButton = !showBackButton;\n  const overflowClicked = useCallback(index => {\n    const {handler: handler} = customMenuOptions[index];\n    handler();\n  }, [ customMenuOptions ]);\n  const overflowItems = customMenuOptions?.map(option => option.text);\n  return React.createElement(\"div\", {\n    className: \"WACHomeScreenHeader\"\n  }, React.createElement(HeaderExport, {\n    ref: headerRef,\n    displayName: displayName,\n    showCenter: true,\n    showRestartButton: showRestartButton,\n    hideCloseAndRestartButton: hideCloseAndRestartButton,\n    onClickRestart: onRestart,\n    onClickClose: onClose,\n    onCloseAndRestart: onCloseAndRestart,\n    overflowClicked: overflowClicked,\n    overflowItems: overflowItems,\n    useAITheme: useAITheme,\n    brandColor: brandColor,\n    testIdPrefix: OverlayPanelName.HOME_SCREEN\n  }));\n}\n\nconst HomeScreenHeaderExport = React.memo(forwardRef(HomeScreenHeader));\n\nexport { HomeScreenHeaderExport as HomeScreenHeader };\n","import dayjs from \"dayjs\";\n\nimport enLocaleData from \"dayjs/locale/en.js\";\n\nimport IntlMessageFormat from \"intl-messageformat\";\n\nimport React from \"react\";\n\nimport { consoleError } from \"./miscUtils.js\";\n\nimport \"../../../types/instance/apiTypes.js\";\n\nimport enLanguagePack from \"../../languages/en.json.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const locales = {\n  ar: () => import(\"dayjs/locale/ar.js\"),\n  \"ar-dz\": () => import(\"dayjs/locale/ar-dz.js\"),\n  \"ar-kw\": () => import(\"dayjs/locale/ar-kw.js\"),\n  \"ar-ly\": () => import(\"dayjs/locale/ar-ly.js\"),\n  \"ar-ma\": () => import(\"dayjs/locale/ar-ma.js\"),\n  \"ar-sa\": () => import(\"dayjs/locale/ar-sa.js\"),\n  \"ar-tn\": () => import(\"dayjs/locale/ar-tn.js\"),\n  cs: () => import(\"dayjs/locale/cs.js\"),\n  de: () => import(\"dayjs/locale/de.js\"),\n  \"de-at\": () => import(\"dayjs/locale/de-at.js\"),\n  \"de-ch\": () => import(\"dayjs/locale/de-ch.js\"),\n  en: () => import(\"dayjs/locale/en.js\"),\n  \"en-au\": () => import(\"dayjs/locale/en-au.js\"),\n  \"en-ca\": () => import(\"dayjs/locale/en-ca.js\"),\n  \"en-gb\": () => import(\"dayjs/locale/en-gb.js\"),\n  \"en-ie\": () => import(\"dayjs/locale/en-ie.js\"),\n  \"en-il\": () => import(\"dayjs/locale/en-il.js\"),\n  \"en-nz\": () => import(\"dayjs/locale/en-nz.js\"),\n  es: () => import(\"dayjs/locale/es.js\"),\n  \"es-do\": () => import(\"dayjs/locale/es-do.js\"),\n  \"es-us\": () => import(\"dayjs/locale/es-us.js\"),\n  nl: () => import(\"dayjs/locale/nl.js\"),\n  fr: () => import(\"dayjs/locale/fr.js\"),\n  \"fr-ca\": () => import(\"dayjs/locale/fr-ca.js\"),\n  \"fr-ch\": () => import(\"dayjs/locale/fr-ch.js\"),\n  it: () => import(\"dayjs/locale/it.js\"),\n  \"it-ch\": () => import(\"dayjs/locale/it-ch.js\"),\n  ja: () => import(\"dayjs/locale/ja.js\"),\n  ko: () => import(\"dayjs/locale/ko.js\"),\n  pt: () => import(\"dayjs/locale/pt.js\"),\n  \"pt-br\": () => import(\"dayjs/locale/pt-br.js\"),\n  zh: () => import(\"dayjs/locale/zh-cn.js\"),\n  \"zh-cn\": () => import(\"dayjs/locale/zh-cn.js\"),\n  \"zh-tw\": () => import(\"dayjs/locale/zh-tw.js\"),\n  \"zh-mo\": () => import(\"dayjs/locale/zh-tw.js\"),\n  \"zh-hk\": () => import(\"dayjs/locale/zh-tw.js\")\n};\n\nfunction isSupportedLocale(locale, object) {\n  if (!locale) {\n    return null;\n  }\n  locale = locale.toLowerCase().replace(/_/g, \"-\");\n  if (object[locale]) {\n    return locale;\n  }\n  const language = locale.substring(0, 2);\n  if (object[language]) {\n    return language;\n  }\n  return null;\n}\n\nfunction findSupportedKey(requestedLocale, object, objectType) {\n  const requestedSupported = isSupportedLocale(requestedLocale, object);\n  if (requestedSupported) {\n    return requestedSupported;\n  }\n  if (requestedLocale) {\n    const keyList = JSON.stringify(Object.keys(object));\n    consoleError(`The requested locale \"${requestedLocale}\" does not contain a supported ${objectType}. We are defaulting to \"en\". The supported values are ${keyList}.`);\n  }\n  return \"en\";\n}\n\nasync function loadLocale(requestedLocale) {\n  try {\n    const localeKey = findSupportedKey(requestedLocale, locales, \"locale\");\n    const localeModule = await locales[localeKey]();\n    if (localeModule) {\n      return localeModule.default;\n    }\n    consoleError(`The locale data for \"${localeKey}\" did not load. The application will default to \"en\".`);\n  } catch (error) {\n    consoleError(`An error occurred loading the locale data for \"${requestedLocale}\". The application will default to \"en\".`, error);\n  }\n  return enLocaleData;\n}\n\nasync function loadLanguagePack(providedLanguagePack) {\n  if (providedLanguagePack) {\n    return fillWithEnglish(providedLanguagePack);\n  }\n  return enLanguagePack;\n}\n\nfunction fillWithEnglish(languagePack) {\n  return {\n    ...enLanguagePack,\n    ...languagePack\n  };\n}\n\nfunction handleBTag(chunks) {\n  return React.createElement(\"b\", null, chunks);\n}\n\nfunction handleBRTag() {\n  return React.createElement(\"br\", null);\n}\n\nfunction addHTMLSupport(values) {\n  values.b = handleBTag;\n  values.br = handleBRTag;\n  return values;\n}\n\nasync function loadDayjsLocale(locale) {\n  if (!dayjs.Ls[locale]) {\n    const previousLocale = dayjs.locale();\n    const localePack = await loadLocale(locale);\n    dayjs.locale(localePack);\n    dayjs.locale(previousLocale);\n    const isLoaded = Boolean(dayjs.Ls[locale]);\n    if (!isLoaded && locale.length === 2) {\n      throw Error(\"Locale is not recognized.\");\n    } else if (!isLoaded) {\n      return loadDayjsLocale(locale.substring(0, 2));\n    }\n  }\n  return locale;\n}\n\nfunction formatMessage(intl, id, values) {\n  return intl.formatMessage({\n    id: id\n  }, values);\n}\n\nfunction createEnglishFormat(key) {\n  return new IntlMessageFormat(enLanguagePack[key], \"en-US\");\n}\n\nexport { addHTMLSupport, createEnglishFormat, formatMessage, loadDayjsLocale, loadLanguagePack, loadLocale };\n","import { useContext } from \"react\";\n\nimport { LanguagePackContext } from \"../contexts/LanguagePackContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function useLanguagePack() {\n  return useContext(LanguagePackContext);\n}\n\nexport { useLanguagePack };\n","import cx from \"classnames\";\n\nimport React from \"react\";\n\nimport { HideComponentContext } from \"../../contexts/HideComponentContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function HideComponent(props) {\n  const {hidden: hidden, children: children, className: className, ...htmlAttributes} = props;\n  return React.createElement(HideComponentContext.Provider, {\n    value: hidden\n  }, React.createElement(\"div\", {\n    className: cx(className, {\n      WAC__hidden: hidden\n    }),\n    ...htmlAttributes\n  }, children));\n}\n\nexport { HideComponent };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const WindowSizeContext = React.createContext(null);\n\nexport { WindowSizeContext };\n","export { CarbonTheme } from \"../config/PublicConfig.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ var CarbonThemeClassNames;\n\n(function(CarbonThemeClassNames) {\n  CarbonThemeClassNames[\"WHITE\"] = \"cds--white\";\n  CarbonThemeClassNames[\"G10\"] = \"cds--g10\";\n  CarbonThemeClassNames[\"G90\"] = \"cds--g90\";\n  CarbonThemeClassNames[\"G100\"] = \"cds--g100\";\n})(CarbonThemeClassNames || (CarbonThemeClassNames = {}));\n\nvar ButtonKindEnum;\n\n(function(ButtonKindEnum) {\n  ButtonKindEnum[\"PRIMARY\"] = \"primary\";\n  ButtonKindEnum[\"SECONDARY\"] = \"secondary\";\n  ButtonKindEnum[\"DANGER\"] = \"danger\";\n  ButtonKindEnum[\"GHOST\"] = \"ghost\";\n  ButtonKindEnum[\"DANGER_PRIMARY\"] = \"danger--primary\";\n  ButtonKindEnum[\"DANGER_GHOST\"] = \"danger--ghost\";\n  ButtonKindEnum[\"DANGER_TERTIARY\"] = \"danger--tertiary\";\n  ButtonKindEnum[\"TERTIARY\"] = \"tertiary\";\n})(ButtonKindEnum || (ButtonKindEnum = {}));\n\nvar ButtonSizeEnum;\n\n(function(ButtonSizeEnum) {\n  ButtonSizeEnum[\"SMALL\"] = \"sm\";\n  ButtonSizeEnum[\"MEDIUM\"] = \"md\";\n  ButtonSizeEnum[\"LARGE\"] = \"lg\";\n  ButtonSizeEnum[\"XLARGE\"] = \"xl\";\n  ButtonSizeEnum[\"XXLARGE\"] = \"2xl\";\n})(ButtonSizeEnum || (ButtonSizeEnum = {}));\n\nexport { ButtonKindEnum, ButtonSizeEnum, CarbonThemeClassNames };\n","import { useContext } from \"react\";\n\nimport { ServiceManagerContext } from \"../contexts/ServiceManagerContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function useServiceManager() {\n  return useContext(ServiceManagerContext);\n}\n\nexport { useServiceManager };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const ModalPortalRootContext = React.createContext(null);\n\nexport { ModalPortalRootContext };\n","import { v4 } from \"uuid\";\n\nexport { UUIDType } from \"./UUIDType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function uuid(_type) {\n  return v4();\n}\n\nexport { uuid };\n","import React, { useContext, useEffect } from \"react\";\n\nimport { AriaAnnouncerContext } from \"../../contexts/AriaAnnouncerContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function AriaLiveMessage(props) {\n  const ariaAnnouncer = useContext(AriaAnnouncerContext);\n  useEffect(() => {\n    ariaAnnouncer(props.message);\n  }, [ ariaAnnouncer, props.message ]);\n  return React.createElement(\"div\", null);\n}\n\nconst AriaLiveMessageExport = React.memo(AriaLiveMessage);\n\nexport { AriaLiveMessageExport as AriaLiveMessage };\n","import { compute } from \"compute-scroll-into-view\";\n\nimport memoizeOne from \"memoize-one\";\n\nimport { tabbable } from \"tabbable\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const SCROLLBAR_WIDTH = memoizeOne(getScrollbarWidth);\n\nfunction doScrollElementIntoView(element, animate = false, boundary) {\n  if (element) {\n    const actions = compute(element, {\n      boundary: boundary,\n      scrollMode: \"if-needed\",\n      block: \"nearest\",\n      inline: \"nearest\"\n    });\n    actions.forEach(({el: el, top: top, left: left}) => {\n      doScrollElement(el, Math.round(top), Math.round(left), animate);\n    });\n  }\n}\n\nfunction doScrollElement(element, scrollTop, scrollLeft, animate = false) {\n  setTimeout(() => {\n    if (element) {\n      if (animate && element.scroll) {\n        element.scroll({\n          top: scrollTop,\n          left: scrollLeft,\n          behavior: \"smooth\"\n        });\n      } else {\n        element.scrollTop = scrollTop;\n        element.scrollLeft = scrollLeft;\n      }\n    }\n  });\n}\n\nfunction getScrollbarWidth() {\n  const outer = document.createElement(\"div\");\n  outer.style.visibility = \"hidden\";\n  outer.style.overflow = \"scroll\";\n  document.body.appendChild(outer);\n  const inner = document.createElement(\"div\");\n  outer.appendChild(inner);\n  const scrollbarWidth = outer.offsetWidth - inner.offsetWidth;\n  outer.parentNode.removeChild(outer);\n  return scrollbarWidth;\n}\n\nfunction doFocus(element, preventScroll = false) {\n  if (element && document.activeElement !== element && tabbable(element, {\n    getShadowRoot: true\n  })) {\n    element.focus({\n      preventScroll: preventScroll\n    });\n  }\n}\n\nfunction doFocusRef(ref, defer = false, preventScroll = false) {\n  if (ref) {\n    if (defer) {\n      setTimeout(() => {\n        doFocusRef(ref);\n      });\n    } else if (ref.current) {\n      doFocus(ref.current, preventScroll);\n    }\n  }\n}\n\nfunction isElement(node) {\n  return node?.nodeType === 1;\n}\n\nfunction isTextNode(node) {\n  return node?.nodeType === 3;\n}\n\nfunction isInputNode(node) {\n  return node?.tagName === \"INPUT\";\n}\n\nfunction isImageNode(node) {\n  return node?.tagName === \"IMG\";\n}\n\nfunction isTextAreaNode(node) {\n  return node?.tagName === \"TEXTAREA\";\n}\n\nfunction focusOnFirstFocusableItemInArrayOfElements(elements) {\n  for (let index = 0; index < elements.length; index++) {\n    if (focusOnFirstFocusableElement(elements[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction focusOnFirstFocusableElement(parentElement) {\n  const focusableElements = tabbable(parentElement, {\n    getShadowRoot: true\n  });\n  if (focusableElements?.length) {\n    doFocus(focusableElements[0]);\n    return true;\n  }\n  return false;\n}\n\nfunction isEnterKey(event) {\n  if (event.key === \"Enter\" && !hasModifiers(event)) {\n    return !(event.isComposing || event.keyCode === 229);\n  }\n  return false;\n}\n\nfunction hasModifiers(event) {\n  return event.shiftKey || event.altKey || event.metaKey || event.ctrlKey;\n}\n\nfunction getScrollBottom(element) {\n  if (element) {\n    return element.scrollHeight - element.offsetHeight - element.scrollTop;\n  }\n  return 0;\n}\n\nexport { SCROLLBAR_WIDTH, doFocusRef, doScrollElement, doScrollElementIntoView, focusOnFirstFocusableItemInArrayOfElements, getScrollBottom, isElement, isEnterKey, isImageNode, isInputNode, isTextAreaNode, isTextNode };\n","import cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport \"./constants.js\";\n\nimport { findLastWithMap } from \"./lang/arrayUtils.js\";\n\nimport { uuid } from \"./lang/uuid.js\";\n\nimport { MessageResponseTypes, MessageInputType, ButtonItemType, AgentMessageType, InternalMessageRequestType } from \"../../../types/messaging/Messages.js\";\n\nimport { UUIDType } from \"./lang/UUIDType.js\";\n\nimport { FileStatusValue } from \"../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const THREAD_ID_MAIN = \"main\";\n\nfunction isResponse(message) {\n  return message && message.output !== undefined;\n}\n\nfunction isDateResponseType(localMessage) {\n  return localMessage?.item.response_type === MessageResponseTypes.DATE;\n}\n\nfunction addDefaultsToMessage(fullMessage) {\n  if (!fullMessage.id) {\n    fullMessage.id = uuid(UUIDType.MESSAGE);\n  }\n  if (!fullMessage.thread_id) {\n    fullMessage.thread_id = THREAD_ID_MAIN;\n  }\n  if (!fullMessage.history) {\n    fullMessage.history = {};\n  }\n  if (!fullMessage.history.timestamp) {\n    fullMessage.history.timestamp = Date.now();\n  }\n  if (fullMessage.history.from_history === undefined) {\n    fullMessage.history.from_history = false;\n  }\n  return fullMessage;\n}\n\nfunction isRequest(message) {\n  return message?.input !== undefined;\n}\n\nfunction isLiveAgentMessage(message) {\n  return Boolean(message.item.agent_message_type);\n}\n\nfunction hasLiveAgentMessage(message) {\n  return isResponse(message) && Boolean(message.output.generic?.find(item => item?.agent_message_type)) || isRequest(message) && Boolean(message.input.agent_message_type);\n}\n\nfunction isEventRequest(message) {\n  return message?.input?.message_type === MessageInputType.EVENT;\n}\n\nfunction isTextItem(item) {\n  return item && item.response_type === \"text\" && item.text !== undefined;\n}\n\nfunction isTyping(message) {\n  return message.response_type === MessageResponseTypes.PAUSE && message.typing == true;\n}\n\nfunction isPause(message) {\n  return message.response_type === MessageResponseTypes.PAUSE;\n}\n\nfunction isOptionItem(item) {\n  return item?.response_type === MessageResponseTypes.OPTION && item.options !== undefined;\n}\n\nfunction createMessageRequestForChoice(choice, relatedResponseID) {\n  const messageRequest = {\n    id: uuid(UUIDType.MESSAGE),\n    thread_id: THREAD_ID_MAIN,\n    ...cloneDeep(choice.value)\n  };\n  messageRequest.history = {\n    label: choice.label,\n    related_message_id: relatedResponseID\n  };\n  return messageRequest;\n}\n\nfunction createMessageRequestForButtonItemOption(buttonItem, relatedResponseID) {\n  const messageRequest = {\n    id: uuid(UUIDType.MESSAGE),\n    thread_id: THREAD_ID_MAIN,\n    input: null\n  };\n  if (buttonItem.value?.input?.text) {\n    messageRequest.input = cloneDeep(buttonItem.value.input);\n  } else {\n    messageRequest.input = {\n      text: buttonItem.label\n    };\n  }\n  messageRequest.history = {\n    related_message_id: relatedResponseID\n  };\n  return messageRequest;\n}\n\nfunction createWelcomeRequest() {\n  return addDefaultsToMessage({\n    id: uuid(UUIDType.MESSAGE),\n    input: {\n      text: \"\"\n    },\n    history: {\n      silent: true,\n      is_welcome_request: true\n    },\n    thread_id: THREAD_ID_MAIN\n  });\n}\n\nfunction createMessageRequestForText(text) {\n  return addDefaultsToMessage({\n    input: {\n      text: text,\n      message_type: MessageInputType.TEXT\n    }\n  });\n}\n\nfunction createMessageRequestForFileUpload(upload) {\n  return addDefaultsToMessage({\n    id: upload.id,\n    input: {\n      text: upload.file.name,\n      message_type: InternalMessageRequestType.FILE,\n      agent_message_type: AgentMessageType.FROM_USER\n    },\n    history: {\n      file_upload_status: FileStatusValue.UPLOADING\n    }\n  });\n}\n\nfunction createMessageRequestForDate(inputString, userString, relatedResponseID) {\n  const messageRequest = createMessageRequestForText(inputString);\n  messageRequest.history = {\n    label: userString,\n    related_message_id: relatedResponseID\n  };\n  return messageRequest;\n}\n\nfunction createMessageResponseForText(text, threadID = THREAD_ID_MAIN, responseType = MessageResponseTypes.TEXT, context) {\n  const textItem = {\n    response_type: responseType,\n    text: text\n  };\n  const messageResponse = {\n    id: uuid(UUIDType.MESSAGE),\n    thread_id: threadID,\n    output: {\n      generic: [ textItem ]\n    }\n  };\n  return messageResponse;\n}\n\nfunction createMessageResponseForItem(item, context) {\n  const messageResponse = {\n    output: {\n      generic: [ item ]\n    }\n  };\n  return addDefaultsToMessage(messageResponse);\n}\n\nfunction isConnectToAgent(response) {\n  return response?.response_type === MessageResponseTypes.CONNECT_TO_AGENT;\n}\n\nfunction isCardResponseType(response) {\n  return response?.response_type === MessageResponseTypes.CARD;\n}\n\nfunction isCarouselResponseType(response) {\n  return response?.response_type === MessageResponseTypes.CAROUSEL;\n}\n\nfunction isButtonResponseType(response) {\n  return response?.response_type === MessageResponseTypes.BUTTON;\n}\n\nfunction isShowPanelButtonType(response) {\n  return isButtonResponseType(response) && response.button_type === ButtonItemType.SHOW_PANEL;\n}\n\nfunction isResponseWithNestedItems(item) {\n  if (isButtonResponseType(item)) {\n    return hasBodyOrFooter(item.panel);\n  }\n  if (isCardResponseType(item)) {\n    return hasBodyOrFooter(item);\n  }\n  if (isCarouselResponseType(item)) {\n    return item.items !== undefined;\n  }\n  return isGridResponseType(item);\n}\n\nfunction hasBodyOrFooter(item) {\n  return item?.body !== undefined || item?.footer !== undefined;\n}\n\nfunction renderAsUserDefinedMessage(messageItem) {\n  const responseType = messageItem.response_type;\n  switch (responseType) {\n   case MessageResponseTypes.TEXT:\n   case MessageResponseTypes.IMAGE:\n   case MessageResponseTypes.OPTION:\n   case MessageResponseTypes.CONNECT_TO_AGENT:\n   case MessageResponseTypes.IFRAME:\n   case MessageResponseTypes.VIDEO:\n   case MessageResponseTypes.AUDIO:\n   case MessageResponseTypes.DATE:\n   case MessageResponseTypes.CONVERSATIONAL_SEARCH:\n   case MessageResponseTypes.TABLE:\n   case MessageResponseTypes.INLINE_ERROR:\n   case MessageResponseTypes.CARD:\n   case MessageResponseTypes.CAROUSEL:\n   case MessageResponseTypes.BUTTON:\n   case MessageResponseTypes.GRID:\n    return false;\n\n   default:\n    return !renderAsTour(messageItem);\n  }\n}\n\nfunction renderAsTour(messageItem) {\n  return hasTourUserDefinedType(messageItem);\n}\n\nfunction hasTourUserDefinedType(message) {\n  return message?.user_defined?.user_defined_type === \"IBM_BETA_JOURNEYS_TOUR\";\n}\n\nfunction hasServiceDesk(config) {\n  return Boolean(config.public.serviceDeskFactory);\n}\n\nfunction isItemSupportedInResponseBody(item) {\n  switch (item.response_type) {\n   case MessageResponseTypes.IMAGE:\n   case MessageResponseTypes.IFRAME:\n   case MessageResponseTypes.VIDEO:\n   case MessageResponseTypes.AUDIO:\n   case MessageResponseTypes.TEXT:\n   case MessageResponseTypes.USER_DEFINED:\n   case MessageResponseTypes.CARD:\n   case MessageResponseTypes.GRID:\n    return true;\n\n   default:\n    return false;\n  }\n}\n\nfunction isSingleItemCarousel(messageItem) {\n  return isCarouselResponseType(messageItem) && messageItem.items.length === 1;\n}\n\nfunction isFullWidthUserDefined(messageItem) {\n  return isUserDefinedItem(messageItem) && messageItem.full_width;\n}\n\nfunction isUserDefinedItem(item) {\n  return item?.response_type === MessageResponseTypes.USER_DEFINED;\n}\n\nfunction isGridResponseType(item) {\n  return item?.response_type === MessageResponseTypes.GRID;\n}\n\nfunction getOptionType(preference, totalOptions) {\n  let type = \"button\";\n  if (preference && preference === \"button\") {\n    type = \"button\";\n  } else if (preference && preference === \"dropdown\") {\n    type = \"dropdown\";\n  } else if (totalOptions > 4) {\n    type = \"dropdown\";\n  }\n  return type;\n}\n\nfunction isStreamPartialItem(chunk) {\n  return Boolean(chunk.partial_item);\n}\n\nfunction isStreamCompleteItem(chunk) {\n  return Boolean(chunk.complete_item);\n}\n\nfunction isStreamFinalResponse(chunk) {\n  return Boolean(chunk.final_response);\n}\n\nfunction streamItemID(messageID, item) {\n  const itemID = item?.streaming_metadata?.id;\n  if (!itemID) {\n    return null;\n  }\n  return `${messageID}-${itemID}`;\n}\n\nfunction getMediaDimensions(item) {\n  return item.dimensions;\n}\n\nfunction getLastBotResponseWithContext(state) {\n  const messageIDs = state.botMessageState.messageIDs || [];\n  return findLastWithMap(messageIDs, state.allMessagesByID, message => isResponse(message) && !hasLiveAgentMessage(message) && Boolean(message.context));\n}\n\nexport { THREAD_ID_MAIN, addDefaultsToMessage, createMessageRequestForButtonItemOption, createMessageRequestForChoice, createMessageRequestForDate, createMessageRequestForFileUpload, createMessageRequestForText, createMessageResponseForItem, createMessageResponseForText, createWelcomeRequest, getLastBotResponseWithContext, getMediaDimensions, getOptionType, hasServiceDesk, hasTourUserDefinedType, isButtonResponseType, isCardResponseType, isCarouselResponseType, isConnectToAgent, isDateResponseType, isEventRequest, isFullWidthUserDefined, isGridResponseType, isItemSupportedInResponseBody, isLiveAgentMessage, isOptionItem, isPause, isRequest, isResponse, isResponseWithNestedItems, isShowPanelButtonType, isSingleItemCarousel, isStreamCompleteItem, isStreamFinalResponse, isStreamPartialItem, isTextItem, isTyping, renderAsTour, renderAsUserDefinedMessage, streamItemID };\n","import React, { PureComponent } from \"react\";\n\nimport { withAriaAnnouncer } from \"../../hocs/withAriaAnnouncer.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ class AnnounceOnMountComponent extends PureComponent {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      isMounted: false\n    };\n    this.onceAnnounced = false;\n  }\n  componentDidMount() {\n    this.setState({\n      isMounted: true\n    });\n    if (!this.onceAnnounced) {\n      if (this.props.announceOnce) {\n        setTimeout(() => {\n          this.props.ariaAnnouncer(this.props.announceOnce);\n        });\n      }\n      this.onceAnnounced = true;\n    }\n  }\n  render() {\n    return React.createElement(\"div\", {\n      \"aria-live\": \"polite\"\n    }, this.state.isMounted && this.props.children);\n  }\n}\n\nconst AnnounceOnMountComponentExport = withAriaAnnouncer(AnnounceOnMountComponent);\n\nexport { AnnounceOnMountComponentExport as AnnounceOnMountComponent };\n","export { ViewType } from \"../instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ var ChatWidthBreakpoint;\n\n(function(ChatWidthBreakpoint) {\n  ChatWidthBreakpoint[\"NARROW\"] = \"narrow\";\n  ChatWidthBreakpoint[\"STANDARD\"] = \"standard\";\n  ChatWidthBreakpoint[\"WIDE\"] = \"wide\";\n})(ChatWidthBreakpoint || (ChatWidthBreakpoint = {}));\n\nexport { ChatWidthBreakpoint };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function WriteableElement({slotName: slotName, id: id, className: className}) {\n  return React.createElement(\"div\", {\n    className: className,\n    id: id,\n    \"data-floating-menu-container\": true\n  }, React.createElement(\"slot\", {\n    name: slotName\n  }));\n}\n\nvar WriteableElement$1 = React.memo(WriteableElement);\n\nexport { WriteableElement$1 as default };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const ServiceManagerContext = React.createContext(null);\n\nexport { ServiceManagerContext };\n","import { Component } from \"react\";\n\nimport ReactDOM from \"react-dom\";\n\nimport { ModalPortalRootContext } from \"../contexts/ModalPortalRootContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nclass ModalPortal extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      attachedToHost: null\n    };\n    this.modalElement = document.createElement(\"div\");\n  }\n  componentDidMount() {\n    this.attachIfNeeded();\n  }\n  componentDidUpdate() {\n    this.attachIfNeeded();\n  }\n  componentWillUnmount() {\n    if (this.state.attachedToHost) {\n      this.state.attachedToHost.removeChild(this.modalElement);\n    }\n  }\n  attachIfNeeded() {\n    const hostElement = this.context;\n    if (hostElement && !this.state.attachedToHost) {\n      this.setState({\n        attachedToHost: hostElement\n      });\n      hostElement.appendChild(this.modalElement);\n    }\n  }\n  render() {\n    if (!this.state.attachedToHost) {\n      return null;\n    }\n    return ReactDOM.createPortal(this.props.children, this.modalElement);\n  }\n}\n\nModalPortal.contextType = ModalPortalRootContext;\n\nexport { ModalPortal };\n","import { Button } from \"@carbon/react\";\n\nimport FocusTrap from \"focus-trap-react\";\n\nimport React, { Component } from \"react\";\n\nimport { ModalPortal } from \"../../containers/ModalPortal.js\";\n\nimport { AriaLiveMessage as AriaLiveMessageExport } from \"../aria/AriaLiveMessage.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ class ConfirmModal extends Component {\n  constructor() {\n    super(...arguments);\n    this.onYesClick = () => {\n      this.props.onConfirm();\n    };\n    this.onNoClick = () => {\n      this.props.onCancel();\n    };\n    this.onKeyDown = event => {\n      if (event.key === \"Escape\") {\n        this.props.onCancel();\n      }\n    };\n  }\n  render() {\n    const {title: title, message: message, cancelButtonLabel: cancelButtonLabel, confirmButtonLabel: confirmButtonLabel, modalAnnounceMessage: modalAnnounceMessage, serviceManager: serviceManager} = this.props;\n    return React.createElement(ModalPortal, null, React.createElement(FocusTrap, null, React.createElement(\"div\", {\n      className: \"WACConfirmModal\",\n      role: \"dialog\",\n      \"aria-labelledby\": `WACConfirmModal__title${serviceManager.namespace.suffix}`,\n      \"aria-describedby\": `WACConfirmModal__message${serviceManager.namespace.suffix}`\n    }, React.createElement(\"div\", {\n      className: \"WACConfirmModal__container\"\n    }, React.createElement(AriaLiveMessageExport, {\n      message: modalAnnounceMessage\n    }), React.createElement(\"div\", {\n      className: \"WACConfirmModal__title\",\n      id: `WACConfirmModal__title${serviceManager.namespace.suffix}`\n    }, title), React.createElement(\"div\", {\n      className: \"WACConfirmModal__message\",\n      id: `WACConfirmModal__message${serviceManager.namespace.suffix}`\n    }, message), React.createElement(\"div\", {\n      className: \"WACConfirmModal__buttonContainer\"\n    }, React.createElement(Button, {\n      className: \"WACConfirmModal__NoButton\",\n      kind: \"secondary\",\n      onClick: this.onNoClick,\n      onKeyDown: this.onKeyDown,\n      size: \"md\"\n    }, cancelButtonLabel), React.createElement(Button, {\n      className: \"WACConfirmModal__YesButton\",\n      onClick: this.onYesClick,\n      onKeyDown: this.onKeyDown,\n      size: \"md\"\n    }, confirmButtonLabel))))));\n  }\n}\n\nexport { ConfirmModal };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar CSSVariable;\n\n(function(CSSVariable) {\n  CSSVariable[\"BASE_HEIGHT\"] = \"BASE-height\";\n  CSSVariable[\"BASE_MAX_HEIGHT\"] = \"BASE-max-height\";\n  CSSVariable[\"BASE_WIDTH\"] = \"BASE-width\";\n  CSSVariable[\"BASE_Z_INDEX\"] = \"BASE-z-index\";\n})(CSSVariable || (CSSVariable = {}));\n\nvar WriteableElementName;\n\n(function(WriteableElementName) {\n  WriteableElementName[\"AI_TOOLTIP_AFTER_DESCRIPTION_ELEMENT\"] = \"aiTooltipAfterDescriptionElement\";\n  WriteableElementName[\"WELCOME_NODE_BEFORE_ELEMENT\"] = \"welcomeNodeBeforeElement\";\n  WriteableElementName[\"HEADER_BOTTOM_ELEMENT\"] = \"headerBottomElement\";\n  WriteableElementName[\"BEFORE_INPUT_ELEMENT\"] = \"beforeInputElement\";\n  WriteableElementName[\"HOME_SCREEN_BEFORE_INPUT_ELEMENT\"] = \"homeScreenBeforeInputElement\";\n  WriteableElementName[\"HOME_SCREEN_AFTER_STARTERS_ELEMENT\"] = \"homeScreenAfterStartersElement\";\n  WriteableElementName[\"HOME_SCREEN_HEADER_BOTTOM_ELEMENT\"] = \"homeScreenHeaderBottomElement\";\n  WriteableElementName[\"CUSTOM_PANEL_ELEMENT\"] = \"customPanelElement\";\n})(WriteableElementName || (WriteableElementName = {}));\n\nexport { CSSVariable, WriteableElementName };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst getBotInputState = state => state.botInputState;\n\nconst getAgentInputState = state => state.agentState.inputState;\n\nconst getAgentState = state => state.agentState;\n\nconst getPersistedAgent = state => state.persistedToBrowserStorage.chatState.agentState;\n\nfunction selectAgentDisplayState(state) {\n  const agentState = getAgentState(state);\n  const persisted = getPersistedAgent(state);\n  if (persisted.isSuspended) {\n    return {\n      isConnectingOrConnected: false,\n      disableInput: false,\n      isAgentTyping: false,\n      inputPlaceholderKey: null\n    };\n  }\n  const {isReconnecting: isReconnecting, isConnecting: isConnecting, isAgentTyping: isAgentTyping} = agentState;\n  const {isConnected: isConnected} = persisted;\n  let inputPlaceholderKey;\n  if (isConnecting) {\n    inputPlaceholderKey = \"agent_inputPlaceholderConnecting\";\n  } else if (isReconnecting) {\n    inputPlaceholderKey = \"agent_inputPlaceholderReconnecting\";\n  } else {\n    inputPlaceholderKey = null;\n  }\n  return {\n    isAgentTyping: isAgentTyping,\n    isConnectingOrConnected: isConnecting || isConnected,\n    disableInput: isConnecting || isReconnecting,\n    inputPlaceholderKey: inputPlaceholderKey\n  };\n}\n\nfunction selectIsInputToAgent(state) {\n  return selectAgentDisplayState(state).isConnectingOrConnected;\n}\n\nfunction selectInputState(state) {\n  return selectIsInputToAgent(state) ? getAgentInputState(state) : getBotInputState(state);\n}\n\nexport { selectAgentDisplayState, selectInputState, selectIsInputToAgent };\n","import Home from \"@carbon/icons-react/es/Home.js\";\n\nimport React, { forwardRef, useRef, useCallback, useImperativeHandle } from \"react\";\n\nimport { useSelector, shallowEqual } from \"react-redux\";\n\nimport { useLanguagePack } from \"../../hooks/useLanguagePack.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport { selectAgentDisplayState } from \"../../store/selectors.js\";\n\nimport \"../../utils/constants.js\";\n\nimport WriteableElement from \"../WriteableElement.js\";\n\nimport { Header as HeaderExport } from \"./Header.js\";\n\nimport { WriteableElementName } from \"../../../../types/instance/ChatInstance.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function BotHeader(props, ref) {\n  const {onClose: onClose, onCloseAndRestart: onCloseAndRestart, onRestart: onRestart, onToggleHomeScreen: onToggleHomeScreen, headerDisplayName: headerDisplayName, includeWriteableElement: includeWriteableElement, enableChatHeaderConfig: enableChatHeaderConfig, headerAvatarConfig: headerAvatarConfig, testIdPrefix: testIdPrefix} = props;\n  const serviceManager = useServiceManager();\n  const languagePack = useLanguagePack();\n  const homeScreenIsOn = useSelector(state => state.homeScreenConfig.is_on && state.homeScreenConfig.allow_return);\n  const publicConfig = useSelector(state => state.config.public);\n  const customMenuOptions = useSelector(state => state.customMenuOptions);\n  const {isConnectingOrConnected: isConnectingOrConnected} = useSelector(selectAgentDisplayState, shallowEqual);\n  const useAITheme = useSelector(state => state.theme.useAITheme);\n  const maxVisibleHeaderObjects = useSelector(state => state.chatHeaderState.maxVisibleHeaderObjects);\n  const leftObjectsLength = useSelector(state => state.chatHeaderState.config?.left?.length || 0);\n  const rightObjectsLength = useSelector(state => state.chatHeaderState.config?.right?.length || 0);\n  const headerRef = useRef();\n  const isHeaderObjectsInOverflow = leftObjectsLength > maxVisibleHeaderObjects || rightObjectsLength > maxVisibleHeaderObjects;\n  const hasChatHeaderObjects = enableChatHeaderConfig && isHeaderObjectsInOverflow;\n  const showRestartButton = publicConfig.showRestartButton || publicConfig.headerConfig?.showRestartButton;\n  const allowHomeScreen = homeScreenIsOn && !isConnectingOrConnected;\n  const overflowClicked = useCallback(index => {\n    if (index === 0 && allowHomeScreen) {\n      onToggleHomeScreen?.();\n    } else {\n      const {handler: handler} = customMenuOptions[allowHomeScreen ? index - 1 : index];\n      handler();\n    }\n  }, [ customMenuOptions, onToggleHomeScreen, allowHomeScreen ]);\n  let overflowItems = customMenuOptions?.map(option => option.text);\n  if (overflowItems && allowHomeScreen) {\n    overflowItems.splice(0, 0, languagePack.homeScreen_overflowMenuHomeScreen);\n  } else if (!overflowItems && allowHomeScreen && hasChatHeaderObjects) {\n    overflowItems = [ languagePack.homeScreen_overflowMenuHomeScreen ];\n  }\n  useImperativeHandle(ref, () => headerRef.current);\n  return React.createElement(\"div\", {\n    className: \"WACHeader__Container\"\n  }, React.createElement(HeaderExport, {\n    ref: headerRef,\n    showCenter: true,\n    headerAvatarConfig: headerAvatarConfig,\n    displayName: headerDisplayName,\n    showBackButton: Boolean(allowHomeScreen && onToggleHomeScreen),\n    showRestartButton: showRestartButton,\n    useAITheme: useAITheme,\n    backContent: React.createElement(Home, null),\n    labelBackButton: languagePack.homeScreen_returnToHome,\n    onClickRestart: onRestart,\n    onClickClose: onClose,\n    onCloseAndRestart: onCloseAndRestart,\n    onClickBack: onToggleHomeScreen,\n    overflowItems: overflowItems,\n    overflowClicked: overflowClicked,\n    enableChatHeaderConfig: enableChatHeaderConfig,\n    testIdPrefix: testIdPrefix\n  }), includeWriteableElement && React.createElement(WriteableElement, {\n    slotName: WriteableElementName.HEADER_BOTTOM_ELEMENT,\n    id: `headerBottomElement${serviceManager.namespace.suffix}`,\n    className: \"WACHeader__HeaderBottomElement\"\n  }));\n}\n\nconst BotHeaderExport = React.memo(forwardRef(BotHeader));\n\nexport { BotHeaderExport as BotHeader };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction deepFreeze(object) {\n  Object.freeze(object);\n  Object.getOwnPropertyNames(object).forEach(prop => {\n    if (Object.prototype.hasOwnProperty.call(object, prop) && object[prop] !== null && (typeof object[prop] === \"object\" || typeof object[prop] === \"function\") && !Object.isFrozen(object[prop])) {\n      deepFreeze(object[prop]);\n    }\n  });\n  return object;\n}\n\nexport { deepFreeze };\n","import { MessageResponseTypes } from \"../../../types/messaging/Messages.js\";\n\nimport { uuid } from \"../utils/lang/uuid.js\";\n\nimport { UUIDType } from \"../utils/lang/UUIDType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function inputItemToLocalItem(message, originalUserText, id = uuid(UUIDType.LOCAL_MESSAGE)) {\n  const localMessage = {\n    item: {\n      response_type: MessageResponseTypes.TEXT,\n      ...message.input\n    },\n    ui_state: {\n      id: id,\n      originalUserText: originalUserText,\n      needsAnnouncement: false\n    },\n    fullMessageID: message.id\n  };\n  return localMessage;\n}\n\nexport { inputItemToLocalItem as default };\n","import { useContext } from \"react\";\n\nimport { AriaAnnouncerContext } from \"../contexts/AriaAnnouncerContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function useAriaAnnouncer() {\n  return useContext(AriaAnnouncerContext);\n}\n\nexport { useAriaAnnouncer };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst HA_SET_AGENT_AVAILABILITY = \"HA_SET_AGENT_AVAILABILITY\";\n\nconst HA_SET_IS_CONNECTING = \"HA_SET_IS_CONNECTING\";\n\nconst HA_SET_IS_RECONNECTING = \"HA_SET_IS_RECONNECTING\";\n\nconst HA_SET_AGENT_JOINED = \"HA_SET_AGENT_JOINED\";\n\nconst HA_SET_AGENT_LEFT_CHAT = \"HA_SET_AGENT_LEFT_CHAT\";\n\nconst HA_END_CHAT = \"HA_END_CHAT\";\n\nconst HA_UPDATE_CAPABILITIES = \"HA_UPDATE_CAPABILITIES\";\n\nconst HA_UPDATE_FILE_UPLOAD_IN_PROGRESS = \"HA_UPDATE_FILE_UPLOAD_IN_PROGRESS\";\n\nconst HA_SET_SHOW_SCREEN_SHARE_REQUEST = \"HA_SET_SHOW_SCREEN_SHARE_REQUEST\";\n\nconst HA_SET_IS_SCREEN_SHARING = \"HA_SET_IS_SCREEN_SHARING\";\n\nconst HA_SET_PERSISTED_STATE = \"HA_SET_PERSISTED_STATE\";\n\nconst HA_UPDATE_IS_SUSPENDED = \"HA_UPDATE_IS_SUSPENDED\";\n\nconst HA_UPDATE_IS_TYPING = \"HA_UPDATE_IS_TYPING\";\n\nfunction setIsConnecting(isConnecting, localMessageID) {\n  return {\n    type: HA_SET_IS_CONNECTING,\n    isConnecting: isConnecting,\n    localMessageID: localMessageID\n  };\n}\n\nfunction setIsReconnecting(isReconnecting) {\n  return {\n    type: HA_SET_IS_RECONNECTING,\n    isReconnecting: isReconnecting\n  };\n}\n\nfunction setAgentLeftChat() {\n  return {\n    type: HA_SET_AGENT_LEFT_CHAT\n  };\n}\n\nfunction endChat() {\n  return {\n    type: HA_END_CHAT\n  };\n}\n\nfunction setAgentAvailability(availability) {\n  return {\n    type: HA_SET_AGENT_AVAILABILITY,\n    availability: availability\n  };\n}\n\nfunction setAgentJoined(agentProfile) {\n  return {\n    type: HA_SET_AGENT_JOINED,\n    agentProfile: agentProfile\n  };\n}\n\nfunction updateCapabilities(capabilities) {\n  return {\n    type: HA_UPDATE_CAPABILITIES,\n    capabilities: capabilities\n  };\n}\n\nfunction updateFilesUploadInProgress(fileUploadInProgress) {\n  return {\n    type: HA_UPDATE_FILE_UPLOAD_IN_PROGRESS,\n    fileUploadInProgress: fileUploadInProgress\n  };\n}\n\nfunction setShowScreenShareRequest(showRequest) {\n  return {\n    type: HA_SET_SHOW_SCREEN_SHARE_REQUEST,\n    showRequest: showRequest\n  };\n}\n\nfunction setIsScreenSharing(isSharing) {\n  return {\n    type: HA_SET_IS_SCREEN_SHARING,\n    isSharing: isSharing\n  };\n}\n\nfunction setPersistedServiceDeskState(state) {\n  return {\n    type: HA_SET_PERSISTED_STATE,\n    state: state\n  };\n}\n\nfunction agentUpdateIsSuspended(isSuspended) {\n  return {\n    type: HA_UPDATE_IS_SUSPENDED,\n    isSuspended: isSuspended\n  };\n}\n\nfunction agentUpdateIsTyping(isTyping) {\n  return {\n    type: HA_UPDATE_IS_TYPING,\n    isTyping: isTyping\n  };\n}\n\nexport { HA_END_CHAT, HA_SET_AGENT_AVAILABILITY, HA_SET_AGENT_JOINED, HA_SET_AGENT_LEFT_CHAT, HA_SET_IS_CONNECTING, HA_SET_IS_RECONNECTING, HA_SET_IS_SCREEN_SHARING, HA_SET_PERSISTED_STATE, HA_SET_SHOW_SCREEN_SHARE_REQUEST, HA_UPDATE_CAPABILITIES, HA_UPDATE_FILE_UPLOAD_IN_PROGRESS, HA_UPDATE_IS_SUSPENDED, HA_UPDATE_IS_TYPING, agentUpdateIsSuspended, agentUpdateIsTyping, endChat, setAgentAvailability, setAgentJoined, setAgentLeftChat, setIsConnecting, setIsReconnecting, setIsScreenSharing, setPersistedServiceDeskState, setShowScreenShareRequest, updateCapabilities, updateFilesUploadInProgress };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const LanguagePackContext = React.createContext(null);\n\nexport { LanguagePackContext };\n"],"names":["useUUID","ref","useRef","undefined","current","uuid","UUIDType","COMPONENT","AriaAnnouncerContext","React","CSS_CLASS_PREFIX","WEB_COMPONENT_PREFIX","asArray","value","Array","isArray","async","asyncForEach","array","callbackFunction","index","length","findLast","predicate","startAt","lastIndex","findLastIndex","findLastWithMap","keys","map","arrayLastValue","outputItemToLocalItem","messageItem","fullMessage","isLatestWelcomeNode","disableFadeAnimation","localMessage","ui_state","id","streamItemID","LOCAL_MESSAGE","needsAnnouncement","history","from_history","item","fullMessageID","isWelcomeResponse","createLocalMessageForInlineError","text","originalMessage","createMessageResponseForItem","createLocalMessageForItem","response_type","MessageResponseTypes","INLINE_ERROR","createLocalMessageItemsForNestedMessageItems","localMessageItem","fromHistory","nestedLocalMessageItems","allowFooter","isGridResponseType","gridLocalMessageItemIDs","rows","row","cells","cell","cellLocalMessageItemIDs","createLocalMessageItemsForNestedType","items","nestedMessageItem","isSupportedMessageItemInBody","isCarouselResponseType","itemsLocalMessageItemIDs","bodyItems","body","panel","bodyLocalMessageItemIDs","isShowPanelButtonType","footerItems","footer","footerLocalMessageItemIDs","rootMessageItem","isButtonResponseType","isSupportedMessageItemInFooter","type","nestedMessageItemIDs","isSupported","forEach","nestedLocalMessageItem","push","isResponseWithNestedItems","consoleError","CARD","isCardResponseType","isItemSupportedInResponseBody","CAROUSEL","BUTTON","button_type","ButtonItemType","SHOW_PANEL","GRID","BasePanelComponent","className","children","isOpen","hidePanelHeader","labelBackButton","title","hideBackButton","useAITheme","onClickCloseAndRestart","onClickRestart","testIdPrefix","headerProps","showRestartButton","useSelector","state","config","public","headerConfig","headerRef","useImperativeHandle","FocusTrap","active","focusTrapOptions","clickOutsideDeactivates","returnFocusOnDeactivate","IS_MOBILE","preventScroll","HeaderExport","onCloseAndRestart","showBackButton","displayName","showCenter","BasePanelComponentExport","CHANGE_STATE","UPDATE_BOT_NAME","UPDATE_BOT_AVATAR_URL","UPDATE_LAUNCHER_AVATAR_URL","UPDATE_MAIN_HEADER_TITLE","HYDRATE_CHAT","HYDRATE_MESSAGE_HISTORY","ADD_LOCAL_MESSAGE_ITEM","REMOVE_MESSAGES","UPDATE_LOCAL_MESSAGE_ITEM","SET_APP_STATE_VALUE","ADD_IS_TYPING_COUNTER","ADD_IS_LOADING_COUNTER","ADD_IS_HYDRATING_COUNTER","SET_VIEW_STATE","SET_VIEW_CHANGING","SET_INITIAL_VIEW_CHANGE_COMPLETE","UPDATE_CSS_VARIABLES","MESSAGE_SET_OPTION_SELECTED","SET_MESSAGE_UI_PROPERTY","SET_MESSAGE_HISTORY_PROPERTY","MERGE_HISTORY","SET_LAUNCHER_PROPERTY","SET_LAUNCHER_CONFIG_PROPERTY","ANNOUNCE_MESSAGE","SET_CHAT_MESSAGES_PROPERTY","RESTART_CONVERSATION","ACCEPTED_DISCLAIMER","ADD_MESSAGE","UPDATE_HOME_SCREEN_CONFIG","UPDATE_HAS_SENT_NON_WELCOME_MESSAGE","UPDATE_PERSISTED_CHAT_STATE","SET_TOUR_DATA","CLEAR_TOUR_DATA","CHANGE_STEP_IN_TOUR","SET_HOME_SCREEN_IS_OPEN","UPDATE_LAUNCHER_CONFIG","UPDATE_MESSAGE","SET_LAUNCHER_MINIMIZED","CLOSE_IFRAME_PANEL","OPEN_IFRAME_CONTENT","SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN","SET_CUSTOM_PANEL_OPTIONS","SET_CUSTOM_PANEL_OPEN","TOGGLE_HOME_SCREEN","UPDATE_INPUT_STATE","SET_IS_BROWSER_PAGE_VISIBLE","ADD_INPUT_FILE","CLEAR_INPUT_FILES","REMOVE_INPUT_FILE","REMOVE_LOCAL_MESSAGE_ITEM","FILE_UPLOAD_INPUT_ERROR","ADD_NESTED_MESSAGES","SET_RESPONSE_PANEL_IS_OPEN","SET_RESPONSE_PANEL_CONTENT","STREAMING_ADD_CHUNK","STREAMING_START","STREAMING_MERGE_HISTORY","ADD_NOTIFICATION","REMOVE_ALL_NOTIFICATIONS","REMOVE_NOTIFICATIONS","UPDATE_CHAT_HEADER_CONFIG","UPDATE_MAX_VISIBLE_HEADER_OBJECTS","SET_STOP_STREAMING_BUTTON_VISIBLE","SET_STOP_STREAMING_BUTTON_DISABLED","SET_STREAM_ID","UPDATE_MAIN_HEADER_AVATAR","actions","changeState","partialState","chatWasHydrated","hydrateMessageHistory","messageHistory","removeMessages","messageIDs","restartConversation","addLocalMessageItem","message","addMessage","addAfterID","updateLocalMessageItem","updateMessage","messageSetOptionSelected","messageID","sentMessage","updatePersistedChatState","chatState","setTourData","newActiveTourMessageID","clearTourData","changeStepInTour","newStepNumber","updateHasSentNonWelcomeMessage","hasSentNonWelcomeMessage","setAppStateValue","key","addIsTypingCounter","addToIsTyping","addIsLoadingCounter","addToIsLoading","addIsHydratingCounter","addToIsHydrating","updateBotName","name","updateMainHeaderTitle","updateBotAvatarURL","url","updateCSSVariables","variables","publicVars","whiteLabelVariables","updateHomeScreenConfig","homeScreenConfig","setViewState","viewState","setViewChanging","viewChanging","setInitialViewChangeComplete","changeComplete","setMessageUIProperty","localMessageID","propertyName","propertyValue","setLauncherProperty","setLauncherConfigProperty","launcherType","setMessageHistoryProperty","mergeMessageHistory","setMessageErrorState","errorState","setMessageWasAnnounced","announceMessage","setChatMessagesStateProperty","addNotification","notification","notificationID","removeNotifications","groupID","removeAllNotifications","acceptDisclaimer","setHomeScreenIsOpen","updateLauncherConfig","launcherConfig","setLauncherMinimized","closeIFramePanel","setIFrameContent","setViewSourcePanelIsOpen","citationItem","relatedSearchResult","setCustomPanelConfigOptions","options","setCustomPanelOpen","toggleHomeScreen","updateInputState","newState","isInputToAgent","setIsBrowserPageVisible","isVisible","addInputFile","file","removeFileUpload","fileID","removeLocalMessageItem","localMessageItemID","fileUploadInputError","errorMessage","clearInputFiles","addNestedMessages","localMessageItems","setResponsePanelIsOpen","setResponsePanelContent","isMessageForInput","streamingStart","streamingMergeHistory","streamingAddChunk","chunkItem","isCompleteItem","updateChatHeaderConfig","chatHeaderConfig","setMaxVisibleHeaderObjects","maxTotal","setStopStreamingButtonVisible","setStopStreamingButtonDisabled","isDisabled","setStreamID","currentStreamID","updateMainHeaderAvatar","withoutEmptyStarters","newConfig","starters","buttons","allow_return","filter","button","Boolean","label","trim","is_on","setIntl","serviceManager","locale","messages","intl","createIntl","store","dispatch","createWriteableElementsProxy","elementSet","Set","handler","get","target","element","has","add","Proxy","writeableElements","VERSION","NotificationType","BOUNCING_ANIMATION_TIMEOUTS","DEFAULT_LAUNCHER","mobile","time_to_expand","new_expand_time","time_to_reduce","notification_type","TEXT_NOTIFICATION","desktop","deepFreeze","DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS","disableAnimation","DEFAULT_CUSTOM_PANEL_STATE","panelID","DEFAULT_CUSTOM_PANEL_ID","DEFAULT_IFRAME_PANEL_STATE","DEFAULT_CITATION_PANEL_STATE","DEFAULT_TOUR_STATE","activeTourStepItems","DEFAULT_MESSAGE_PANEL_STATE","VIEW_STATE_ALL_CLOSED","launcher","mainWindow","tour","VIEW_STATE_LAUNCHER_OPEN","VIEW_STATE_MAIN_WINDOW_OPEN","DEFAULT_PERSISTED_TO_BROWSER","version","disclaimersAccepted","homeScreenState","isHomeScreenOpen","showBackToBot","persistedTourState","activeTourID","activeTourCurrentStepIndex","agentState","isConnected","isSuspended","agentProfiles","launcherState","wasLoadedFromBrowser","activeTour","showUnreadIndicator","mobileLauncherIsExtended","mobileLauncherWasReduced","mobileLauncherDisableBounce","desktopLauncherIsExpanded","desktopLauncherWasMinimized","bounceTurn","DEFAULT_CHAT_MESSAGES_STATE","localMessageIDs","isTypingCounter","isLoadingCounter","isHydratingCounter","isScrollAnchored","DEFAULT_MESSAGE_STATE","allMessageItemsByID","allMessagesByID","botMessageState","DEFAULT_AGENT_STATE","isConnecting","isReconnecting","numUnreadMessages","fileUploadInProgress","showScreenShareRequest","isScreenSharing","isAgentTyping","inputState","fieldVisible","isReadonly","files","allowFileUploads","allowMultipleFileUploads","allowedFileUploadTypes","stopStreamingButtonState","DEFAULT_THEME_STATE","carbonTheme","CarbonTheme","G10","corners","CornersType","ROUND","DEFAULT_LAYOUT_STATE","showFrame","hasContentMaxWidth","applyBotMessageState","setHomeScreenOpenState","persistedToBrowserStorage","applyLocalMessageUIState","oldMessage","applyFullMessage","MIN_CONTRAST","hexCodeToRGB","color","red","substring","blue","green","parseInt","calculateContrast","color1","color2","rgb1","rgb2","luminance1","calculateRelativeLuminance","luminance2","contrast","r8","g8","b8","rRGB","gRGB","bRGB","whiteOrBlackText","background","gray100","white","adjustLightness","token","shift","original","Color","hsl","object","l","round","hex","toLowerCase","CSS_VAR_PREFIX","HEXADECIMAL_REGEX","INTERNAL_OVERRIDES_LIGHT_THEME_MAP","INTERNAL_OVERRIDES_DARK_THEME_MAP","ACCENT_COLOR_MAPS","blue20","blue60","blue60Hover","blue80","g10","g90","g100","fillValues","styles","propertyNames","mergeCSSVariables","internalOverrides","internalOverridesMap","WHITE","includes","G90","G100","createInternalCSSOverridesMap","result","Object","entries","startsWith","match","console","warn","WA_CONSOLE_PREFIX","remoteVars","cssOverrides","primaryColor","secondaryColor","accentColor","useAccentColor","tryFocusColor","useFocusColor","colorMap","accentBlue20","accentBlue60Hover","accentBlue80","accentColorRGB","toString","accentColorBW","gray80","gray10","remoteStylesToCSSVars","getThemeClassNames","themeState","themeClassnames","CarbonThemeClassNames","validateViewState","appState","VALID_PUBLIC_VARS_IN_AI_THEME_SET","values","CSSVariable","UPDATE_CSS_VARS_AI_THEME_WARNING_MESSAGE","join","ChatActionsImpl","constructor","this","hydrating","restarting","alreadyHydrated","chunkQueue","hydrateChat","alternateWelcomeRequest","alternateWelcomeRequestSource","alternateOptions","fireReady","hydrationPromise","doHydrateChat","fire","BusEventType","CHAT_READY","debugLog","historyService","loadHistory","humanAgentService","initialize","getState","createElementsForUserDefinedResponses","latestPanelLocalMessageItem","openResponsePanel","messaging","skipWelcome","send","createWelcomeRequest","MessageSendSource","WELCOME_REQUEST","returnBeforeStreaming","lastMessageID","lastMessage","lastOriginalMessage","isLiveAgentMessage","isRequest","messageService","resendMessage","allowReconnect","serviceDesk","handleHydration","getPublicWebChatState","isConnectedWithHumanAgent","isWebChatOpen","isConnectingWithHumanAgent","isDebugEnabled","isEnableDebugLog","hasUserSentMessage","isTourActive","sendWithCatch","source","ignoreHydration","error","messageRequest","createMessageRequestForText","responsePanelState","doSend","addDefaultsToMessage","originalUserText","input","silent","inputItemToLocalItem","setValueSelectedForMessageID","cloneDeep","receive","requestMessage","requestOptions","restartCount","initialRestartCount","MESSAGE","preReceiveEvent","PRE_RECEIVE","data","languagePack","isResponse","processMessageResponse","catch","inlineError","createMessageResponseForText","errors_singleMessage","thread_id","RECEIVE","insertHistory","scrollBottom","getMessagesScrollBottom","notes","currentAppStateMessages","newAppStateMessages","merge","doAutoScroll","scrollToBottom","receiveChunk","chunk","chunkPromise","resolvablePromise","processChunkQueue","isStreamCompleteItem","isPartialItem","isStreamPartialItem","isStopGeneratingVisible","botInputState","partial_item","streaming_metadata","cancellable","response_id","complete_item","partial_response","Error","handleUserDefinedResponseItemsChunk","isStreamFinalResponse","final_response","doResolve","getOrCreateUserDefinedElement","messageItemID","userDefinedItem","userDefinedElementRegistry","document","createElement","slotName","setAttribute","set","handleUserDefinedResponseItems","renderAsUserDefinedMessage","user_defined","userDefinedResponseEvent","USER_DEFINED_RESPONSE","slot","createElementForNestedUserDefinedResponse","nestedLocalMessage","itemID","CHUNK_USER_DEFINED_RESPONSE","output","generic","request_id","previousItemID","pause","isPause","agent","isConnectToAgent","hasTourUserDefinedType","skipTourCard","skip_card","startTourReason","TourStartReason","START_TOUR_METHOD","SKIP_CARD","mainWindowCloseReason","MainWindowCloseReason","CALLED_START_TOUR","TOUR_SKIP_CARD","startTour","viewChangeReason","ViewChangeReason","hasServiceDesk","errorOccurred","errorType","OnErrorType","INTEGRATION_ERROR","agentAvailability","checkAreAnyAgentsOnline","shouldAutoRequestAgent","skipConnectAgentCard","AgentsOnlineStatus","ONLINE","startChat","showIsTyping","isTyping","sleep","time","insertLocalMessageResponse","updateLanguagePack","changes","removeNotification","theme","usePublicVars","variable","consoleWarn","allVariables","changeView","newView","reason","tryHydrating","forceViewChange","newViewState","constructViewState","isEqual","fireViewChangeEventsAndChangeView","isHydrated","oldViewState","preViewChangeEvent","VIEW_PRE_CHANGE","cancelViewChange","viewChangeEvent","VIEW_CHANGE","changeViewReason","ViewType","TOUR","TOUR_START","TOUR_STEP","step","tourState","endTour","LAUNCHER","goToSpecificTourStep","stepId","newStepIndex","findIndex","stepItem","step_id","changeStepOptions","nextStep","previousStep","actualNewStepIndex","catastrophicErrorType","callOnError","additionalChatParameters","onError","skipHydration","endAgentConversation","fireEvents","PRE_RESTART_CONVERSATION","currentState","endChat","MAIN_WINDOW","mainWindowOpenReason","MainWindowOpenReason","CALLED_RESTART_CONVERSATION","instance","updateAssistantInputFieldVisibility","cancelAllMessageRequests","destroySession","keepOpenState","originalViewState","newPersistedToBrowserStorage","userSessionStorageService","clearLauncherSession","clearChatSession","agentEndConversation","endedByUser","agentUpdateIsSuspended","HANDLER_NOT_FUNCTION","EventBus","handlersByType","Map","eventsTypesRunning","eventsRunningCount","busEvent","logEvent","JSON","stringify","handlersForType","handlersCopy","slice","Promise","delete","waitForEmptyPromise","fireSync","waitForEmpty","on","handlers","debugStackTrace","off","indexOf","removed","splice","once","onceHandler","event","logListeners","listeners","group","listener","consoleLog","groupEnd","clear","eventCopy","createCustomPanelInstance","customPanelInstance","open","close","freeze","HistoryService","useHistory","publicConfig","resultData","customLoadHistory","historyNotes","allLocalMessagesByID","loadingState","allMessages","threadMessagesByThreadID","responsesByRequestID","relatedMessageByID","localMessagesByOriginalMessageID","lastThreadID","loadedHistory","latestTransferToAgentResponse","note","historyItem","isEventRequest","timestamp","Date","getTime","THREAD_ID_MAIN","file_upload_status","FileStatusValue","UPLOADING","COMPLETE","error_state","MessageErrorState","FAILED","related_message_id","beginEvent","HISTORY_BEGIN","eventBus","HISTORY_END","notesToMessages","getResponseItems","thread","addMessageToThread","createLocalMessages","localMessagesByFullMessageID","toChatMessageState","createChatStates","mainThreadMessages","welcomeRequest","is_welcome_request","welcomeResponse","markIsLatestWelcomeNode","isOptionItem","relatedRequest","optionSelected","isDateResponseType","markSelectedOptions","notesToLoadedHistory","SESSION_HISTORY","MessageLoadingManager","start","onExceededMaxSilentLoading","onEnd","onTimeout","msMaxSilentLoading","msMaxAttempt","hasExceededMaxSilentLoading","onSilentLoading","setTimeout","onMaxAttempt","end","clearTimeout","MS_BETWEEN_RETRIES","RetryType","MessageService","pendingLocale","localeIsExplicit","messageLoadingManager","queue","waiting","timeoutOverride","messageTimeoutSecs","timeoutMS","processSuccess","received","isProcessed","isWelcomeNode","NONE","message_type","MessageInputType","EVENT","now","trackData","lastRequestTime","timeLastRequest","totalRequestTime","timeFirstRequest","sendMessagePromise","moveToNextQueueItem","addErrorMessage","HYDRATE_RESEND","skipQueue","sendToAssistantAndUpdateErrorState","sendToAssistant","SILENT","VISIBLE","RETRYING","waitingMessage","WAITING","processError","pendingRequest","resultText","allowRetry","tryCount","isWelcome","msSinceStarted","isInAttemptWindow","numErrors","retryDelay","MESSAGE_COMMUNICATION","otherData","rejectFinalErrorOnMessage","doReject","customSendMessage","controller","AbortController","sendMessageController","signal","runQueueIfReady","clearCurrentQueueItem","getLastBotResponseWithContext","LOADING_INDICATOR_TIMER","messageLoadingIndicatorTimeoutSecs","didExceedMaxLoading","cancelMessageRequestByID","PRE_SEND","SEND","addToMessageQueue","newPendingMessage","messageToUpdate","announceMessageID","TEXT","logError","lastResponse","abort","safeFetchTextWithTimeout","NamespaceService","namespace","originalName","attributeSafe","suffix","computedName","computeNamespaceName","getSuffix","ServiceManager","innerStorage","storage","getItem","setItem","removeItem","IS_SESSION_STORAGE","window","sessionStorage","storage$1","UserSessionStorageService","prefix","loadChatSession","chatSessionString","getChatSessionKey","chatSession","parse","loadLauncherSession","launcherSessionString","getLauncherSessionKey","launcherSession","persistChatSession","session","persistLauncherSession","replaceCurrentArrayValue","currentValue","newValue","agentReducers","HA_SET_IS_CONNECTING","action","activeLocalMessageID","HA_SET_IS_RECONNECTING","HA_SET_AGENT_AVAILABILITY","availability","HA_SET_SHOW_SCREEN_SHARE_REQUEST","showRequest","HA_SET_AGENT_JOINED","agentProfile","HA_SET_PERSISTED_STATE","serviceDeskState","HA_UPDATE_IS_SUSPENDED","HA_UPDATE_IS_TYPING","HA_SET_AGENT_LEFT_CHAT","HA_UPDATE_CAPABILITIES","newInputState","capabilities","HA_SET_IS_SCREEN_SHARING","isSharing","HA_UPDATE_FILE_UPLOAD_IN_PROGRESS","HA_END_CHAT","populateTourStepItems","tourMessageItem","find","steps","clearTourState","EXCLUDE_AGENT_UNREAD","AgentMessageType","USER_ENDED_CHAT","CHAT_WAS_ENDED","RELOAD_WARNING","reducers","iFramePanelState","viewSourcePanelState","customPanelState","isSilent","currentIndex","existingID","newLocalMessageIDs","insertAtIndex","afterIDIndex","isBotMessage","agent_message_type","isMainWindowOpen","isBrowserPageVisible","idsSet","newAllMessages","newAllMessageItems","newMessageIDs","newMessageItemsIDs","itemIDsInNewMessage","newAllMessageItemsByID","existingItemIDs","firstFoundIndex","isItemInMessage","itemIDsToInsert","newMessagesByID","Math","max","previousState","handleViewStateChange","initialViewChangeComplete","botName","headerDisplayName","botAvatarURL","avatar_url_override","cssVariableOverrides","newHomeScreenConfig","mergeWith","location","hostname","LauncherType","DESKTOP","MOBILE","min","applyInputState","getInputState","currentInputState","newUploads","notifications","concat","currentInputSate","isError","status","existingMessage","newMessage","localItemID","existingLocalMessageItem","newItem","streamingState","chunks","isDone","isIntermediateStreaming","chatHeaderState","maxVisibleHeaderObjects","headerAvatarConfig","assign","getThemeCornersType","getLayoutState","IS_PHONE","themeConfig","SQUARE","layout","reducerFunction","DEFAULT_PUBLIC_CONFIG","openChatByDefault","showLauncher","shouldTakeFocusIfOpensAutomatically","dayjs","LocalizedFormat","Chat","publicConfigProvided","customHostElement","additionalChatParametersProvided","debug","consoleDebug","appConfig","startInternal","doesHaveServiceDesk","getBotName","initialState","chatWidthBreakpoint","chatWidth","chatHeight","enLanguagePack","originalConfig","suspendScrollDetection","isDestroyed","targetViewState","customMenuOptions","showNonHeaderBackgroundCover","sessionStorageLauncherState","enhancer","__REDUX_DEVTOOLS_EXTENSION__","instanceId","createStore","doCreateStore","subscribe","previousPersistedToBrowserStorage","copyToSessionStorage","disableWindowTitleChanges","originalTitle","changeTitleTimer","agent_newMessage","createHandleWindowTitle","customPanelManager","serviceManger","panels","getPanel","createCustomPanelManager","WriteableElementName","AI_TOOLTIP_AFTER_DESCRIPTION_ELEMENT","WELCOME_NODE_BEFORE_ELEMENT","HEADER_BOTTOM_ELEMENT","BEFORE_INPUT_ELEMENT","HOME_SCREEN_HEADER_BOTTOM_ELEMENT","HOME_SCREEN_AFTER_STARTERS_ELEMENT","HOME_SCREEN_BEFORE_INPUT_ELEMENT","CUSTOM_PANEL_ELEMENT","setEnableDebugLog","debugStackTraces","setEnableDebugStackTracesLog","createServiceManager","localePack","render","createHumanAgentService","all","loadLanguagePack","loadLocale","resolve","loadHAA","reallyRenderAndReturnInstance","OPEN_BY_DEFAULT","WEB_CHAT_LOADED","callRender","wasRendered","newPack","updateLocale","newLocale","localePromise","languagePackPromise","then","selectInputState","INSTANCE_SEND","destroy","container","remove","updateInputIsDisabled","updateBotUnreadIndicatorVisibility","issueWithNewView","viewTypeValues","CALLED_CHANGE_VIEW","homeScreenConfigClone","scrollToMessage","animate","doScrollToMessage","customPanels","updateCustomMenuOptions","updateIsTypingCounter","direction","updateIsLoadingCounter","updateIsChatLoadingCounter","updateHeaderConfig","configCopy","elements","getMainWindow","addClassName","removeClassName","getMessageInput","getHTMLElement","setValue","setEnableEnterKey","addChangeListener","removeChangeListener","getHomeScreenInput","tours","CALLED_END_TOUR","goToNextStep","goToStep","addMessageChunk","clearConversation","requestFocus","appWindow","endConversation","updateIsSuspended","createChatInstance","renderAndReturnInstance","promise","renderPromise","AriaAnnouncerProvider","props","useIntl","useServiceManager","announcerRef","announcerFunction","useCallback","announceValue","previousAnnounceMessageRef","useEffect","currentAnnounceMessage","Provider","AriaAnnouncerComponent","getLauncherButtonAriaLabel","isLauncherHidden","launcher_isTourOpen","launcher_isTourClosed","launcher_isOpen","launcher_isClosed","Launcher","onToggleOpen","unreadAgentCount","tabIndex","launcherHidden","launcherAvatarURL","buttonRef","doFocusRef","ariaLabel","formatMessage","count","launcherAvatar","AiLaunch","size","ChatLaunch","src","alt","cx","Button","WACLauncher__TourButton","PageObjectId","kind","ButtonKindEnum","PRIMARY","onClick","ArrowUpLeft","LauncherExport","forwardRef","LauncherComplex","launcherComplexRef","launcherRef","onOpen","onMinimize","launcher_desktopGreeting","launcher_closeButton","launcher_ariaIsExpanded","disabled","WACLauncherComplex__Text","Tag","Close","LauncherDesktopContainer","onDoToggle","useLanguagePack","browserLauncherState","isExpandedLauncherEnabled","smallLauncherClassName","setSmallLauncherClassName","useState","complexLauncherClassName","setComplexLauncherClassName","launcherHiddenRef","animateOnceVisible","bounceTurnRef","animationStartTimerRef","animationFinishedTimerRef","firstBounceAnimationStartTimerRef","firstBounceAnimationFinishedTimerRef","secondBounceAnimationStartTimerRef","secondBounceAnimationFinishedTimerRef","determineLauncherHeight","expandedLauncherHeight","offsetHeight","style","setProperty","startExpandLauncher","setExpandAnimationTimers","clearExpandAnimationTimers","startBounceAnimation","finishBounceAnimation","setBounceAnimationTimers","clearBounceAnimationTimers","setDefaultLauncherState","useOnMount","prevLauncherTitle","usePrevious","animateWithClass","endAnimationNameOrDelay","endAnimationCallback","classList","animationName","removeEventListener","addEventListener","LauncherExtended","isExtended","playExtendAnimation","onSwipeRight","onReduceEnd","ariaAnnouncer","useAriaAnnouncer","animateExtendedState","setAnimateExtendedState","showGreetingMessage","setShowGreetingMessage","prevIsExtended","extendedContainerRef","greetingMessageRef","textHolderRef","touchStartRef","touchStartX","touchStartY","shouldReduceExtendedLauncher","extendWithAnimation","extendWithoutAnimation","launcherGreetingMessage","launcher_mobileGreeting","launcherContainerElement","textHolderEl","greetingMessageEl","extendedContainerEl","maxTextHolderWidth","launcherPosition","width","height","screen","extendedWidth","getMaxLauncherExtendedWidth","clientWidth","querySelector","launcherExtendedWidth","removeAttribute","calculateAndSetMaxExtendedLauncherWidth","doFadeAnimationForElements","fadeInElement","fadeInTime","buttonEl","handleTouchMove","touchList","touchStartCoordinates","callback","clientX","touchEndX","clientY","touchEndY","differenceX","differenceY","abs","checkIfUserSwipedRight","touches","handleTouchStart","touchStart","reduceAnimationEndListener","fadeOutElement","GHOST","LauncherExtendedExport","LauncherMobileContainer","wasReduced","disableBounce","isStartingBounceAnimation","setIsStartingBounceAnimation","prevWasReduced","initialBounceTurn","previouslyPlayedExtendAnimation","extendLauncherTimeoutIDRef","reduceLauncherTimeoutIDRef","endBounceAnimationRef","shouldBounceRef","isExtending","disableIntroAnimation","setLauncherStateAsReduced","reduceLauncher","extendLauncherTimeoutID","reduceLauncherTimeoutID","clearTimeouts","setExpandAnimationTimeout","endBounceAnimation","startRecurringBounceAnimation","turnCounter","animation","timeouts","startingIndex","beforeAll","afterAll","beforeEach","afterEach","terminate","timeoutID","playAnimation","isComplete","setAnimationListener","replayAnimation","setAnimationTimeouts","handleToggleOpen","handleSwipeRight","LauncherContainer","LAUNCHER_CLICKED","launcherContainer","effect","deps","hasRunRef","useEffectDidUpdate","HydrationPanel","onClose","useHomeScreenVersion","isHidden","useContext","HideComponentContext","header","HomeScreenHeaderExport","BotHeaderExport","onToggleHomeScreen","includeWriteableElement","OverlayPanelName","HYDRATING","MountChildrenOnDelay","delay","AnnounceOnMountComponentExport","announceOnce","window_ariaWindowLoading","Loading","withOverlay","CustomPanel","onPanelOpenEnd","onPanelCloseEnd","onPanelOpenStart","onPanelCloseStart","disableDefaultCloseAction","onClickBack","onClickClose","prevIsOpen","openAnimation","AnimationInType","SLIDE_IN_FROM_BOTTOM","closeAnimation","AnimationOutType","SLIDE_OUT_TO_BOTTOM","onClickBackLocal","onClickCloseLocal","checkAllowClose","onCloseAndRestartLocal","OverlayPanel","onOpenStart","CUSTOM_PANEL_PRE_OPEN","onOpenEnd","CUSTOM_PANEL_OPEN","onCloseStart","CUSTOM_PANEL_PRE_CLOSE","onCloseEnd","CUSTOM_PANEL_CLOSE","animationOnOpen","animationOnClose","shouldOpen","overlayPanelName","CUSTOM","eventName","eventDescription","general_returnToAssistant","hideCloseButton","hideCloseAndRestartButton","WriteableElement","CustomPanelExport","lazyChat","CatastrophicError","lazyCatastrophicError","Disclaimer","lazyDisclaimer","HomeScreenContainer","lazyHomeScreenContainer","IFramePanel","lazyIFramePanel","ViewSourcePanel","lazyViewSourcePanel","BodyAndFooterPanelComponent","lazyBodyAndFooterPanelComponent","WIDTH_BREAKPOINT_STANDARD","WIDTH_BREAKPOINT_NARROW","WIDTH_BREAKPOINT_WIDE","MainWindow","Component","super","arguments","closing","modalPortalHostElement","numPanelsOpen","numPanelsAnimating","numPanelsCovering","isHydrationAnimationComplete","shouldAutoFocus","extraClassNames","areModulesLoaded","mainWindowRef","containerRef","botChatRef","homeScreenInputRef","disclaimerRef","brandingRef","animationContainerRef","iframePanelRef","viewSourcePanelRef","previousBodyVisibility","previousBodyPosition","onResize","appChatWidthBreakpoint","offsetWidth","ChatWidthBreakpoint","WIDE","STANDARD","NARROW","onVisualViewportResize","updateFromVisualViewport","visualViewport","offsetTop","offsetLeft","setModalPortalHostElement","setState","onSendInput","selectIsInputToAgent","sendMessageToAgent","onSendHomeButtonInput","createMessageRequestForChoice","HOME_SCREEN_STARTER","removeChatFromDom","onRestart","doClose","getShowDisclaimer","getShowHomeScreen","takeFocus","requestInputFocus","onUserTyping","userTyping","onAcceptDisclaimer","coverBackground","prevState","onHydrationPanelClose","componentDidMount","mainWindowObserver","ResizeObserver","observe","disableCustomElementMobileEnhancements","updateBody","SCROLLBAR_WIDTH","loadPanels","componentWillUnmount","unobserve","componentDidUpdate","oldProps","oldState","newProps","useCustomHostElement","prevViewState","requestAnimationFrame","newLastItemID","lastMessageItem","componentDidCatch","errorInfo","createDidCatchErrorData","preload","unmounting","IS_IOS","getPropertyValue","fromCloseAndRestart","MAIN_WINDOW_CLOSED_AND_RESTARTED","DEFAULT_MINIMIZE","disclaimer","addClassNameToState","removeClassNameFromState","renderChat","showCovering","renderCustomPanel","renderHydrationPanel","renderDisclaimerPanel","renderResponsePanel","renderHomeScreenPanel","renderIFramePanel","renderViewSourcePanel","renderBotChat","headerAvatar","agentDisplayState","selectAgentDisplayState","showDisclaimer","hideBotContainer","HideComponent","hidden","Suspense","fallback","messageState","MESSAGE_INPUT","renderInnerHydrationPanel","shouldHide","renderCatastrophicPanel","CATASTROPHIC","showHeader","FADE_IN","FADE_OUT","DISCLAIMER","disclaimerHTML","disclaimerAcceptButtonRef","showHomeScreen","onSendBotInput","HOME_SCREEN_INPUT","onSendButtonInput","IFRAME","CONVERSATIONAL_SEARCH_CITATION","panelOptions","PANEL_RESPONSE","showAnimations","show_animations","renderWidget","localeClassName","showGlass","enableFocusTrap","hideMinimizeButton","trapActive","isWideWidth","VisuallyHidden","window_title","onScroll","scrollTop","ModalPortalRootContext","MainWindow$1","connect","TourContainerLazy","lazyTourComponent","App","hostElement","applicationStyles","fontStyles","combinedStyles","AppContainer","useDispatch","windowSize","setWindowSize","innerWidth","innerHeight","cssVariableOverrideString","useMemo","cssVariables","cssVariablesString","allValues","replace","convertCSSVariablesToString","dir","windowListener","visibilityListener","visibilityState","node","nonce","cspNonce","IS_PHONE_IN_PORTRAIT_MODE","WindowSizeContext","ServiceManagerContext","RawIntlProvider","LanguagePackContext","MainContainer","tourContainerRef","showTour","showedTourOnce","languageKey","regionLabel","role","UserDefinedResponsePortalsContainer","chatInstance","renderUserDefinedResponse","userDefinedResponseEventsBySlot","slotState","UserDefinedResponseComponentPortal","ReactDOM","UserDefinedResponsePortalsContainerExport","WriteableElementsPortalsContainer","renderResponseMap","responseItem","WriteableElementsComponentPortal","WriteableElementsPortalsContainerExport","onBeforeRender","onAfterRender","renderWriteableElements","setParentInstance","setInstance","renderProps","setRenderProps","setApplicationStyles","setInstances","setUserDefinedResponseEventsBySlot","managedWebChatRef","previousConfigRef","previousConfig","managedWebChat","shouldDestroy","destroyWebChat","widget","pagePublicConfig","chatConstructorPromise","protocol","compatMode","instantiateWidget","webChatInstance","userDefinedEventsBySlot","itemChunk","partialItems","addUserDefinedResponseHandler","loadChat","carbonStyles","loadBaseStyles","loadCarbon","loadStyles","AppContainerExport","default","carbon","withAriaAnnouncer","Wrapped","makeTestId","PureComponent","isClosing","isOpening","openPanelTimeout","closePanelTimeout","openPanel","animationDurationOpen","durationInMS","conditionalSetTimeout","closePanel","animationDurationClose","prevProps","ai_slug_title","ai_slug_description","components_overflow_ariaLabel","components_swiper_currentLabel","errors_communicating","errors_imageSource","errors_videoSource","errors_audioSource","errors_iframeSource","errors_ariaMessageRetrying","errors_ariaMessageFailed","errors_noAgentsAvailable","errors_noAgentsJoined","errors_connectingToAgent","errors_busy","errors_agentAppSessionExpired","errors_generalContent","errors_somethingWrong","input_ariaLabel","input_placeholder","input_buttonLabel","input_uploadButtonLabel","window_ariaTourRegion","window_ariaTourRegionNamespace","window_ariaChatRegion","window_ariaChatRegionNamespace","window_ariaWindowOpened","window_ariaWindowClosed","messages_youSaid","messages_botSaid","messages_agentSaid","messages_searchResults","messages_searchResultsLink","messages_searchResultsOpenDocument","messages_searchResultsOpenDocumentWithLabel","messages_searchResultsExpand","messages_searchResultsCollapse","messages_botIsLoading","messages_botIsTyping","messages_agentIsTyping","messages_scrollHandle","messages_scrollHandleDetailed","messages_scrollHandleEnd","messages_scrollHandleEndDetailed","message_labelBot","message_labelYou","notifications_toastClose","buttons_restart","buttons_cancel","buttons_retry","options_select","options_ariaOptionsDisabled","header_previewLinkTitle","header_ariaCloseRestart","header_ariaBotAvatar","header_overflowMenu_options","homeScreen_returnToAssistant","homeScreen_returnToHome","homeScreen_overflowMenuHomeScreen","homeScreen_ariaQuickStartListButton","homeScreen_ariaQuickStartListOpened","homeScreen_ariaQuickStartListClosed","default_agent_availableMessage","default_agent_unavailableMessage","agent_reason_error","agent_sdMissingWarning","agent_noName","agent_chatTitle","agent_startChat","agent_connecting","agent_agentNoNameTitle","agent_agentJoinedName","agent_agentJoinedNoName","agent_youConnectedWarning","agent_connectingMinutes","agent_connectingQueue","agent_ariaAgentAvatar","agent_ariaGenericAvatar","agent_ariaGenericBotAvatar","agent_youEndedChat","agent_conversationWasEnded","agent_disconnected","agent_reconnected","agent_agentLeftChat","agent_agentLeftChatNoName","agent_agentEndedChat","agent_agentEndedChatNoName","agent_transferring","agent_transferringNoName","agent_endChat","agent_confirmSuspendedEndChatTitle","agent_confirmSuspendedEndChatMessage","agent_confirmCancelRequestTitle","agent_confirmCancelRequestMessage","agent_confirmCancelRequestNo","agent_confirmCancelRequestYes","agent_confirmEndChat","agent_confirmEndChatNo","agent_confirmEndChatYes","agent_confirmEndSuspendedYes","agent_botReturned","agent_cardButtonChatRequested","agent_cardButtonConnected","agent_cardButtonChatEnded","agent_cardMessageChatEnded","agent_cardMessageConnected","agent_connectButtonCancel","agent_connectedButtonEndChat","agent_connectWaiting","agent_defaultMessageToAgent","agent_inputPlaceholderConnecting","agent_inputPlaceholderReconnecting","agent_sharingStopSharingButton","agent_sharingRequestTitle","agent_sharingRequestMessage","agent_sharingAcceptButton","agent_sharingDeclineButton","agent_sharingRequested","agent_sharingAccepted","agent_sharingDeclined","agent_sharingCancelled","agent_sharingEnded","agent_suspendedWarning","icon_ariaUnreadMessages","showMore","showMoreResults","disclaimer_title","disclaimer_accept","general_ariaCloseInformationOverlay","general_ariaAnnounceOpenedInformationOverlay","general_ariaAnnounceClosedInformationOverlay","general_ariaAnnounceEscapeOverlay","conversationalSearch_streamingIncomplete","conversationalSearch_viewSourceDocument","conversationalSearch_citationsLabel","conversationalSearch_toggleCitations","conversationalSearch_responseStopped","launcher_chatNow","iframe_ariaSourceLoaded","iframe_ariaImageAltText","iframe_ariaClosePanel","iframe_ariaOpenedPanel","iframe_ariaClosedPanel","iframe_ariaClickPreviewCard","closeAndRestartModal_title","closeAndRestartModal_message","closeAndRestartModal_confirm","closeAndRestartModal_cancel","datePicker_chooseDate","datePicker_confirmDate","tour_resumeButton","tour_restartButton","tour_startButton","tour_doneButton","tour_ariaMinimizeButton","tour_ariaCloseButton","tour_ariaChatButton","tour_ariaPreviousButton","tour_ariaNextButton","tour_instructions","tour_errorFetchingStep","tour_errorTitle","tour_errorBody","fileSharing_fileTooLarge","fileSharing_ariaAnnounceSuccess","fileSharing_fileIcon","fileSharing_removeButtonTitle","fileSharing_statusUploading","fileSharing_uploadFailed","fileSharing_agentMessageText","fileSharing_request","carousel_prevNavButton","carousel_nextNavButton","input_completionsTagApp","input_completionsTagAssistant","table_filterPlaceholder","table_previousPage","table_nextPage","table_itemsPerPage","table_paginationSupplementalText","table_paginationStatus","feedback_positiveLabel","feedback_negativeLabel","feedback_defaultTitle","feedback_defaultPrompt","feedback_defaultPlaceholder","feedback_submitLabel","feedback_cancelLabel","input_stopResponse","messages_responseStopped","chainOfThought_stepTitle","chainOfThought_inputLabel","chainOfThought_outputLabel","chainOfThought_toolLabel","chainOfThought_statusSucceededLabel","chainOfThought_statusFailedLabel","chainOfThought_statusProcessingLabel","chainOfThought_explainabilityLabel","showChildren","onComponentDidMount","defaultProps","resolveFunction","rejectFunction","reject","resolveValue","isResolved","rejectValue","isRejected","createService","lazyWithPreload","factory","mod","lazyMediaPlayer","exported","lazyCarousel","isClient","navigator","browser","detect","screenWidth","screenHeight","os","memoizeOne","getURLHostName","URL","operation","timeout","ChatHeaderObjectType","ChatHeaderAvatarElement","LitElement","isLoaded","_handleOnError","css","unsafeCSS","__decorate","property","String","prototype","bind","CHAT_HEADER_AVATAR_TAG_NAME","CDSChatHeaderAvatarElement","classElement","html","chatHeaderAvatarTemplate","carbonElement","ChatHeaderAvatar","createComponent","tagName","elementClass","react","ChatHeaderLinkElement","isNewTab","customElementClass","chatHeaderLinkTemplate","ChatHeaderLink","ChatHeaderMenu","menuAlignment","Menu","mode","legacyAutoalign","ChatHeaderMenuButton","setIsOpen","refs","menuRefs","context","menuContext","useFloating","onOpenChange","getReferenceProps","getMenuReferenceProps","getFloatingProps","getMenuFloatingProps","useInteractions","useClick","useDismiss","setReference","ButtonSizeEnum","MEDIUM","renderIcon","ChevronUp","ChevronDown","onMouseDown","preventDefault","floating","setFloating","ChatHeaderMenuItem","MenuItem","ChatHeaderMenuItemRadioGroup","defaultSelectedItem","selectedItem","onChange","MenuItemRadioGroup","itemToString","menuItem","ChatHeaderOverflowMenu","tooltipPosition","iconDescription","hasIconOnly","ChatHeaderTitleElement","chatHeaderTitleTemplate","ChatHeaderTitle","AISlug","CDSAILabel","Header","backContent","overflowItems","overflowClicked","backButtonType","brandColor","enableChatHeaderConfig","backButtonRef","restartButtonRef","closeAndRestartButtonRef","closeButtonRef","centerObjectsRef","centerGapRef","overflowRef","overflowIsOpen","setOverflowIsOpen","confirmModelOpen","setConfirmModelOpen","selectedGroupMenuitems","setSelectedGroupMenuItems","isImageError","setIsImageError","hasHeaderAvatar","prevChatHeaderAvatarURL","chatHeaderTitle","headerTitle","chatHeaderDisplayName","closeConfirmModel","showCloseAndRestartButton","useHideCloseButton","closeIcon","closeReverseIcon","closeIsReversible","minimizeButtonIconType","MinimizeButtonIconType","CLOSE","CloseLarge","MINIMIZE","SubtractLarge","SIDE_PANEL_LEFT","SidePanelClose","SIDE_PANEL_RIGHT","onConfirm","getComponentInMenu","list","LINK","RADIO_GROUP","nextObject","Fragment","MenuItemDivider","MENU","getComponentInChatHeader","headerObject","leftObjectsLength","rightObjectsLength","left","right","isLeftObjectsInOverflow","isRightObjectsInOverflow","renderChatHeaderObjectsInOverflow","hasOverflow","isRTL","leftContent","leftChatHeaderComponents","rightChatHeaderComponents","leftChatHeaderMenuComponents","rightChatHeaderMenuComponents","HeaderButton","buttonKind","DownToBottom","centerResizeObserver","centerGapElement","newTotal","floor","disconnect","AI_LABEL_SIZE","EXTRA_SMALL","alignment","POPOVER_ALIGNMENT","BOTTOM_LEFT","BOTTOM_RIGHT","Restart","WACReverseIcon","isReversible","testId","CLOSE_CHAT","ConfirmModal","onCancel","cancelButtonLabel","confirmButtonLabel","modalAnnounceMessage","WACDirectionHasReversibleSVG","ANNOUNCE_INPUT_TYPES","ANNOUNCE_NODE_EXCLUDE_ATTRIBUTE","ref1","ref2","useRef1","doAnnouncements","strings","pendingValues","elementToAnnounce","nodeToText","useElement","innerText","innerHTML","nodeType","hasNodeType","formattedMessage","messageValues","messageText","isElement","getComputedStyle","display","getAttribute","hasAttribute","trimAndPush","isInputNode","placeholder","isTextAreaNode","isImageNode","shadowRoot","childNodes","childNode","isTextNode","replaceAll","HomeScreenHeader","option","HOME_SCREEN","locales","ar","ar-dz","ar-kw","ar-ly","ar-ma","ar-sa","ar-tn","cs","de","de-at","de-ch","en","en-au","en-ca","en-gb","en-ie","en-il","en-nz","es","es-do","es-us","nl","fr","fr-ca","fr-ch","it","it-ch","ja","ko","pt","pt-br","zh","zh-cn","zh-tw","zh-mo","zh-hk","requestedLocale","localeKey","requestedSupported","language","isSupportedLocale","keyList","findSupportedKey","localeModule","enLocaleData","providedLanguagePack","handleBTag","handleBRTag","addHTMLSupport","b","br","loadDayjsLocale","previousLocale","createEnglishFormat","IntlMessageFormat","htmlAttributes","WAC__hidden","_type","v4","AriaLiveMessage","AriaLiveMessageExport","outer","visibility","overflow","appendChild","inner","scrollbarWidth","parentNode","removeChild","doScrollElementIntoView","boundary","compute","scrollMode","block","inline","el","top","doScrollElement","scrollLeft","scroll","behavior","doFocus","activeElement","tabbable","getShadowRoot","focus","defer","focusOnFirstFocusableItemInArrayOfElements","focusOnFirstFocusableElement","parentElement","focusableElements","isEnterKey","shiftKey","altKey","metaKey","ctrlKey","hasModifiers","isComposing","keyCode","getScrollBottom","scrollHeight","DATE","isTextItem","PAUSE","typing","OPTION","choice","relatedResponseID","createMessageRequestForButtonItemOption","buttonItem","createMessageRequestForFileUpload","upload","InternalMessageRequestType","FILE","FROM_USER","createMessageRequestForDate","inputString","userString","threadID","responseType","textItem","response","CONNECT_TO_AGENT","hasBodyOrFooter","IMAGE","VIDEO","AUDIO","CONVERSATIONAL_SEARCH","TABLE","renderAsTour","user_defined_type","serviceDeskFactory","USER_DEFINED","isSingleItemCarousel","isFullWidthUserDefined","full_width","getOptionType","preference","totalOptions","getMediaDimensions","dimensions","hasLiveAgentMessage","AnnounceOnMountComponent","isMounted","onceAnnounced","WriteableElement$1","ModalPortal","attachedToHost","modalElement","attachIfNeeded","contextType","onYesClick","onNoClick","onKeyDown","getBotInputState","getAgentInputState","getAgentState","getPersistedAgent","persisted","isConnectingOrConnected","disableInput","inputPlaceholderKey","BotHeader","homeScreenIsOn","shallowEqual","hasChatHeaderObjects","allowHomeScreen","Home","getOwnPropertyNames","prop","hasOwnProperty","call","isFrozen","setIsConnecting","setIsReconnecting","setAgentLeftChat","setAgentAvailability","setAgentJoined","updateCapabilities","updateFilesUploadInProgress","setShowScreenShareRequest","setIsScreenSharing","setPersistedServiceDeskState","agentUpdateIsTyping"],"sourceRoot":""}